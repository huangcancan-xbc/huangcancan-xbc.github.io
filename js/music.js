document.addEventListener("DOMContentLoaded",function(){if(document.getElementById("anMusic-page")){const n=()=>{fetch("/josn/music.json").then(n=>n.json()).then(n=>{window.ap&&window.ap.destroy(),window.ap=new APlayer({container:document.getElementById("anMusic-page-meting"),listFolded:!1,listMaxHeight:"800px",lrcType:3,audio:n}),console.log("音乐播放器初始化成功")}).catch(n=>{console.error("加载音乐数据失败:",n)})};n(),document.getElementById("anMusicBtnGetSong").addEventListener("click",function(){if(window.ap){const n=Math.floor(Math.random()*window.ap.list.audios.length);window.ap.list.switch(n),window.ap.play()}}),document.getElementById("anMusicRefreshBtn").addEventListener("click",function(){n()})}});