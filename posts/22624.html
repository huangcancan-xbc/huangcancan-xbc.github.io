<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>012 进程状态和优先级 | 小米里的大麦</title><meta name="keywords" content="Linux,进程"><meta name="author" content="小米里的大麦"><meta name="copyright" content="小米里的大麦"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="012 进程状态和优先级"><meta name="application-name" content="012 进程状态和优先级"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="012 进程状态和优先级"><meta property="og:url" content="https://www.minbit.top/posts/22624.html"><meta property="og:site_name" content="小米里的大麦"><meta property="og:description" content="进程状态和优先级   [!TIP]   相关推荐视频 | B站  一、进程状态分类Linux 中的进程状态可以通过 ps 命令或者 top 命令来查看，常见的状态码有以下几种：    状态码 名称 含义说明    R 运行（Running） 进程正在运行或处于可运行状态（等待 CPU 调度）   S"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://zycs-img-8kd.pages.dev/v2/fETMVUS.jpeg?_r_=8e155880-809b-e75c-f6b5-d0e4dc7c05aa"><meta property="article:author" content="小米里的大麦"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://zycs-img-8kd.pages.dev/v2/fETMVUS.jpeg?_r_=8e155880-809b-e75c-f6b5-d0e4dc7c05aa"><meta name="description" content="进程状态和优先级   [!TIP]   相关推荐视频 | B站  一、进程状态分类Linux 中的进程状态可以通过 ps 命令或者 top 命令来查看，常见的状态码有以下几种：    状态码 名称 含义说明    R 运行（Running） 进程正在运行或处于可运行状态（等待 CPU 调度）   S"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://www.minbit.top/posts/22624.html"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="Cd-RTVhRO2mndEhicN2cvLXbsNxPqFC6fSn6ql80eVg"/><meta name="baidu-site-verification" content="codeva-ZG3S9QTvGO"/><meta name="msvalidate.01" content="6DF744D82FE6D1FD11CE18658760B59D"/><meta name="baidu-site-verification" content="codeva-gIjOMzUuhV"/><link rel="manifest" href="/manifest.json"/><meta name="msapplication-TileColor" content="var(--anzhiyu-main)"/><link rel="mask-icon" href="/img/siteicon/apple-icon-180.png" color="#5bbad5"/><link rel="apple-touch-icon" sizes="180x180" href="/img/siteicon/apple-icon-180.png"/><link rel="apple-touch-icon-precomposed" sizes="180x180" href="/img/siteicon/apple-icon-180.png"/><link rel="icon" type="image/png" sizes="32x32" href="/img/siteicon/32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/img/siteicon/16.png"/><link rel="bookmark" href="/img/siteicon/apple-icon-180.png"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-2732.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2732-2048.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2388.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2388-1668.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1536-2048.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-1536.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2224.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2224-1668.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1620-2160.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2160-1620.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1290-2796.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2796-1290.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1179-2556.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2556-1179.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1284-2778.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2778-1284.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1170-2532.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2532-1170.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1125-2436.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2436-1125.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2688.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2688-1242.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-828-1792.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1792-828.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2208.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2208-1242.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-750-1334.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1334-750.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-640-1136.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1136-640.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: {"enable":true,"title":"友链 + 外链 + 无限进步！欢迎欣赏和贡献！","addFriendPlaceholder":"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"小米里的大麦","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":4,"basicWordCount":1999,"key":"93d1622eadde491eb0594b68ade51723.kaEiDD6A3KPzb7xv","Referer":"https://www.minbit.top/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: {"enable":true,"ck":"Jp8wwGQpp21utaFQ","LingQueMonitorID":"Jp8ztDRrxmTf7LDj"},
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: 'https://twikoo-olive-one.vercel.app/',
  commentBarrageConfig:{"enable":true,"maxBarrage":10,"barrageTime":5000,"accessToken":"25c96851dd8a790c4819ad4bfbaf153c","mailMd5":"7b12ebc2be80f9159099f6ab0e16573c"},
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: {"mode":"both","api":"https://img2color-go.vercel.app/api?img=","cover_change":true},
  authorStatus: {"skills":["🧐 准备中，就快好了，真的！😭","📚 正在学习中，加油！","🎵 喜欢听音乐，喜欢看动漫"]},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 小米里的大麦","link":"链接: ","source":"来源: 小米里的大麦","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-right"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '小米里的大麦',
  title: '012 进程状态和优先级',
  postAI: '这篇文章讲述了Linux中的进程状态和优先级，通过`ps`和`top`命令查看进程状态，介绍了僵尸进程（Z）和不可中断睡眠（D）等特殊状态，以及进程的状态生命周期。文章还通过实验演示了僵尸进程和孤儿进程的创建与监控，并分析了它们可能带来的危害及解决办法。此外，文章详细解释了进程的优先级概念，包括PRI和NI的区别与作用，以及如何调整进程优先级。最后，文章补充了竞争性、独立性、并行和并发等概念，以及进程切换和上下文保存的原理，帮助读者全面理解进程状态和优先级的相关知识。',
  pageFillDescription: '进程状态和优先级, 一、进程状态分类, 特殊状态说明, 二、如何查看进程状态（进程的状态显示在 STAT 字段下）, 1. 使用 ps 命令, 2. 使用 top 命令, 3. 使用 proc 文件系统, 三、进程状态的生命周期, 四、进程状态转换示意图, 实验 1：僵尸进程的创建与监控, 1. 实验步骤, 2. 僵尸进程代码：, 3. 运行步骤：, 实验 2：孤儿进程的创建与监控, 1. 实验步骤：, 2. 孤儿进程代码：, 3. 运行步骤：, 4. 对比总结, 五、进程的优先级, 1. PRI（Priority优先级）：, 2. NI（Nice 值）：, 3. 注意事项, 六、其他概念补充, 1. 竞争性（Competitiveness）：, 2. 独立性（Independence）：, 3. 并行（Parallelism）：, 4. 并发（Concurrency）：, 进程切换, 上下文保存, 寄存器的作用, 进程切换的具体步骤进程状态和优先级相关推荐视频站一进程状态分类中的进程状态可以通过命令或者命令来查看常见的状态码有以下几种状态码名称含义说明运行进程正在运行或处于可运行状态等待调度可中断睡眠进程正在等待某个事件如信号等可以被信号或外部事件唤醒不可中断睡眠进程正等待无法被信号唤醒的事件如磁盘一般出现在设备驱动程序中例如正在等待硬件操作停止进程已被暂停执行例如收到了信号或者在被调试时被暂停僵尸子进程已结束终止但父进程未回收它的资源和退出状态仍占用系统资源导致进程表里留有尸体死亡进程已彻底终止且不会再存在于进程表中非常短暂极少见用户通常看不到特殊状态说明僵尸进程一种比较特殊的状态产生原因当进程退出并且父进程使用系统调用后面讲没有读取到子进程退出的返回代码时就会产生僵死尸进程僵死进程会以终止状态保持在进程表中并且会一直在等待父进程读取退出状态代码所以只要子进程退出父进程还在运行但父进程没有读取子进程状态子进程进入状态危害占用可能导致系统耗尽解决杀死父进程僵尸进程会由进程接管并回收不可中断睡眠常见场景进程在执行关键系统调用如写入磁盘处理通常需等待操作完成强制终止可能导致数据损坏二如何查看进程状态进程的状态显示在字段下使用命令可以显示一次性快照信息查看部分关键字段进程父进程进程状态如等执行该进程的命令输出示例解释是会话首领当前处于可中断睡眠状态是会话首领处于可中断睡眠状态且是多线程进程是会话首领处于可中断睡眠状态且是前台进程进程已变成僵尸进程等待父进程回收字段可能含有多个字符组合如额外属性从第二列字符开始字符属性名称含义说明会话首领该进程是会话的领导者通常是终端启动的第一个进程前台进程组进程属于前台进程组能接受来自终端的输入信号多线程进程是多线程的用的线程实现内存锁定进程有部分内存被锁定无法被换出低优先级进程运行在低优先级值大于高优先级进程运行在实时优先级值小于会话首领该进程是会话的领导者通常是终端启动的第一个进程优先级降低进程的优先级被降低通过命令调整进程被克隆进程是通过系统调用创建的通常用于线程实现使用命令命令动态刷新进程状态列表示进程状态通常会看到等状态按键退出使用文件系统每个进程在下有一个专属目录以命名可以直接查看其状态示例三进程状态的生命周期一个典型的进程生命周期大致如下创建用创建进程父进程复制自身的内存空间就绪进程已准备好运行等待调度运行进程正在被执行阻塞睡眠进程等待外部事件如完成可中断睡眠和不可中断睡眠挂起通常由用户或调试器主动暂停进程如终止进程执行完成或被强制终止僵尸子进程结束后父进程未回收其退出信息导致子进程残留在进程表销毁僵尸进程被父进程回收后彻底消失四进程状态转换示意图这部分比较抽象了解部分即可典型的转换流程新建就绪运行阻塞终止还有创建不可中断睡眠等待事件完成可运行运行中可中断睡眠调度器分配等待硬件操作挂起信号停止终止僵尸回收可运行运行中父进程回收进程的状态模型并没有一个单一的官方标准定义而是根据不同的操作系统和理论模型有不同的实现不过通常讨论的三态五态和七态模型是基于操作系统的进程管理理论中的常见模型下面是从网络上找的相关图片只是偏向正确因为没有具体标准定义实验僵尸进程的创建与监控实验步骤编写僵尸进程代码父进程创建子进程后子进程立即退出但父进程不调用去回收子进程的资源从而让子进程变成僵尸进程编译与运行运行代码后使用命令在另一个终端监控进程状态观察现象子进程退出后父进程没有回收它它的状态会变成僵尸进程代码创建子进程失败子进程子进程正在运行子进程运行秒后退出子进程即将退出父进程父进程正在运行父进程等待秒不调用导致子进程成为僵尸进程父进程结束运行步骤编译代码运行程序在另一个终端用命令观察现象你会发现子进程的显示为说明它已变成僵尸进程危害资源耗尽僵尸进程本身不消耗资源但它的进程标识符不会被释放如果系统产生大量僵尸进程会被耗尽导致新进程无法创建内存泄漏内核保留僵尸进程的退出状态和资源描述符直到父进程回收解决办法通过杀掉父进程僵尸进程会被进程回收父进程终止父进程子进程由进程回收实验孤儿进程的创建与监控实验步骤编写孤儿进程代码父进程创建子进程后父进程主动退出子进程被进程接管编译与运行运行代码后用命令监控子进程的父进程观察现象父进程退出后子进程的变成即进程孤儿进程代码创建子进程失败子进程逻辑确保父进程先退出子进程保持子进程存活方便观察父进程逻辑父进程创建了子进程然后退出父进程主动退出产生孤儿进程运行步骤编译代码运行程序在另一个终端用命令观察子进程现象你会发现子进程的变成说明它被进程接管变成了孤儿进程危害孤儿进程一般不会直接危害系统主要分下面几种情况这就像一个扫地机器人只有当进程倒下退出时才来打扫如果进程一直乱跑或者不断生孩子也束手无策自动回收机制当父进程退出后孤儿进程会被进程收养进程会定期调用来回收那些已经结束的子进程避免出现僵尸进程陷入死循环的情况如果孤儿进程本身陷入死循环比如它不会退出自然也不会被回收只能回收已经退出的子进程如果孤儿进程一直在运行什么也做不了大量创建子进程的情况孤儿进程本身如果大量创建新子进程这些子进程同样会被它的父进程即原孤儿进程管理如果原孤儿进程随后退出那么它创建的子进程就会变成新的孤儿进程会接管它们如果这种行为持续发生系统的进程表资源可能会被快速耗尽导致系统无法创建新进程从而影响稳定性解决办法手动杀掉孤儿进程子进程对比总结孤儿进程的资源会被回收吗是的进程会主动回收孤儿进程僵尸进程和孤儿进程哪个更危险僵尸进程因为长期占用系统资源特性僵尸进程孤儿进程产生条件子进程终止父进程未调用父进程终止子进程仍在运行危害占用和内核资源一般无危害主要由进程自动回收状态符号无特殊状态变为处理方式终止父进程或修复父进程代码调用通常无需处理系统影响可能导致耗尽无负面影响五进程的优先级在系统中进程的优先级决定了调度器选择哪个进程优先运行这里有两个关键概念优先级和静态优先级值名称全称范围作用进程的实际优先级值越小优先级越高用户可调整的优先级修正值影响是用户可调节的值用来建议系统优先级但最终还是由内核决定优先级定义表示内核调度时分配给进程的优先级数值越小优先级越高范围内核视角范围是进程的真实优先级值越小优先级越高用户视角实时进程的优先级是适合对实时性要求高的任务如工业控制音视频处理等普通进程的优先级是普通用户任务如文本编辑器浏览器等决定因素普通进程值影响普通进程的优先级但不会直接影响实时进程的优先级查看命令输出示例或者命令在界面里按键进入字段选择界面找到和按空格键选中后回车返回主界面即可看到优先级信息和默认就会显示在列表中值公式新默认默认通常为不同系统可能不同因此实际范围是最高优先级到最低优先级定义影响普通进程的优先级表示进程对资源的友好程度数值越高优先级越低越谦让当值为负值的时候那么该程序将会优先级值将变小即其优先级会变高则其越快被执行所以调整进程优先级在下就是调整进程值范围最重要到最不重要一共个级别默认值为调整规则值越低越小进程优先级越高普通用户只能降低优先级值用户可提升优先级值关系最高优先级默认值最低优先级调整值启动时设置值可执行程序运行中调整值把为的进程调整到注意事项避免滥用高优先级过多高优先级进程可能导致系统不稳定如无响应值继承子进程会继承父进程的值六其他概念补充竞争性进程争抢内存等资源独立性每个进程互不干扰资源独立并行多核下的真正同时运行并发单核下的快速切换让多个进程看似同时进行竞争性定义由于系统中的进程数量众多而资源有限甚至可能只有个所以各个进程需要竞争使用权为了高效完成任务更合理竞争相关资源便有了优先级引申含义系统通过调度算法来决定哪个进程先使用为了更合理地分配资源引入了优先级概念优先级高的进程更有可能被调度运行竞争不局限于进程还可能竞争内存设备等资源独立性定义多进程运行时每个进程都有自己独立的内存空间和资源彼此不会直接影响特点每个进程的执行逻辑变量文件描述符等都是独立的若需要通信通常使用进程间通信机制例如管道共享内存消息队列等意义独立性保证了系统稳定性即使某个进程崩溃其他进程也能正常运行并行定义多个进程在多个核心上同时运行互不干扰真正实现同时进行条件需要多核或多台机器分布式系统支持举例在核上个进程可以在每个核心上独立运行互不干扰实现真正的并行并发定义多个进程在一个下采用进程切换的方式在一段时间之内让多个进程都得以推进称之为并发在单核上多个进程通过频繁的时间片切换让每个进程在宏观上看起来同时执行原理每隔一段时间时间片切换到下一个进程执行切换速度极快人眼无法分辨以为多个进程同时运行举例在单核上运行多个下载任务不断在不同任务之间切换让所有任务都能逐步完成进程切换概念在单系统中多个进程通过轮流使用资源实现并发这依赖于操作系统的进程切换实现方式采用调度算法如时间片轮转的调度算法每个进程被分配固定的时间片时间片用完后系统暂停该进程保存状态并切换到下一个进程执行上下文保存意义确保进程被切换时其运行状态即上下文被妥善保存待下次恢复执行上下文是指进程执行时的环境状态包括寄存器的值程序计数器的值等保存内容通用寄存器如等用于存储操作数和计算结果栈指针和基指针如用于管理函数调用和局部变量的存储程序计数器记录当前进程正在执行指令的下一条指令的地址决定了进程执行的流程状态寄存器包含条件码等信息用于判断指令执行后的状态保存时机在进程被切换时需要先保存当前进程的上下文然后恢复下一个要执行进程的上下文寄存器的作用通用寄存器用于存储操作数和中间结果提高数据访问速度如在算术运算和数据处理指令中使用程序计数器指向进程下次执行的指令地址是进程执行流程的关键栈指针和基指针用于管理函数调用时的参数传递和局部变量存储维护函数调用栈的结构状态寄存器保存的状态信息如进位标志零标志等用于条件判断和跳转指令进程切换的具体步骤保存当前进程上下文暂停当前进程将寄存器程序计数器等保存到该进程的控制块如中更新进程状态将当前进程状态改为就绪或等待并加入对应队列选择新进程根据调度算法如优先级调度选择下一个要执行的进程恢复新进程上下文从新进程的控制块恢复寄存器和程序计数器等信息切换至新进程开始执行新进程的指令完成切换',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-03-26 16:10:00',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 10 || hour >= 20
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/custom/css/font.css"><link rel="stylesheet" href="/custom/css/bilibili.css"><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://zycs-img-8kd.pages.dev/v2/bFRjgdX.jpeg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">社交</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="GitHub"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="GitHub"/><span class="back-menu-item-text">GitHub</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://space.bilibili.com/1918272544" title="哔哩哔哩"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="哔哩哔哩"/><span class="back-menu-item-text">哔哩哔哩</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://gitee.com/huang-cancan-xbc" title="Gitee"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="Gitee"/><span class="back-menu-item-text">Gitee</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">博客</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.csdn.net/Huangcancan666?type=blog" title="CSDN"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="CSDN"/><span class="back-menu-item-text">CSDN</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://juejin.cn/user/3230789931118109" title="稀土掘金"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="稀土掘金"/><span class="back-menu-item-text">稀土掘金</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">小米里的大麦</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 外链</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li></ul></div></div></div><div id="nav-right"><div id="nav-naoDark"><div class="container"><div class="components"><div class="main-button"><div class="moon"></div><div class="moon"></div><div class="moon"></div></div><div class="daytime-backgrond"></div><div class="daytime-backgrond"></div><div class="daytime-backgrond"></div><div class="cloud"><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div></div><div class="cloud-light"><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div></div><div class="stars"><div class="star big"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star big"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star medium"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star medium"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star small"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star small"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div></div></div></div></div><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://zycs-img-8kd.pages.dev/v2/REbVGGL.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/REbVGGL.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://zycs-img-8kd.pages.dev/v2/1UUolM0.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/1UUolM0.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/C/" style="font-size: 1.05rem;">C++<sup>8</sup></a><a href="/tags/Git/" style="font-size: 1.05rem;">Git<sup>3</sup></a><a href="/tags/IO/" style="font-size: 1.05rem;">IO<sup>3</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>50</sup></a><a href="/tags/Obsidian/" style="font-size: 1.05rem;">Obsidian<sup>1</sup></a><a href="/tags/STL/" style="font-size: 1.05rem;">STL<sup>2</sup></a><a href="/tags/VS-Code/" style="font-size: 1.05rem;">VS Code<sup>1</sup></a><a href="/tags/%E4%BF%A1%E5%8F%B7/" style="font-size: 1.05rem;">信号<sup>3</sup></a><a href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" style="font-size: 1.05rem;">内存管理<sup>1</sup></a><a href="/tags/%E5%8E%86%E7%A8%8B/" style="font-size: 1.05rem;">历程<sup>1</sup></a><a href="/tags/%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4/" style="font-size: 1.05rem;">地址空间<sup>6</sup></a><a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 1.05rem;">数学<sup>1</sup></a><a href="/tags/%E6%A8%A1%E6%9D%BF/" style="font-size: 1.05rem;">模板<sup>1</sup></a><a href="/tags/%E7%AE%A1%E9%81%93/" style="font-size: 1.05rem;">管道<sup>2</sup></a><a href="/tags/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/" style="font-size: 1.05rem;">类与对象<sup>3</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size: 1.05rem;">线程<sup>4</sup></a><a href="/tags/%E7%BD%91%E7%AB%99/" style="font-size: 1.05rem;">网站<sup>2</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 1.05rem;">网络<sup>6</sup></a><a href="/tags/%E8%BF%9B%E7%A8%8B/" style="font-size: 1.05rem;">进程<sup>15</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">九月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/08/"><span class="card-archive-list-date">八月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/07/"><span class="card-archive-list-date">七月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/06/"><span class="card-archive-list-date">六月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/05/"><span class="card-archive-list-date">五月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/04/"><span class="card-archive-list-date">四月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/03/"><span class="card-archive-list-date">三月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">10</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/02/"><span class="card-archive-list-date">二月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div><div id="console-naoDark"><div class="container"><div class="components"><div class="main-button"><div class="moon"></div><div class="moon"></div><div class="moon"></div></div><div class="daytime-backgrond"></div><div class="daytime-backgrond"></div><div class="daytime-backgrond"></div><div class="cloud"><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div></div><div class="cloud-light"><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div></div><div class="stars"><div class="star big"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star big"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star medium"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star medium"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star small"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star small"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div></div></div></div></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/" itemprop="url">Linux</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/Linux/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Linux</span></a><a class="article-meta__tags" href="/tags/%E8%BF%9B%E7%A8%8B/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>进程</span></a></span></div></div><h1 class="post-title" itemprop="name headline">012 进程状态和优先级</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-03-26T07:50:00.000Z" title="发表于 2025-03-26 15:50:00">2025-03-26</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-03-26T08:10:00.000Z" title="更新于 2025-03-26 16:10:00">2025-03-26</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">4.8k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>15分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="012 进程状态和优先级"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为西安"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>西安</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://zycs-img-8kd.pages.dev/v2/fETMVUS.jpeg?_r_=8e155880-809b-e75c-f6b5-d0e4dc7c05aa"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><div class="post-ai-description"><div class="ai-title"><i class="anzhiyufont anzhiyu-icon-bilibili"></i><div class="ai-title-text">AI-摘要</div><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i><i class="anzhiyufont anzhiyu-icon-circle-dot" title="朗读摘要"></i><div id="ai-tag">小米里的大麦 GPT</div></div><div class="ai-explanation">AI初始化中...</div><div class="ai-btn-box"><div class="ai-btn-item">介绍自己 🙈</div><div class="ai-btn-item">生成本文简介 👋</div><div class="ai-btn-item">推荐相关文章 📖</div><div class="ai-btn-item">前往主页 🏠</div><div class="ai-btn-item" id="go-tianli-blog">前往爱发电购买</div></div><script data-pjax src="/js/anzhiyu/ai_abstract.js"></script></div><article class="post-content" id="article-container" itemscope itemtype="https://www.minbit.top/posts/22624.html"><header><a class="post-meta-categories" href="/categories/Linux/" itemprop="url">Linux</a><a href="/tags/Linux/" tabindex="-1" itemprop="url">Linux</a><a href="/tags/%E8%BF%9B%E7%A8%8B/" tabindex="-1" itemprop="url">进程</a><h1 id="CrawlerTitle" itemprop="name headline">012 进程状态和优先级</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">小米里的大麦</span><time itemprop="dateCreated datePublished" datetime="2025-03-26T07:50:00.000Z" title="发表于 2025-03-26 15:50:00">2025-03-26</time><time itemprop="dateCreated datePublished" datetime="2025-03-26T08:10:00.000Z" title="更新于 2025-03-26 16:10:00">2025-03-26</time></header><h2 id="进程状态和优先级"><a href="#进程状态和优先级" class="headerlink" title="进程状态和优先级"></a>进程状态和优先级</h2><blockquote>
<p>  [!TIP]</p>
<p>  <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1juzZYhEG2/?spm_id_from=333.1391.0.0&vd_source=47fe2fe2f10c4e806e38c62553037767">相关推荐视频 | B站</a></p>
</blockquote>
<h3 id="一、进程状态分类"><a href="#一、进程状态分类" class="headerlink" title="一、进程状态分类"></a>一、进程状态分类</h3><p>Linux 中的进程状态可以通过 <code>ps</code> 命令或者 <code>top</code> 命令来查看，常见的状态码有以下几种：</p>
<table>
<thead>
<tr>
<th>状态码</th>
<th>名称</th>
<th>含义说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>R</strong></td>
<td>运行（Running）</td>
<td>进程正在运行或处于可运行状态（等待 CPU 调度）</td>
</tr>
<tr>
<td><strong>S</strong></td>
<td>可中断睡眠（Sleeping）</td>
<td>进程正在等待某个事件（如 I&#x2F;O、信号等），可以被信号或外部事件唤醒</td>
</tr>
<tr>
<td><strong>D</strong></td>
<td>不可中断睡眠（Uninterruptible Sleep）</td>
<td>进程正等待 <strong>无法被信号唤醒</strong> 的事件（如磁盘 I&#x2F;O），一般出现在设备驱动程序中，例如正在等待硬件操作</td>
</tr>
<tr>
<td><strong>T</strong></td>
<td>停止（Stopped&#x2F;Traced）</td>
<td>进程已被暂停执行，例如收到了 <code>SIGSTOP</code> 信号，或者在被调试时被暂停。</td>
</tr>
<tr>
<td><strong>Z</strong></td>
<td>僵尸（Zombie）</td>
<td>子进程已结束&#x2F;终止，但父进程未回收它的资源（PID 和退出状态仍占用系统资源），导致进程表里留有“尸体”</td>
</tr>
<tr>
<td><strong>X</strong></td>
<td>死亡（Dead）</td>
<td>进程已彻底终止，且不会再存在于进程表中（非常短暂极少见，用户通常看不到）</td>
</tr>
</tbody></table>
<h4 id="特殊状态说明"><a href="#特殊状态说明" class="headerlink" title="特殊状态说明"></a>特殊状态说明</h4><ol>
<li><strong>僵尸进程 (Z)（一种比较特殊的状态）</strong><ul>
<li><strong>产生原因</strong>：当进程退出并且父进程（使用 <code>wait()</code> 系统调用，后面讲）没有读取到子进程退出的返回代码时就会产生僵死（尸）进程。僵死进程会以终止状态保持在进程表中，并且会一直在等待父进程读取退出状态代码。所以，只要子进程退出，父进程还在运行，但父进程没有读取子进程状态，子进程进入 <code>Z</code> 状态。</li>
<li><strong>危害</strong>：占用 PID，可能导致系统 PID 耗尽。</li>
<li><strong>解决</strong>：杀死父进程（僵尸进程会由 <code>init</code> 进程接管并回收）。</li>
</ul>
</li>
<li><strong>不可中断睡眠 (D)</strong><ul>
<li><strong>常见场景</strong>：进程在执行关键系统调用（如写入磁盘）。</li>
<li><strong>处理</strong>：通常需等待操作完成，强制终止可能导致数据损坏。</li>
</ul>
</li>
</ol>
<hr>
<h3 id="二、如何查看进程状态（进程的状态显示在-STAT-字段下）"><a href="#二、如何查看进程状态（进程的状态显示在-STAT-字段下）" class="headerlink" title="二、如何查看进程状态（进程的状态显示在 STAT 字段下）"></a>二、如何查看进程状态（进程的状态显示在 <code>STAT</code> 字段下）</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Linux/20250317193133677.png" alt="image-20250317193133559"></p>
<h4 id="1-使用-ps-命令"><a href="#1-使用-ps-命令" class="headerlink" title="1. 使用 ps 命令"></a>1. 使用 <code>ps</code> 命令</h4><p><code>ps</code> 可以显示一次性快照信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux</span><br></pre></td></tr></table></figure>

<p>查看部分关键字段：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -eo pid,ppid,<span class="built_in">stat</span>,<span class="built_in">comm</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>PID</strong>：进程 ID。</li>
<li><strong>PPID</strong>：父进程 ID。</li>
<li><strong>STAT</strong>：进程状态（如 <code>S</code>、<code>R</code>、<code>Z</code> 等）。</li>
<li><strong>COMMAND</strong>：执行该进程的命令。</li>
</ul>
<p>输出示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">PID  PPID STAT COMMAND</span><br><span class="line">  1     0 Ss   systemd</span><br><span class="line">  2     0 S    kthreadd</span><br><span class="line">123     1 R    bash</span><br><span class="line">456   123 S    vim</span><br><span class="line">789   456 Z    python</span><br><span class="line">945     1 Ssl  hostguard</span><br><span class="line">1254    1 Ss+  agetty</span><br></pre></td></tr></table></figure>

<p><strong>解释：</strong></p>
<ul>
<li><strong><code>Ss</code></strong>：<code>systemd</code> 是会话首领（s），当前处于可中断睡眠状态（S）。</li>
<li><strong><code>Ssl</code></strong>：<code>hostguard</code> 是会话首领（s），处于可中断睡眠状态（S），且是多线程进程（l）。</li>
<li><strong><code>Ss+</code></strong>：<code>agetty</code> 是会话首领（s），处于可中断睡眠状态（S），且是前台进程（+）。</li>
<li><strong><code>Z</code></strong>：<code>python</code> 进程已变成僵尸进程（Z），等待父进程回收。</li>
</ul>
<p><code>STAT</code> 字段可能含有多个字符组合，如 <code>Ss</code>、<code>R+</code>，<strong>额外属性（从第二列字符开始）：</strong></p>
<table>
<thead>
<tr>
<th>字符</th>
<th>属性名称</th>
<th>含义说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>s</strong></td>
<td>会话首领（Session Leader）</td>
<td>该进程是会话的领导者，通常是终端启动的第一个进程。</td>
</tr>
<tr>
<td><strong>+</strong></td>
<td>前台进程组（Foreground）</td>
<td>进程属于前台进程组，能接受来自终端的输入信号。</td>
</tr>
<tr>
<td><strong>l</strong></td>
<td>多线程（Multithreaded）</td>
<td>进程是多线程的（用 Linux 的线程实现）。</td>
</tr>
<tr>
<td><strong>L</strong></td>
<td>内存锁定（Locked in Memory）</td>
<td>进程有部分内存被锁定，无法被换出。</td>
</tr>
<tr>
<td><strong>N</strong></td>
<td>低优先级（Low Priority）</td>
<td>进程运行在低优先级（nice 值大于 0）。</td>
</tr>
<tr>
<td><strong>&lt;</strong></td>
<td>高优先级（High Priority）</td>
<td>进程运行在实时优先级（nice 值小于 0）。</td>
</tr>
<tr>
<td><strong>s</strong></td>
<td>会话首领（Session Leader）</td>
<td>该进程是会话的领导者（通常是终端启动的第一个进程）。</td>
</tr>
<tr>
<td><strong>n</strong></td>
<td>优先级降低（Reduced Priority）</td>
<td>进程的优先级被降低（通过 <code>nice</code> 命令调整）。</td>
</tr>
<tr>
<td>**</td>
<td>进程被克隆（Cloned Process）</td>
<td>进程是通过 <code>clone()</code> 系统调用创建的，通常用于线程实现。</td>
</tr>
</tbody></table>
<h4 id="2-使用-top-命令"><a href="#2-使用-top-命令" class="headerlink" title="2. 使用 top 命令"></a>2. 使用 <code>top</code> 命令</h4><p><code>top</code> 命令动态刷新进程状态：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top</span><br></pre></td></tr></table></figure>

<ul>
<li><code>S</code> 列表示进程状态，通常会看到 <code>R</code>、<code>S</code>、<code>Z</code> 等状态。</li>
<li>按 <code>q</code> 键退出。</li>
</ul>
<h4 id="3-使用-proc-文件系统"><a href="#3-使用-proc-文件系统" class="headerlink" title="3. 使用 proc 文件系统"></a>3. 使用 <code>proc</code> 文件系统</h4><p>每个进程在 <code>/proc</code> 下有一个专属目录（以 PID 命名），可以直接查看其状态：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /proc/&lt;PID&gt;/status | grep State</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /proc/1234/status | grep State</span><br><span class="line">State:	S (sleeping)</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="三、进程状态的生命周期"><a href="#三、进程状态的生命周期" class="headerlink" title="三、进程状态的生命周期"></a>三、进程状态的生命周期</h3><p>一个典型的进程生命周期大致如下：</p>
<ol>
<li><p><strong>创建（Created）：</strong> 用 <code>fork()</code> 创建进程，父进程复制自身的内存空间。</p>
</li>
<li><p><strong>就绪（Ready）：</strong> 进程已准备好运行，等待 CPU 调度。</p>
</li>
<li><p><strong>运行（Running）：</strong> 进程正在被 CPU 执行。</p>
</li>
<li><p><strong>阻塞&#x2F;睡眠（Blocked&#x2F;Sleeping）：</strong> 进程等待外部事件（如 I&#x2F;O）完成 <strong>（可中断睡眠和不可中断睡眠）</strong>。</p>
<ul>
<li><strong>（挂起（Suspended）：通常由用户或调试器主动暂停进程（如 <code>CTRL + z</code>））</strong></li>
</ul>
</li>
<li><p><strong>终止（Terminated）：</strong> 进程执行完成或被强制终止。</p>
</li>
<li><p><strong>僵尸（Zombie）：</strong> 子进程结束后，父进程未回收其退出信息，导致子进程残留在进程表。</p>
</li>
<li><p><strong>销毁（Dead）：</strong> 僵尸进程被父进程回收后，彻底消失。</p>
</li>
</ol>
<h3 id="四、进程状态转换示意图"><a href="#四、进程状态转换示意图" class="headerlink" title="四、进程状态转换示意图"></a>四、进程状态转换示意图</h3><p><strong><span style="color:#CC0000;">这部分比较抽象，了解部分即可。</span></strong> 典型的转换流程：<strong>新建 (New) → 就绪 (R) → 运行 (R) ↔ 阻塞 (S&#x2F;D) → 终止 (Z&#x2F;X)</strong>，还有</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">+---------------------+         +-----------------------+</span><br><span class="line">|     创建 (New)       |         | 不可中断睡眠 (D)       |</span><br><span class="line">+---------------------+         +-----------------------+</span><br><span class="line">          ↓                              ↑</span><br><span class="line">+---------------------+  等待事件完成      |</span><br><span class="line">| 可运行/运行中 (R)    | ←--------------→ | 可中断睡眠 (S)   |</span><br><span class="line">+---------------------+  调度器分配 CPU   +---------------------+</span><br><span class="line">          |  ↑                   ↑               |</span><br><span class="line">          |  |                   | 等待硬件操作  | 挂起信号</span><br><span class="line">          ↓  |                   ↓               ↓</span><br><span class="line">+---------------------+                  +---------------------+</span><br><span class="line">| 停止 (T)             | ← SIGSTOP/SIGTSTP |  终止/僵尸 (Z)      |</span><br><span class="line">+---------------------+                  +---------------------+</span><br><span class="line">          |                                      |</span><br><span class="line">          | SIGCONT                              ↓</span><br><span class="line">          ↓                              +---------------------+</span><br><span class="line">+---------------------+                  |      回收 (X)         |</span><br><span class="line">| 可运行/运行中 (R)    | → 父进程回收 →    +---------------------+</span><br><span class="line">+---------------------+</span><br></pre></td></tr></table></figure>

<p><strong>进程的状态模型并没有一个单一的官方标准定义，而是根据不同的操作系统和理论模型有不同的实现。</strong> 不过，通常讨论的 <strong>三态、五态和七态模型</strong> 是基于操作系统的进程管理理论中的常见模型。</p>
<blockquote>
<p>  [!WARNING]</p>
<p>  下面是从网络上找的相关图片，<span style="color:#CC0000;">只是 <strong>偏向正确</strong>，因为没有具体标准定义！</span></p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Linux/20250317165240002.png" alt="image-20250317165239824"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Linux/20250317212904250.png" alt="image-20250317212904093"></p>
<hr>
<h3 id="实验-1：僵尸进程的创建与监控"><a href="#实验-1：僵尸进程的创建与监控" class="headerlink" title="实验 1：僵尸进程的创建与监控"></a>实验 1：僵尸进程的创建与监控</h3><h4 id="1-实验步骤"><a href="#1-实验步骤" class="headerlink" title="1. 实验步骤"></a>1. 实验步骤</h4><ol>
<li><strong>编写僵尸进程代码</strong>：父进程创建子进程后，子进程立即退出，但父进程不调用 <code>wait()</code> 去回收子进程的资源，从而让子进程变成僵尸进程。</li>
<li><strong>编译与运行</strong>：运行代码后，使用 <code>ps</code> 命令在另一个终端监控进程状态。</li>
<li><strong>观察现象</strong>：子进程退出后，父进程没有回收它，它的状态会变成 <code>Z</code>（Zombie）。</li>
</ol>
<h4 id="2-僵尸进程代码："><a href="#2-僵尸进程代码：" class="headerlink" title="2. 僵尸进程代码："></a>2. 僵尸进程代码：</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">pid_t</span> pid = fork();                 <span class="comment">// 创建子进程</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (pid &lt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        perror(<span class="string">&quot;fork失败&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (pid == <span class="number">0</span>)                  <span class="comment">// 子进程</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;子进程（PID：%d）正在运行...\n&quot;</span>, getpid());</span><br><span class="line">        sleep(<span class="number">5</span>);                       <span class="comment">// 子进程运行5秒后退出</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;子进程（PID：%d）即将退出...\n&quot;</span>, getpid());</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>                                <span class="comment">// 父进程</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;父进程（PID：%d）正在运行...\n&quot;</span>, getpid());</span><br><span class="line">        sleep(<span class="number">30</span>);                      <span class="comment">// 父进程等待30秒（不调用wait()，导致子进程成为僵尸进程）</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;父进程结束。\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-运行步骤："><a href="#3-运行步骤：" class="headerlink" title="3. 运行步骤："></a>3. 运行步骤：</h4><ol>
<li>编译代码：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc corpse.c -o corpse</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>运行程序：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./corpse</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在另一个终端用 <code>ps</code> 命令观察：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -eo pid,ppid,<span class="built_in">stat</span>,cmd | grep <span class="string">&#x27;Z&#x27;</span></span><br></pre></td></tr></table></figure>

<ol>
<li><p><strong>现象</strong>：你会发现子进程的 <code>STAT</code> 显示为 <code>Z</code>，说明它已变成僵尸进程。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Linux/20250317202057511.png" alt="image-20250317202057393"></p>
</li>
<li><p><strong>危害</strong>：</p>
<ul>
<li><strong>PID 资源耗尽</strong>：僵尸进程本身不消耗资源，但它的 PID （进程标识符）不会被释放。如果系统产生大量僵尸进程，PID 会被耗尽，导致新进程无法创建！</li>
<li><strong>内存泄漏</strong>：内核保留僵尸进程的退出状态和资源描述符，直到父进程回收。</li>
</ul>
</li>
<li><p><strong>解决办法</strong>：通过 <code>kill</code> 杀掉父进程，僵尸进程会被 <code>init</code> 进程回收。</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> -9 父进程PID		<span class="comment"># 终止父进程，子进程由 init 进程回收</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="实验-2：孤儿进程的创建与监控"><a href="#实验-2：孤儿进程的创建与监控" class="headerlink" title="实验 2：孤儿进程的创建与监控"></a>实验 2：孤儿进程的创建与监控</h3><h4 id="1-实验步骤："><a href="#1-实验步骤：" class="headerlink" title="1. 实验步骤："></a>1. 实验步骤：</h4><ol>
<li><strong>编写孤儿进程代码</strong>：父进程创建子进程后，父进程主动退出，子进程被 <code>init</code> 进程接管。</li>
<li><strong>编译与运行</strong>：运行代码后，用 <code>ps</code> 命令监控子进程的 <code>PPID</code>（父进程 ID）。</li>
<li><strong>观察现象</strong>：父进程退出后，子进程的 <code>PPID</code> 变成 <code>1</code>（即 <code>init</code> 进程）。</li>
</ol>
<h4 id="2-孤儿进程代码："><a href="#2-孤儿进程代码：" class="headerlink" title="2. 孤儿进程代码："></a>2. 孤儿进程代码：</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">pid_t</span> pid = fork();                 <span class="comment">// 创建子进程</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (pid &lt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        perror(<span class="string">&quot;fork 失败&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (pid == <span class="number">0</span>)                  <span class="comment">// 子进程逻辑</span></span><br><span class="line">    &#123;</span><br><span class="line">        sleep(<span class="number">1</span>);                       <span class="comment">// 确保父进程先退出</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;子进程 PID: %d, PPID: %d\n&quot;</span>, getpid(), getppid());</span><br><span class="line">        <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            sleep(<span class="number">10</span>);                  <span class="comment">// 保持子进程存活，方便观察</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>                                <span class="comment">// 父进程逻辑</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;父进程 PID: %d 创建了子进程 PID: %d，然后退出\n&quot;</span>, getpid(), pid);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);                        <span class="comment">// 父进程主动退出，产生孤儿进程</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-运行步骤：-1"><a href="#3-运行步骤：-1" class="headerlink" title="3. 运行步骤："></a>3. 运行步骤：</h4><ol>
<li>编译代码：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc orphan.c -o orphan</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>运行程序：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./orphan</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在另一个终端用 <code>ps</code> 命令观察：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -eo pid,ppid,<span class="built_in">stat</span>,cmd | grep 子进程PID</span><br></pre></td></tr></table></figure>

<ol>
<li><p><strong>现象</strong>：你会发现子进程的 <code>PPID</code> 变成 <code>1</code>，说明它被 <code>init</code> 进程接管，变成了孤儿进程。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Linux/20250317203906200.png" alt="image-20250317203906101"></p>
</li>
<li><p><strong>危害</strong>：<strong>孤儿进程一般不会直接危害系统</strong>，主要分下面几种情况（<strong>这就像一个“扫地机器人”：只有当进程“倒下”（退出）时，<code>init</code> 才来打扫；如果进程一直乱跑或者不断“生孩子”，<code>init</code> 也束手无策。</strong>）：</p>
<ul>
<li><p><strong>自动回收机制：</strong></p>
<ul>
<li>当父进程退出后，孤儿进程会被 <code>init</code> 进程（PID &#x3D; 1）收养。</li>
<li><code>init</code> 进程会定期调用 <code>wait()</code> 来回收那些已经结束的子进程，避免出现僵尸进程。</li>
</ul>
</li>
<li><p><strong>陷入死循环的情况：</strong></p>
<ul>
<li>如果孤儿进程本身陷入死循环（比如 <code>while (1) &#123; sleep(1); &#125;</code>），它不会退出，自然也不会被 <code>init</code> 回收。</li>
<li><code>init</code> 只能回收已经 <strong>退出的子进程</strong>。如果孤儿进程一直在运行，<code>init</code> 什么也做不了。</li>
</ul>
</li>
<li><p><strong>大量创建子进程的情况：</strong></p>
<ul>
<li><p>孤儿进程本身如果大量 <code>fork()</code> 创建新子进程，这些子进程同样会被它的父进程（即原孤儿进程）管理。</p>
</li>
<li><p>如果原孤儿进程随后退出，那么它创建的子进程就会变成新的孤儿进程，<code>init</code> 会接管它们。</p>
</li>
<li><p>如果这种行为持续发生，系统的进程表（PID 资源）可能会被快速耗尽，导致系统无法创建新进程，从而影响稳定性。</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>解决办法</strong>：手动杀掉孤儿进程：</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> -9 子进程PID</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="4-对比总结"><a href="#4-对比总结" class="headerlink" title="4. 对比总结"></a>4. 对比总结</h4><blockquote>
<p>  [!NOTE]</p>
<ol>
<li><strong>孤儿进程的资源会被回收吗？</strong><ul>
<li>是的，<code>init</code> 进程会主动回收孤儿进程。</li>
</ul>
</li>
<li><strong>僵尸进程和孤儿进程哪个更危险？</strong><ul>
<li>僵尸进程，因为长期占用系统资源。</li>
</ul>
</li>
</ol>
</blockquote>
<table>
<thead>
<tr>
<th align="left"><strong>特性</strong></th>
<th align="left"><strong>僵尸进程</strong></th>
<th align="left"><strong>孤儿进程</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>产生条件</strong></td>
<td align="left">子进程终止，父进程未调用 <code>wait()</code></td>
<td align="left">父进程终止，子进程仍在运行</td>
</tr>
<tr>
<td align="left"><strong>危害</strong></td>
<td align="left">占用 PID 和内核资源</td>
<td align="left">一般无危害（主要由 init 进程自动回收）</td>
</tr>
<tr>
<td align="left"><strong>状态符号</strong></td>
<td align="left"><code>Z</code> (Zombie)</td>
<td align="left">无特殊状态，PPID 变为 1</td>
</tr>
<tr>
<td align="left"><strong>处理方式</strong></td>
<td align="left">终止父进程或修复父进程代码调用 <code>wait()</code></td>
<td align="left">通常无需处理</td>
</tr>
<tr>
<td align="left"><strong>系统影响</strong></td>
<td align="left">可能导致 PID 耗尽</td>
<td align="left">无负面影响</td>
</tr>
</tbody></table>
<hr>
<h3 id="五、进程的优先级"><a href="#五、进程的优先级" class="headerlink" title="五、进程的优先级"></a>五、进程的优先级</h3><p>在 Linux 系统中，进程的优先级（Priority）决定了调度器（Scheduler）选择哪个进程优先运行。这里有两个关键概念：<strong>PRI（优先级）</strong> 和 <strong>NI（静态优先级&#x2F;Nice 值）</strong>。</p>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="left">全称</th>
<th align="left">范围</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>PRI</strong></td>
<td align="left">Priority</td>
<td align="left"><strong>0~139</strong></td>
<td align="left">进程的实际优先级，<strong>值越小优先级越高</strong></td>
</tr>
<tr>
<td align="left"><strong>NI</strong></td>
<td align="left">Nice Value</td>
<td align="left"><strong>-20~19</strong></td>
<td align="left">用户可调整的优先级修正值，影响 PRI，NI 是用户可调节的值，<strong>用来“建议”系统优先级，但最终还是由内核决定。</strong></td>
</tr>
</tbody></table>
<hr>
<h4 id="1-PRI（Priority，优先级）："><a href="#1-PRI（Priority，优先级）：" class="headerlink" title="1. PRI（Priority，优先级）："></a>1. PRI（Priority，优先级）：</h4><ul>
<li><strong>定义</strong>：表示内核调度时分配给进程的优先级。<strong>数值越小，优先级越高。</strong></li>
<li>范围：<ul>
<li><strong>内核视角</strong>：<code>PRI</code> 范围 <code>0 ~ 139</code> 是进程的 <strong>真实优先级</strong>，值越小优先级越高。</li>
<li><strong>用户视角</strong>：<strong>实时进程的优先级是 <code>0 ~ 99</code></strong>（适合对实时性要求高的任务，如工业控制、音视频处理等），<strong>普通进程的优先级是 <code>100 ~ 139</code></strong>（普通用户任务，如文本编辑器、浏览器等）。</li>
</ul>
</li>
<li><strong>决定因素</strong>：<code>PRI = 20 + NI</code>（普通进程），<code>nice</code> 值影响普通进程的优先级，但 <strong>不会直接影响实时进程的优先级</strong>。</li>
<li><strong>查看命令</strong>：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -eo pid,pri,ni,<span class="built_in">comm</span></span><br></pre></td></tr></table></figure>

<p>输出示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> PID PRI NI COMMAND</span><br><span class="line">   1  80  0 systemd</span><br><span class="line">1234  90 10 python</span><br><span class="line">5678  70 -5 nginx</span><br></pre></td></tr></table></figure>

<p><strong>或者：<code>top</code> 命令</strong>，在 <code>top</code> 界面里：</p>
<ul>
<li>按 <strong>f</strong> 键进入字段选择界面，找到 <strong>PRI</strong> 和 <strong>NI</strong>，按空格键选中后回车返回主界面，即可看到优先级信息。</li>
<li>PRI 和 NI 默认就会显示在列表中。</li>
</ul>
<hr>
<h4 id="2-NI（Nice-值）："><a href="#2-NI（Nice-值）：" class="headerlink" title="2. NI（Nice 值）："></a>2. NI（Nice 值）：</h4><ul>
<li><p><strong>公式：<code>PRI (新) = PRI (默认) + NI</code></strong></p>
<ul>
<li>默认 PRI 通常为 <strong>80</strong>（不同系统可能不同），因此实际 PRI 范围是：<code>80 + (-20) = 60</code>（最高优先级） 到 <code>80 + 19 = 99</code>（最低优先级）。</li>
</ul>
</li>
<li><p><strong>定义</strong>：影响普通进程的优先级（PRI），表示“进程对 CPU 资源的友好程度”。数值越高，优先级越低，越“谦让”。当 <code>nice</code> 值为负值的时候，那么该程序将会优先级值将变小，即其优先级会变高，则其越快被执行。所以，调整进程优先级，在 Linux 下，就是调整进程 nice 值。</p>
</li>
<li><p><strong>范围</strong>：<code>-20</code>（最重要）到 <code>19</code>（最不重要），一共 40 个级别。默认值为 <code>0</code>。</p>
</li>
<li><p><strong>调整规则：NI 值越低，PRI 越小，进程优先级越高</strong></p>
<ul>
<li>普通用户只能 <strong>降低优先级</strong>（NI 值 ≥ 0）</li>
<li>Root 用户可 <strong>提升优先级</strong>（NI 值 &lt; 0）</li>
</ul>
</li>
<li><p><strong>关系</strong>：$PRI &#x3D; 20 + NI$</p>
<ul>
<li><code>NI = -20</code> → PRI &#x3D; 0 + 20 &#x3D; 20（最高优先级）</li>
<li><code>NI = 0</code> → PRI &#x3D; 0 + 20 &#x3D; 20（默认值）</li>
<li><code>NI = 19</code> → PRI &#x3D; 19 + 20 &#x3D; 39（最低优先级）</li>
</ul>
</li>
<li><p><strong>调整 NI 值</strong>：</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动时设置 nice 值</span></span><br><span class="line"><span class="built_in">nice</span> -n 10 ./可执行程序</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行中调整 nice 值</span></span><br><span class="line">renice -5 1234  		<span class="comment"># 把 PID 为 1234 的进程 NI 调整到 -5</span></span><br></pre></td></tr></table></figure>

<h4 id="3-注意事项"><a href="#3-注意事项" class="headerlink" title="3. 注意事项"></a>3. 注意事项</h4><ol>
<li><strong>避免滥用高优先级</strong>：过多高优先级进程可能导致系统不稳定（如 GUI 无响应）。</li>
<li><strong>NI 值继承</strong>：子进程会继承父进程的 NI 值。</li>
</ol>
<h3 id="六、其他概念补充"><a href="#六、其他概念补充" class="headerlink" title="六、其他概念补充"></a>六、其他概念补充</h3><blockquote>
<p>  [!IMPORTANT]</p>
<ul>
<li><strong>竞争性</strong>：进程争抢 CPU、内存等资源。</li>
<li><strong>独立性</strong>：每个进程互不干扰，资源独立。</li>
<li><strong>并行</strong>：多核 CPU 下的真正“同时运行”。</li>
<li><strong>并发</strong>：单核 CPU 下的“快速切换”，让多个进程看似“同时进行”。</li>
</ul>
</blockquote>
<h4 id="1-竞争性（Competitiveness）："><a href="#1-竞争性（Competitiveness）：" class="headerlink" title="1. 竞争性（Competitiveness）："></a>1. 竞争性（Competitiveness）：</h4><ul>
<li><strong>定义</strong>：由于系统中的进程数量众多，而 CPU 资源有限（甚至可能只有 1 个），所以各个进程需要竞争 CPU 使用权。为了高效完成任务，更合理竞争相关资源，便有了优先级。</li>
<li>引申含义：<ul>
<li>系统通过调度算法来决定哪个进程先使用 CPU。</li>
<li>为了更合理地分配资源，引入了 <strong>优先级（Priority）</strong> 概念，优先级高的进程更有可能被调度运行。</li>
<li>竞争不局限于 CPU，进程还可能竞争内存、I&#x2F;O 设备等资源。</li>
</ul>
</li>
</ul>
<h4 id="2-独立性（Independence）："><a href="#2-独立性（Independence）：" class="headerlink" title="2. 独立性（Independence）："></a>2. 独立性（Independence）：</h4><ul>
<li><strong>定义</strong>：多进程运行时，每个进程都有自己独立的内存空间和资源，彼此不会直接影响。</li>
<li>特点：<ul>
<li>每个进程的执行逻辑、变量、文件描述符等都是独立的。</li>
<li>若需要通信，通常使用 <strong>进程间通信</strong> 机制，例如：管道（Pipe）、共享内存、消息队列等。</li>
</ul>
</li>
<li><strong>意义</strong>：独立性<strong>保证了系统稳定性，即使某个进程崩溃，其他进程也能正常运行</strong>。</li>
</ul>
<h4 id="3-并行（Parallelism）："><a href="#3-并行（Parallelism）：" class="headerlink" title="3. 并行（Parallelism）："></a>3. 并行（Parallelism）：</h4><ul>
<li><strong>定义</strong>：多个进程在多个 <strong>CPU</strong> 核心上<strong>同时</strong>运行，互不干扰，真正实现“同时进行”。</li>
<li><strong>条件</strong>：需要多核 CPU 或多台机器（分布式系统）支持。</li>
<li><strong>举例</strong>：在 4 核 CPU 上，4 个进程可以在每个核心上独立运行，互不干扰，实现真正的“并行”。</li>
</ul>
<h4 id="4-并发（Concurrency）："><a href="#4-并发（Concurrency）：" class="headerlink" title="4. 并发（Concurrency）："></a>4. 并发（Concurrency）：</h4><ul>
<li><strong>定义</strong>：多个进程在一个CPU下采用进程切换的方式，在一段时间之内，让多个进程都得以推进，称之为并发。（在单核 CPU 上，多个进程通过频繁的“<strong>时间片切换</strong>”，让每个进程在<strong>宏观上看起来同时执行</strong>）</li>
<li><strong>原理</strong>：CPU 每隔一段时间（时间片）切换到下一个进程执行，切换速度极快，人眼无法分辨，以为多个进程“同时”运行。</li>
<li><strong>举例</strong>：在单核 CPU 上运行多个下载任务，CPU 不断在不同任务之间切换，让所有任务都能逐步完成。</li>
</ul>
<blockquote>
<p>  [!NOTE]</p>
<h4 id="进程切换"><a href="#进程切换" class="headerlink" title="进程切换"></a>进程切换</h4><ul>
<li><strong>概念</strong>：在单 CPU 系统中，多个进程通过轮流使用 CPU 资源实现“并发”，这依赖于操作系统的“进程切换”。</li>
<li><strong>实现方式</strong>：采用调度算法（如<strong>时间片轮转</strong>的调度算法），每个进程被分配固定的时间片。时间片用完后，系统暂停该进程，保存状态，并切换到下一个进程执行。</li>
</ul>
<h4 id="上下文保存"><a href="#上下文保存" class="headerlink" title="上下文保存"></a>上下文保存</h4><ul>
<li><strong>意义</strong>：确保进程被切换时，其运行状态（即“上下文”）被妥善保存，待下次恢复执行。上下文是指进程执行时的环境状态，包括寄存器的值、程序计数器的值等。</li>
<li><strong>保存内容</strong>：<ul>
<li><strong>通用寄存器</strong>：如eax、ebx、ecx、edx等，用于存储操作数和计算结果。</li>
<li><strong>栈指针和基指针</strong>：如ebp、esp，用于管理函数调用和局部变量的存储。</li>
<li><strong>程序计数器（eip）</strong>：记录当前进程正在执行指令的下一条指令的地址，决定了进程执行的流程。</li>
<li><strong>状态寄存器（status）</strong>：包含条件码等信息，用于判断指令执行后的状态。</li>
</ul>
</li>
<li><strong>保存时机</strong>：在进程被切换时，需要先保存当前进程的上下文，然后恢复下一个要执行进程的上下文。</li>
</ul>
<h4 id="寄存器的作用"><a href="#寄存器的作用" class="headerlink" title="寄存器的作用"></a>寄存器的作用</h4><ul>
<li><strong>通用寄存器</strong>：用于存储操作数和中间结果，提高数据访问速度，如在算术运算和数据处理指令中使用。</li>
<li><strong>程序计数器（eip）</strong>：指向进程下次执行的指令地址，是进程执行流程的关键。</li>
<li><strong>栈指针和基指针</strong>：用于管理函数调用时的参数传递和局部变量存储，维护函数调用栈的结构。</li>
<li><strong>状态寄存器</strong>：保存CPU的状态信息，如进位标志、零标志等，用于条件判断和跳转指令。</li>
</ul>
<h4 id="进程切换的具体步骤"><a href="#进程切换的具体步骤" class="headerlink" title="进程切换的具体步骤"></a>进程切换的具体步骤</h4><ol>
<li><strong>保存当前进程上下文</strong>：暂停当前进程，将寄存器、程序计数器等保存到该进程的控制块（如 <code>task_struct</code>）中。</li>
<li><strong>更新进程状态</strong>：将当前进程状态改为“就绪”或“等待”，并加入对应队列。</li>
<li><strong>选择新进程</strong>：根据调度算法（如优先级调度）选择下一个要执行的进程。</li>
<li><strong>恢复新进程上下文</strong>：从新进程的控制块恢复寄存器和程序计数器等信息。</li>
<li><strong>切换至新进程</strong>：CPU 开始执行新进程的指令，完成切换。</li>
</ol>
</blockquote>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/bFRjgdX.jpeg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/bFRjgdX.jpeg" title="头像" alt="头像"></a><div class="post-copyright__author_name">小米里的大麦</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://www.minbit.top/posts/22624.html">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://www.minbit.top/posts/22624.html')">012 进程状态和优先级</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://zycs-img-8kd.pages.dev/v2/REbVGGL.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/REbVGGL.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://zycs-img-8kd.pages.dev/v2/1UUolM0.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/1UUolM0.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://www.minbit.top/posts/22624.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=012 进程状态和优先级&amp;url=https://www.minbit.top/posts/22624.html&amp;pic=https://zycs-img-8kd.pages.dev/v2/fETMVUS.jpeg?_r_=8e155880-809b-e75c-f6b5-d0e4dc7c05aa" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">知识共享署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0)</a> 许可协议。转载请注明来自 <a href="https://www.minbit.top" target="_blank">小米里的大麦</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/Linux/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Linux<span class="tagsPageCount">50</span></a><a class="post-meta__box__tags" href="/tags/%E8%BF%9B%E7%A8%8B/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>进程<span class="tagsPageCount">15</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://zycs-img-8kd.pages.dev/v2/fETMVUS.jpeg?_r_=c529c723-4b01-5bf8-fe19-d1438fd9563d" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/4610.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/uH1MN2u.png?_r_=d8aca62d-f18a-5698-334e-3d14589b8ae1" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">011 Linux进程</div></div></a></div><div class="next-post pull-right"><a href="/posts/10533.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/fETMVUS.jpeg?_r_=2504e844-5b6c-7c59-2b56-7932f77001ca" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">013 环境变量</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/4610.html" title="011 Linux进程"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/uH1MN2u.png?_r_=d8aca62d-f18a-5698-334e-3d14589b8ae1" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-24</div><div class="title">011 Linux进程</div></div></a></div><div><a href="/posts/14630.html" title="014 Linux 2.6内核进程调度队列（了解）"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/0k1JltC.jpeg?_r_=5eede737-a0bb-6d1d-9df9-52d9e557bac4" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-04-01</div><div class="title">014 Linux 2.6内核进程调度队列（了解）</div></div></a></div><div><a href="/posts/9600.html" title="016 进程控制 —— 进程创建"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/Jci6x23.png?_r_=faf0f95a-4ae7-bd43-55ff-7aab839ee21e" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-04-05</div><div class="title">016 进程控制 —— 进程创建</div></div></a></div><div><a href="/posts/59037.html" title="017 进程控制 —— 终止进程"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/fETMVUS.jpeg?_r_=1cb838ba-0266-6cab-1050-784f5fac1b2b" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-04-11</div><div class="title">017 进程控制 —— 终止进程</div></div></a></div><div><a href="/posts/28370.html" title="019 进程控制 —— 进程程序替换"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/Jci6x23.png?_r_=170c9974-b1a2-cbc8-b7b1-cbb058ba500a" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-04-22</div><div class="title">019 进程控制 —— 进程程序替换</div></div></a></div><div><a href="/posts/16008.html" title="018 进程控制 —— 进程等待"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/0k1JltC.jpeg?_r_=adca2bb9-c4bd-c370-e94c-f257d67af9e4" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-04-16</div><div class="title">018 进程控制 —— 进程等待</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/bFRjgdX.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description">时间好像总会留下点什么,或许是一个人,或许是一个梦,或许……是一段有意义的经历~</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">小米里的大麦</h1><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/huangcancan-xbc" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content"><span>👋🏻 Hi，我是 <a target="_blank" href="https://huangcancan-xbc.github.io" rel="external nofollow noreferrer noopener" style="font-weight:bold; font-size:1.1em; color:#5166f0;">小米里的大麦</a>，欢迎来看我的博客鸭！</span><br>
<span>👉 建议优先查看置顶的 <a target="_blank" href="https://huangcancan-xbc.github.io/posts/17934.html" rel="external nofollow noreferrer noopener" style="font-weight:bold; font-size:1.1em; color:#5166f0;">网站说明</a>，如有问题欢迎评论区交流！</span><br>
<span>😫 页面异常？尝试<kbd>Ctrl</kbd>+<kbd>F5</kbd></span><br>
<span>📩 联系我：<a href="mailto:hc1960074081@qq.com" rel="external nofollow noreferrer"><b>给我发送邮件🚀</b></a></span>  
</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81%E5%92%8C%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-number">1.</span> <span class="toc-text">进程状态和优先级</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81%E5%88%86%E7%B1%BB"><span class="toc-number">1.1.</span> <span class="toc-text">一、进程状态分类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E7%8A%B6%E6%80%81%E8%AF%B4%E6%98%8E"><span class="toc-number">1.1.1.</span> <span class="toc-text">特殊状态说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81%EF%BC%88%E8%BF%9B%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%81%E6%98%BE%E7%A4%BA%E5%9C%A8-STAT-%E5%AD%97%E6%AE%B5%E4%B8%8B%EF%BC%89"><span class="toc-number">1.2.</span> <span class="toc-text">二、如何查看进程状态（进程的状态显示在 STAT 字段下）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BD%BF%E7%94%A8-ps-%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. 使用 ps 命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8-top-%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. 使用 top 命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%BD%BF%E7%94%A8-proc-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. 使用 proc 文件系统</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.3.</span> <span class="toc-text">三、进程状态的生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81%E8%BD%AC%E6%8D%A2%E7%A4%BA%E6%84%8F%E5%9B%BE"><span class="toc-number">1.4.</span> <span class="toc-text">四、进程状态转换示意图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C-1%EF%BC%9A%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8E%E7%9B%91%E6%8E%A7"><span class="toc-number">1.5.</span> <span class="toc-text">实验 1：僵尸进程的创建与监控</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AE%9E%E9%AA%8C%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.5.1.</span> <span class="toc-text">1. 实验步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B%E4%BB%A3%E7%A0%81%EF%BC%9A"><span class="toc-number">1.5.2.</span> <span class="toc-text">2. 僵尸进程代码：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%BF%90%E8%A1%8C%E6%AD%A5%E9%AA%A4%EF%BC%9A"><span class="toc-number">1.5.3.</span> <span class="toc-text">3. 运行步骤：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C-2%EF%BC%9A%E5%AD%A4%E5%84%BF%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8E%E7%9B%91%E6%8E%A7"><span class="toc-number">1.6.</span> <span class="toc-text">实验 2：孤儿进程的创建与监控</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AE%9E%E9%AA%8C%E6%AD%A5%E9%AA%A4%EF%BC%9A"><span class="toc-number">1.6.1.</span> <span class="toc-text">1. 实验步骤：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%AD%A4%E5%84%BF%E8%BF%9B%E7%A8%8B%E4%BB%A3%E7%A0%81%EF%BC%9A"><span class="toc-number">1.6.2.</span> <span class="toc-text">2. 孤儿进程代码：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%BF%90%E8%A1%8C%E6%AD%A5%E9%AA%A4%EF%BC%9A-1"><span class="toc-number">1.6.3.</span> <span class="toc-text">3. 运行步骤：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%AF%B9%E6%AF%94%E6%80%BB%E7%BB%93"><span class="toc-number">1.6.4.</span> <span class="toc-text">4. 对比总结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E8%BF%9B%E7%A8%8B%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-number">1.7.</span> <span class="toc-text">五、进程的优先级</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-PRI%EF%BC%88Priority%EF%BC%8C%E4%BC%98%E5%85%88%E7%BA%A7%EF%BC%89%EF%BC%9A"><span class="toc-number">1.7.1.</span> <span class="toc-text">1. PRI（Priority，优先级）：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-NI%EF%BC%88Nice-%E5%80%BC%EF%BC%89%EF%BC%9A"><span class="toc-number">1.7.2.</span> <span class="toc-text">2. NI（Nice 值）：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.7.3.</span> <span class="toc-text">3. 注意事项</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E5%85%B6%E4%BB%96%E6%A6%82%E5%BF%B5%E8%A1%A5%E5%85%85"><span class="toc-number">1.8.</span> <span class="toc-text">六、其他概念补充</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%AB%9E%E4%BA%89%E6%80%A7%EF%BC%88Competitiveness%EF%BC%89%EF%BC%9A"><span class="toc-number">1.8.1.</span> <span class="toc-text">1. 竞争性（Competitiveness）：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%8B%AC%E7%AB%8B%E6%80%A7%EF%BC%88Independence%EF%BC%89%EF%BC%9A"><span class="toc-number">1.8.2.</span> <span class="toc-text">2. 独立性（Independence）：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%B9%B6%E8%A1%8C%EF%BC%88Parallelism%EF%BC%89%EF%BC%9A"><span class="toc-number">1.8.3.</span> <span class="toc-text">3. 并行（Parallelism）：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%B9%B6%E5%8F%91%EF%BC%88Concurrency%EF%BC%89%EF%BC%9A"><span class="toc-number">1.8.4.</span> <span class="toc-text">4. 并发（Concurrency）：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E5%88%87%E6%8D%A2"><span class="toc-number">1.8.5.</span> <span class="toc-text">进程切换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8A%E4%B8%8B%E6%96%87%E4%BF%9D%E5%AD%98"><span class="toc-number">1.8.6.</span> <span class="toc-text">上下文保存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%84%E5%AD%98%E5%99%A8%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">1.8.7.</span> <span class="toc-text">寄存器的作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E5%88%87%E6%8D%A2%E7%9A%84%E5%85%B7%E4%BD%93%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.8.8.</span> <span class="toc-text">进程切换的具体步骤</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/62772.html" title="050 传输层 —— UDP"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/0k1JltC.jpeg?_r_=2f802891-8784-4ddb-e5bd-9d61b1397323" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="050 传输层 —— UDP"/></a><div class="content"><a class="title" href="/posts/62772.html" title="050 传输层 —— UDP">050 传输层 —— UDP</a><time datetime="2025-09-12T04:00:00.000Z" title="发表于 2025-09-12 12:00:00">2025-09-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/34998.html" title="049 HTTPS 协议原理"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/fETMVUS.jpeg?_r_=c529c723-4b01-5bf8-fe19-d1438fd9563d" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="049 HTTPS 协议原理"/></a><div class="content"><a class="title" href="/posts/34998.html" title="049 HTTPS 协议原理">049 HTTPS 协议原理</a><time datetime="2025-08-28T04:00:00.000Z" title="发表于 2025-08-28 12:00:00">2025-08-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/63840.html" title="048 HTTP 协议"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/aKlysyx.png?_r_=6011401b-b224-1423-1a89-ceeead1936d4" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="048 HTTP 协议"/></a><div class="content"><a class="title" href="/posts/63840.html" title="048 HTTP 协议">048 HTTP 协议</a><time datetime="2025-08-25T04:00:00.000Z" title="发表于 2025-08-25 12:00:00">2025-08-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/38905.html" title="047 网络传输基础：TCP 连接建立与数据序列化"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/Jci6x23.png?_r_=c7a9f229-9f6b-3f2e-87d5-e6ca5316f5f5" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="047 网络传输基础：TCP 连接建立与数据序列化"/></a><div class="content"><a class="title" href="/posts/38905.html" title="047 网络传输基础：TCP 连接建立与数据序列化">047 网络传输基础：TCP 连接建立与数据序列化</a><time datetime="2025-08-22T04:00:00.000Z" title="发表于 2025-08-22 12:00:00">2025-08-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/40348.html" title="046 网络编程套接字"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/fETMVUS.jpeg?_r_=c35415b9-7cc5-c591-5bcd-f604827a0a65" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="046 网络编程套接字"/></a><div class="content"><a class="title" href="/posts/40348.html" title="046 网络编程套接字">046 网络编程套接字</a><time datetime="2025-08-15T04:00:00.000Z" title="发表于 2025-08-15 12:00:00">2025-08-15</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:hc1960074081@qq.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://weibo.com/u/7913790969" title="微博"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/bFRjgdX.jpeg" size="50px"/><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com/1918272544" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2025 By <a class="footer-bar-link" href="/" title="小米里的大麦" target="_blank">小米里的大麦</a></div></div><div id="footer-type-tips"></div><div class="js-pjax"><script>function subtitleType () {
  fetch('https://v1.hitokoto.cn')
    .then(response => response.json())
    .then(data => {
      if (true) {
        const from = '出自 ' + data.from
        const sub = ["《左传》载曰：“太上有立德，其次有立功，其次有立言，虽久不废，此之谓不朽。”","纸上得来终觉浅，绝知此事要躬行！","你太专注于未来，却没有意识到，今天正是你多年前祈求的模样，因为你眺望远方视而不见。","梦想是不会发光的，发光的是追梦的你！","答案在风中飘扬"]
        sub.unshift(data.hitokoto, from)
        window.typed = new Typed('#footer-type-tips', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('footer-type-tips').innerHTML = data.hitokoto
      }
    })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.cbd.int/typed.js@2.1.0/dist/typed.umd.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="GitHub主页">GitHub主页</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">64</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">19</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">6</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">社交</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="GitHub"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="GitHub"/><span class="back-menu-item-text">GitHub</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://space.bilibili.com/1918272544" title="哔哩哔哩"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="哔哩哔哩"/><span class="back-menu-item-text">哔哩哔哩</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://gitee.com/huang-cancan-xbc" title="Gitee"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="Gitee"/><span class="back-menu-item-text">Gitee</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">博客</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.csdn.net/Huangcancan666?type=blog" title="CSDN"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="CSDN"/><span class="back-menu-item-text">CSDN</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://juejin.cn/user/3230789931118109" title="稀土掘金"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="稀土掘金"/><span class="back-menu-item-text">稀土掘金</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 外链</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/C/" style="font-size: 0.88rem;">C++<sup>8</sup></a><a href="/tags/Git/" style="font-size: 0.88rem;">Git<sup>3</sup></a><a href="/tags/IO/" style="font-size: 0.88rem;">IO<sup>3</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>50</sup></a><a href="/tags/Obsidian/" style="font-size: 0.88rem;">Obsidian<sup>1</sup></a><a href="/tags/STL/" style="font-size: 0.88rem;">STL<sup>2</sup></a><a href="/tags/VS-Code/" style="font-size: 0.88rem;">VS Code<sup>1</sup></a><a href="/tags/%E4%BF%A1%E5%8F%B7/" style="font-size: 0.88rem;">信号<sup>3</sup></a><a href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" style="font-size: 0.88rem;">内存管理<sup>1</sup></a><a href="/tags/%E5%8E%86%E7%A8%8B/" style="font-size: 0.88rem;">历程<sup>1</sup></a><a href="/tags/%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4/" style="font-size: 0.88rem;">地址空间<sup>6</sup></a><a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 0.88rem;">数学<sup>1</sup></a><a href="/tags/%E6%A8%A1%E6%9D%BF/" style="font-size: 0.88rem;">模板<sup>1</sup></a><a href="/tags/%E7%AE%A1%E9%81%93/" style="font-size: 0.88rem;">管道<sup>2</sup></a><a href="/tags/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/" style="font-size: 0.88rem;">类与对象<sup>3</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size: 0.88rem;">线程<sup>4</sup></a><a href="/tags/%E7%BD%91%E7%AB%99/" style="font-size: 0.88rem;">网站<sup>2</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 0.88rem;">网络<sup>6</sup></a><a href="/tags/%E8%BF%9B%E7%A8%8B/" style="font-size: 0.88rem;">进程<sup>15</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="anzhiyu.scrollToDest(document.body.scrollHeight, 500)"><i class="anzhiyufont anzhiyu-icon-arrow-down"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("01/01/2025 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `这里是 小米里的大麦`,
    `芝兰生于深谷，不以无人而不芳。`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2025 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 小米里的大麦 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-olive-one.vercel.app/',
      // 自己额外添加的：
      path: location.pathname.replace(/index\.html$/, ''),
      
      region: 'ap-shanghai',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.44/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-olive-one.vercel.app/',
      region: 'ap-shanghai',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"><script async src="/js/anzhiyu/comment_barrage.js"></script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo-olive-one.vercel.app/',
        region: 'ap-shanghai',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.44/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "xiaomilidedamai@minbit.top";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://cdn.cbd.int/qrcodejs@1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script src="https://cdn.bootcdn.net/ajax/libs/echarts/4.9.0-rc.1/echarts.min.js"></script><script src="/js/footer-animal.js" defer></script><script id="click-show-text" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="false" data-text="offer,暴富,健康,offer,喜乐,成功,offer,好运,自由,offer,坚持,上岸" data-fontsize="20px" data-random="true" async="async"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script><script>//- 留言板页面弹幕
window.addEventListener('load', () => {
  const getnaokuo_danmu = () => {
    if (!window.location.pathname.startsWith('/comments/')) return; //- 判断是否是留言板页面
    const naokuo_danmu = async () => {
      const Danmaku = new EasyDanmaku({
        page: '/comments/', //- 即留言板地址
        el: '#danmu-wrap', //- 弹幕挂载节点
        line: 5, //- 弹幕行数
        speed: 20, //- 弹幕播放速度
        hover: true, //- 鼠标hover时是否暂停播放弹幕
        loop: false, //- 开启循环播放
        colourful: true, //- 开启彩色弹幕
        coefficient: 1.38, //- 弹幕密度系数
        runtime: 10, //- 循环弹幕播放时长
      });
      try {
        let danmuStore = saveToLocal.get('twikoo-danmu');
        if (!danmuStore) {
          const options = {
            method: "POST",
            body: JSON.stringify({
              "event": "GET_RECENT_COMMENTS",
              "includeReply": false,
              "pageSize": 100
            }),
            headers: { 'Content-Type': 'application/json' }
          }
          danmuStore = [];
          const response = await fetch(`https://twikoo-olive-one.vercel.app/`, options);
          if (response.ok) {
            const { data } = await response.json();
            //- console.info(data);
            data.forEach(i => {
              if (i.avatar == undefined) i.avatar = 'https://cravatar.cn/avatar/d615d5793929e8c7d70eab5f00f7f5f1?d=mp'
              danmuStore.push({ avatar: i.avatar, content: i.nick + '：' + formatDanmaku(i.comment), url: i.url + '#' + i.id })
            });
            Danmaku.batchSend(danmuStore, true);
            saveToLocal.set('twikoo-danmu', danmuStore, 0.5)
          }
          //- 格式化评论
          function formatDanmaku(str) {
            str = str.replace(/<\/*br>|[\s\uFEFF\xA0]+/g, '');
            str = str.replace(/<img.*?>/g, '[图片]');
            str = str.replace(/<a.*?>.*?<\/a>/g, '[链接]');
            str = str.replace(/<pre.*?>.*?<\/pre>/g, '[代码块]');
            str = str.replace(/<.*?>/g, '');
            return str
          }
        } else {
          Danmaku.batchSend(danmuStore, true);
        }
      } catch (err) {
        console.error("Error fetching data:", err);
      }

      document.getElementById('danmu-Btn') && (document.getElementById('danmu-Btn').innerHTML = `<button class="hide-Btn" onclick="document.getElementById('danmu-wrap').classList.remove('hide-danmu')">显示弹幕</button> <button class="hide-Btn" onclick="document.getElementById('danmu-wrap').classList.add('hide-danmu')">隐藏弹幕</button>`)
    }
    (async () => {
      if (typeof EasyDanmaku === 'function') {
        await naokuo_danmu();
      } else {
        const easyDanmakuScript = await getScript('https://npm.onmicrosoft.cn/naokuo-blog@1.2.12/js/easy-Danmaku.js');
        if (typeof EasyDanmaku === 'function') {
          await naokuo_danmu();
        } else {
          console.error('EasyDanmaku function not found even after loading the script.');
        }
      }
    })();
  }
  getnaokuo_danmu()
  document.addEventListener('pjax:complete', getnaokuo_danmu)
})</script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>