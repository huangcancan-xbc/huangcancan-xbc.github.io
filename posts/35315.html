<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>005 权限的理解 | 小米里的大麦</title><meta name="keywords" content="Linux,权限"><meta name="author" content="小米里的大麦"><meta name="copyright" content="小米里的大麦"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="005 权限的理解"><meta name="application-name" content="005 权限的理解"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="005 权限的理解"><meta property="og:url" content="https://www.minbit.top/posts/35315.html"><meta property="og:site_name" content="小米里的大麦"><meta property="og:description" content="shell 命令以及运行原理1. Shell 是什么？Shell 是用户与操作系统内核（Kernel）之间的“翻译官”。   你可以把操作系统内核想象成一个国家的总统（Kernel），他直接管理国家资源（CPU、内存、磁盘等）。但普通人（用户）无法直接和总统对话，必须通过一个“秘书”（Shell）来"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250314125923408.png?_r_=1d1bdb2c-cd11-6ea6-cd2a-e31ee46879ad"><meta property="article:author" content="小米里的大麦"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250314125923408.png?_r_=1d1bdb2c-cd11-6ea6-cd2a-e31ee46879ad"><meta name="description" content="shell 命令以及运行原理1. Shell 是什么？Shell 是用户与操作系统内核（Kernel）之间的“翻译官”。   你可以把操作系统内核想象成一个国家的总统（Kernel），他直接管理国家资源（CPU、内存、磁盘等）。但普通人（用户）无法直接和总统对话，必须通过一个“秘书”（Shell）来"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://www.minbit.top/posts/35315.html"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="manifest" href="/manifest.json"/><meta name="msapplication-TileColor" content="var(--anzhiyu-main)"/><link rel="mask-icon" href="/img/siteicon/apple-icon-180.png" color="#5bbad5"/><link rel="apple-touch-icon" sizes="180x180" href="/img/siteicon/apple-icon-180.png"/><link rel="apple-touch-icon-precomposed" sizes="180x180" href="/img/siteicon/apple-icon-180.png"/><link rel="icon" type="image/png" sizes="32x32" href="/img/siteicon/32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/img/siteicon/16.png"/><link rel="bookmark" href="/img/siteicon/apple-icon-180.png"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-2732.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2732-2048.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2388.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2388-1668.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1536-2048.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-1536.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2224.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2224-1668.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1620-2160.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2160-1620.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1290-2796.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2796-1290.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1179-2556.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2556-1179.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1284-2778.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2778-1284.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1170-2532.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2532-1170.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1125-2436.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2436-1125.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2688.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2688-1242.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-828-1792.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1792-828.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2208.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2208-1242.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-750-1334.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1334-750.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-640-1136.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1136-640.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"小米里的大麦","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":4,"basicWordCount":1999,"key":"93d1622eadde491eb0594b68ade51723.kaEiDD6A3KPzb7xv","Referer":"https://www.minbit.top/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: {"enable":true,"ck":"Jp8wwGQpp21utaFQ","LingQueMonitorID":"3LnA8U5uaxPrnwv5"},
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: 'https://twikoo-olive-one.vercel.app/',
  commentBarrageConfig:{"enable":true,"maxBarrage":10,"barrageTime":5000,"accessToken":"25c96851dd8a790c4819ad4bfbaf153c","mailMd5":"7b12ebc2be80f9159099f6ab0e16573c"},
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🧐 准备中，就快好了，真的！😭","📚 正在学习中，加油！","🎵 喜欢听音乐，喜欢看动漫"]},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 小米里的大麦","link":"链接: ","source":"来源: 小米里的大麦","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-right"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '小米里的大麦',
  title: '005 权限的理解',
  postAI: '这篇文章介绍了Shell作为用户与操作系统内核之间的“翻译官”的作用，解释了为什么不能直接操作内核以及Shell的比喻意义。文章详细阐述了Linux权限的概念，包括用户类型详解（超级用户和普通用户）、用户切换操作、sudo权限配置以及最佳实践建议。此外，文章还解释了Linux权限管理，包括文件的权限和文件属性，以及权限认证和权限类型。通过这些内容，读者可以更好地理解Shell和Linux权限管理的核心概念和操作方法。',
  pageFillDescription: 'shell 命令以及运行原理, 1. Shell 是什么？, 2. 为什么不能直接操作内核？, 3. Shell 的媒婆比喻, 4. 图形界面（GUI）也是 Shell？, 5. Shell 的高级功能, Linux 权限的概念, 一、用户类型详解, 1. 超级用户（root）, 2. 普通用户, 二、用户切换操作详解, 1. su 命令 —— 切换用户的命令。, 2. su 与 su - 的区别, 三、sudo 基础权限配置（了解后面详讲）, 1. sudo 基础, 2. 配置 sudo 权限（这是一种方法可以先了解不建议现在进行配置）, 3. 验证配置, 4. 典型错误处理, x3Dx3D四、最佳实践建议x3Dx3D, 五、操作流程图解, Linux 权限管理, 一、Linux 权限管理, 二、文件的权限和文件属性, 1. 文件访问者的分类（人）, 2. 权限表示方式, 3. 文件类型和访问权限（事物属性）, 三、文件访问权限的相关设置方法, 1. chmod - 设置文件的访问权限, 八进制表示法：, 2. chown - 修改文件的拥有者, 3. chgrp - 修改文件或目录的所属组, 总结：, file 命令, 传道解惑, Q1：起始权限问题：普通文件：664目录文件：775为什么我们创建文件的默认权限是我们现在看到的样子？, umask 是什么？, Q2：关于文件权限 -r--rw---- 1 a a ... 的情况怎么解释？, 权限判断顺序：, 目录的权限, 权限细节及例子 —— 想要保护多人 共享 文件数据, 解决方案：引入粘滞位, 总结命令以及运行原理是什么是用户与操作系统内核之间的翻译官你可以把操作系统内核想象成一个国家的总统他直接管理国家资源内存磁盘等但普通人用户无法直接和总统对话必须通过一个秘书来传达需求用户通过输入命令比如将命令翻译成内核能理解的指令交给内核执行内核处理完成后结果再通过返回给用户为什么不能直接操作内核内核是操作系统的核心直接操作风险极高比如直接让内核删除某个文件就像让总统亲自去处理一个普通任务虽然高效但风险极高一旦出错可能导致系统崩溃的存在是为了安全和易用用户无需理解底层硬件细节比如如何读写磁盘通过权限控制和语法检查避免用户误操作导致系统崩溃的媒婆比喻是媒婆内核是村花小花你想追求小花让内核干活但不好意思直接开口直接操作内核于是你找媒婆王婆帮忙你告诉王婆需求输入命令王婆转达给小花解析命令并调用内核小花办好后王婆再把结果告诉你返回输出媒婆的作用翻译需求用户说想送花媒婆翻译成小花能理解的执行送花程序过滤错误用户说送一车榴莲媒婆会提醒榴莲不在允许的礼物列表语法错误提示权限检查用户想进小花家的后院系统敏感目录媒婆会核实身份权限验证为什么必须通过媒婆直接表白行不行同为什么不能直接操作内核直接操作内核的风险用户可能说错话输入错误命令导致小花误解系统崩溃用户可能要求不合理删除系统关键文件小花直接拒绝权限不足媒婆的安全保障权限控制媒婆会检查用户身份比如普通用户不能修改系统配置提权需要密码错误拦截用户输入删库跑路媒婆会反问你确定吗前的确认提示如果媒婆罢工了崩溃用户会陷入沉默无法与小花沟通只能重启终端找新媒婆内核依然在运行小花继续管理村庄但用户无法直接互动解决方案使用备用媒婆不同类型通过远程媒婆连接继续工作终极金句没有媒婆的牵线程序员的爱情操作内核将寸步难行没有的翻译用户与内核的对话将鸡同鸭讲图形界面也是无论是命令行还是图形界面本质都是用户与内核的中介的双击图标图形界面程序调用内核完成任务的输入命令调用内核完成任务区别在于交互方式更高效适合程序员和自动化脚本更直观适合普通用户的高级功能脚本编程将多个命令写成脚本一键执行复杂任务管道将一个命令的输出作为另一个命令的输入例如列出所有文件再过滤出文件重定向将命令结果保存到文件例如将文件列表保存到权限的概念一用户类型详解超级用户权限拥有系统的最高权限可以执行任何操作包括安装删除软件修改系统设置删除系统文件等危险行为操作不当可能导致系统崩溃提示符如在命令行中表示当前是用户默认路径这是用户的家目录危险提示建议平时使用普通用户而非用户避免误操作导致的系统崩溃或损坏普通用户权限只能访问和操作自己的文件目录默认在用户名下以及有限的系统资源无法修改系统配置或执行需要高权限的操作提示符如表示当前是普通用户默认路径用户名每个普通用户都会有自己的家目录优势使用普通用户更安全避免误操作破坏系统二用户切换操作详解命令切换用户的命令选项用户名不带参数默认切换到用户需要输入密码带用户名切换到指定的用户需要输入目标用户密码具体场景注意各自切换所要输入的密码普通用户输入密码成功切换到普通用户成功切换到普通用户普通用户其他普通用户输入密码成功切换到用户与的区别命令环境变量工作目录使用场景保留当前环境当前目录临时执行少量命令重新加载用户环境目标用户家目录需要完整用户环境时示例对比使用使用三基础权限配置了解后面详讲基础命令作用使用命令普通用户可以临时以权限执行特权命令要求用户必须在文件中有权限设置配置权限这是一种方法可以先了解不建议现在进行配置配置权限时建议使用命令因为它可以在保存前检查语法错误避免不小心出错切换到用户切换到使用编辑文件进入编辑模式自动检查语法配置示例允许普通用户执行所有命令且无需密码允许组的成员使用验证配置如果配置成功可以通过执行命令来验证如果配置成功可以执行命令而无需输入密码典型错误处理当用户不在文件中时可能会看到以下错误解决方法切换到用户将用户加入组确保文件中有以下配置四最佳实践建议日常使用普通用户避免直接以用户登录普通用户更安全使用执行特权命令重要操作前备份在执行任何高风险操作时尤其是以权限进行修改时要确保有备份权限最小化只为需要的用户分配权限避免随意赋予权限会话管理进入环境后要及时使用或退出使用命令确认当前用户身份避免误操作五操作流程图解普通用户环境需要执行特权命令命令有权限执行成功无权限拒绝执行需要切换用户切换到输入密码切换其他用户输入目标用户密码权限管理一权限管理系统中的权限管理决定了文件和目录的访问控制权限管理涉及两个主要方面权限认证确定谁用户可以访问文件或目录权限类型确定可以对文件或目录执行什么操作读写执行二文件的权限和文件属性文件访问者的分类人权限分为三类文件或目录的所有者拥有者即文件的创建者或被赋予所有权的用户文件或目录的所属组的用户即拥有该文件或目录的同组成员其他用户指的是既不是文件所有者也不属于文件所属组的用户权限表示方式举个栗子并逐一解析怎么看对应着文件类型第一个字符表示这是一个目录文件文件权限后面的个字符位一看表示用户文件所有者具有读写执行权限表示组用户具有读写执行权限表示其他用户具有读和执行权限但没有写权限其他信息表示该目录下的硬链接数量前一个表示文件的拥有者是后一个表示文件的所属组是表示该文件或目录的大小单位为字节表示文件的最后修改时间表示文件的名称文件类型和访问权限事物属性文件类型第一位字符文件类型字符含义示例目录文件表示这是一个目录文件普通文件表示这是一个普通文件软链接类似于的快捷方式块设备文件如硬盘光驱等管道文件用于进程间通信字符设备文件如终端设备打印机等套接口文件用于网络通信等权限后三位字符权限字符含义对应数字说明读权限对文件允许读取文件内容对目录允许列出目录中的文件写权限对文件允许修改文件内容对目录允许创建删除移动目录中的文件执行权限对文件允许执行文件对目录允许进入该目录没有权限表示没有该项权限权限的组合后三位字符表示权限权限组合含义数字表示说明读写执行权限可完全访问用户组其他均有读写执行权限读写权限没有执行权限用户组其他可以读取和修改文件但不能执行读执行权限没有写权限用户组其他可以读取和执行文件但不能修改只有读权限用户组其他只能读取文件无法修改或执行写执行权限没有读权限用户组其他可以修改文件并执行文件但不能读取文件只有执行权限用户组其他只能执行文件无法读取或修改文件没有任何权限用户组其他没有任何权限每个权限都有两个状态有权限或没有权限这恰好对应了二进制的和所以数字表示的由来是二进制权限符号读写执行八进制数字表示二进制三文件访问权限的相关设置方法设置文件的访问权限命令用于设置文件的访问权限它允许你改变文件或目录的权限分为两种方式使用符号表示法和使用八进制表示法普通用户普通用户只能修改自己拥有的文件或目录的权限如果普通用户尝试修改其他用户的文件或目录权限会提示权限被拒绝用户用户是系统管理员具有所有权限因此可以修改任何文件或目录的权限语法格式参数权限文件名常用选项递归地修改目录和其中所有文件的权限权限的表示方法符号描述向权限范围增加权限向权限范围取消权限设置权限覆盖现有权限用户符号符号描述拥有者所属组其他用户所有用户权限符号符号描述读取权限写入权限执行权限示例命令说明给文件的拥有者添加写权限去掉其他用户的执行权限给所有用户赋予执行权限其他权限被去除八进制表示法权限组合八进制数字说明读取写入执行权限读取写入权限读取执行权限读取权限写入执行权限写入权限执行权限无权限示例命令说明设置文件权限为即拥有者和所属组有读写权限其他用户只有读权限设置文件权限为即拥有者有读写权限拥有者有读写权限所属组有读权限其他用户没有权限修改文件的拥有者命令用于修改文件的所有者和所属组普通用户普通用户只能更改自己拥有的文件的所有者如果尝试更改其他用户的文件或目录的拥有者普通用户会看到用户用户能够修改任何文件或目录的拥有者不受任何限制语法格式参数用户名文件名常用选项递归地修改目录和其中所有文件的权限示例命令说明将文件的拥有者更改为递归地将目录及其子文件的所有者更改为修改文件或目录的所属组命令用于修改文件或目录的所属组普通用户普通用户只能更改自己拥有的文件或目录的所属组如果尝试更改其他用户的文件或目录的所属组则会提示用户用户可以修改任何文件或目录的所属组无论该文件是否属于或其他用户语法格式参数用户组名文件名常用选项递归地修改目录和其中所有文件的权限示例命令说明将文件的所属组更改为总结操作类型普通用户能否执行用户能否执行执行成功失败修改权限只能修改自己拥有的文件可以修改任何文件普通用户成功文件属于自己失败修改拥有者只能修改自己拥有的文件可以修改任何文件普通用户成功文件属于自己失败修改所属组只能修改自己拥有的文件可以修改任何文件普通用户成功文件属于自己失败命令命令用于识别文件的类型它会根据文件的内容格式以及文件头部的标识来判断分析文件内部的结构来推测其类型不依赖于文件的扩展名非常有用语法选项文件或目录常用选项显示详细的执行过程帮助你分析程序的执行情况例如它可以显示命令如何判断文件类型通常在调试时很有用尝试解压缩压缩文件并分析压缩文件中的内容如果你有一个或文件使用可以让查看并识别压缩文件内部的内容类型示例输出文件的类型如解压并识别压缩文件内容类型传道解惑起始权限问题普通文件目录文件为什么我们创建文件的默认权限是我们现在看到的样子默认权限的设置与文件创建权限掩码有关系它控制了文件或目录在创建时默认的权限我们创建普通文件和目录时通常会看到不同的权限这是因为操作系统使用了一种减法策略最终权限起始权限根据来修改文件和目录的默认权限决定了文件和目录创建时权限的减法规则我们最终看到的其实是已经套公式算好的普通文件默认给普通文件的起始权限其实是目录文件默认给目录文件的起始权限其实是是什么是一个权限掩码它定义了在文件或目录创建时通过从系统的默认权限中去除权限来决定最终的权限的值表示哪些权限会被去除而最终权限是通过使用按位与操作来计算的默认的权限是固定的即普通文件的起始权限为目录的起始权限为用来去除权限使用的规则是按位与最终权限起始权限是对值取反即对中的每一位进行反转变成变成然后与默认权限进行按位与运算如果需要查看当前的值可以运行命令常见的值的值虽然会显示的四位数字中第一位表示特殊权限如粘滞位后三位才是基本权限但普通文件目录的默认权限计算时通常只关注后三位常见的值值解释结果权限普通文件结果权限目录文件所有者组其他用户都没有限制其他用户没有写权限只有文件拥有者有权限设置与效果的值会影响文件和目录的默认权限当你修改时操作系统会自动改变你创建的文件和目录的默认权限例如如果设置则普通文件的权限会变为去除其他用户的写权限目录的权限会变为去除其他用户的写权限可以通过以下命令查看和设置查看当前值设置为关于文件权限的情况怎么解释在文件权限系统中拥有者的权限和所属组的权限是独立的因此可能会出现拥有者的权限比所属组更少的情况文件的权限可能是通过某些命令错误地配置的例如管理员或拥有者可能故意将拥有者的权限设置得比所属组的权限少这种情况可能是在文件创建时由于错误的命令或文件权限管理不当造成的当然也有可能是必须的因为这种现象并非错误关键点拥有者权限和所属组权限独立拥有者权限只能读取文件但不能修改没有写权限所属组权限组可以读写文件但不具有执行权限权限判断顺序在系统中在进行认证的时候只能选择一个角色进行认证文件的权限是根据三种不同的身份来判断的文件拥有者文件所属组和其他用户系统在判断文件权限时会先检查文件拥有者的权限如果拥有者权限不足再检查所属组的权限最后才检查其他用户的权限文件拥有者权限权限系统首先会检查当前操作用户是否是文件的拥有者如果是则优先使用文件拥有者的权限来进行访问判断所属组权限权限如果当前用户不是文件的拥有者但属于文件的所属组则会检查文件所属组的权限其他用户权限权限如果当前用户既不是文件的拥有者也不属于文件的所属组那么就会检查其他用户的权限解决方法检查文件的权限设置首先确认文件的权限是如何设置的如果文件的拥有者权限被误设为而所属组权限是可以使用修改文件的拥有者权限角色切换如果你仅能选择一个角色进行认证但需要更高权限来修改文件考虑切换到具有更高权限的角色例如通过进行管理员认证文件所有权调整如果你不是文件的拥有者但需要进行修改考虑使用或更改文件的拥有者或所属组或者请求管理员为你添加权限目录的权限理解目录权限的三个关键点可读权限决定是否允许我们查看指定目录下的文件内容如果没有读权限即使目录本身是可执行的用户也无法看到目录中的文件列表例如无法用查看该目录下的文件可写权限决定是否允许我们在当前目录下进行创建更改删除主要如果没有写权限用户就不能在该目录中创建新文件不能删除文件也不能重命名文件一个文件能否被删除并不由文件本身决定由这个文件所处的目录决定可执行权限决定是否允许用户进入对应的目录如果一个目录没有执行权限即使你有其他权限也无法进入该目录进行任何操作比如无法进入该目录权限细节及例子想要保护多人共享文件数据假设用户张三在自己的目录下创建了一个文件并且给自己设置了文件权限例如这意味着张三可以读写文件而其他用户只能读取文件看起来应该是其他用户不能删除文件对吧但是实际上其他用户仍然可以删除文件即使他们没有写权限这是因为文件的删除权限是由目录的权限决定的而不是文件的权限张三在自己的文件夹里放了一本书文件即使没有给其他人修改这本书的权限如果他们对张三存放书的那个房间目录有写入权限他们仍然能够把张三的书从房间里移除或删除这看起来不太公平因为张三并没有允许别人动他的东西如果去掉了共享目录的权限张三同时也无法创建文件啦共享目录共享体现在哪里呢解决方案引入粘滞位为了避免一个用户删除其他用户创建的文件引入了粘滞位的概念粘滞位是一个特殊的权限用来限制在目录中删除文件的权限具体来说只有以下三类用户才能删除目录中的文件超级管理员用户可以删除任何文件不受限制目录的所有者目录的拥有者可以删除该目录中的文件文件的所有者文件的拥有者可以删除自己创建的文件如何设置粘滞位可以使用命令来给目录设置粘滞位示例假设我们有一个目录这是一个共享目录所有用户都可以在其中创建文件如果没有粘滞位任何具有写权限的用户都可以删除目录中的文件即使文件是由其他用户创建的但如果我们给目录设置了粘滞位粘滞位生效末尾为设置了粘滞位后只有以下三类用户可以删除文件用户可以删除目录中的任何文件该目录的所有者例如管理员可以删除文件文件的拥有者例如创建文件的用户可以删除自己的文件这样即使其他用户拥有对目录的写权限也无法删除其他用户创建的文件增强了安全性总结目录权限可读权限是否可以列出该目录中的文件没有权限即使有权限也无法执行或查看目录中的内容可写权限是否可以在目录中创建删除或重命名文件没有权限用户无法创建删除或重命名目录中的文件可执行权限是否可以进入该目录没有权限即使有读权限也无法进入目录家目录权限通常情况下用户的家目录权限是即只有该用户和用户能访问和操作其家目录中的文件其他用户无法访问查看或修改这些文件这种权限设置通常用于保护用户的个人文件使其不被其他用户看到或修改共享目录中的权限管理在共享目录中其他用户通常有读取创建和修改文件的权限但为了避免文件被随意删除可以设置粘滞位如果去掉共享目录的写权限用户将无法在目录中创建文件或删除文件这也意味着如果一个目录没有写权限那么所有用户都不能在其中创建或删除文件目录就无法作为有效的共享目录',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-03-17 00:00:00',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 10 || hour >= 20
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://github.com/huangcancan-xbc/Drawing-bed/blob/master/Blog/20250307201719879.png?raw=true"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">社交</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="GitHub"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="GitHub"/><span class="back-menu-item-text">GitHub</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://gitee.com/huang-cancan-xbc" title="gitee"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="gitee"/><span class="back-menu-item-text">gitee</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">博客</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.csdn.net/Huangcancan666?type=blog" title="CSDN"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="CSDN"/><span class="back-menu-item-text">CSDN</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://juejin.cn/user/3230789931118109" title="稀土掘金"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="稀土掘金"/><span class="back-menu-item-text">稀土掘金</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">小米里的大麦</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="fa fa-chart-bar faa-tada"></i><span> 统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li></ul></div></div></div><div id="nav-right"><div id="nav-naoDark"><div class="container"><div class="components"><div class="main-button"><div class="moon"></div><div class="moon"></div><div class="moon"></div></div><div class="daytime-backgrond"></div><div class="daytime-backgrond"></div><div class="daytime-backgrond"></div><div class="cloud"><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div></div><div class="cloud-light"><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div></div><div class="stars"><div class="star big"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star big"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star medium"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star medium"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star small"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star small"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div></div></div></div></div><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250403212543768.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250403212543768.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250403212622868.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250403212622868.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/C/" style="font-size: 1.05rem;">C++<sup>6</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>8</sup></a><a href="/tags/Linux-2-6/" style="font-size: 1.05rem;">Linux 2.6<sup>1</sup></a><a href="/tags/Linux%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" style="font-size: 1.05rem;">Linux开发工具<sup>1</sup></a><a href="/tags/Obsidian/" style="font-size: 1.05rem;">Obsidian<sup>1</sup></a><a href="/tags/STL/" style="font-size: 1.05rem;">STL<sup>1</sup></a><a href="/tags/git/" style="font-size: 1.05rem;">git<sup>1</sup></a><a href="/tags/make-file/" style="font-size: 1.05rem;">make file<sup>1</sup></a><a href="/tags/yum%E6%BA%90/" style="font-size: 1.05rem;">yum源<sup>1</sup></a><a href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" style="font-size: 1.05rem;">内存管理<sup>1</sup></a><a href="/tags/%E5%AD%A6%E4%B9%A0%E5%8E%86%E7%A8%8B/" style="font-size: 1.05rem;">学习历程<sup>1</sup></a><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/" style="font-size: 1.05rem;">操作系统基础<sup>1</sup></a><a href="/tags/%E6%9D%83%E9%99%90/" style="font-size: 1.05rem;">权限<sup>1</sup></a><a href="/tags/%E6%A8%A1%E6%9D%BF/" style="font-size: 1.05rem;">模板<sup>1</sup></a><a href="/tags/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/" style="font-size: 1.05rem;">环境变量<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B/" style="font-size: 1.05rem;">算法竞赛<sup>1</sup></a><a href="/tags/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/" style="font-size: 1.05rem;">类与对象<sup>3</sup></a><a href="/tags/%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA/" style="font-size: 1.05rem;">网站搭建<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%AB%99%E9%AD%94%E6%94%B9/" style="font-size: 1.05rem;">网站魔改<sup>1</sup></a><a href="/tags/%E8%BF%9B%E5%BA%A6%E6%9D%A1/" style="font-size: 1.05rem;">进度条<sup>1</sup></a><a href="/tags/%E8%BF%9B%E7%A8%8B/" style="font-size: 1.05rem;">进程<sup>2</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/05/"><span class="card-archive-list-date">五月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/04/"><span class="card-archive-list-date">四月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/03/"><span class="card-archive-list-date">三月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">13</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/02/"><span class="card-archive-list-date">二月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/01/"><span class="card-archive-list-date">一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div><div id="console-naoDark"><div class="container"><div class="components"><div class="main-button"><div class="moon"></div><div class="moon"></div><div class="moon"></div></div><div class="daytime-backgrond"></div><div class="daytime-backgrond"></div><div class="daytime-backgrond"></div><div class="cloud"><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div></div><div class="cloud-light"><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div></div><div class="stars"><div class="star big"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star big"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star medium"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star medium"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star small"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star small"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div></div></div></div></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/" itemprop="url">Linux</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/Linux/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Linux</span></a><a class="article-meta__tags" href="/tags/%E6%9D%83%E9%99%90/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>权限</span></a></span></div></div><h1 class="post-title" itemprop="name headline">005 权限的理解</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-03-16T16:00:00.000Z" title="发表于 2025-03-17 00:00:00">2025-03-17</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-03-16T16:00:00.000Z" title="更新于 2025-03-17 00:00:00">2025-03-17</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">7k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>22分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="005 权限的理解"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为西安"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>西安</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250314125923408.png?_r_=1d1bdb2c-cd11-6ea6-cd2a-e31ee46879ad"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><div class="post-ai-description"><div class="ai-title"><i class="anzhiyufont anzhiyu-icon-bilibili"></i><div class="ai-title-text">AI-摘要</div><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i><i class="anzhiyufont anzhiyu-icon-circle-dot" title="朗读摘要"></i><div id="ai-tag">小米里的大麦 GPT</div></div><div class="ai-explanation">AI初始化中...</div><div class="ai-btn-box"><div class="ai-btn-item">介绍自己 🙈</div><div class="ai-btn-item">生成本文简介 👋</div><div class="ai-btn-item">推荐相关文章 📖</div><div class="ai-btn-item">前往主页 🏠</div><div class="ai-btn-item" id="go-tianli-blog">前往爱发电购买</div></div><script data-pjax src="/js/anzhiyu/ai_abstract.js"></script></div><article class="post-content" id="article-container" itemscope itemtype="https://www.minbit.top/posts/35315.html"><header><a class="post-meta-categories" href="/categories/Linux/" itemprop="url">Linux</a><a href="/tags/Linux/" tabindex="-1" itemprop="url">Linux</a><a href="/tags/%E6%9D%83%E9%99%90/" tabindex="-1" itemprop="url">权限</a><h1 id="CrawlerTitle" itemprop="name headline">005 权限的理解</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">小米里的大麦</span><time itemprop="dateCreated datePublished" datetime="2025-03-16T16:00:00.000Z" title="发表于 2025-03-17 00:00:00">2025-03-17</time><time itemprop="dateCreated datePublished" datetime="2025-03-16T16:00:00.000Z" title="更新于 2025-03-17 00:00:00">2025-03-17</time></header><h2 id="shell-命令以及运行原理"><a href="#shell-命令以及运行原理" class="headerlink" title="shell 命令以及运行原理"></a>shell 命令以及运行原理</h2><h3 id="1-Shell-是什么？"><a href="#1-Shell-是什么？" class="headerlink" title="1. Shell 是什么？"></a>1. Shell 是什么？</h3><p><strong>Shell 是用户与操作系统内核（Kernel）之间的“翻译官”。</strong>  </p>
<p>你可以把操作系统内核想象成一个国家的总统（Kernel），他直接管理国家资源（CPU、内存、磁盘等）。但普通人（用户）无法直接和总统对话，必须通过一个“秘书”（Shell）来传达需求。  </p>
<ul>
<li><strong>用户通过 Shell 输入命令</strong>（比如 <code>ls</code>、<code>cd</code>）。  </li>
<li><strong>Shell 将命令“翻译”成内核能理解的指令</strong>，交给内核执行。  </li>
<li><strong>内核处理完成后，结果再通过 Shell 返回给用户</strong>。</li>
</ul>
<h3 id="2-为什么不能直接操作内核？"><a href="#2-为什么不能直接操作内核？" class="headerlink" title="2. 为什么不能直接操作内核？"></a>2. 为什么不能直接操作内核？</h3><ul>
<li><strong>内核是操作系统的核心，直接操作风险极高</strong>。比如，直接让内核删除某个文件，就像让总统亲自去处理一个普通任务——虽然高效但风险极高，一旦出错可能导致系统崩溃。</li>
<li><strong>Shell 的存在是为了安全和易用</strong>：  <ul>
<li>用户无需理解底层硬件细节（比如如何读写磁盘）。  </li>
<li>Shell 通过权限控制和语法检查，避免用户误操作导致系统崩溃。</li>
</ul>
</li>
</ul>
<hr>
<h3 id="3-Shell-的“媒婆”比喻"><a href="#3-Shell-的“媒婆”比喻" class="headerlink" title="3. Shell 的“媒婆”比喻"></a>3. Shell 的“媒婆”比喻</h3><p><strong>Shell 是“媒婆”，内核是“村花小花”</strong>：你想追求小花（让内核干活），但不好意思直接开口（直接操作内核）。于是你找媒婆王婆（Shell）帮忙：  </p>
<ul>
<li>你告诉王婆需求（输入命令）。  </li>
<li>王婆转达给小花（Shell 解析命令并调用内核）。  </li>
<li>小花办好后，王婆再把结果告诉你（Shell 返回输出）。</li>
</ul>
<p><strong>媒婆的作用</strong>：  </p>
<ul>
<li><strong>翻译需求</strong>：用户说“想送花”，媒婆翻译成小花能理解的“执行送花程序”。  </li>
<li><strong>过滤错误</strong>：用户说“送一车榴莲”，媒婆会提醒“榴莲不在允许的礼物列表”（语法错误提示）。  </li>
<li><strong>权限检查</strong>：用户想进小花家的后院（系统敏感目录），媒婆会核实身份（权限验证）。</li>
</ul>
<p><strong>为什么必须通过媒婆？直接表白行不行？（<em>同为什么不能直接操作内核</em>）</strong></p>
<ul>
<li><strong>直接操作内核的风险</strong>：  <ul>
<li>用户可能说错话（输入错误命令），导致小花误解（系统崩溃）。  </li>
<li>用户可能要求不合理（删除系统关键文件），小花直接拒绝（权限不足）。</li>
</ul>
</li>
<li><strong>媒婆的安全保障</strong>：  <ul>
<li><strong>权限控制</strong>：媒婆会检查用户身份，比如普通用户不能修改系统配置（<code>sudo</code> 提权需要密码）。  </li>
<li><strong>错误拦截</strong>：用户输入“删库跑路”，媒婆会反问“你确定吗？”（<code>rm -rf /</code> 前的确认提示）。</li>
</ul>
</li>
</ul>
<p><strong>如果媒婆罢工了（Shell 崩溃）？</strong></p>
<ul>
<li><strong>用户会陷入沉默</strong>：无法与小花沟通，只能重启终端（找新媒婆）。  </li>
<li><strong>内核依然在运行</strong>：小花继续管理村庄，但用户无法直接互动。  </li>
<li><strong>解决方案</strong>：  <ul>
<li>使用备用媒婆（不同 Shell 类型：Bash、Zsh、Fish）。  </li>
<li>通过远程媒婆（SSH 连接）继续工作。</li>
</ul>
</li>
</ul>
<p><strong>终极金句</strong>：  </p>
<blockquote>
<p>没有媒婆的牵线，程序员的爱情（操作内核）将寸步难行；<br>没有 Shell 的翻译，用户与内核的对话将鸡同鸭讲。</p>
</blockquote>
<hr>
<h3 id="4-图形界面（GUI）也是-Shell？"><a href="#4-图形界面（GUI）也是-Shell？" class="headerlink" title="4. 图形界面（GUI）也是 Shell？"></a>4. 图形界面（GUI）也是 Shell？</h3><ul>
<li><strong>无论是命令行（CLI）还是图形界面（GUI），本质都是用户与内核的中介</strong>。  <ul>
<li><strong>Windows 的 GUI</strong>：双击图标 → 图形界面程序调用内核完成任务。  </li>
<li><strong>Linux 的 Shell</strong>：输入命令 → Shell 调用内核完成任务。</li>
</ul>
</li>
<li><strong>区别在于交互方式</strong>：  <ul>
<li>CLI 更高效，适合程序员和自动化脚本。  </li>
<li>GUI 更直观，适合普通用户。</li>
</ul>
</li>
</ul>
<h3 id="5-Shell-的高级功能"><a href="#5-Shell-的高级功能" class="headerlink" title="5. Shell 的高级功能"></a>5. Shell 的高级功能</h3><ul>
<li><strong>脚本编程</strong>：将多个命令写成脚本，一键执行复杂任务。  </li>
<li><strong>管道（<code>|</code>）</strong>：将一个命令的输出作为另一个命令的输入。例如：<code>ls | grep .txt</code>（列出所有文件，再过滤出 <code>.txt</code> 文件）。  </li>
<li><strong>重定向（<code>&gt;</code>、<code>&gt;&gt;</code>）</strong>：将命令结果保存到文件。例如：<code>ls &gt; files.txt</code>（将文件列表保存到 <code>files.txt</code>）。</li>
</ul>
<hr>
<h2 id="Linux-权限的概念"><a href="#Linux-权限的概念" class="headerlink" title="Linux 权限的概念"></a>Linux 权限的概念</h2><h3 id="一、用户类型详解"><a href="#一、用户类型详解" class="headerlink" title="一、用户类型详解"></a>一、用户类型详解</h3><h4 id="1-超级用户（root）"><a href="#1-超级用户（root）" class="headerlink" title="1. 超级用户（root）"></a>1. 超级用户（root）</h4><ul>
<li><strong>权限</strong>：拥有系统的最高权限，可以执行任何操作。包括安装、删除软件、修改系统设置、删除系统文件等危险行为。操作不当可能导致系统崩溃。</li>
<li><strong>提示符</strong>：<code>#</code>（如 <code>[root@server ~]#</code>），在命令行中，<code>#</code> 表示当前是 root 用户。</li>
<li><strong>默认路径</strong>：<code>/root</code>，这是 root 用户的家目录。</li>
<li><strong>危险提示</strong>：建议平时使用普通用户，而非 root 用户，避免误操作导致的系统崩溃或损坏。</li>
</ul>
<h4 id="2-普通用户"><a href="#2-普通用户" class="headerlink" title="2. 普通用户"></a>2. 普通用户</h4><ul>
<li><strong>权限</strong>：只能访问和操作自己的文件目录（默认在 <code>/home/用户名</code> 下），以及有限的系统资源。无法修改系统配置或执行需要高权限的操作。</li>
<li><strong>提示符</strong>：<code>$</code>（如 <code>[user@server ~]$</code>），表示当前是普通用户。</li>
<li><strong>默认路径</strong>：<code>/home/用户名</code>，每个普通用户都会有自己的家目录。</li>
<li><strong>优势</strong>：使用普通用户更安全，避免误操作破坏系统。</li>
</ul>
<h3 id="二、用户切换操作详解"><a href="#二、用户切换操作详解" class="headerlink" title="二、用户切换操作详解"></a>二、用户切换操作详解</h3><h4 id="1-su-命令-——-切换用户的命令。"><a href="#1-su-命令-——-切换用户的命令。" class="headerlink" title="1. su 命令 —— 切换用户的命令。"></a>1. <code>su</code> 命令 —— 切换用户的命令。</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su [选项] [用户名]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>不带参数</strong>：默认切换到 root 用户（需要输入 root 密码）。</li>
<li><strong>带用户名</strong>：切换到指定的用户（需要输入目标用户密码）。</li>
</ul>
<p><strong>具体场景（注意各自切换所要输入的密码）：</strong></p>
<ol>
<li><p><strong>普通用户 → root</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[user@server ~]$ su -</span><br><span class="line">Password:  				<span class="comment"># 输入 root 密码</span></span><br><span class="line">[root@server ~]#  		<span class="comment"># 成功切换到 root</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>root → 普通用户</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@server ~]# su - user</span><br><span class="line">[user@server ~]$  		<span class="comment"># 成功切换到普通用户 user</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>普通用户 → 其他普通用户</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[user1@server ~]$ su - user2</span><br><span class="line">Password:  				<span class="comment"># 输入 user2 密码</span></span><br><span class="line">[user2@server ~]$  		<span class="comment"># 成功切换到 user2 用户</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="2-su-与-su-的区别"><a href="#2-su-与-su-的区别" class="headerlink" title="2. su 与 su - 的区别"></a>2. <code>su</code> 与 <code>su -</code> 的区别</h4><table>
<thead>
<tr>
<th>命令</th>
<th>环境变量</th>
<th>工作目录</th>
<th>使用场景</th>
</tr>
</thead>
<tbody><tr>
<td><code>su</code></td>
<td>保留当前环境</td>
<td>当前目录</td>
<td>临时执行少量命令</td>
</tr>
<tr>
<td><code>su -</code></td>
<td>重新加载用户环境</td>
<td>目标用户家目录</td>
<td>需要完整用户环境时</td>
</tr>
</tbody></table>
<p><strong>示例对比：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用 su</span></span><br><span class="line">[root@server /]# su user</span><br><span class="line">[user@server /]$ <span class="built_in">pwd</span></span><br><span class="line">/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 su -</span></span><br><span class="line">[root@server /]# su - user</span><br><span class="line">[user@server ~]$ <span class="built_in">pwd</span></span><br><span class="line">/home/user</span><br></pre></td></tr></table></figure>

<h3 id="三、sudo-基础权限配置（了解，后面详讲）"><a href="#三、sudo-基础权限配置（了解，后面详讲）" class="headerlink" title="三、sudo 基础权限配置（了解，后面详讲）"></a>三、sudo 基础权限配置（了解，后面详讲）</h3><h4 id="1-sudo-基础"><a href="#1-sudo-基础" class="headerlink" title="1. sudo 基础"></a>1. sudo 基础</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> &lt;命令&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>作用</strong>：使用 <code>sudo</code> 命令，普通用户可以临时以 root 权限执行特权命令。</li>
<li><strong>要求</strong>：用户必须在 <code>/etc/sudoers</code> 文件中有权限设置。</li>
</ul>
<h4 id="2-配置-sudo-权限（这是一种方法，可以先了解，不建议现在进行配置）"><a href="#2-配置-sudo-权限（这是一种方法，可以先了解，不建议现在进行配置）" class="headerlink" title="2. 配置 sudo 权限（这是一种方法，可以先了解，不建议现在进行配置）"></a>2. 配置 sudo 权限（这是一种方法，可以先了解，不建议现在进行配置）</h4><p>配置 <code>sudo</code> 权限时，建议使用 <code>visudo</code> 命令，因为它可以在保存前检查语法错误，避免不小心出错。</p>
<ol>
<li><p><strong>切换到 root 用户</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su -  <span class="comment"># 切换到 root</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>使用 visudo 编辑 <code>/etc/sudoers</code> 文件</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">visudo  <span class="comment"># 进入编辑模式，自动检查语法</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>配置示例</strong>：</p>
<ul>
<li><p>允许普通用户 <code>user</code> 执行所有命令，且无需密码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user    ALL=(ALL)       NOPASSWD: ALL</span><br></pre></td></tr></table></figure>
</li>
<li><p>允许 <code>wheel</code> 组的成员使用 <code>sudo</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%wheel  ALL=(ALL)       ALL</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h4 id="3-验证配置"><a href="#3-验证配置" class="headerlink" title="3. 验证配置"></a>3. 验证配置</h4><p>如果配置成功，可以通过 <code>sudo</code> 执行命令来验证：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[user@server ~]$ <span class="built_in">sudo</span> systemctl restart sshd</span><br><span class="line"><span class="comment"># 如果配置成功，可以执行命令而无需输入密码</span></span><br></pre></td></tr></table></figure>

<h4 id="4-典型错误处理"><a href="#4-典型错误处理" class="headerlink" title="4. 典型错误处理"></a>4. 典型错误处理</h4><p>当用户不在 <code>sudoers</code> 文件中时，可能会看到以下错误：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user is not <span class="keyword">in</span> the sudoers file. This incident will be reported.</span><br></pre></td></tr></table></figure>

<p><strong>解决方法</strong>：</p>
<ol>
<li><p>切换到 root 用户：<code>su -</code></p>
</li>
<li><p>将用户加入 <code>wheel</code> 组：<code>usermod -aG wheel user</code></p>
</li>
<li><p>确保 <code>/etc/sudoers</code> 文件中有以下配置：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%wheel  ALL=(ALL)       ALL</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="四、最佳实践建议"><a href="#四、最佳实践建议" class="headerlink" title="&#x3D;&#x3D;四、最佳实践建议&#x3D;&#x3D;"></a>&#x3D;&#x3D;四、最佳实践建议&#x3D;&#x3D;</h3><ol>
<li><strong>日常使用普通用户</strong>：避免直接以 root 用户登录，普通用户更安全。使用 <code>sudo</code> 执行特权命令。</li>
<li><strong>重要操作前备份</strong>：在执行任何高风险操作时，尤其是以 root 权限进行修改时，要确保有备份。</li>
<li><strong>sudo 权限最小化</strong>：只为需要的用户分配 <code>sudo</code> 权限，避免随意赋予 <code>NOPASSWD: ALL</code> 权限。</li>
<li>会话管理：<ul>
<li>进入 root 环境后，要及时使用 <code>exit</code> 或 <code>Ctrl+D</code> 退出。</li>
<li>使用 <code>whoami</code> 命令确认当前用户身份，避免误操作。</li>
</ul>
</li>
</ol>
<h3 id="五、操作流程图解"><a href="#五、操作流程图解" class="headerlink" title="五、操作流程图解"></a>五、操作流程图解</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">普通用户环境</span><br><span class="line">   │</span><br><span class="line">   ├─ 需要执行特权命令 → sudo &lt;命令&gt;</span><br><span class="line">   │     ├─ 有权限 → 执行成功</span><br><span class="line">   │     └─ 无权限 → 拒绝执行</span><br><span class="line">   │</span><br><span class="line">   └─ 需要切换用户 → su/su -</span><br><span class="line">         ├─ 切换到 root → 输入 root 密码</span><br><span class="line">         └─ 切换其他用户 → 输入目标用户密码</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="Linux-权限管理"><a href="#Linux-权限管理" class="headerlink" title="Linux 权限管理"></a>Linux 权限管理</h2><h3 id="一、Linux-权限管理"><a href="#一、Linux-权限管理" class="headerlink" title="一、Linux 权限管理"></a>一、Linux 权限管理</h3><p>Linux 系统中的权限管理决定了文件和目录的访问控制。权限管理涉及两个主要方面：</p>
<ol>
<li><strong>权限认证</strong>：确定谁（用户）可以访问文件或目录。</li>
<li><strong>权限类型</strong>：确定可以对文件或目录执行什么操作（<strong><code>读、写、执行</code></strong>）。</li>
</ol>
<h3 id="二、文件的权限和文件属性"><a href="#二、文件的权限和文件属性" class="headerlink" title="二、文件的权限和文件属性"></a>二、文件的权限和文件属性</h3><h4 id="1-文件访问者的分类（“人”）"><a href="#1-文件访问者的分类（“人”）" class="headerlink" title="1. 文件访问者的分类（“人”）"></a>1. 文件访问者的分类（“<code>人</code>”）</h4><p>权限分为三类：</p>
<ul>
<li><strong><code>u</code></strong> (User)：文件或目录的 <strong><code>所有者</code></strong>&#x2F;<strong><code>拥有者</code></strong>。即文件的创建者或被赋予所有权的用户。</li>
<li><strong><code>g</code></strong> (Group)：文件或目录的 <strong><code>所属组</code></strong> 的用户。即拥有该文件或目录的同组成员。</li>
<li><strong><code>o</code></strong> (Others)：<strong><code>其他用户</code></strong>，指的是既不是文件所有者，也不属于文件所属组的用户。</li>
</ul>
<h4 id="2-权限表示方式"><a href="#2-权限表示方式" class="headerlink" title="2. 权限表示方式"></a>2. 权限表示方式</h4><p>举个栗子，并逐一解析：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">drwxrwxr-x 2 hcc hcc 4096 Feb  3 20:26 temp</span><br><span class="line"><span class="comment"># 怎么看：</span></span><br><span class="line">d		rwx	rwx	r-x		（1 | 9）/（1 | 3|3|3）</span><br><span class="line"><span class="comment"># drwxrwxr-x 对应着 &lt;file-type&gt;&lt;user-permissions&gt;&lt;group-permissions&gt;&lt;other-permissions&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li><strong>文件类型</strong>（第一个字符）：<ul>
<li><strong>d</strong>：表示这是一个目录文件。</li>
</ul>
</li>
<li><strong>文件权限</strong>（后面的 9 个字符 3 位一看）：<ul>
<li><code>rwx</code>：表示 <strong>用户（文件所有者）</strong> 具有读、写、执行权限。</li>
<li><code>rwx</code>：表示 <strong>组用户</strong> 具有读、写、执行权限。</li>
<li><code>r-x</code>：表示 <strong>其他用户</strong> 具有读和执行权限，但没有写权限。</li>
</ul>
</li>
<li><strong>其他信息</strong>：<ul>
<li><code>2</code>：表示该目录下的硬链接数量。</li>
<li><code>hcc</code> <strong>（前一个）</strong>：表示文件的 <strong>拥有者</strong>（User）是 <code>hcc</code>。</li>
<li><code>hcc</code> <strong>（后一个）</strong>：表示文件的 <strong>所属组</strong>（Group）是 <code>hcc</code>。</li>
<li><code>4096</code>：表示该文件（或目录）的大小（单位为字节）。</li>
<li><code>Feb  3 20:26</code>：表示文件的最后修改时间。</li>
<li><code>temp</code>：表示文件的名称。</li>
</ul>
</li>
</ol>
<h4 id="3-文件类型和访问权限（“事物属性”）"><a href="#3-文件类型和访问权限（“事物属性”）" class="headerlink" title="3. 文件类型和访问权限（“事物属性”）"></a>3. 文件类型和访问权限（“事物属性”）</h4><p><strong>文件类型（第一位字符）：</strong></p>
<table>
<thead>
<tr>
<th align="center">文件类型字符</th>
<th>含义</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong><code>d</code></strong></td>
<td><strong>目录文件（Directory）</strong></td>
<td><code>drwxr-xr-x</code>（表示这是一个目录文件）</td>
</tr>
<tr>
<td align="center"><strong><code>-</code></strong></td>
<td><strong>普通文件（Regular file）</strong></td>
<td><code>-rwxr-xr-x</code>（表示这是一个普通文件）</td>
</tr>
<tr>
<td align="center"><strong>l</strong></td>
<td>软链接（Symbolic link）</td>
<td><code>lrwxrwxrwx</code>（类似于 Windows 的快捷方式）</td>
</tr>
<tr>
<td align="center"><strong>b</strong></td>
<td>块设备文件（Block device file）</td>
<td><code>brw-rw----</code>（如硬盘、光驱等）</td>
</tr>
<tr>
<td align="center"><strong>p</strong></td>
<td>管道文件（Pipe file）</td>
<td><code>prw-r--r--</code>（用于进程间通信）</td>
</tr>
<tr>
<td align="center"><strong>c</strong></td>
<td>字符设备文件（Character device file）</td>
<td><code>crw-rw----</code>（如终端设备、打印机等）</td>
</tr>
<tr>
<td align="center"><strong>s</strong></td>
<td>套接口文件（Socket file）</td>
<td><code>srwxrwxrwx</code>（用于网络通信等）</td>
</tr>
</tbody></table>
<p><strong>权限（后三位字符）：</strong></p>
<table>
<thead>
<tr>
<th align="center">权限字符</th>
<th>含义</th>
<th align="center">对应数字</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>r</strong></td>
<td>读权限（Read）</td>
<td align="center">4</td>
<td>对文件：允许读取文件内容；对目录：允许列出目录中的文件。</td>
</tr>
<tr>
<td align="center"><strong>w</strong></td>
<td>写权限（Write）</td>
<td align="center">2</td>
<td>对文件：允许修改文件内容；对目录：允许创建、删除、移动目录中的文件。</td>
</tr>
<tr>
<td align="center"><strong>x</strong></td>
<td>执行权限（Execute）</td>
<td align="center">1</td>
<td>对文件：允许执行文件；对目录：允许进入该目录。</td>
</tr>
<tr>
<td align="center"><strong>-</strong></td>
<td>没有权限</td>
<td align="center">0</td>
<td>表示没有该项权限。</td>
</tr>
</tbody></table>
<p><strong>权限的组合（后三位字符表示权限）：</strong></p>
<table>
<thead>
<tr>
<th align="center">权限组合</th>
<th>含义</th>
<th align="center">数字表示</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>rwx</strong></td>
<td>读、写、执行权限（可完全访问）</td>
<td align="center">7</td>
<td>用户&#x2F;组&#x2F;其他均有读、写、执行权限。</td>
</tr>
<tr>
<td align="center"><strong>rw-</strong></td>
<td>读、写权限（没有执行权限）</td>
<td align="center">6</td>
<td>用户&#x2F;组&#x2F;其他可以读取和修改文件，但不能执行。</td>
</tr>
<tr>
<td align="center"><strong>r-x</strong></td>
<td>读、执行权限（没有写权限）</td>
<td align="center">5</td>
<td>用户&#x2F;组&#x2F;其他可以读取和执行文件，但不能修改。</td>
</tr>
<tr>
<td align="center"><strong>r–</strong></td>
<td>只有读权限</td>
<td align="center">4</td>
<td>用户&#x2F;组&#x2F;其他只能读取文件，无法修改或执行。</td>
</tr>
<tr>
<td align="center"><strong>wx-</strong></td>
<td>写、执行权限（没有读权限）</td>
<td align="center">3</td>
<td>用户&#x2F;组&#x2F;其他可以修改文件并执行文件，但不能读取文件。</td>
</tr>
<tr>
<td align="center"><strong>x–</strong></td>
<td>只有执行权限</td>
<td align="center">1</td>
<td>用户&#x2F;组&#x2F;其他只能执行文件，无法读取或修改文件。</td>
</tr>
<tr>
<td align="center"><strong>—</strong></td>
<td>没有任何权限</td>
<td align="center">0</td>
<td>用户&#x2F;组&#x2F;其他没有任何权限。</td>
</tr>
</tbody></table>
<p>每个权限都有两个状态：<strong>有权限</strong> 或 <strong>没有权限</strong>，这恰好对应了二进制的 <code>1</code> 和 <code>0</code>，所以数字表示的由来是二进制：</p>
<table>
<thead>
<tr>
<th align="center">权限符号（读写执行）</th>
<th align="center">八进制（数字表示）</th>
<th align="center">二进制</th>
</tr>
</thead>
<tbody><tr>
<td align="center">r</td>
<td align="center">4</td>
<td align="center">100</td>
</tr>
<tr>
<td align="center">w</td>
<td align="center">2</td>
<td align="center">010</td>
</tr>
<tr>
<td align="center">x</td>
<td align="center">1</td>
<td align="center">001</td>
</tr>
<tr>
<td align="center">rw</td>
<td align="center">6</td>
<td align="center">110</td>
</tr>
<tr>
<td align="center">rx</td>
<td align="center">5</td>
<td align="center">101</td>
</tr>
<tr>
<td align="center">wx</td>
<td align="center">3</td>
<td align="center">011</td>
</tr>
<tr>
<td align="center">rwx</td>
<td align="center">7</td>
<td align="center">111</td>
</tr>
<tr>
<td align="center">—</td>
<td align="center">0</td>
<td align="center">000</td>
</tr>
</tbody></table>
<hr>
<h3 id="三、文件访问权限的相关设置方法"><a href="#三、文件访问权限的相关设置方法" class="headerlink" title="三、文件访问权限的相关设置方法"></a>三、文件访问权限的相关设置方法</h3><h4 id="1-chmod-设置文件的访问权限"><a href="#1-chmod-设置文件的访问权限" class="headerlink" title="1. chmod - 设置文件的访问权限"></a>1. <code>chmod</code> - 设置文件的访问权限</h4><p><code>chmod</code> 命令用于设置文件的访问权限。它允许你改变文件或目录的权限，分为两种方式：使用符号表示法和使用八进制表示法。</p>
<ul>
<li><strong>普通用户</strong>：普通用户只能修改自己拥有的文件或目录的权限。如果普通用户尝试修改其他用户的文件或目录权限，会提示 <code>Permission denied</code>（权限被拒绝）。</li>
<li><strong>root 用户</strong>：<code>root</code> 用户是系统管理员，具有所有权限，因此 <code>root</code> 可以修改任何文件或目录的权限。</li>
</ul>
<p><strong>语法格式：<code>chmod [参数] 权限 文件名</code></strong></p>
<p><strong>常用选项：<code>-R</code>：递归地修改目录和其中所有文件的权限。</strong></p>
<p><strong>权限的表示方法：</strong></p>
<table>
<thead>
<tr>
<th align="center">符号</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>+</code></td>
<td>向权限范围增加权限</td>
</tr>
<tr>
<td align="center"><code>-</code></td>
<td>向权限范围取消权限</td>
</tr>
<tr>
<td align="center"><code>=</code></td>
<td>设置权限，覆盖现有权限</td>
</tr>
</tbody></table>
<p><strong>用户符号：</strong></p>
<table>
<thead>
<tr>
<th align="center">符号</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>u</code></td>
<td>拥有者（user）</td>
</tr>
<tr>
<td align="center"><code>g</code></td>
<td>所属组（group）</td>
</tr>
<tr>
<td align="center"><code>o</code></td>
<td>其他用户（others）</td>
</tr>
<tr>
<td align="center"><code>a</code></td>
<td>所有用户（all）</td>
</tr>
</tbody></table>
<p><strong>权限符号：</strong></p>
<table>
<thead>
<tr>
<th align="center">符号</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>r</code></td>
<td>读取权限（read）</td>
</tr>
<tr>
<td align="center"><code>w</code></td>
<td>写入权限（write）</td>
</tr>
<tr>
<td align="center"><code>x</code></td>
<td>执行权限（execute）</td>
</tr>
</tbody></table>
<p><strong>示例：</strong></p>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>chmod u+w /home/abc.txt</code></td>
<td>给文件 <code>/home/abc.txt</code> 的拥有者添加写权限。</td>
</tr>
<tr>
<td><code>chmod o-x /home/abc.txt</code></td>
<td>去掉其他用户的执行权限。</td>
</tr>
<tr>
<td><code>chmod a=x /home/abc.txt</code></td>
<td>给所有用户赋予执行权限，其他权限被去除。</td>
</tr>
</tbody></table>
<h4 id="八进制表示法："><a href="#八进制表示法：" class="headerlink" title="八进制表示法："></a>八进制表示法：</h4><table>
<thead>
<tr>
<th align="center">权限组合</th>
<th align="center">八进制数字</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>rwx</code></td>
<td align="center">7</td>
<td>读取、写入、执行权限（4+2+1）</td>
</tr>
<tr>
<td align="center"><code>rw-</code></td>
<td align="center">6</td>
<td>读取、写入权限（4+2）</td>
</tr>
<tr>
<td align="center"><code>r-x</code></td>
<td align="center">5</td>
<td>读取、执行权限（4+1）</td>
</tr>
<tr>
<td align="center"><code>r--</code></td>
<td align="center">4</td>
<td>读取权限（4）</td>
</tr>
<tr>
<td align="center"><code>wx-</code></td>
<td align="center">3</td>
<td>写入、执行权限（2+1）</td>
</tr>
<tr>
<td align="center"><code>w--</code></td>
<td align="center">2</td>
<td>写入权限（2）</td>
</tr>
<tr>
<td align="center"><code>x--</code></td>
<td align="center">1</td>
<td>执行权限（1）</td>
</tr>
<tr>
<td align="center"><code>---</code></td>
<td align="center">0</td>
<td>无权限</td>
</tr>
</tbody></table>
<p><strong>示例：</strong></p>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>chmod 664 /home/abc.txt</code></td>
<td>设置文件权限为 <code>rw-rw-r--</code>，即拥有者和所属组有读写权限，其他用户只有读权限。</td>
</tr>
<tr>
<td><code>chmod 640 /home/abc.txt</code></td>
<td>设置文件权限为 <code>rw-r-----</code>，即拥有者有读写权限，拥有者有读写权限，所属组有读权限，其他用户没有权限。</td>
</tr>
</tbody></table>
<hr>
<h4 id="2-chown-修改文件的拥有者"><a href="#2-chown-修改文件的拥有者" class="headerlink" title="2. chown - 修改文件的拥有者"></a>2. <code>chown</code> - 修改文件的拥有者</h4><p><code>chown</code> 命令用于修改文件的所有者和所属组。</p>
<ul>
<li><strong>普通用户</strong>：普通用户只能更改自己拥有的文件的所有者。如果尝试更改其他用户的文件或目录的拥有者，普通用户会看到 <code>Permission denied</code>。</li>
<li><strong>root 用户</strong>：<code>root</code> 用户能够修改任何文件或目录的拥有者，不受任何限制。</li>
</ul>
<p><strong>语法格式：<code>chown [参数] 用户名 文件名</code></strong></p>
<p><strong>常用选项：<code>-R</code>：递归地修改目录和其中所有文件的权限。</strong></p>
<p><strong>示例：</strong></p>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>chown user1 f1</code></td>
<td>将文件 <code>f1</code> 的拥有者更改为 <code>user1</code>。</td>
</tr>
<tr>
<td><code>chown -R user1 filegroup1</code></td>
<td>递归地将目录 <code>filegroup1</code> 及其子文件的所有者更改为 <code>user1</code>。</td>
</tr>
</tbody></table>
<hr>
<h4 id="3-chgrp-修改文件或目录的所属组"><a href="#3-chgrp-修改文件或目录的所属组" class="headerlink" title="3. chgrp - 修改文件或目录的所属组"></a>3. <code>chgrp</code> - 修改文件或目录的所属组</h4><p><code>chgrp</code> 命令用于修改文件或目录的所属组。</p>
<ul>
<li><strong>普通用户</strong>：普通用户只能更改自己拥有的文件或目录的所属组。如果尝试更改其他用户的文件或目录的所属组，则会提示 <code>Permission denied</code>。</li>
<li><strong>root 用户</strong>：<code>root</code> 用户可以修改任何文件或目录的所属组，无论该文件是否属于 <code>root</code> 或其他用户。</li>
</ul>
<p><strong>语法格式：<code>chgrp [参数] 用户组名 文件名</code></strong></p>
<p><strong>常用选项：<code>-R</code>：递归地修改目录和其中所有文件的权限。</strong></p>
<p><strong>示例：</strong></p>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>chgrp users /abc/f2</code></td>
<td>将文件 <code>/abc/f2</code> 的所属组更改为 <code>users</code>。</td>
</tr>
</tbody></table>
<h3 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h3><table>
<thead>
<tr>
<th>操作类型</th>
<th>普通用户能否执行</th>
<th>root 用户能否执行</th>
<th>执行成功&#x2F;失败</th>
</tr>
</thead>
<tbody><tr>
<td><code>chmod</code> 修改权限</td>
<td>只能修改自己拥有的文件</td>
<td>可以修改任何文件</td>
<td>普通用户成功：文件属于自己；失败：<code>Permission denied</code></td>
</tr>
<tr>
<td><code>chown</code> 修改拥有者</td>
<td>只能修改自己拥有的文件</td>
<td>可以修改任何文件</td>
<td>普通用户成功：文件属于自己；失败：<code>Permission denied</code></td>
</tr>
<tr>
<td><code>chgrp</code> 修改所属组</td>
<td>只能修改自己拥有的文件</td>
<td>可以修改任何文件</td>
<td>普通用户成功：文件属于自己；失败：<code>Permission denied</code></td>
</tr>
</tbody></table>
<hr>
<h3 id="file-命令"><a href="#file-命令" class="headerlink" title="file 命令"></a><code>file</code> 命令</h3><p><code>file</code> 命令用于识别文件的类型。它会根据文件的内容、格式以及文件头部的标识来判断分析文件内部的结构来推测其类型，不依赖于文件的扩展名，非常有用。</p>
<p><strong>语法：<code>file [选项] 文件或目录...</code></strong></p>
<p><strong>常用选项</strong>：</p>
<ul>
<li><code>-c</code>：显示详细的执行过程，帮助你分析程序的执行情况。例如，它可以显示 <code>file</code> 命令如何判断文件类型，通常在调试时很有用。</li>
<li><code>-z</code>：尝试解压缩压缩文件，并分析压缩文件中的内容。如果你有一个 <code>.tar.gz</code> 或 <code>.zip</code> 文件，使用 <code>-z</code> 可以让 <code>file</code> 查看并识别压缩文件内部的内容类型。</li>
</ul>
<p><strong>示例</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">file test.txt      <span class="comment"># 输出 test.txt 文件的类型（如：ASCII text）</span></span><br><span class="line">file -z archive.gz <span class="comment"># 解压并识别压缩文件内容类型</span></span><br></pre></td></tr></table></figure>

<blockquote>
<h3 id="传道解惑"><a href="#传道解惑" class="headerlink" title="传道解惑"></a>传道解惑</h3><h4 id="Q1：起始权限问题：普通文件：664，目录文件：775，为什么我们创建文件的默认权限是我们现在看到的样子？"><a href="#Q1：起始权限问题：普通文件：664，目录文件：775，为什么我们创建文件的默认权限是我们现在看到的样子？" class="headerlink" title="Q1：起始权限问题：普通文件：664，目录文件：775，为什么我们创建文件的默认权限是我们现在看到的样子？"></a>Q1：起始权限问题：普通文件：664，目录文件：775，为什么我们创建文件的默认权限是我们现在看到的样子？</h4><p>默认权限的设置与 <strong>umask（文件创建权限掩码）</strong> 有关系，它控制了文件或目录在创建时默认的权限。我们创建普通文件和目录时，通常会看到不同的权限，这是因为操作系统使用了一种“减法”策略（<strong>最终权限 &#x3D; 起始权限 &amp; (~umask)</strong>），根据 <strong>umask</strong> 来修改文件和目录的默认权限。</p>
<p><strong>umask</strong> 决定了文件和目录创建时权限的“减法”规则，我们最终看到的其实是已经套公式算好的。</p>
<ul>
<li><strong>普通文件（664）</strong>：默认给普通文件的起始权限其实是 <code>666</code>，<code>666 &amp; (~0002)</code> → <code>666 &amp; 7754</code> &#x3D; <code>664</code>。</li>
<li><strong>目录文件（775）</strong>：默认给目录文件的起始权限其实是 <code>777</code>，<code>777 &amp; (~0002)</code> → <code>777 &amp; 7754</code> &#x3D; <code>775</code>。</li>
</ul>
<h3 id="umask-是什么？"><a href="#umask-是什么？" class="headerlink" title="umask 是什么？"></a>umask 是什么？</h3><p><code>umask</code> 是一个权限掩码，它定义了在文件或目录创建时，通过从系统的默认权限中 <strong>“去除”</strong> 权限来决定最终的权限。 <strong>umask 的值</strong> 表示哪些权限会被“去除”，而 <strong>最终权限</strong> 是通过使用按位与（<code>&amp;</code>）操作来计算的。</p>
<ul>
<li>默认的权限是固定的，即普通文件的起始权限为 <code>666</code>，目录的起始权限为 <code>777</code>。</li>
<li><code>umask</code> 用来“去除”权限，使用的规则是按位与：<strong>最终权限 &#x3D; 起始权限 &amp; (~umask)</strong>。</li>
<li><code>~umask</code> 是对 <code>umask</code> 值取反，即对 <code>umask</code> 中的每一位进行反转（0 变成 1，1 变成 0），然后与默认权限进行按位与运算。</li>
</ul>
<p>如果需要查看当前的 <strong>umask</strong> 值，可以运行 <code>umask</code> 命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="built_in">umask</span></span><br></pre></td></tr></table></figure>

<p><strong>常见的 umask 值</strong>：<code>umask</code> 的值虽然会显示 <code>0002</code>，<code>umask</code> 的四位数字中，第一位表示特殊权限（如粘滞位），后三位才是基本权限。但普通文件&#x2F;目录的默认权限计算时通常只关注后三位。常见的 <code>umask</code> 值：</p>
<table>
<thead>
<tr>
<th>umask 值</th>
<th>解释</th>
<th>结果权限（普通文件）</th>
<th>结果权限（目录文件）</th>
</tr>
</thead>
<tbody><tr>
<td><code>0002</code></td>
<td>所有者、组、其他用户都没有限制</td>
<td>664</td>
<td>775</td>
</tr>
<tr>
<td><code>0022</code></td>
<td>其他用户没有写权限</td>
<td>644</td>
<td>755</td>
</tr>
<tr>
<td><code>0077</code></td>
<td>只有文件拥有者有权限</td>
<td>600</td>
<td>700</td>
</tr>
</tbody></table>
<p><strong>umask 设置与效果</strong>：<strong>umask</strong> 的值会影响文件和目录的默认权限。当你修改 <code>umask</code> 时，操作系统会自动改变你创建的文件和目录的默认权限。</p>
<p>例如：如果设置 <code>umask 0022</code>，则：</p>
<ul>
<li>普通文件的权限会变为 <code>644</code>（去除其他用户的写权限）。</li>
<li>目录的权限会变为 <code>755</code>（去除其他用户的写权限）。</li>
</ul>
<p>可以通过以下命令查看和设置 <code>umask</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;# 查看当前 <span class="built_in">umask</span> 值</span><br><span class="line">&gt;<span class="built_in">umask</span></span><br><span class="line"></span><br><span class="line">&gt;# 设置 <span class="built_in">umask</span> 为 0022</span><br><span class="line">&gt;<span class="built_in">umask</span> 0022</span><br></pre></td></tr></table></figure>

<h3 id="Q2：关于文件权限-r-rw-1-a-a-的情况怎么解释？"><a href="#Q2：关于文件权限-r-rw-1-a-a-的情况怎么解释？" class="headerlink" title="Q2：关于文件权限 -r--rw---- 1 a a ... 的情况怎么解释？"></a>Q2：关于文件权限 <code>-r--rw---- 1 a a ...</code> 的情况怎么解释？</h3><p>在文件权限系统中，<strong>拥有者的权限</strong> 和 <strong>所属组的权限</strong> 是独立的，因此可能会出现拥有者的权限比所属组更少的情况。文件的权限可能是通过某些命令错误地配置的。例如，管理员或拥有者可能故意将拥有者的权限设置得比所属组的权限少。这种情况可能是在文件创建时，由于错误的 <code>chmod</code> 命令或文件权限管理不当造成的。当然也有可能是必须的，因为这种现象并非错误。</p>
<p><strong>关键点：拥有者权限和所属组权限独立</strong></p>
<ul>
<li><strong>拥有者权限（a）：</strong> 只能读取文件，但不能修改（没有写权限）。</li>
<li><strong>所属组权限（a 组）：</strong> 可以读写文件（<code>rw-</code>），但不具有执行权限。</li>
</ul>
<h4 id="权限判断顺序："><a href="#权限判断顺序：" class="headerlink" title="权限判断顺序："></a>权限判断顺序：</h4><p>在 Linux 系统中，<strong>在进行认证的时候只能选择一个角色进行认证</strong>，文件的权限是根据三种不同的身份来判断的：<strong>文件拥有者</strong>、<strong>文件所属组</strong> 和 <strong>其他用户</strong>。系统在判断文件权限时会先检查文件拥有者的权限，如果拥有者权限不足，再检查所属组的权限，最后才检查其他用户的权限。</p>
<ol>
<li><strong>文件拥有者权限</strong>（User 权限）：系统首先会检查当前操作用户是否是文件的拥有者，如果是，则优先使用文件拥有者的权限来进行访问判断。</li>
<li><strong>所属组权限</strong>（Group 权限）：如果当前用户不是文件的拥有者，但属于文件的所属组，则会检查文件所属组的权限。</li>
<li><strong>其他用户权限</strong>（Other 权限）：如果当前用户既不是文件的拥有者，也不属于文件的所属组，那么就会检查其他用户的权限。</li>
</ol>
<p><strong>解决方法</strong></p>
<ol>
<li><strong>检查文件的权限设置</strong>：首先确认文件的权限是如何设置的。如果文件的拥有者权限被误设为 <code>r--</code>，而所属组权限是 <code>rw-</code>，可以使用 <code>chmod</code> 修改文件的拥有者权限：</li>
</ol>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> u+w filename</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p><strong>角色切换</strong>：如果你仅能选择一个角色进行认证，但需要更高权限来修改文件，考虑切换到具有更高权限的角色（例如通过 <code>sudo</code> 进行管理员认证）。</p>
</li>
<li><p><strong>文件所有权调整</strong>：如果你不是文件的拥有者，但需要进行修改，考虑使用 <code>chown</code> 或 <code>chgrp</code> 更改文件的拥有者或所属组，或者请求管理员为你添加权限。</p>
</li>
</ol>
</blockquote>
<hr>
<h2 id="目录的权限"><a href="#目录的权限" class="headerlink" title="目录的权限"></a>目录的权限</h2><p>理解目录权限的三个关键点：</p>
<ol>
<li><strong>可读权限（<code>r</code>）</strong>：<strong>决定是否允许我们查看指定目录下的文件内容。</strong> 如果没有读权限，即使目录本身是可执行的，用户也无法看到目录中的文件列表。例如，无法用 <code>ls</code> 查看该目录下的文件。</li>
<li><strong>可写权限（<code>w</code>）</strong>：<strong>决定是否允许我们在当前目录下进行创建、更改、<code>删除（主要）</code>。</strong> 如果没有写权限，用户就不能在该目录中创建新文件，不能删除文件，也不能重命名文件 &#x3D;&#x3D;（<strong>一个文件能否被删除，并不由文件本身决定，由这个文件所处的目录决定！</strong>）&#x3D;&#x3D;。</li>
<li><strong>可执行权限（<code>x</code>）</strong>：<strong>决定是否允许用户进入对应的目录！</strong> 如果一个目录没有执行权限，即使你有其他权限，也无法进入该目录进行任何操作。比如无法 <code>cd</code> 进入该目录。</li>
</ol>
<h3 id="权限细节及例子-——-想要保护多人-共享-文件数据"><a href="#权限细节及例子-——-想要保护多人-共享-文件数据" class="headerlink" title="权限细节及例子 —— 想要保护多人 共享 文件数据"></a>权限细节及例子 —— 想要保护多人 <code>共享</code> 文件数据</h3><p>假设用户 <strong>张三</strong> 在自己的目录下创建了一个文件 <code>temp</code>，并且给自己设置了文件权限（例如 <code>rw-r--r--</code>）。这意味着张三可以读写文件，而其他用户只能读取文件。看起来应该是其他用户不能删除 <code>temp</code> 文件，对吧？但是，实际上 <strong>其他用户仍然可以删除 <code>temp</code> 文件</strong>，即使他们没有写权限。这是因为文件的删除权限是由 <strong>目录的权限</strong> 决定的，而不是文件的权限。（张三在自己的文件夹里放了一本书（文件 temp），即使没有给其他人修改这本书的权限，如果他们对张三存放书的那个房间（目录）有写入权限，他们仍然能够把张三的书从房间里移除或删除。这看起来不太公平，因为张三并没有允许别人动他的东西）。</p>
<p>如果去掉了共享目录的 <code>w</code> 权限，张三同时也无法创建文件啦！共享目录，共享体现在哪里呢？</p>
<h3 id="解决方案：引入“粘滞位”"><a href="#解决方案：引入“粘滞位”" class="headerlink" title="解决方案：引入“粘滞位”"></a>解决方案：引入“粘滞位”</h3><p>为了避免一个用户删除其他用户创建的文件，Linux 引入了 <strong>粘滞位（sticky bit）</strong> 的概念。</p>
<p><strong>粘滞位（Sticky Bit）</strong> 是一个特殊的权限，用来限制在目录中删除文件的权限。具体来说，只有以下三类用户才能删除目录中的文件：</p>
<ol>
<li><strong>超级管理员（root）</strong>：<code>root</code> 用户可以删除任何文件，不受限制。</li>
<li><strong>目录的所有者</strong>：目录的拥有者可以删除该目录中的文件。</li>
<li><strong>文件的所有者</strong>：文件的拥有者可以删除自己创建的文件。</li>
</ol>
<p><strong>如何设置粘滞位？</strong> 可以使用 <code>chmod +t</code> 命令来给目录设置粘滞位：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +t /path/to/directory</span><br></pre></td></tr></table></figure>

<p><strong>示例：</strong> 假设我们有一个目录 <code>/shared</code>，这是一个共享目录，所有用户都可以在其中创建文件。如果没有粘滞位，任何具有写权限的用户都可以删除目录中的文件，即使文件是由其他用户创建的。但如果我们给目录设置了粘滞位：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +t /shared</span><br><span class="line">drwxrwxrwt    <span class="comment"># 粘滞位生效，末尾为 t</span></span><br></pre></td></tr></table></figure>

<p>设置了粘滞位后，只有以下三类用户可以删除文件：</p>
<ul>
<li><code>root</code> 用户可以删除目录中的任何文件。</li>
<li>该目录的所有者（例如管理员）可以删除文件。</li>
<li>文件的拥有者（例如，创建文件的用户）可以删除自己的文件。</li>
</ul>
<p>这样，即使其他用户拥有对目录的写权限，也无法删除其他用户创建的文件，增强了安全性。</p>
<hr>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p><strong>目录权限：</strong></p>
<ol>
<li><strong>可读权限（<code>r</code>）</strong>：是否可以列出该目录中的文件。没有 <code>r</code> 权限，即使有 <code>x</code> 权限，也无法执行 <code>ls</code> 或查看目录中的内容。</li>
<li><strong>可写权限（<code>w</code>）</strong>：是否可以在目录中创建、删除或重命名文件。没有 <code>w</code> 权限，用户无法创建、删除或重命名目录中的文件。</li>
<li><strong>可执行权限（<code>x</code>）</strong>：是否可以进入该目录。没有 <code>x</code> 权限，即使有读权限，也无法 <code>cd</code> 进入目录。</li>
</ol>
<p><strong>家目录权限：</strong></p>
<ul>
<li>通常情况下，用户的家目录权限是 <code>700</code>，即只有该用户和 <code>root</code> 用户能访问和操作其家目录中的文件。其他用户无法访问、查看或修改这些文件。</li>
<li>这种权限设置通常用于保护用户的个人文件，使其不被其他用户看到或修改。</li>
</ul>
<p><strong>共享目录中的权限管理：</strong></p>
<ul>
<li>在共享目录中，其他用户通常有读取、创建和修改文件的权限。但 <strong>为了避免文件被随意删除</strong>，可以设置 <strong>粘滞位</strong>。</li>
<li>如果去掉共享目录的写权限，用户将无法在目录中创建文件或删除文件。这也意味着，如果一个目录没有写权限，那么所有用户都不能在其中创建或删除文件，目录就无法作为有效的共享目录。</li>
</ul>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://github.com/huangcancan-xbc/Drawing-bed/blob/master/Blog/20250307201719879.png?raw=true" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://github.com/huangcancan-xbc/Drawing-bed/blob/master/Blog/20250307201719879.png?raw=true" title="头像" alt="头像"></a><div class="post-copyright__author_name">小米里的大麦</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://www.minbit.top/posts/35315.html">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://www.minbit.top/posts/35315.html')">005 权限的理解</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250403212543768.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250403212543768.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250403212622868.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250403212622868.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://www.minbit.top/posts/35315.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=005 权限的理解&amp;url=https://www.minbit.top/posts/35315.html&amp;pic=https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250314125923408.png?_r_=1d1bdb2c-cd11-6ea6-cd2a-e31ee46879ad" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">MIT</a> 许可协议。转载请注明来自 <a href="https://www.minbit.top" target="_blank">小米里的大麦</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/Linux/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Linux<span class="tagsPageCount">8</span></a><a class="post-meta__box__tags" href="/tags/%E6%9D%83%E9%99%90/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>权限<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250314125923408.png?_r_=2372a6ec-01a0-b5e5-803b-e726871e6a6a" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/62462.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250314125923408.png?_r_=8045ba37-68b5-3b8d-cbb4-38c6e0f6d6c5" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">007 Linux 开发工具（上）—— vim、解放sudo、gc+</div></div></a></div><div class="next-post pull-right"><a href="/posts/9242.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250314125828384.png?_r_=00aeed10-14cd-da1b-b33f-af3dac471fd1" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">004 Linux基本指令</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/55415.html" title="002 创建普通账户（为朋友创建、删除账户）"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250314125732989.png?_r_=dfc469a0-96b0-04ed-4c34-19713b1d4e31" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-17</div><div class="title">002 创建普通账户（为朋友创建、删除账户）</div></div></a></div><div><a href="/posts/49772.html" title="001 环境搭建"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250314130519403.jpg?_r_=cef811f0-fe33-156d-562e-1f71a619ca41" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-17</div><div class="title">001 环境搭建</div></div></a></div><div><a href="/posts/42463.html" title="003 系统和入门指令"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250314125732989.png?_r_=612c65af-46ca-2fe9-2417-fa0090c71ff2" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-17</div><div class="title">003 系统和入门指令</div></div></a></div><div><a href="/posts/9242.html" title="004 Linux基本指令"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250314125828384.png?_r_=00aeed10-14cd-da1b-b33f-af3dac471fd1" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-17</div><div class="title">004 Linux基本指令</div></div></a></div><div><a href="/posts/62462.html" title="007 Linux 开发工具（上）—— vim、解放sudo、gc+"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250314125923408.png?_r_=8045ba37-68b5-3b8d-cbb4-38c6e0f6d6c5" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-17</div><div class="title">007 Linux 开发工具（上）—— vim、解放sudo、gc+</div></div></a></div><div><a href="/posts/15646.html" title="006 yum和Linux生态"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250314125732989.png?_r_=2bf2cd50-39f6-c688-a638-07e2bb23df6e" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-17</div><div class="title">006 yum和Linux生态</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://github.com/huangcancan-xbc/Drawing-bed/blob/master/Blog/20250307201719879.png?raw=true" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description">时间好像总会留下点什么,或许是一个人,或许是一个梦,或许……是一段有意义的经历~</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">小米里的大麦</h1><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/huangcancan-xbc" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来看我的博客鸭~<br>如果存在显示问题，那么你可能需要一点特殊的网络环境哦~<br><br>你现在可以通过 minbit.top 或者<br>huangcancan-xbc.github.io<br>访问到我的博客。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#shell-%E5%91%BD%E4%BB%A4%E4%BB%A5%E5%8F%8A%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86"><span class="toc-number">1.</span> <span class="toc-text">shell 命令以及运行原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Shell-%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.1.</span> <span class="toc-text">1. Shell 是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E8%83%BD%E7%9B%B4%E6%8E%A5%E6%93%8D%E4%BD%9C%E5%86%85%E6%A0%B8%EF%BC%9F"><span class="toc-number">1.2.</span> <span class="toc-text">2. 为什么不能直接操作内核？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Shell-%E7%9A%84%E2%80%9C%E5%AA%92%E5%A9%86%E2%80%9D%E6%AF%94%E5%96%BB"><span class="toc-number">1.3.</span> <span class="toc-text">3. Shell 的“媒婆”比喻</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2%EF%BC%88GUI%EF%BC%89%E4%B9%9F%E6%98%AF-Shell%EF%BC%9F"><span class="toc-number">1.4.</span> <span class="toc-text">4. 图形界面（GUI）也是 Shell？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Shell-%E7%9A%84%E9%AB%98%E7%BA%A7%E5%8A%9F%E8%83%BD"><span class="toc-number">1.5.</span> <span class="toc-text">5. Shell 的高级功能</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux-%E6%9D%83%E9%99%90%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">2.</span> <span class="toc-text">Linux 权限的概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E7%94%A8%E6%88%B7%E7%B1%BB%E5%9E%8B%E8%AF%A6%E8%A7%A3"><span class="toc-number">2.1.</span> <span class="toc-text">一、用户类型详解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%B6%85%E7%BA%A7%E7%94%A8%E6%88%B7%EF%BC%88root%EF%BC%89"><span class="toc-number">2.1.1.</span> <span class="toc-text">1. 超级用户（root）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7"><span class="toc-number">2.1.2.</span> <span class="toc-text">2. 普通用户</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E7%94%A8%E6%88%B7%E5%88%87%E6%8D%A2%E6%93%8D%E4%BD%9C%E8%AF%A6%E8%A7%A3"><span class="toc-number">2.2.</span> <span class="toc-text">二、用户切换操作详解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-su-%E5%91%BD%E4%BB%A4-%E2%80%94%E2%80%94-%E5%88%87%E6%8D%A2%E7%94%A8%E6%88%B7%E7%9A%84%E5%91%BD%E4%BB%A4%E3%80%82"><span class="toc-number">2.2.1.</span> <span class="toc-text">1. su 命令 —— 切换用户的命令。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-su-%E4%B8%8E-su-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.2.2.</span> <span class="toc-text">2. su 与 su - 的区别</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81sudo-%E5%9F%BA%E7%A1%80%E6%9D%83%E9%99%90%E9%85%8D%E7%BD%AE%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%8C%E5%90%8E%E9%9D%A2%E8%AF%A6%E8%AE%B2%EF%BC%89"><span class="toc-number">2.3.</span> <span class="toc-text">三、sudo 基础权限配置（了解，后面详讲）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-sudo-%E5%9F%BA%E7%A1%80"><span class="toc-number">2.3.1.</span> <span class="toc-text">1. sudo 基础</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E9%85%8D%E7%BD%AE-sudo-%E6%9D%83%E9%99%90%EF%BC%88%E8%BF%99%E6%98%AF%E4%B8%80%E7%A7%8D%E6%96%B9%E6%B3%95%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%85%88%E4%BA%86%E8%A7%A3%EF%BC%8C%E4%B8%8D%E5%BB%BA%E8%AE%AE%E7%8E%B0%E5%9C%A8%E8%BF%9B%E8%A1%8C%E9%85%8D%E7%BD%AE%EF%BC%89"><span class="toc-number">2.3.2.</span> <span class="toc-text">2. 配置 sudo 权限（这是一种方法，可以先了解，不建议现在进行配置）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E9%AA%8C%E8%AF%81%E9%85%8D%E7%BD%AE"><span class="toc-number">2.3.3.</span> <span class="toc-text">3. 验证配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%85%B8%E5%9E%8B%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-number">2.3.4.</span> <span class="toc-text">4. 典型错误处理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E5%BB%BA%E8%AE%AE"><span class="toc-number">2.4.</span> <span class="toc-text">&#x3D;&#x3D;四、最佳实践建议&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%93%8D%E4%BD%9C%E6%B5%81%E7%A8%8B%E5%9B%BE%E8%A7%A3"><span class="toc-number">2.5.</span> <span class="toc-text">五、操作流程图解</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux-%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-number">3.</span> <span class="toc-text">Linux 权限管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81Linux-%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-number">3.1.</span> <span class="toc-text">一、Linux 权限管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%96%87%E4%BB%B6%E7%9A%84%E6%9D%83%E9%99%90%E5%92%8C%E6%96%87%E4%BB%B6%E5%B1%9E%E6%80%A7"><span class="toc-number">3.2.</span> <span class="toc-text">二、文件的权限和文件属性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AE%E8%80%85%E7%9A%84%E5%88%86%E7%B1%BB%EF%BC%88%E2%80%9C%E4%BA%BA%E2%80%9D%EF%BC%89"><span class="toc-number">3.2.1.</span> <span class="toc-text">1. 文件访问者的分类（“人”）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%9D%83%E9%99%90%E8%A1%A8%E7%A4%BA%E6%96%B9%E5%BC%8F"><span class="toc-number">3.2.2.</span> <span class="toc-text">2. 权限表示方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%E5%92%8C%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%EF%BC%88%E2%80%9C%E4%BA%8B%E7%89%A9%E5%B1%9E%E6%80%A7%E2%80%9D%EF%BC%89"><span class="toc-number">3.2.3.</span> <span class="toc-text">3. 文件类型和访问权限（“事物属性”）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%96%87%E4%BB%B6%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%E7%9A%84%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE%E6%96%B9%E6%B3%95"><span class="toc-number">3.3.</span> <span class="toc-text">三、文件访问权限的相关设置方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-chmod-%E8%AE%BE%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90"><span class="toc-number">3.3.1.</span> <span class="toc-text">1. chmod - 设置文件的访问权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%AB%E8%BF%9B%E5%88%B6%E8%A1%A8%E7%A4%BA%E6%B3%95%EF%BC%9A"><span class="toc-number">3.3.2.</span> <span class="toc-text">八进制表示法：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-chown-%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E7%9A%84%E6%8B%A5%E6%9C%89%E8%80%85"><span class="toc-number">3.3.3.</span> <span class="toc-text">2. chown - 修改文件的拥有者</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-chgrp-%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%88%96%E7%9B%AE%E5%BD%95%E7%9A%84%E6%89%80%E5%B1%9E%E7%BB%84"><span class="toc-number">3.3.4.</span> <span class="toc-text">3. chgrp - 修改文件或目录的所属组</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%EF%BC%9A"><span class="toc-number">3.4.</span> <span class="toc-text">总结：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#file-%E5%91%BD%E4%BB%A4"><span class="toc-number">3.5.</span> <span class="toc-text">file 命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E9%81%93%E8%A7%A3%E6%83%91"><span class="toc-number">3.6.</span> <span class="toc-text">传道解惑</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Q1%EF%BC%9A%E8%B5%B7%E5%A7%8B%E6%9D%83%E9%99%90%E9%97%AE%E9%A2%98%EF%BC%9A%E6%99%AE%E9%80%9A%E6%96%87%E4%BB%B6%EF%BC%9A664%EF%BC%8C%E7%9B%AE%E5%BD%95%E6%96%87%E4%BB%B6%EF%BC%9A775%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E4%BB%AC%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E7%9A%84%E9%BB%98%E8%AE%A4%E6%9D%83%E9%99%90%E6%98%AF%E6%88%91%E4%BB%AC%E7%8E%B0%E5%9C%A8%E7%9C%8B%E5%88%B0%E7%9A%84%E6%A0%B7%E5%AD%90%EF%BC%9F"><span class="toc-number">3.6.1.</span> <span class="toc-text">Q1：起始权限问题：普通文件：664，目录文件：775，为什么我们创建文件的默认权限是我们现在看到的样子？</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#umask-%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">3.7.</span> <span class="toc-text">umask 是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Q2%EF%BC%9A%E5%85%B3%E4%BA%8E%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90-r-rw-1-a-a-%E7%9A%84%E6%83%85%E5%86%B5%E6%80%8E%E4%B9%88%E8%A7%A3%E9%87%8A%EF%BC%9F"><span class="toc-number">3.8.</span> <span class="toc-text">Q2：关于文件权限 -r--rw---- 1 a a ... 的情况怎么解释？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E5%88%A4%E6%96%AD%E9%A1%BA%E5%BA%8F%EF%BC%9A"><span class="toc-number">3.8.1.</span> <span class="toc-text">权限判断顺序：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E7%9A%84%E6%9D%83%E9%99%90"><span class="toc-number">4.</span> <span class="toc-text">目录的权限</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E7%BB%86%E8%8A%82%E5%8F%8A%E4%BE%8B%E5%AD%90-%E2%80%94%E2%80%94-%E6%83%B3%E8%A6%81%E4%BF%9D%E6%8A%A4%E5%A4%9A%E4%BA%BA-%E5%85%B1%E4%BA%AB-%E6%96%87%E4%BB%B6%E6%95%B0%E6%8D%AE"><span class="toc-number">4.1.</span> <span class="toc-text">权限细节及例子 —— 想要保护多人 共享 文件数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%9A%E5%BC%95%E5%85%A5%E2%80%9C%E7%B2%98%E6%BB%9E%E4%BD%8D%E2%80%9D"><span class="toc-number">4.2.</span> <span class="toc-text">解决方案：引入“粘滞位”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">4.3.</span> <span class="toc-text">总结</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/123456.html" title="C++ STL —— 基于算法竞赛"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250314125923408.png?_r_=2372a6ec-01a0-b5e5-803b-e726871e6a6a" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C++ STL —— 基于算法竞赛"/></a><div class="content"><a class="title" href="/posts/123456.html" title="C++ STL —— 基于算法竞赛">C++ STL —— 基于算法竞赛</a><time datetime="2025-05-21T16:00:00.000Z" title="发表于 2025-05-22 00:00:00">2025-05-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/57061.html" title="“一周年”，我的成长蜕变与收获"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250314130519403.jpg?_r_=504717da-9678-ba01-2d04-accbcdd58705" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="“一周年”，我的成长蜕变与收获"/></a><div class="content"><a class="title" href="/posts/57061.html" title="“一周年”，我的成长蜕变与收获">“一周年”，我的成长蜕变与收获</a><time datetime="2025-05-21T16:00:00.000Z" title="发表于 2025-05-22 00:00:00">2025-05-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/55028.html" title="网站搭建"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250314140243649.png?_r_=e332fb19-973e-b461-834c-c5d0c48cffd7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="网站搭建"/></a><div class="content"><a class="title" href="/posts/55028.html" title="网站搭建">网站搭建</a><time datetime="2025-05-21T16:00:00.000Z" title="发表于 2025-05-22 00:00:00">2025-05-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/14630.html" title="014 Linux 2.6内核进程调度队列（了解）"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250314125732989.png?_r_=0f3b72c9-015d-431e-a997-49a256e02389" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="014 Linux 2.6内核进程调度队列（了解）"/></a><div class="content"><a class="title" href="/posts/14630.html" title="014 Linux 2.6内核进程调度队列（了解）">014 Linux 2.6内核进程调度队列（了解）</a><time datetime="2025-04-01T07:50:00.000Z" title="发表于 2025-04-01 15:50:00">2025-04-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/10533.html" title="013 环境变量"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Blog/20250314125923408.png?_r_=d41340c6-94eb-5346-a467-d26a05d5c2b4" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="013 环境变量"/></a><div class="content"><a class="title" href="/posts/10533.html" title="013 环境变量">013 环境变量</a><time datetime="2025-03-28T07:50:00.000Z" title="发表于 2025-03-28 15:50:00">2025-03-28</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:hc1960074081@qq.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://github.com/huangcancan-xbc/Drawing-bed/blob/master/Blog/20250307201719879.png?raw=true" size="50px"/><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2025 By <a class="footer-bar-link" href="/" title="小米里的大麦" target="_blank">小米里的大麦</a></div></div><div id="footer-type-tips"></div><div class="js-pjax"><script>function subtitleType () {
  fetch('https://v1.hitokoto.cn')
    .then(response => response.json())
    .then(data => {
      if (true) {
        const from = '出自 ' + data.from
        const sub = ["《左传》载曰：“太上有立德，其次有立功，其次有立言，虽久不废，此之谓不朽。”","纸上得来终觉浅，绝知此事要躬行！"]
        sub.unshift(data.hitokoto, from)
        window.typed = new Typed('#footer-type-tips', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('footer-type-tips').innerHTML = data.hitokoto
      }
    })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.cbd.int/typed.js@2.1.0/dist/typed.umd.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="GitHub主页">GitHub主页</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">23</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">21</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">5</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">社交</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="GitHub"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="GitHub"/><span class="back-menu-item-text">GitHub</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://gitee.com/huang-cancan-xbc" title="gitee"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="gitee"/><span class="back-menu-item-text">gitee</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">博客</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.csdn.net/Huangcancan666?type=blog" title="CSDN"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="CSDN"/><span class="back-menu-item-text">CSDN</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://juejin.cn/user/3230789931118109" title="稀土掘金"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="稀土掘金"/><span class="back-menu-item-text">稀土掘金</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="fa fa-chart-bar faa-tada"></i><span> 统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/C/" style="font-size: 0.88rem;">C++<sup>6</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>8</sup></a><a href="/tags/Linux-2-6/" style="font-size: 0.88rem;">Linux 2.6<sup>1</sup></a><a href="/tags/Linux%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" style="font-size: 0.88rem;">Linux开发工具<sup>1</sup></a><a href="/tags/Obsidian/" style="font-size: 0.88rem;">Obsidian<sup>1</sup></a><a href="/tags/STL/" style="font-size: 0.88rem;">STL<sup>1</sup></a><a href="/tags/git/" style="font-size: 0.88rem;">git<sup>1</sup></a><a href="/tags/make-file/" style="font-size: 0.88rem;">make file<sup>1</sup></a><a href="/tags/yum%E6%BA%90/" style="font-size: 0.88rem;">yum源<sup>1</sup></a><a href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" style="font-size: 0.88rem;">内存管理<sup>1</sup></a><a href="/tags/%E5%AD%A6%E4%B9%A0%E5%8E%86%E7%A8%8B/" style="font-size: 0.88rem;">学习历程<sup>1</sup></a><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/" style="font-size: 0.88rem;">操作系统基础<sup>1</sup></a><a href="/tags/%E6%9D%83%E9%99%90/" style="font-size: 0.88rem;">权限<sup>1</sup></a><a href="/tags/%E6%A8%A1%E6%9D%BF/" style="font-size: 0.88rem;">模板<sup>1</sup></a><a href="/tags/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/" style="font-size: 0.88rem;">环境变量<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B/" style="font-size: 0.88rem;">算法竞赛<sup>1</sup></a><a href="/tags/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/" style="font-size: 0.88rem;">类与对象<sup>3</sup></a><a href="/tags/%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA/" style="font-size: 0.88rem;">网站搭建<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%AB%99%E9%AD%94%E6%94%B9/" style="font-size: 0.88rem;">网站魔改<sup>1</sup></a><a href="/tags/%E8%BF%9B%E5%BA%A6%E6%9D%A1/" style="font-size: 0.88rem;">进度条<sup>1</sup></a><a href="/tags/%E8%BF%9B%E7%A8%8B/" style="font-size: 0.88rem;">进程<sup>2</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("01/01/2025 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2025 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 小米里的大麦 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-olive-one.vercel.app/',
      // 自己额外添加的：
      path: location.pathname.replace(/index\.html$/, ''),
      
      region: 'ap-shanghai',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-olive-one.vercel.app/',
      region: 'ap-shanghai',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"><script async src="/js/anzhiyu/comment_barrage.js"></script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo-olive-one.vercel.app/',
        region: 'ap-shanghai',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "xiaomilidedamai@minbit.top";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script src="https://cdn.bootcdn.net/ajax/libs/echarts/4.9.0-rc.1/echarts.min.js"></script><script src="/js/footer-animal.js" defer></script><script id="click-show-text" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="false" data-text="offer,暴富,健康,offer,喜乐,成功,offer,好运,自由,offer,坚持,上岸" data-fontsize="20px" data-random="true" async="async"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>