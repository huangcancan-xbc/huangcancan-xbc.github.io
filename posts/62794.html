<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>036 进程信号 —— 信号的产生 | 小米里的大麦</title><meta name="keywords" content="Linux,进程,信号"><meta name="author" content="小米里的大麦"><meta name="copyright" content="小米里的大麦"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="036 进程信号 —— 信号的产生"><meta name="application-name" content="036 进程信号 —— 信号的产生"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="036 进程信号 —— 信号的产生"><meta property="og:url" content="https://www.minbit.top/posts/62794.html"><meta property="og:site_name" content="小米里的大麦"><meta property="og:description" content="进程信号 —— 信号的产生 首先，本节的信号和上一节的信号量没有任何关系！它们的关系就像老婆饼和老婆，没有任何关系！后面的内容主要是根据 信号的产生 → 信号的保存 → 信号的处理 来进行讲解。   Linux 中的 31 个普通信号  1. 信号的概念1. 生活中的信号生活中常见的信号，比如："><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://zycs-img-8kd.pages.dev/v2/uH1MN2u.png?_r_=0ac5cd0c-cc23-3aee-c66b-aa07286be0fa"><meta property="article:author" content="小米里的大麦"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://zycs-img-8kd.pages.dev/v2/uH1MN2u.png?_r_=0ac5cd0c-cc23-3aee-c66b-aa07286be0fa"><meta name="description" content="进程信号 —— 信号的产生 首先，本节的信号和上一节的信号量没有任何关系！它们的关系就像老婆饼和老婆，没有任何关系！后面的内容主要是根据 信号的产生 → 信号的保存 → 信号的处理 来进行讲解。   Linux 中的 31 个普通信号  1. 信号的概念1. 生活中的信号生活中常见的信号，比如："><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://www.minbit.top/posts/62794.html"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="Cd-RTVhRO2mndEhicN2cvLXbsNxPqFC6fSn6ql80eVg"/><meta name="baidu-site-verification" content="codeva-ZG3S9QTvGO"/><meta name="msvalidate.01" content="6DF744D82FE6D1FD11CE18658760B59D"/><meta name="baidu-site-verification" content="codeva-gIjOMzUuhV"/><link rel="manifest" href="/manifest.json"/><meta name="msapplication-TileColor" content="var(--anzhiyu-main)"/><link rel="mask-icon" href="/img/siteicon/apple-icon-180.png" color="#5bbad5"/><link rel="apple-touch-icon" sizes="180x180" href="/img/siteicon/apple-icon-180.png"/><link rel="apple-touch-icon-precomposed" sizes="180x180" href="/img/siteicon/apple-icon-180.png"/><link rel="icon" type="image/png" sizes="32x32" href="/img/siteicon/32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/img/siteicon/16.png"/><link rel="bookmark" href="/img/siteicon/apple-icon-180.png"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-2732.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2732-2048.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2388.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2388-1668.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1536-2048.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-1536.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2224.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2224-1668.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1620-2160.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2160-1620.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1290-2796.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2796-1290.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1179-2556.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2556-1179.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1284-2778.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2778-1284.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1170-2532.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2532-1170.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1125-2436.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2436-1125.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2688.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2688-1242.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-828-1792.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1792-828.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2208.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2208-1242.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-750-1334.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1334-750.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-640-1136.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1136-640.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: {"enable":true,"title":"友链 + 外链 + 无限进步！欢迎欣赏和贡献！","addFriendPlaceholder":"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"小米里的大麦","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":4,"basicWordCount":1999,"key":"93d1622eadde491eb0594b68ade51723.kaEiDD6A3KPzb7xv","Referer":"https://www.minbit.top/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: {"enable":true,"ck":"Jp8wwGQpp21utaFQ","LingQueMonitorID":"Jp8ztDRrxmTf7LDj"},
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: 'https://twikoo-olive-one.vercel.app/',
  commentBarrageConfig:{"enable":true,"maxBarrage":10,"barrageTime":5000,"accessToken":"25c96851dd8a790c4819ad4bfbaf153c","mailMd5":"7b12ebc2be80f9159099f6ab0e16573c"},
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: {"mode":"both","api":"https://img2color-go.vercel.app/api?img=","cover_change":true},
  authorStatus: {"skills":["🧐 准备中，就快好了，真的！😭","📚 正在学习中，加油！","🎵 喜欢听音乐，喜欢看动漫"]},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 小米里的大麦","link":"链接: ","source":"来源: 小米里的大麦","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-right"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '小米里的大麦',
  title: '036 进程信号 —— 信号的产生',
  postAI: '这篇文章讲述了Linux中信号的产生、保存和处理过程，介绍了31个普通信号的概念和定义，解释了信号作为一种异步通知机制的作用和本质。文章详细阐述了信号的处理方式，包括使用自定义信号处理函数、忽略信号或恢复默认处理，并以Ctrl+C为例说明了前台进程组的概念和信号处理流程。此外，文章还介绍了信号的产生方式，如键盘组合键、kill命令、系统调用（kill函数、raise函数、abort函数）以及硬件异常（除以0、野指针）和软件条件（SIGPIPE、alarm函数）等，并通过代码示例展示了信号处理的实际应用。',
  pageFillDescription: '进程信号 —— 信号的产生, 1. 信号的概念, 1. 生活中的信号, 2. 信号的定义与理解, 3. 信号的处理方式（3 种）, 4. 深入理解 ctrl + c, 认识作业（Job）和前后台进程, 1. Ctrl+C 为什么能杀掉前台进程？, 2. signal 函数原型, 1. 作用, 2. 函数原型, 3. 参数详解, 4. 返回值, 5. 放置位置（通常只设置一次！）, 3. 验证 Ctrl+C 是 2 号信号, 2. 信号的产生, 1. 键盘组合键（终端控制信号）, 2. kill 命令, 3. 系统调用, 1. kill 函数, 1. 功能, 2. 函数原型, 3. 参数详解, 4. 返回值, 5. 代码示例, 2. raise 函数, 1. 功能, 2. 函数原型, 3. 参数详解, 4. 返回值, 5. 代码示例, 3. abort 函数, 1. 功能, 2. 函数原型, 3. 代码示例, 4. kill、raise 和 abort 的区别, 4. 硬件异常, 1. 除以 0 导致异常, 2. 野指针导致异常, 5. 软件条件, 1. alarm 函数, 1. 功能, 2. 函数原型, 3. 参数详解, 4. 返回值, 5. 代码示例, 2. 常用信号, 1. Core dump 是什么？, 2. 为什么 Core Dump 一般虚拟机上是启用的而云服务器上是关闭的？, 3. 普通信号 VS 实时信号（了解）进程信号信号的产生首先本节的信号和上一节的信号量没有任何关系它们的关系就像老婆饼和老婆没有任何关系后面的内容主要是根据信号的产生信号的保存信号的处理来进行讲解中的个普通信号信号的概念生活中的信号生活中常见的信号比如闹钟闹钟响通知你该起床了红绿灯红灯亮告诉你该停下来了电话响铃通知你有人呼叫你需要你接听警报器火警紧急中断要求人立刻撤离可见信号本质就是通知响应核心思想是不需要你一直盯着只要有事就异步提醒你信号的定义与理解信号是一种异步通知机制用来通知进程发生了某种异步事件本质操作系统向一个进程发送一个整数编号信号编号告诉它发生了某件事要求它采取行动或做出响应你怎么认识这些信号有人教我我记住了认识识别信号知道信号的处理方法即便现在没有信号产生我们也知道信号产生后该干什么那么我们是谁站在层面我们自然是进程啦一个进程必须具备识别和处理信号的能力这种能力是其自身功能的一部分即使在没有收到任何信号的情况下也应事先明确知道每种信号该如何处理当某个信号实际产生时进程可能不会立即响应而是在合适的时机进行处理因此在信号产生与信号被真正处理之间必然存在一个时间窗口为了保证信号不会丢失进程需要具备临时记录哪些信号已经发生的能力信号的处理方式种信号产生了我们可能并不立即处理这个信号在合适的时候因为我们可能正在做更重要的事情所以信号产生后会被保存到当前的时间窗口等待信号处理可以类比为生活中的来电提醒你正在开会执行重要任务手机静音屏蔽某些信号有人打电话给你信号产生但你不接不立即处理手机记录未接来电未决信号集会议结束后你查看未接来电并回电处理信号每个信号都有默认动作但你可以选择以下三种方式之一来处理它处理方式含义举例默认动作使用系统定义的默认行为红灯亮人们默认动作是等待绿灯忽略显式地忽略该信号就像没发生一样但某些信号无法忽略如红灯亮不妨存在闯红灯的人他们完全忽视了红灯的存在自定义动作注册一个信号处理函数当信号到达时调用这个函数处理红灯亮你可能会看到大小姐驾到统统闪开随我出发这些社牛人群的自定义动作深入理解认识作业和前后台进程作业这个词听起来抽象其实就是我们在一个会话里启动的一个程序或命令运行单元关键点在里每个作业可以是一个进程也可以是一组进程进程组会帮我们记录当前有多少个作业哪个是前台作业哪些是后台作业名称解释前台作业当前直接和终端键盘输入输出交互的那组进程后台作业在终端后面跑不占用终端输入不能直接交互的那组进程前台进程组前台作业内部的那组进程组成一个进程组管它后台进程组后台作业内部的那组进程比较点前台作业后台作业是否抢占终端输入是独占否输入留给是否能直接交互可以不能能否直接接收可以不会收到能否被追踪会被追踪会被追踪前台进程前台作业对应的进程或进程组后台进程后台作业对应的进程或进程组因为管理的单位是作业把前后台作业映射成前后台进程组但底层作业就是由一个或多个进程进程组组成所以大家常常口头直接说前台进程后台进程指的其实就是前台作业后台作业里的进程我们只需要记住前台作业前台进程前台进程组在作业控制场景下是一个概念的不同层面本质指的就是当前跟终端交互能直接被打断的那一组进程相关命令后台查看拉回前台挂起后台继续为什么能杀掉前台进程的本质当我们在终端如按下它会向前台进程组发送一个信号是信号编号所以也叫号信号谁发的不是按键直接杀死进程而是终端驱动检测到我们按下了然后内核就会让这个终端把发给前台进程组为什么是前台进程下每个终端只能有一个前台进程组只有前台进程能接收由终端产生的终端控制信号比如我没能展示一个完美的的硬件到软件底层示意图只能大致说一下流程了键盘控制器缓冲区触发中断查向量表键盘驱动读码驱动识别特殊字符内核发前台进程结束敲击键盘到屏幕上打印字符计算机都做了什么当你在终端中按时会发生什么了解中的信号例如程序上的超越信号处理的黑暗角落函数原型作用用于设置某个信号的处理方式种使用自定义的信号处理函数自己写函数或者设置为忽略或者恢复为默认处理函数原型定义了一个函数指针类型表示一个参数是返回值是的函数指针参数详解要处理信号编号如等这个参数可以直接写信号对应的编号也能直接写信号信号本身就是宏信号处理的三种方式指向你写的自定义处理函数忽略默认处理注意点和不能被捕获不能忽略只能默认由内核强制处理返回值成功返回之前注册的处理函数指针方便保存旧处理方式失败返回放置位置通常只设置一次是用来告诉系统如果收到了这个信号要怎么处理所以一定要在信号有可能到来之前就设置好常见位置说明一开始就注册最常见最稳妥程序一启动就告诉内核收到某个信号就这么处理启动前先注册如果有多线程子进程通常会在主线程或父进程里先注册好再去干别的活循环前注册千万别把放在循环里反复调只需要设置一次就行验证是号信号源码一览证明信号的本质是宏列出当前系统支持的所有信号名称收到信号编号当使用了自定义捕获函数使用退出程序时会无法正常退出此时在此处调用函数即可正常退出程序不使用函数想要退出可以使用组合键也可以写成运行中按运行结果示例程序成功打印出收到信号编号的字样证明其实是号信号信号的产生键盘组合键终端控制信号产生号产生号产生号命令给指定进程发号给指定进程发号查看所有信号并不一定杀它本质是发信号什么信号自己选系统调用函数功能函数用于向指定进程或进程组发送一个信号常用于结束某个进程如发送给自己或其他进程发送自定义信号配合信号处理函数实现注意并不一定会杀死进程它只是发送信号是否终止要看目标进程是否处理或屏蔽该信号函数原型参数详解目标进程或进程组特殊值含义如下发送给的单个进程发送给当前进程所在进程组的所有进程发送给调用者有权发送信号的所有进程不推荐危险在生产中不要轻易使用可能会把整个系统都影响了发送给的进程组中所有进程要发送的信号编号比如等也可以是自定义信号如返回值成功返回失败返回并设置说明错误原因如无此权限不足等代码示例下面给你一个小示例演示父进程使用给子进程发送信号子进程注册信号处理函数后捕获该信号这里是子进程这里是父进程子进程子进程收到信号子进程子进程运行中按退出保持运行子进程休眠等待父进程发送信号父进程父进程休眠等待子进程运行向子进程发送信号父进程向子进程发送信号等待子进程结束子进程已结束父进程退出失败函数功能用来让当前程序自己给自己发一个信号函数原型或参数详解要发出的信号编号如返回值成功失败非代码示例收到信号注册自定义处理程序准备即将被终止自己给自己发函数功能用来让程序立刻异常终止发出号信号它是固定发不能换别的函数原型中用中用注意无参数无返回值调用后程序就要终止如果没捕获代码示例收到注册自定义处理程序即将收到信号立刻异常终止固定发号信号和的区别函数作用典型使用场景信号目标头文件特点给指定进程进程组发送信号谁都能杀父进程给子进程发信号脚本杀进程任意指定的进程或进程组最通用支持跨进程发信号给自己当前进程发送信号自己吓自己程序内部触发某个信号模拟外部调用它的当前进程相当于给自己发送信号自己崩溃程序发现不可恢复错误时触发异常中止调用它的当前进程只能发直接终止程序并产生若开启硬件异常除以导致异常有除法指令如果除数是硬件级别检测到非法操作硬件立刻触发这个异常会立刻中断当前指令执行由抛给操作系统操作系统收到异常中断后根据异常类型找对应的异常处理程序如果是用户态进程除默认是给该进程发送信号如果进程没处理这个信号就会被杀掉并回收资源所以除以硬件发现错误触发异常发进程崩溃收到的信号是这是除以之前触发信号这是除以之后运行结果示例野指针导致异常每个进程有自己的虚拟地址空间由操作系统的内存管理单元现代计算机会将放入一起管理用把虚拟地址翻译成物理地址访问未映射或权限不符的地址触发内核一看是合法缺页就帮你补页是非法野指针就发默认把进程干掉所以非法访问拦截判定非法发进程被杀收到的信号是注释掉会导致程序无限循环可以尝试注释掉观察现象这是程序开始之前野指针会触发信号这是程序结束之后运行结果示例软件条件就是典型的软件条件信号管道通信写端进程读端进程正常流程写读数据传递异常场景提前关闭读端或者异常退出还在不停没人接水龙头却还在放水发现了给你发信号不处理就直接软件条件的信号本质上是内核或程序自己产生的常用来定时器子进程管理超时处理注意不是硬件抛出的硬件异常而是根据进程资源状态来调度是其中最典型的函数功能用来在指定的若干秒后自动向当前进程发送信号号信号常用于实现简单的超时控制比如程序运行超过秒就触发中断防止阻塞的卡死与配合使用通常只能设置一个闹钟再次调用会覆盖上一次设置函数原型参数详解多少秒后发出设为则取消之前设置的闹钟返回值返回之前设置的剩余秒数若没有则返回如果要设置新的闹钟返回值表示原闹钟还有多久触发代码示例收到信号编号如果注释掉这里也必须要注释掉函数或者单独注释掉函数运行才会只显示前秒的输出设置闹钟秒后触发秒后产生程序运行中秒程序只会运行到秒然后被信号中断程序结束运行结果示例设置闹钟秒后触发程序运行中秒程序运行中秒程序运行中秒程序运行中秒程序运行中秒收到信号编号父子进程代码示例子进程收到信号编号子进程启动设置秒后触发子进程运行中秒子进程正常结束父进程启动等待子进程阻塞等待子进程结束父进程检测到子进程结束父进程退出运行结果示例父进程启动等待子进程子进程启动子进程运行中秒子进程运行中秒子进程运行中秒子进程运行中秒子进程运行中秒子进程收到信号编号父进程检测到子进程结束父进程退出常用信号使用命令偏底部查看做一个简单的小翻译信号名数值默认动作中文含义挂起控制终端关闭或父进程终止键盘中断键盘退出并生成非法指令执行了未定义或错误的指令程序调用异常终止并生成浮点异常除以溢出并生成强制终止不可捕获不可忽略无效内存引用段错误野指针并生成管道破裂写端写但没人读定时器到期由触发终止信号程序优雅退出用户自定义信号用户自定义信号子进程停止或结束恢复已停止的进程停止进程不可捕获不可忽略从终端暂停后台进程请求终端输入后台进程请求终端输出默认动作关键说明终止终止进程核心转储终止进程并生成文件用于调试注意一般虚拟机上是启用的而云服务器上是关闭的忽略忽略该信号继续继续已暂停的进程暂停暂停进程进程挂起状态变成是什么是程序崩溃时的事故现场记录仪通过它开发者可以精准还原崩溃时的程序状态是调试复杂问题的关键工具事后调试合理配置生成规则并结合等工具分析能显著提升问题排查效率打开的功能后一旦进程出现异常会将进程在内存中的运行信息给转存到进程当前目录磁盘上形成文件相关命令查看当前进程最大文件大小单位临时对当前启用关闭后失效表示禁用表示无限制即允许生成临时禁用还有其他相关命令这里就不过多赘述了我是子进程我的是剩余次数每秒打印一次注释掉下面这行子进程会正常退出核心转储也会显示不注释则显示访问空指针必触发从而显示核心转储子进程正常退出返回码永远走不到这里子进程结束进程退出码退出信号核心转储在进程等待的章节中讲过的位布局这里深入理解一下其他保留位位内核会把子进程的退出信息打包成一个型整数放到里这个整数就像一个位图把多个信息整理到了一块这也是为什么没有号信号的原因这个位图里面放了什么位区意义举例高位位如果子进程是调用正常退出这里是返回码高位低位位如果子进程是被信号杀死这里放信号编号第位位如果是信号杀死且生成了这里是有其他还有一些特定状态暂停继续可用宏判断用位运算怎么拆表达式意义右移位取高位低位表示终止信号编号第位表示是否生成运行结果示例的调试一般会显示信号信息调用堆栈寄存器状态错误行号变量值等一系列非常详细的信息更多调试命令请自行百度这里点到为止了安装调试包命令为什么一般虚拟机上是启用的而云服务器上是关闭的在虚拟机上调试优先在本地虚拟机开发机测试机程序挂掉后要调试最有用的证据就是文件它保存了崩溃时的内存堆栈寄存器单机单人可控一般是自己用或者小团队用没有什么安全风险也不担心磁盘写调试习惯开发环境崩溃了生成定位常规套路在云服务器上生产环境以安全和稳定为主不是以调试为主安全隐私风险大会把整个进程内存快照写到文件里里面可能包含明文账号密码秘钥用户数据比如客户表单交易信息等一旦留在磁盘或者被误传出去就是安全事故影响稳定性仔细观察会发现几十行的代码就会生成体积非常庞大的文件如果线上进程瞬间崩溃大量生成一个可以几个会把服务器磁盘打满后果很严重尤其是在大型服务器集群中非常显著其他服务写文件失败数据库宕机整个实例卡死运维风控生产环境一般靠日志监控告警和最小可复现来定位问题不直接看有些还存在自动化的专业工具脚本等普通信号实时信号了解早期信号是最简单的设计得很轻只要告诉你有事情发生了具体什么事情来了几次都不重要所以重复来的同一个信号只保留一个省开销后来的实时场景有些实时系统工业控制航空机器人需要精确传递多次事件每次都重要所以引入了实时信号内核会把多个相同实时信号放到队列里保证每一个都能送达维度普通信号实时信号范围是否排队不排队同类型只保留个排队同类型多个也可以同时排队发送顺序不保证顺序保证顺序优先级没有严格优先级实时信号优先级可自定义用途常见系统信号高实时性要求的比如实时控制进程间发送大量通知标准来源早期',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-07-16 12:10:00',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 10 || hour >= 20
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/custom/css/font.css"><link rel="stylesheet" href="/custom/css/bilibili.css"><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://zycs-img-8kd.pages.dev/v2/bFRjgdX.jpeg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">社交</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="GitHub"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="GitHub"/><span class="back-menu-item-text">GitHub</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://space.bilibili.com/1918272544" title="哔哩哔哩"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="哔哩哔哩"/><span class="back-menu-item-text">哔哩哔哩</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://gitee.com/huang-cancan-xbc" title="Gitee"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="Gitee"/><span class="back-menu-item-text">Gitee</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">博客</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.csdn.net/Huangcancan666?type=blog" title="CSDN"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="CSDN"/><span class="back-menu-item-text">CSDN</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://juejin.cn/user/3230789931118109" title="稀土掘金"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="稀土掘金"/><span class="back-menu-item-text">稀土掘金</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">小米里的大麦</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 外链</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li></ul></div></div></div><div id="nav-right"><div id="nav-naoDark"><div class="container"><div class="components"><div class="main-button"><div class="moon"></div><div class="moon"></div><div class="moon"></div></div><div class="daytime-backgrond"></div><div class="daytime-backgrond"></div><div class="daytime-backgrond"></div><div class="cloud"><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div></div><div class="cloud-light"><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div></div><div class="stars"><div class="star big"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star big"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star medium"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star medium"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star small"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star small"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div></div></div></div></div><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://zycs-img-8kd.pages.dev/v2/REbVGGL.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/REbVGGL.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://zycs-img-8kd.pages.dev/v2/1UUolM0.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/1UUolM0.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/C/" style="font-size: 1.05rem;">C++<sup>8</sup></a><a href="/tags/Git/" style="font-size: 1.05rem;">Git<sup>3</sup></a><a href="/tags/IO/" style="font-size: 1.05rem;">IO<sup>3</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>50</sup></a><a href="/tags/Obsidian/" style="font-size: 1.05rem;">Obsidian<sup>1</sup></a><a href="/tags/STL/" style="font-size: 1.05rem;">STL<sup>2</sup></a><a href="/tags/VS-Code/" style="font-size: 1.05rem;">VS Code<sup>1</sup></a><a href="/tags/%E4%BF%A1%E5%8F%B7/" style="font-size: 1.05rem;">信号<sup>3</sup></a><a href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" style="font-size: 1.05rem;">内存管理<sup>1</sup></a><a href="/tags/%E5%8E%86%E7%A8%8B/" style="font-size: 1.05rem;">历程<sup>1</sup></a><a href="/tags/%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4/" style="font-size: 1.05rem;">地址空间<sup>6</sup></a><a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 1.05rem;">数学<sup>1</sup></a><a href="/tags/%E6%A8%A1%E6%9D%BF/" style="font-size: 1.05rem;">模板<sup>1</sup></a><a href="/tags/%E7%AE%A1%E9%81%93/" style="font-size: 1.05rem;">管道<sup>2</sup></a><a href="/tags/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/" style="font-size: 1.05rem;">类与对象<sup>3</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size: 1.05rem;">线程<sup>4</sup></a><a href="/tags/%E7%BD%91%E7%AB%99/" style="font-size: 1.05rem;">网站<sup>2</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 1.05rem;">网络<sup>6</sup></a><a href="/tags/%E8%BF%9B%E7%A8%8B/" style="font-size: 1.05rem;">进程<sup>15</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">九月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/08/"><span class="card-archive-list-date">八月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/07/"><span class="card-archive-list-date">七月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/06/"><span class="card-archive-list-date">六月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/05/"><span class="card-archive-list-date">五月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/04/"><span class="card-archive-list-date">四月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/03/"><span class="card-archive-list-date">三月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">10</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/02/"><span class="card-archive-list-date">二月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div><div id="console-naoDark"><div class="container"><div class="components"><div class="main-button"><div class="moon"></div><div class="moon"></div><div class="moon"></div></div><div class="daytime-backgrond"></div><div class="daytime-backgrond"></div><div class="daytime-backgrond"></div><div class="cloud"><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div></div><div class="cloud-light"><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div></div><div class="stars"><div class="star big"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star big"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star medium"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star medium"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star small"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star small"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div></div></div></div></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/" itemprop="url">Linux</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/Linux/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Linux</span></a><a class="article-meta__tags" href="/tags/%E8%BF%9B%E7%A8%8B/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>进程</span></a><a class="article-meta__tags" href="/tags/%E4%BF%A1%E5%8F%B7/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>信号</span></a></span></div></div><h1 class="post-title" itemprop="name headline">036 进程信号 —— 信号的产生</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-07-16T04:10:00.000Z" title="发表于 2025-07-16 12:10:00">2025-07-16</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-07-16T04:10:00.000Z" title="更新于 2025-07-16 12:10:00">2025-07-16</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">7k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>25分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="036 进程信号 —— 信号的产生"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为西安"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>西安</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://zycs-img-8kd.pages.dev/v2/uH1MN2u.png?_r_=0ac5cd0c-cc23-3aee-c66b-aa07286be0fa"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><div class="post-ai-description"><div class="ai-title"><i class="anzhiyufont anzhiyu-icon-bilibili"></i><div class="ai-title-text">AI-摘要</div><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i><i class="anzhiyufont anzhiyu-icon-circle-dot" title="朗读摘要"></i><div id="ai-tag">小米里的大麦 GPT</div></div><div class="ai-explanation">AI初始化中...</div><div class="ai-btn-box"><div class="ai-btn-item">介绍自己 🙈</div><div class="ai-btn-item">生成本文简介 👋</div><div class="ai-btn-item">推荐相关文章 📖</div><div class="ai-btn-item">前往主页 🏠</div><div class="ai-btn-item" id="go-tianli-blog">前往爱发电购买</div></div><script data-pjax src="/js/anzhiyu/ai_abstract.js"></script></div><article class="post-content" id="article-container" itemscope itemtype="https://www.minbit.top/posts/62794.html"><header><a class="post-meta-categories" href="/categories/Linux/" itemprop="url">Linux</a><a href="/tags/Linux/" tabindex="-1" itemprop="url">Linux</a><a href="/tags/%E8%BF%9B%E7%A8%8B/" tabindex="-1" itemprop="url">进程</a><a href="/tags/%E4%BF%A1%E5%8F%B7/" tabindex="-1" itemprop="url">信号</a><h1 id="CrawlerTitle" itemprop="name headline">036 进程信号 —— 信号的产生</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">小米里的大麦</span><time itemprop="dateCreated datePublished" datetime="2025-07-16T04:10:00.000Z" title="发表于 2025-07-16 12:10:00">2025-07-16</time><time itemprop="dateCreated datePublished" datetime="2025-07-16T04:10:00.000Z" title="更新于 2025-07-16 12:10:00">2025-07-16</time></header><h1 id="进程信号-——-信号的产生"><a href="#进程信号-——-信号的产生" class="headerlink" title="进程信号 —— 信号的产生"></a>进程信号 —— 信号的产生</h1><blockquote>
<p>首先，本节的信号和上一节的信号量没有任何关系！它们的关系就像老婆饼和老婆，没有任何关系！后面的内容主要是根据 <strong>信号的产生 → 信号的保存 → 信号的处理</strong> 来进行讲解。</p>
</blockquote>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/chenlong_cxy/article/details/121952922">Linux 中的 31 个普通信号</a></p>
</blockquote>
<h2 id="1-信号的概念"><a href="#1-信号的概念" class="headerlink" title="1. 信号的概念"></a>1. 信号的概念</h2><h3 id="1-生活中的信号"><a href="#1-生活中的信号" class="headerlink" title="1. 生活中的信号"></a>1. 生活中的信号</h3><p>生活中常见的信号，比如：</p>
<ul>
<li><strong>闹钟</strong>：闹钟响 &#x3D; 通知你该起床了。</li>
<li><strong>红绿灯</strong>：红灯亮 &#x3D; 告诉你该停下来了。</li>
<li><strong>电话</strong>：响铃 &#x3D; 通知你有人呼叫你，需要你接听。</li>
<li><strong>警报器</strong>：火警 &#x3D; 紧急中断，要求人立刻撤离。</li>
</ul>
<p>可见，<strong>信号本质就是“通知 + 响应”</strong>，核心思想是：不需要你一直盯着，只要有事就异步提醒你。</p>
<h3 id="2-信号的定义与理解"><a href="#2-信号的定义与理解" class="headerlink" title="2. 信号的定义与理解"></a>2. 信号的定义与理解</h3><p>信号是一种 <strong>异步通知机制</strong>。用来 <strong>通知进程</strong> 发生了某种 <strong>异步事件</strong>。<strong>本质：操作系统向一个进程发送一个整数编号（信号编号），告诉它“发生了某件事”，要求它“采取行动”或“做出响应”。</strong></p>
<blockquote>
<p><strong>Q：你怎么认识这些信号？</strong><br><strong>A：有人教我 → 我记住了。认识：① 识别信号 ② 知道信号的处理方法。即便现在没有信号产生，我们也知道信号产生后该干什么。那么我们是谁？站在 OS 层面，我们自然是进程啦~</strong></p>
</blockquote>
<p>一个进程必须具备识别和处理信号的能力，这种能力是其自身功能的一部分，即使在没有收到任何信号的情况下，也应事先明确知道每种信号该如何处理。当某个信号实际产生时，进程可能不会立即响应，而是在合适的时机进行处理。因此，在信号产生与信号被真正处理之间，必然存在一个时间窗口。为了保证信号不会丢失，进程需要具备临时记录哪些信号已经发生的能力。</p>
<h3 id="3-信号的处理方式（3-种）"><a href="#3-信号的处理方式（3-种）" class="headerlink" title="3. 信号的处理方式（3 种）"></a>3. 信号的处理方式（3 种）</h3><p>信号产生了，我们可能并不立即处理这个信号，在合适的时候，因为我们可能正在做更重要的事情，所以，信号产生后会被保存到当前的时间窗口，等待信号处理。可以类比为生活中的“来电提醒”：你正在开会（执行重要任务），手机静音（屏蔽某些信号），有人打电话给你（信号产生），但你不接（不立即处理），手机记录未接来电（未决信号集），会议结束后，你查看未接来电并回电（处理信号）。</p>
<p>每个信号都有默认动作，但你可以选择以下 <strong>三种方式</strong> 之一来处理它：</p>
<table>
<thead>
<tr>
<th align="center">处理方式</th>
<th>含义</th>
<th>举例</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>默认动作</strong></td>
<td>使用系统定义的默认行为</td>
<td>红灯亮，人们 <strong>默认动作</strong> 是等待绿灯</td>
</tr>
<tr>
<td align="center"><strong>忽略</strong></td>
<td>显式地忽略该信号（就像没发生一样），但某些信号无法忽略（如 <code>SIGKILL</code>, <code>SIGSTOP</code>）</td>
<td>红灯亮，不妨存在闯红灯的人，他们完全 <strong>忽视</strong> 了红灯的存在</td>
</tr>
<tr>
<td align="center"><strong>自定义动作</strong></td>
<td>注册一个信号处理函数（signal handler），当信号到达时调用这个函数处理</td>
<td>红灯亮，你可能会看到“大小姐驾到统统闪开”“随我出发”这些社牛人群的 <strong>自定义动作</strong></td>
</tr>
</tbody></table>
<h3 id="4-深入理解-ctrl-c"><a href="#4-深入理解-ctrl-c" class="headerlink" title="4. 深入理解 ctrl + c"></a>4. 深入理解 ctrl + c</h3><blockquote>
<h4 id="认识“作业”（Job）和前后台进程"><a href="#认识“作业”（Job）和前后台进程" class="headerlink" title="认识“作业”（Job）和前后台进程"></a>认识“作业”（Job）和前后台进程</h4><p><strong>作业（Job）</strong> 这个词听起来抽象，其实就是：<strong>我们在一个 shell 会话里启动的一个程序或命令运行单元。关键点：</strong></p>
<ul>
<li>在 bash 里，每个“作业”可以是 <strong>一个进程</strong>，也可以是 <strong>一组进程（进程组）</strong>。</li>
<li>bash 会帮我们记录：当前有多少个作业？哪个是前台作业？哪些是后台作业？</li>
</ul>
<table>
<thead>
<tr>
<th>名称</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>前台作业</td>
<td>当前直接和终端（键盘输入、输出）交互的那组进程</td>
</tr>
<tr>
<td>后台作业</td>
<td>在终端后面跑，不占用终端输入，不能直接交互的那组进程</td>
</tr>
<tr>
<td>前台进程组</td>
<td>前台作业内部的那组进程，组成一个进程组，shell 管它</td>
</tr>
<tr>
<td>后台进程组</td>
<td>后台作业内部的那组进程</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>比较点</th>
<th>前台作业</th>
<th>后台作业</th>
</tr>
</thead>
<tbody><tr>
<td>是否抢占终端输入</td>
<td>是（独占）</td>
<td>否（输入留给 shell）</td>
</tr>
<tr>
<td>是否能直接交互</td>
<td>可以</td>
<td>不能</td>
</tr>
<tr>
<td>能否直接接收 Ctrl+C</td>
<td>可以</td>
<td>不会收到</td>
</tr>
<tr>
<td>能否被 shell 追踪</td>
<td>会被追踪</td>
<td>会被追踪</td>
</tr>
</tbody></table>
<ul>
<li><strong>“前台进程” ≈ “前台作业对应的进程（或进程组）”</strong></li>
<li><strong>“后台进程” ≈ “后台作业对应的进程（或进程组）”</strong></li>
</ul>
<p>因为：bash 管理的单位是 <strong>作业（Job）</strong>，<strong>把前后台“作业”映射成前后台“进程组”</strong>。但底层作业就是由一个或多个 <strong>进程</strong>（进程组）组成，所以大家常常口头直接说“前台进程 &#x2F; 后台进程”，指的其实就是“前台作业 &#x2F; 后台作业里的进程”。<strong>我们只需要记住：“前台作业 &#x2F; 前台进程 &#x2F; 前台进程组” 在作业控制场景下是一个概念的不同层面，本质指的就是：当前跟终端交互、能直接被 Ctrl+C 打断的那一组进程。</strong></p>
<p>相关命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="built_in">sleep</span> 100 &amp;      <span class="comment"># 后台</span></span><br><span class="line">&gt;<span class="built_in">jobs</span>             <span class="comment"># 查看</span></span><br><span class="line">&gt;<span class="built_in">fg</span> %1            <span class="comment"># 拉回前台</span></span><br><span class="line">&gt;Ctrl+Z           <span class="comment"># 挂起</span></span><br><span class="line">&gt;<span class="built_in">bg</span> %1            <span class="comment"># 后台继续</span></span><br></pre></td></tr></table></figure></blockquote>
<h4 id="1-Ctrl-C-为什么能杀掉前台进程？"><a href="#1-Ctrl-C-为什么能杀掉前台进程？" class="headerlink" title="1. Ctrl+C 为什么能杀掉前台进程？"></a>1. Ctrl+C 为什么能杀掉前台进程？</h4><p>Ctrl+C 的本质：当我们在终端（如 bash）按下 Ctrl+C，它会向 <strong>前台进程组</strong> 发送一个 <strong>SIGINT</strong> 信号。SIGINT 是信号编号 2，所以也叫 2 号信号。</p>
<p><strong>谁发的？</strong></p>
<ul>
<li><strong>不是按键直接杀死进程</strong>，而是 <strong>终端驱动检测到我们按下了 Ctrl+C</strong>。</li>
<li>然后内核就会让这个终端把 SIGINT 发给 <strong>前台进程组</strong>。</li>
</ul>
<p><strong>为什么是前台进程？</strong></p>
<ul>
<li>Linux 下，<strong>每个终端只能有一个前台进程组</strong>。</li>
<li>只有前台进程能接收由终端产生的 <strong>终端控制信号</strong>（比如 <code>Ctrl+C</code> → SIGINT，<code>Ctrl+Z</code> → SIGTSTP）。</li>
</ul>
<p>我没能展示一个完美的 Ctrl+C 的硬件到软件底层示意图，只能大致说一下流程了：键盘 → 控制器缓冲区 → 触发中断 → CPU 查向量表 → 键盘驱动读码 → 驱动识别特殊字符 → 内核发 SIGINT → 前台进程结束。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zyqash/article/details/142134506">敲击键盘到屏幕上打印字符计算机都做了什么 | CSDN</a></p>
<p><a target="_blank" rel="noopener" href="https://medium.com/@aantipov/what-happens-when-you-ctrl-c-in-the-terminal-36b093443e06">当你在终端中按 Ctrl-c 时会发生什么 | Medium</a></p>
<p><a target="_blank" rel="noopener" href="https://medium.com/@techwithtwin/understanding-signals-in-linux-e-g-kill-9-ctrl-c-on-programs-6da5aee8ce68">了解 Linux 中的信号，例如程序上的 kill -9、CTRL + C | Medium</a></p>
<p><a target="_blank" rel="noopener" href="https://sunshowers.io/posts/beyond-ctrl-c-signals/">超越 Ctrl-C：Unix 信号处理的黑暗角落 | sunshowers</a></p>
</blockquote>
<h4 id="2-signal-函数原型"><a href="#2-signal-函数原型" class="headerlink" title="2. signal 函数原型"></a>2. <code>signal</code> 函数原型</h4><h5 id="1-作用"><a href="#1-作用" class="headerlink" title="1. 作用"></a>1. 作用</h5><p>用于 <strong>设置某个信号的处理方式（3 种）：</strong></p>
<ul>
<li>使用自定义的 <strong>信号处理函数（handler，自己写函数）</strong>。</li>
<li>或者设置为 <strong>忽略</strong>（<code>SIG_IGN</code>）。</li>
<li>或者恢复为 <strong>默认处理</strong>（<code>SIG_DFL</code>）。</li>
</ul>
<h5 id="2-函数原型"><a href="#2-函数原型" class="headerlink" title="2. 函数原型"></a>2. 函数原型</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;signal.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">void</span> <span class="params">(*<span class="type">sighandler_t</span>)</span><span class="params">(<span class="type">int</span>)</span></span>;		<span class="comment">// typedef 定义了一个函数指针类型：sighandler_t 表示一个参数是 int、返回值是 void 的函数指针。</span></span><br><span class="line"><span class="function"><span class="type">sighandler_t</span> <span class="title">signal</span><span class="params">(<span class="type">int</span> signum, <span class="type">sighandler_t</span> handler)</span></span>;</span><br></pre></td></tr></table></figure>

<h5 id="3-参数详解"><a href="#3-参数详解" class="headerlink" title="3. 参数详解"></a>3. 参数详解</h5><ul>
<li><strong><code>int signum</code>：</strong> 要处理信号编号：如 <code>SIGINT</code>（2），<code>SIGTERM</code>（15），<code>SIGKILL</code>（9）等。这个参数可以直接写信号对应的编号，也能直接写信号（信号本身就是宏）。</li>
<li><strong><code>sighandler_t handler</code>：</strong> 信号处理的三种方式：① 指向你写的自定义处理函数 ② <code>SIG_IGN</code>（忽略）③ <code>SIG_DFL</code>（默认处理）。</li>
</ul>
<p><strong>注意点：<code>SIGKILL</code>（9）和 <code>SIGSTOP</code>（19）不能被捕获、不能忽略，只能默认由内核强制处理！</strong></p>
<h5 id="4-返回值"><a href="#4-返回值" class="headerlink" title="4. 返回值"></a>4. 返回值</h5><ul>
<li>成功：返回 <strong>之前注册的处理函数指针</strong>（方便保存旧处理方式）。</li>
<li>失败：返回 <code>SIG_ERR</code>。</li>
</ul>
<h5 id="5-放置位置（通常只设置一次！）"><a href="#5-放置位置（通常只设置一次！）" class="headerlink" title="5. 放置位置（通常只设置一次！）"></a>5. 放置位置（通常只设置一次！）</h5><p><code>signal</code> 是用来 <strong>告诉系统：如果收到了这个信号，要怎么处理</strong>，所以——<strong>一定要在信号有可能到来之前就设置好！</strong></p>
<table>
<thead>
<tr>
<th>常见位置</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>main</code> 一开始就注册</td>
<td>最常见、最稳妥：程序一启动就告诉内核“收到某个信号就这么处理”。</td>
</tr>
<tr>
<td>启动前先注册</td>
<td>如果有多线程 &#x2F; fork 子进程，通常会在主线程或父进程里先注册好，再去干别的活</td>
</tr>
<tr>
<td>循环前注册</td>
<td>千万别把 <code>signal</code> 放在循环里反复调！只需要设置一次就行。</td>
</tr>
</tbody></table>
<h4 id="3-验证-Ctrl-C-是-2-号信号"><a href="#3-验证-Ctrl-C-是-2-号信号" class="headerlink" title="3. 验证 Ctrl+C 是 2 号信号"></a>3. 验证 Ctrl+C 是 2 号信号</h4><p><strong>源码一览：证明信号的本质是宏。</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Linux/20250715231038826.png" alt="image-20250715231031692"></p>
<p><strong>列出当前系统支持的所有信号名称：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Linux/20250715231713890.png" alt="image-20250715231713804"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;signal.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myhandler</span><span class="params">(<span class="type">int</span> signum)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;收到信号编号: &quot;</span> &lt;&lt; signum &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// 当 signal 使用了自定义“捕获”函数，使用 CTRL+C 退出程序时会无法正常退出，此时在此处调用 exit 函数即可正常退出程序。</span></span><br><span class="line">    <span class="comment">// 不使用 exit 函数，想要退出可以使用 CTRL+\ 组合键。</span></span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">signal</span>(<span class="number">2</span>, myhandler);</span><br><span class="line">    <span class="comment">// 也可以写成 signal(SIGINT, myhandler);</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;运行中，按 Ctrl+C...&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">sleep</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果示例：程序成功打印出“收到信号编号: 2”的字样，证明 Ctrl+C 其实是 2 号信号 SIGINT。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Linux/20250715232026165.png" alt="image-20250715232026079"></p>
<h2 id="2-信号的产生"><a href="#2-信号的产生" class="headerlink" title="2. 信号的产生"></a>2. 信号的产生</h2><h3 id="1-键盘组合键（终端控制信号）"><a href="#1-键盘组合键（终端控制信号）" class="headerlink" title="1. 键盘组合键（终端控制信号）"></a>1. 键盘组合键（终端控制信号）</h3><ul>
<li><code>Ctrl+C</code> → 产生 <strong>SIGINT（2 号）</strong></li>
<li><code>Ctrl+\</code> → 产生 <strong>SIGQUIT（3 号）</strong></li>
<li><code>Ctrl+Z</code> → 产生 <strong>SIGTSTP（20 号）</strong></li>
</ul>
<h3 id="2-kill-命令"><a href="#2-kill-命令" class="headerlink" title="2. kill 命令"></a>2. kill 命令</h3><ul>
<li><code>kill -9 PID</code> → 给指定进程发 <strong>SIGKILL（9 号）</strong></li>
<li><code>kill -15 PID</code> → 给指定进程发 <strong>SIGTERM（15 号）</strong></li>
<li><code>kill -l</code> → 查看所有信号</li>
</ul>
<p><code>kill</code> 并不一定“杀”，它本质是“发信号”，<strong>什么信号自己选</strong>。</p>
<h3 id="3-系统调用"><a href="#3-系统调用" class="headerlink" title="3. 系统调用"></a>3. 系统调用</h3><h4 id="1-kill-函数"><a href="#1-kill-函数" class="headerlink" title="1. kill 函数"></a>1. <code>kill</code> 函数</h4><h5 id="1-功能"><a href="#1-功能" class="headerlink" title="1. 功能"></a>1. 功能</h5><p><code>kill</code> 函数用于向指定 <strong>进程</strong> 或 <strong>进程组</strong> 发送一个信号。常用于：</p>
<ul>
<li>结束某个进程（如发送 <code>SIGTERM</code>、<code>SIGKILL</code>）。</li>
<li>给自己或其他进程发送自定义信号。</li>
<li>配合信号处理函数（<code>signal</code> &#x2F; <code>sigaction</code>）实现 IPC。</li>
</ul>
<p>注意：<code>kill</code> 并不一定会“杀死”进程，它只是发送信号，是否终止要看目标进程是否处理或屏蔽该信号。</p>
<h5 id="2-函数原型-1"><a href="#2-函数原型-1" class="headerlink" title="2. 函数原型"></a>2. 函数原型</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;signal.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">kill</span><span class="params">(<span class="type">pid_t</span> pid, <span class="type">int</span> sig)</span></span>;</span><br></pre></td></tr></table></figure>

<h5 id="3-参数详解-1"><a href="#3-参数详解-1" class="headerlink" title="3. 参数详解"></a>3. 参数详解</h5><ol>
<li><code>pid_t pid</code>：目标进程 ID 或进程组 ID。特殊值含义如下：<ul>
<li><code>pid &gt; 0</code>：发送给 PID &#x3D; <code>pid</code> 的单个进程。</li>
<li><code>pid = 0</code>：发送给当前进程所在进程组的所有进程。</li>
<li><code>pid = -1</code>：发送给调用者有权发送信号的所有进程（<strong>不推荐危险！</strong>），<strong>在生产中，不要轻易使用 <code>pid = -1</code>，可能会把整个系统都影响了。</strong></li>
<li><code>pid &lt; -1</code>：发送给 PGID &#x3D; <code>-pid</code> 的进程组中所有进程。</li>
</ul>
</li>
<li><code>int sig</code>：要发送的信号编号，比如 <code>SIGKILL</code>（9）、<code>SIGTERM</code>（15）、<code>SIGSTOP</code>（19）等，也可以是自定义信号（如 <code>SIGUSR1</code>）。</li>
</ol>
<h5 id="4-返回值-1"><a href="#4-返回值-1" class="headerlink" title="4. 返回值"></a>4. 返回值</h5><ul>
<li><strong>成功</strong>：返回 <code>0</code>。</li>
<li><strong>失败</strong>：返回 <code>-1</code>，并设置 <code>errno</code> 说明错误原因（如 <code>ESRCH</code>：无此 PID，<code>EPERM</code>：权限不足等）。</li>
</ul>
<h5 id="5-代码示例"><a href="#5-代码示例" class="headerlink" title="5. 代码示例"></a>5. 代码示例</h5><p>下面给你一个小示例，演示父进程使用 <code>kill</code> 给子进程发送 <code>SIGTERM</code> 信号，子进程注册信号处理函数后捕获该信号：</p>
<blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="type">pid_t</span> pid = fork();</span><br><span class="line"></span><br><span class="line">&gt;<span class="keyword">if</span> (pid == <span class="number">0</span>)</span><br><span class="line">&gt;&#123;</span><br><span class="line">   <span class="comment">// 这里是子进程，pid=0</span></span><br><span class="line">&gt;&#125;</span><br><span class="line">&gt;<span class="keyword">else</span> <span class="keyword">if</span> (pid &gt; <span class="number">0</span>)</span><br><span class="line">&gt;&#123;</span><br><span class="line">   <span class="comment">// 这里是父进程，pid=子进程PID</span></span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure></blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span>                     <span class="comment">// fork(), sleep()</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;signal.h&gt;</span>                     <span class="comment">// signal(), kill()</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/wait.h&gt;</span>                   <span class="comment">// wait()</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myhandler</span><span class="params">(<span class="type">int</span> signum)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;子进程收到信号：&quot;</span> &lt;&lt; signum &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">pid_t</span> pid = fork();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(pid == <span class="number">0</span>)                        <span class="comment">// 子进程</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">signal</span>(<span class="number">2</span>, myhandler);</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;子进程运行中，按 Ctrl+C 退出...&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">sleep</span>(<span class="number">1</span>);                   <span class="comment">// 保持运行。子进程休眠，等待父进程发送信号</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(pid &gt; <span class="number">0</span>)                    <span class="comment">// 父进程</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">sleep</span>(<span class="number">3</span>);                       <span class="comment">// 父进程休眠，等待子进程运行</span></span><br><span class="line">        <span class="built_in">kill</span>(pid, <span class="number">2</span>);                   <span class="comment">// 向子进程发送信号</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;父进程向子进程发送信号 2&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">wait</span>(<span class="literal">NULL</span>);                     <span class="comment">// 等待子进程结束</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;子进程已结束，父进程退出！&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;fork&quot;</span>);                 <span class="comment">// fork() 失败</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="2-raise-函数"><a href="#2-raise-函数" class="headerlink" title="2. raise 函数"></a>2. <code>raise</code> 函数</h4><h5 id="1-功能-1"><a href="#1-功能-1" class="headerlink" title="1. 功能"></a>1. 功能</h5><p><strong><code>raise</code> 用来让当前程序自己给自己发一个信号。</strong></p>
<h5 id="2-函数原型-2"><a href="#2-函数原型-2" class="headerlink" title="2. 函数原型"></a>2. 函数原型</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;csignal&gt;</span>  <span class="comment">// 或 &lt;signal.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">raise</span><span class="params">(<span class="type">int</span> sig)</span></span>;</span><br></pre></td></tr></table></figure>

<h5 id="3-参数详解-2"><a href="#3-参数详解-2" class="headerlink" title="3. 参数详解"></a>3. 参数详解</h5><p><strong><code>int sig</code>：</strong> 要发出的信号编号（如 <code>SIGTERM</code>、<code>SIGINT</code>）。</p>
<h5 id="4-返回值-2"><a href="#4-返回值-2" class="headerlink" title="4. 返回值"></a>4. 返回值</h5><ul>
<li>成功：0。</li>
<li>失败：非 0。</li>
</ul>
<h5 id="5-代码示例-1"><a href="#5-代码示例-1" class="headerlink" title="5. 代码示例"></a>5. 代码示例</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;csignal&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myhandler</span><span class="params">(<span class="type">int</span> sig)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;收到信号: &quot;</span> &lt;&lt; sig &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">signal</span>(<span class="number">2</span>, myhandler);  <span class="comment">// 注册自定义处理</span></span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;程序准备即将被终止！&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">raise</span>(<span class="number">2</span>);              <span class="comment">// 自己给自己发 SIGTERM</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="3-abort-函数"><a href="#3-abort-函数" class="headerlink" title="3. abort 函数"></a>3. <code>abort</code> 函数</h4><h5 id="1-功能-2"><a href="#1-功能-2" class="headerlink" title="1. 功能"></a>1. 功能</h5><p><strong><code>abort</code> 用来让程序立刻异常终止，发出 <code>SIGABRT</code>（6 号信号）。</strong> 它是固定发 <code>SIGABRT</code>，<strong>不能换别的</strong>。</p>
<h5 id="2-函数原型-3"><a href="#2-函数原型-3" class="headerlink" title="2. 函数原型"></a>2. 函数原型</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdlib&gt;</span>  <span class="comment">// C++ 中用 &lt;cstdlib&gt;，C 中用 &lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">abort</span><span class="params">(<span class="type">void</span>)</span></span>;</span><br></pre></td></tr></table></figure>

<p>注意：无参数、无返回值，调用后程序就要终止（如果没捕获 SIGABRT）。</p>
<h5 id="3-代码示例"><a href="#3-代码示例" class="headerlink" title="3. 代码示例"></a>3. 代码示例</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;csignal&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myhandler</span><span class="params">(<span class="type">int</span> sig)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;收到 SIGABRT: &quot;</span> &lt;&lt; sig &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">signal</span>(SIGABRT, myhandler);  <span class="comment">// 注册自定义处理</span></span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;程序即将收到 abort 信号立刻异常终止...&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">abort</span>();                     <span class="comment">// 固定发 6号信号 SIGABRT</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="4-kill、raise-和-abort-的区别"><a href="#4-kill、raise-和-abort-的区别" class="headerlink" title="4. kill、raise 和 abort 的区别"></a>4. <code>kill</code>、<code>raise</code> 和 <code>abort</code> 的区别</h4><table>
<thead>
<tr>
<th>函数</th>
<th>作用</th>
<th>典型使用场景</th>
<th>信号目标</th>
<th>头文件</th>
<th>特点</th>
</tr>
</thead>
<tbody><tr>
<td><code>kill</code></td>
<td>给 <strong>指定进程&#x2F;进程组</strong> 发送信号（<strong>谁都能杀</strong>）</td>
<td>父进程给子进程发信号、脚本杀进程</td>
<td>任意指定的进程 PID（或进程组）</td>
<td><code>&lt;signal.h&gt;</code></td>
<td>最通用，支持跨进程发信号</td>
</tr>
<tr>
<td><code>raise</code></td>
<td>给 <strong>自己（当前进程）</strong> 发送信号（<strong>自己吓自己</strong>）</td>
<td>程序内部触发某个信号（模拟外部 kill）</td>
<td>调用它的当前进程</td>
<td><code>&lt;signal.h&gt;</code></td>
<td>相当于 <code>kill(getpid(), signum)</code></td>
</tr>
<tr>
<td><code>abort</code></td>
<td>给 <strong>自己</strong> 发送 <code>SIGABRT</code> 信号（<strong>自己崩溃</strong>）</td>
<td>程序发现不可恢复错误时触发异常中止</td>
<td>调用它的当前进程</td>
<td><code>&lt;cstdlib&gt;</code>（C++），<code>&lt;stdlib.h&gt;</code>（C）</td>
<td>只能发 <code>SIGABRT</code>，直接终止程序并产生 core dump（若开启）</td>
</tr>
</tbody></table>
<h3 id="4-硬件异常"><a href="#4-硬件异常" class="headerlink" title="4. 硬件异常"></a>4. 硬件异常</h3><h4 id="1-除以-0-导致异常"><a href="#1-除以-0-导致异常" class="headerlink" title="1. 除以 0 导致异常"></a>1. 除以 0 导致异常</h4><ul>
<li>CPU 有除法指令，如果除数是 0，CPU <strong>硬件级别检测到非法操作</strong>，硬件立刻触发，这个异常会立刻 <strong>中断当前指令执行</strong>，由 CPU 抛给操作系统。操作系统收到异常中断后，根据异常类型找对应的 <strong>异常处理程序</strong>。</li>
<li>如果是用户态进程除 0，OS 默认是：给该进程发送 <code>SIGFPE</code> （Floating Point Exception）信号。如果进程没处理这个信号，就会被 OS 杀掉并回收资源。</li>
</ul>
<p><strong>所以：除以 0 &#x3D; 硬件发现错误 → 触发 CPU 异常 → OS 发 SIGFPE → 进程崩溃</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;signal.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myhandler</span><span class="params">(<span class="type">int</span> sig)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;收到的信号是：&quot;</span> &lt;&lt; sig &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// signal(SIGFPE, myhandler);</span></span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;这是除以 0 之前！&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">sleep</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">    a /= <span class="number">0</span>;                    <span class="comment">// 触发 SIGFPE 信号</span></span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;这是除以 0 之后！&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">sleep</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果示例：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Linux/20250716145736660.png" alt="image-20250716145736498"></p>
<h4 id="2-野指针导致异常"><a href="#2-野指针导致异常" class="headerlink" title="2. 野指针导致异常"></a>2. 野指针导致异常</h4><p>每个进程有自己的 <strong>虚拟地址空间</strong>，由操作系统 + CPU 的 MMU（内存管理单元，现代计算机会将 MMU 放入 CPU）一起管理。CPU 用 MMU 把“虚拟地址”翻译成“物理地址”；访问未映射或权限不符的地址 → MMU 触发 Page Fault → 内核一看是“合法缺页”就帮你补页，是“非法野指针”就发 SIGSEGV，默认把进程干掉。</p>
<p><strong>所以：非法访问 &#x3D; MMU 拦截 → Page Fault → OS 判定非法 → 发 SIGSEGV → 进程被杀</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;signal.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myhandler</span><span class="params">(<span class="type">int</span> sig)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;收到的信号是：&quot;</span> &lt;&lt; sig &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);                   <span class="comment">// 注释掉会导致程序无限循环，可以尝试注释掉观察现象</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">signal</span>(SIGSEGV, myhandler);</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;这是程序开始之前！&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">sleep</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> *p = <span class="literal">nullptr</span>;</span><br><span class="line">    *p = <span class="number">10</span>;                    <span class="comment">// 野指针，会触发信号 SIGSEGV</span></span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;这是程序结束之后！&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">sleep</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果示例：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Linux/20250716150703600.png" alt="image-20250716150703445"></p>
<h3 id="5-软件条件"><a href="#5-软件条件" class="headerlink" title="5. 软件条件"></a>5. 软件条件</h3><blockquote>
<p><code>SIGPIPE</code> 就是典型的软件条件信号：管道通信：① 写端：进程 A    ② 读端：进程 B。正常流程：A 写 → B 读 → 数据传递。</p>
<p>异常场景：</p>
<ul>
<li>B 提前关闭读端（<code>close(fd)</code>），或者 B 异常退出。</li>
<li>A 还在不停 <code>write(fd, ...)</code>。</li>
</ul>
<p><code>SIGPIPE</code> &#x3D; <strong>“没人接水龙头却还在放水”</strong> → OS 发现了 → 给你发信号 → 不处理就直接 kill。</p>
</blockquote>
<p>软件条件的信号本质上是 <strong>内核或程序自己产生</strong> 的，常用来定时器、子进程管理、超时处理。注意：不是硬件 CPU 抛出的硬件异常，而是 OS 根据进程&#x2F;资源状态来调度。<code>alarm</code> 是其中最典型的。</p>
<h4 id="1-alarm-函数"><a href="#1-alarm-函数" class="headerlink" title="1. alarm 函数"></a>1. <code>alarm</code> 函数</h4><h5 id="1-功能-3"><a href="#1-功能-3" class="headerlink" title="1. 功能"></a>1. 功能</h5><p><code>alarm</code> 用来在指定的若干秒后，自动向当前进程发送 <code>SIGALRM</code> 信号（14 号信号）。常用于实现简单的超时控制，比如：</p>
<ul>
<li>程序运行超过 N 秒就触发中断。</li>
<li>防止阻塞的 IO 卡死。</li>
<li>与 <code>signal(SIGALRM, handler)</code> 配合使用。</li>
<li><code>alarm</code> 通常只能设置一个闹钟，再次调用会覆盖上一次设置。</li>
</ul>
<h5 id="2-函数原型-4"><a href="#2-函数原型-4" class="headerlink" title="2. 函数原型"></a>2. 函数原型</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">unsigned</span> <span class="type">int</span> <span class="title">alarm</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> seconds)</span></span>;</span><br></pre></td></tr></table></figure>

<h5 id="3-参数详解-3"><a href="#3-参数详解-3" class="headerlink" title="3. 参数详解"></a>3. 参数详解</h5><p><strong><code>seconds</code>：</strong> 多少秒后发出 <code>SIGALRM</code>，设为 0 则取消之前设置的闹钟。</p>
<h5 id="4-返回值-3"><a href="#4-返回值-3" class="headerlink" title="4. 返回值"></a>4. 返回值</h5><ul>
<li>返回之前设置的剩余秒数（若没有则返回 0）。</li>
<li>如果要设置新的闹钟，返回值表示原闹钟还有多久触发。</li>
</ul>
<h5 id="5-代码示例-2"><a href="#5-代码示例-2" class="headerlink" title="5. 代码示例"></a>5. 代码示例</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span>   <span class="comment">// alarm</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;signal.h&gt;</span>   <span class="comment">// signal</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myhandler</span><span class="params">(<span class="type">int</span> sig)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;收到 SIGALRM 信号，编号：&quot;</span> &lt;&lt; sig &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);          <span class="comment">// 如果注释掉这里，也必须要注释掉 signal 函数（或者单独注释掉 alarm 函数），运行才会只显示前5秒的输出</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">signal</span>(SIGALRM, myhandler);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;设置闹钟，5 秒后触发 SIGALRM...&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">alarm</span>(<span class="number">5</span>);          <span class="comment">// 5 秒后产生 SIGALRM</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;程序运行中: &quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; 秒&quot;</span> &lt;&lt; endl;   <span class="comment">// 程序只会运行到 i=5 秒，然后被 SIGALRM 信号中断</span></span><br><span class="line">        <span class="built_in">sleep</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;程序结束。&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[hcc@hcss-ecs-be68 Signal Generation]$ ./alarm </span><br><span class="line">设置闹钟，5 秒后触发 SIGALRM...</span><br><span class="line">程序运行中: 1 秒</span><br><span class="line">程序运行中: 2 秒</span><br><span class="line">程序运行中: 3 秒</span><br><span class="line">程序运行中: 4 秒</span><br><span class="line">程序运行中: 5 秒</span><br><span class="line">收到 SIGALRM 信号，编号：14</span><br></pre></td></tr></table></figure>

<p>父子进程 + alarm + signal 代码示例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span>     <span class="comment">// fork(), alarm(), sleep()</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;signal.h&gt;</span>     <span class="comment">// signal()</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/wait.h&gt;</span>   <span class="comment">// wait()</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">alarm_handler</span><span class="params">(<span class="type">int</span> sig)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;子进程收到 SIGALRM 信号，编号：&quot;</span> &lt;&lt; sig &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">pid_t</span> pid = fork();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (pid == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;子进程启动，PID: &quot;</span> &lt;&lt; <span class="built_in">getpid</span>() &lt;&lt; endl;</span><br><span class="line">        <span class="built_in">signal</span>(SIGALRM, alarm_handler);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">alarm</span>(<span class="number">5</span>);                           <span class="comment">// 设置 5 秒后触发 SIGALRM</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;子进程运行中: &quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; 秒&quot;</span> &lt;&lt; endl;</span><br><span class="line">            <span class="built_in">sleep</span>(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;子进程正常结束。&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (pid &gt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;父进程启动，PID: &quot;</span> &lt;&lt; <span class="built_in">getpid</span>() &lt;&lt; <span class="string">&quot;，等待子进程...&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> status;</span><br><span class="line">        <span class="built_in">waitpid</span>(pid, &amp;status, <span class="number">0</span>);           <span class="comment">// 阻塞等待子进程结束</span></span><br><span class="line"></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;父进程检测到子进程结束，父进程退出。&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;fork&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[hcc@hcss-ecs-be68 Signal Generation]$ ./alarm2</span><br><span class="line">父进程启动，PID: 1754，等待子进程...</span><br><span class="line">子进程启动，PID: 1755</span><br><span class="line">子进程运行中: 1 秒</span><br><span class="line">子进程运行中: 2 秒</span><br><span class="line">子进程运行中: 3 秒</span><br><span class="line">子进程运行中: 4 秒</span><br><span class="line">子进程运行中: 5 秒</span><br><span class="line">子进程收到 SIGALRM 信号，编号：14</span><br><span class="line">父进程检测到子进程结束，父进程退出。</span><br></pre></td></tr></table></figure>

<h4 id="2-常用信号"><a href="#2-常用信号" class="headerlink" title="2. 常用信号"></a>2. 常用信号</h4><p>使用 <code>man 7 signal</code> 命令（偏底部）查看：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Linux/20250716232959970.png" alt="image-20250716232959815"></p>
<p>做一个简单的小翻译：</p>
<table>
<thead>
<tr>
<th>信号名</th>
<th>数值</th>
<th>默认动作</th>
<th>中文含义</th>
</tr>
</thead>
<tbody><tr>
<td><strong>SIGHUP</strong></td>
<td>1</td>
<td>Term</td>
<td>挂起：控制终端关闭或父进程终止</td>
</tr>
<tr>
<td><strong>SIGINT</strong></td>
<td>2</td>
<td>Term</td>
<td>键盘中断（Ctrl+C）</td>
</tr>
<tr>
<td><strong>SIGQUIT</strong></td>
<td>3</td>
<td>Core</td>
<td>键盘退出（Ctrl+\），并生成 core dump</td>
</tr>
<tr>
<td><strong>SIGILL</strong></td>
<td>4</td>
<td>Core</td>
<td>非法指令（CPU 执行了未定义或错误的指令）</td>
</tr>
<tr>
<td><strong>SIGABRT</strong></td>
<td>6</td>
<td>Core</td>
<td>程序调用 <code>abort()</code>，异常终止并生成 core dump</td>
</tr>
<tr>
<td><strong>SIGFPE</strong></td>
<td>8</td>
<td>Core</td>
<td>浮点异常（除以 0、溢出）并生成 core dump</td>
</tr>
<tr>
<td><strong>SIGKILL</strong></td>
<td>9</td>
<td>Term</td>
<td>强制终止（不可捕获，不可忽略）</td>
</tr>
<tr>
<td><strong>SIGSEGV</strong></td>
<td>11</td>
<td>Core</td>
<td>无效内存引用（段错误，野指针）并生成 core dump</td>
</tr>
<tr>
<td><strong>SIGPIPE</strong></td>
<td>13</td>
<td>Term</td>
<td>管道破裂：写端写但没人读</td>
</tr>
<tr>
<td><strong>SIGALRM</strong></td>
<td>14</td>
<td>Term</td>
<td>定时器到期（由 <code>alarm()</code> 触发）</td>
</tr>
<tr>
<td><strong>SIGTERM</strong></td>
<td>15</td>
<td>Term</td>
<td>终止信号（程序优雅退出）</td>
</tr>
<tr>
<td><strong>SIGUSR1</strong></td>
<td>30,10,16</td>
<td>Term</td>
<td>用户自定义信号 1</td>
</tr>
<tr>
<td><strong>SIGUSR2</strong></td>
<td>31,12,17</td>
<td>Term</td>
<td>用户自定义信号 2</td>
</tr>
<tr>
<td><strong>SIGCHLD</strong></td>
<td>20,17,18</td>
<td>Ign</td>
<td>子进程停止或结束</td>
</tr>
<tr>
<td><strong>SIGCONT</strong></td>
<td>19,18,25</td>
<td>Cont</td>
<td>恢复已停止的进程</td>
</tr>
<tr>
<td><strong>SIGSTOP</strong></td>
<td>17,19,23</td>
<td>Stop</td>
<td>停止进程（不可捕获，不可忽略）</td>
</tr>
<tr>
<td><strong>SIGTSTP</strong></td>
<td>18,20,24</td>
<td>Stop</td>
<td>从终端暂停（Ctrl+Z）</td>
</tr>
<tr>
<td><strong>SIGTTIN</strong></td>
<td>21,21,26</td>
<td>Stop</td>
<td>后台进程请求终端输入</td>
</tr>
<tr>
<td><strong>SIGTTOU</strong></td>
<td>22,22,27</td>
<td>Stop</td>
<td>后台进程请求终端输出</td>
</tr>
</tbody></table>
<p><strong>默认动作关键说明：</strong></p>
<ul>
<li><strong>终止（Term）</strong> ：终止进程。</li>
<li><strong>核心转储（Core）</strong> ：终止进程并生成 <strong>core dump 文件</strong>（用于调试）。<strong>注意：一般虚拟机上是启用的，而云服务器上是关闭的！</strong></li>
<li><strong>忽略（Ign）</strong> ：忽略该信号。</li>
<li><strong>继续（Cont）</strong> ：继续已暂停的进程。</li>
<li><strong>暂停（Stop）</strong> ：暂停进程（进程挂起，状态变成 T）。</li>
</ul>
<h5 id="1-Core-dump-是什么？"><a href="#1-Core-dump-是什么？" class="headerlink" title="1. Core dump 是什么？"></a>1. Core dump 是什么？</h5><p>Core Dump 是程序崩溃时的“事故现场记录仪”，通过它开发者可以精准还原崩溃时的程序状态，<strong>是调试复杂问题的关键工具（事后调试）</strong>。合理配置 Core Dump 生成规则，并结合 GDB 等工具分析，能显著提升问题排查效率。打开 OS 的 Core Dump 功能后，一旦进程出现异常，OS 会将进程在内存中的运行信息给 Dump（转存）到进程当前目录（磁盘）上形成 core.pid 文件！</p>
<p>相关命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ulimit</span> -c				<span class="comment"># 查看当前进程最大 Core 文件大小（单位：KB）</span></span><br><span class="line"><span class="built_in">ulimit</span> -c unlimited		 <span class="comment"># 临时对当前 shell 启用，关闭 shell 后失效（0 表示禁用，unlimited 表示 无限制，即允许生成）</span></span><br><span class="line"><span class="built_in">ulimit</span> -c 0				<span class="comment"># 临时禁用</span></span><br></pre></td></tr></table></figure>

<p>Core Dump 还有其他相关命令，这里就不过多赘述了，</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span>     <span class="comment">// fork(), sleep(), getpid(), exit()</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/wait.h&gt;</span>   <span class="comment">// waitpid()</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdlib&gt;</span>      <span class="comment">// exit()</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">pid_t</span> id = fork();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (id == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> cnt = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (cnt)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;我是子进程, 我的 pid 是: &quot;</span> &lt;&lt; <span class="built_in">getpid</span>() &lt;&lt; <span class="string">&quot;, 剩余次数: &quot;</span> &lt;&lt; cnt &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">sleep</span>(<span class="number">1</span>);               <span class="comment">// 每秒打印一次</span></span><br><span class="line">            cnt--;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 注释掉下面这2行，子进程会正常退出，core dump（核心转储）也会显示 0，不注释则显示1</span></span><br><span class="line">        <span class="type">int</span> *p = <span class="literal">nullptr</span>;</span><br><span class="line">        *p = <span class="number">123</span>;                   <span class="comment">// 访问空指针，必触发 SIGSEGV，从而显示 core dump（核心转储）</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);                    <span class="comment">// 子进程正常退出，返回码 0(永远走不到这里)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> status = <span class="number">0</span>;</span><br><span class="line">    <span class="type">pid_t</span> rid = <span class="built_in">waitpid</span>(id, &amp;status, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (rid == id)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;子进程结束，进程 id:&quot;</span> &lt;&lt; rid &lt;&lt; <span class="string">&quot;   &quot;</span>&lt;&lt; <span class="string">&quot;退出码:&quot;</span> &lt;&lt; ((status &gt;&gt; <span class="number">8</span>) &amp; <span class="number">0xFF</span>) &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;退出信号: &quot;</span> &lt;&lt; (status &amp; <span class="number">0x7F</span>) &lt;&lt; <span class="string">&quot;   &quot;</span> &lt;&lt; <span class="string">&quot;核心转储: &quot;</span> &lt;&lt; ((status &gt;&gt; <span class="number">7</span>) &amp; <span class="number">1</span>) &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在进程等待的章节中讲过 <code>status</code> 的位布局，这里深入理解一下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Linux/20250414221823071.png" alt="image-20250414221815934"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">31                              16 15              8 7     7 6         0</span><br><span class="line">+--------------------------------+------------------+-------+----------+</span><br><span class="line">|           其他保留             |  <span class="built_in">exit</span> code(8位)  | core? | signal(7位)|</span><br><span class="line">+--------------------------------+------------------+-------+----------+</span><br></pre></td></tr></table></figure>

<p>内核会把 <strong>子进程的退出信息</strong> 打包成一个 <strong>int 型整数</strong>，放到 <code>status</code> 里，这个整数就像一个 <strong>位图</strong>，把多个信息整理到了一块。这也是为什么没有 32、33 号信号的原因。</p>
<p><strong>这个位图里面放了什么？</strong></p>
<table>
<thead>
<tr>
<th>位区</th>
<th>意义</th>
<th>举例</th>
</tr>
</thead>
<tbody><tr>
<td>高 8 位（位 8~15）</td>
<td>如果子进程是调用 <code>exit</code> 正常退出，这里是返回码</td>
<td><code>exit(42)</code> → 高 8 位 &#x3D; 42</td>
</tr>
<tr>
<td>低 7 位（位 0~6）</td>
<td>如果子进程是被信号杀死，这里放 <strong>信号编号</strong></td>
<td><code>SIGSEGV</code> → 11</td>
</tr>
<tr>
<td>第 7 位（位 7）</td>
<td>如果是信号杀死，且生成了 core dump，这里是 1</td>
<td>有 core dump</td>
</tr>
<tr>
<td>其他</td>
<td>还有一些特定状态（暂停&#x2F;继续）可用宏判断</td>
<td><code>WIFSTOPPED</code>、<code>WIFCONTINUED</code></td>
</tr>
</tbody></table>
<p><strong>用位运算怎么拆？</strong></p>
<table>
<thead>
<tr>
<th>表达式</th>
<th>意义</th>
</tr>
</thead>
<tbody><tr>
<td><code>(status &gt;&gt; 8) &amp; 0xFF</code></td>
<td>右移 8 位，取高 8 位 &#x3D; <code>exit code</code></td>
</tr>
<tr>
<td><code>status &amp; 0x7F</code></td>
<td>低 7 位，表示终止信号编号</td>
</tr>
<tr>
<td><code>(status &gt;&gt; 7) &amp; 1</code></td>
<td>第 7 位，表示是否生成 core dump</td>
</tr>
</tbody></table>
</blockquote>
<p>运行结果示例：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Linux/20250717002737826.png" alt="image-20250717002737659"></p>
<p><strong>Core Dump 的调试：</strong> 一般会显示信号信息、调用堆栈、寄存器状态、错误行号、变量值等一系列非常详细的信息！</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Linux/20250717005042032.png" alt="image-20250717005041894"></p>
<p>更多调试命令请自行百度，这里点到为止了。</p>
<blockquote>
<p><strong>安装调试包命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="built_in">sudo</span> yum install debuginfo-install glibc-2.17-326.el7_9.3.x86_64 libgcc-4.8.5-44.el7.x86_64</span><br></pre></td></tr></table></figure></blockquote>
<hr>
<h5 id="2-为什么-Core-Dump-一般虚拟机上是启用的，而云服务器上是关闭的？"><a href="#2-为什么-Core-Dump-一般虚拟机上是启用的，而云服务器上是关闭的？" class="headerlink" title="2. 为什么 Core Dump 一般虚拟机上是启用的，而云服务器上是关闭的？"></a>2. 为什么 Core Dump 一般虚拟机上是启用的，而云服务器上是关闭的？</h5><ol>
<li><p><strong>在虚拟机上：</strong></p>
<ul>
<li><p><strong>调试优先</strong>：在本地虚拟机（开发机、测试机），程序挂掉后要调试，最有用的证据就是 <strong>core 文件</strong>（它保存了崩溃时的内存、堆栈、寄存器）。</p>
</li>
<li><p><strong>单机单人可控</strong>：一般是自己用或者小团队用，没有什么安全风险，也不担心磁盘写 core。</p>
</li>
<li><p><strong>调试习惯</strong>：开发环境崩溃了，生成 core → <code>gdb ./a.out core.xxx</code> → 定位 bug，常规套路。</p>
</li>
</ul>
</li>
<li><p><strong>在云服务器上：</strong></p>
<ul>
<li><p><strong>生产环境以安全和稳定为主，不是以调试为主！</strong></p>
</li>
<li><p><strong>安全隐私风险大：</strong> core dump 会把 <strong>整个进程内存快照</strong> 写到文件里，里面可能包含：明文账号密码、秘钥、用户数据（比如客户表单、交易信息）等，一旦留在磁盘或者被误传出去，就是安全事故。</p>
</li>
</ul>
</li>
<li><p><strong>影响稳定性：</strong> 仔细观察会发现：几十行的代码就会生成体积非常庞大的 core 文件。如果线上进程瞬间崩溃大量生成 core（一个 core 可以几个 GB），会把服务器磁盘打满，后果很严重（尤其是在大型服务器集群中非常显著！）：</p>
<ul>
<li><p>其他服务写文件失败。</p>
</li>
<li><p>数据库宕机。</p>
</li>
<li><p>整个实例卡死。</p>
</li>
</ul>
</li>
<li><p><strong>运维风控：</strong> 生产环境一般靠 <strong>日志</strong>、<strong>监控告警</strong> 和最小可复现 Demo 来定位问题，不直接看 core dump。有些还存在自动化的专业 debug 工具&#x2F;脚本等。</p>
</li>
</ol>
<h4 id="3-普通信号-VS-实时信号（了解）"><a href="#3-普通信号-VS-实时信号（了解）" class="headerlink" title="3. 普通信号 VS 实时信号（了解）"></a>3. 普通信号 VS 实时信号（了解）</h4><p><strong>早期 UNIX</strong>：</p>
<ul>
<li>信号是最简单的 IPC，设计得很“轻”：只要告诉你“有事情发生了”，具体什么事情、来了几次都不重要。</li>
<li>所以，重复来的同一个信号只保留一个，省开销。</li>
</ul>
<p><strong>后来的实时场景</strong>：</p>
<ul>
<li>有些实时系统（工业控制、航空、机器人）需要精确传递多次事件（每次都重要）。</li>
<li>所以 Linux 引入了 <strong>实时信号</strong>，内核会把多个相同实时信号放到队列里，保证每一个都能送达。</li>
</ul>
<table>
<thead>
<tr>
<th>维度</th>
<th>普通信号</th>
<th>实时信号</th>
</tr>
</thead>
<tbody><tr>
<td>范围</td>
<td>1 ~ 31</td>
<td>32 ~ 64</td>
</tr>
<tr>
<td>是否排队</td>
<td>不排队，同类型只保留 1 个</td>
<td>排队，同类型多个也可以同时排队</td>
</tr>
<tr>
<td>发送顺序</td>
<td>不保证顺序</td>
<td>保证顺序 FIFO</td>
</tr>
<tr>
<td>优先级</td>
<td>没有严格优先级</td>
<td>实时信号优先级可自定义</td>
</tr>
<tr>
<td>用途</td>
<td>kill、Ctrl+C、kill -9、常见系统信号</td>
<td>高实时性要求的 IPC，比如实时控制、进程间发送大量通知</td>
</tr>
<tr>
<td>标准来源</td>
<td>早期 UNIX</td>
<td>POSIX.1b</td>
</tr>
</tbody></table>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/bFRjgdX.jpeg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/bFRjgdX.jpeg" title="头像" alt="头像"></a><div class="post-copyright__author_name">小米里的大麦</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://www.minbit.top/posts/62794.html">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://www.minbit.top/posts/62794.html')">036 进程信号 —— 信号的产生</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://zycs-img-8kd.pages.dev/v2/REbVGGL.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/REbVGGL.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://zycs-img-8kd.pages.dev/v2/1UUolM0.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/1UUolM0.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://www.minbit.top/posts/62794.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=036 进程信号 —— 信号的产生&amp;url=https://www.minbit.top/posts/62794.html&amp;pic=https://zycs-img-8kd.pages.dev/v2/uH1MN2u.png?_r_=0ac5cd0c-cc23-3aee-c66b-aa07286be0fa" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">知识共享署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0)</a> 许可协议。转载请注明来自 <a href="https://www.minbit.top" target="_blank">小米里的大麦</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/Linux/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Linux<span class="tagsPageCount">50</span></a><a class="post-meta__box__tags" href="/tags/%E8%BF%9B%E7%A8%8B/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>进程<span class="tagsPageCount">15</span></a><a class="post-meta__box__tags" href="/tags/%E4%BF%A1%E5%8F%B7/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>信号<span class="tagsPageCount">3</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://zycs-img-8kd.pages.dev/v2/fETMVUS.jpeg?_r_=c529c723-4b01-5bf8-fe19-d1438fd9563d" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/30975.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/0k1JltC.jpeg?_r_=9617414a-d2ea-5b1d-9006-64d8e9cd0e98" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">035 System V 消息队列和信号量（了解）</div></div></a></div><div class="next-post pull-right"><a href="/posts/7454.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/fETMVUS.jpeg?_r_=bbec3a68-3ac0-41bc-e365-81a907a21993" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">037 进程信号 —— 信号的保存</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/7454.html" title="037 进程信号 —— 信号的保存"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/fETMVUS.jpeg?_r_=bbec3a68-3ac0-41bc-e365-81a907a21993" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-07-19</div><div class="title">037 进程信号 —— 信号的保存</div></div></a></div><div><a href="/posts/15091.html" title="038 进程信号 —— 信号的处理"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/0k1JltC.jpeg?_r_=cc104a30-71d4-a9fd-998a-4e97d5b313f0" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-07-20</div><div class="title">038 进程信号 —— 信号的处理</div></div></a></div><div><a href="/posts/4610.html" title="011 Linux进程"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/uH1MN2u.png?_r_=d8aca62d-f18a-5698-334e-3d14589b8ae1" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-24</div><div class="title">011 Linux进程</div></div></a></div><div><a href="/posts/22624.html" title="012 进程状态和优先级"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/fETMVUS.jpeg?_r_=8e155880-809b-e75c-f6b5-d0e4dc7c05aa" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-26</div><div class="title">012 进程状态和优先级</div></div></a></div><div><a href="/posts/14630.html" title="014 Linux 2.6内核进程调度队列（了解）"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/0k1JltC.jpeg?_r_=5eede737-a0bb-6d1d-9df9-52d9e557bac4" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-04-01</div><div class="title">014 Linux 2.6内核进程调度队列（了解）</div></div></a></div><div><a href="/posts/9600.html" title="016 进程控制 —— 进程创建"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/Jci6x23.png?_r_=faf0f95a-4ae7-bd43-55ff-7aab839ee21e" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-04-05</div><div class="title">016 进程控制 —— 进程创建</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/bFRjgdX.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description">时间好像总会留下点什么,或许是一个人,或许是一个梦,或许……是一段有意义的经历~</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">小米里的大麦</h1><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/huangcancan-xbc" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content"><span>👋🏻 Hi，我是 <a target="_blank" href="https://huangcancan-xbc.github.io" rel="external nofollow noreferrer noopener" style="font-weight:bold; font-size:1.1em; color:#5166f0;">小米里的大麦</a>，欢迎来看我的博客鸭！</span><br>
<span>👉 建议优先查看置顶的 <a target="_blank" href="https://huangcancan-xbc.github.io/posts/17934.html" rel="external nofollow noreferrer noopener" style="font-weight:bold; font-size:1.1em; color:#5166f0;">网站说明</a>，如有问题欢迎评论区交流！</span><br>
<span>😫 页面异常？尝试<kbd>Ctrl</kbd>+<kbd>F5</kbd></span><br>
<span>📩 联系我：<a href="mailto:hc1960074081@qq.com" rel="external nofollow noreferrer"><b>给我发送邮件🚀</b></a></span>  
</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E4%BF%A1%E5%8F%B7-%E2%80%94%E2%80%94-%E4%BF%A1%E5%8F%B7%E7%9A%84%E4%BA%A7%E7%94%9F"><span class="toc-number">1.</span> <span class="toc-text">进程信号 —— 信号的产生</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%BF%A1%E5%8F%B7%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">1.1.</span> <span class="toc-text">1. 信号的概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%94%9F%E6%B4%BB%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. 生活中的信号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BF%A1%E5%8F%B7%E7%9A%84%E5%AE%9A%E4%B9%89%E4%B8%8E%E7%90%86%E8%A7%A3"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. 信号的定义与理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BF%A1%E5%8F%B7%E7%9A%84%E5%A4%84%E7%90%86%E6%96%B9%E5%BC%8F%EF%BC%883-%E7%A7%8D%EF%BC%89"><span class="toc-number">1.1.3.</span> <span class="toc-text">3. 信号的处理方式（3 种）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3-ctrl-c"><span class="toc-number">1.1.4.</span> <span class="toc-text">4. 深入理解 ctrl + c</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%A4%E8%AF%86%E2%80%9C%E4%BD%9C%E4%B8%9A%E2%80%9D%EF%BC%88Job%EF%BC%89%E5%92%8C%E5%89%8D%E5%90%8E%E5%8F%B0%E8%BF%9B%E7%A8%8B"><span class="toc-number">1.1.4.1.</span> <span class="toc-text">认识“作业”（Job）和前后台进程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Ctrl-C-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%83%BD%E6%9D%80%E6%8E%89%E5%89%8D%E5%8F%B0%E8%BF%9B%E7%A8%8B%EF%BC%9F"><span class="toc-number">1.1.4.2.</span> <span class="toc-text">1. Ctrl+C 为什么能杀掉前台进程？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-signal-%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B"><span class="toc-number">1.1.4.3.</span> <span class="toc-text">2. signal 函数原型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E4%BD%9C%E7%94%A8"><span class="toc-number">1.1.4.3.1.</span> <span class="toc-text">1. 作用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B"><span class="toc-number">1.1.4.3.2.</span> <span class="toc-text">2. 函数原型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%8F%82%E6%95%B0%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.1.4.3.3.</span> <span class="toc-text">3. 参数详解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">1.1.4.3.4.</span> <span class="toc-text">4. 返回值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E6%94%BE%E7%BD%AE%E4%BD%8D%E7%BD%AE%EF%BC%88%E9%80%9A%E5%B8%B8%E5%8F%AA%E8%AE%BE%E7%BD%AE%E4%B8%80%E6%AC%A1%EF%BC%81%EF%BC%89"><span class="toc-number">1.1.4.3.5.</span> <span class="toc-text">5. 放置位置（通常只设置一次！）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E9%AA%8C%E8%AF%81-Ctrl-C-%E6%98%AF-2-%E5%8F%B7%E4%BF%A1%E5%8F%B7"><span class="toc-number">1.1.4.4.</span> <span class="toc-text">3. 验证 Ctrl+C 是 2 号信号</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%BF%A1%E5%8F%B7%E7%9A%84%E4%BA%A7%E7%94%9F"><span class="toc-number">1.2.</span> <span class="toc-text">2. 信号的产生</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%94%AE%E7%9B%98%E7%BB%84%E5%90%88%E9%94%AE%EF%BC%88%E7%BB%88%E7%AB%AF%E6%8E%A7%E5%88%B6%E4%BF%A1%E5%8F%B7%EF%BC%89"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. 键盘组合键（终端控制信号）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-kill-%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. kill 命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. 系统调用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-kill-%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">1. kill 函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%8A%9F%E8%83%BD"><span class="toc-number">1.2.3.1.1.</span> <span class="toc-text">1. 功能</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B-1"><span class="toc-number">1.2.3.1.2.</span> <span class="toc-text">2. 函数原型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%8F%82%E6%95%B0%E8%AF%A6%E8%A7%A3-1"><span class="toc-number">1.2.3.1.3.</span> <span class="toc-text">3. 参数详解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E8%BF%94%E5%9B%9E%E5%80%BC-1"><span class="toc-number">1.2.3.1.4.</span> <span class="toc-text">4. 返回值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.2.3.1.5.</span> <span class="toc-text">5. 代码示例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-raise-%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">2. raise 函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%8A%9F%E8%83%BD-1"><span class="toc-number">1.2.3.2.1.</span> <span class="toc-text">1. 功能</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B-2"><span class="toc-number">1.2.3.2.2.</span> <span class="toc-text">2. 函数原型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%8F%82%E6%95%B0%E8%AF%A6%E8%A7%A3-2"><span class="toc-number">1.2.3.2.3.</span> <span class="toc-text">3. 参数详解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E8%BF%94%E5%9B%9E%E5%80%BC-2"><span class="toc-number">1.2.3.2.4.</span> <span class="toc-text">4. 返回值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B-1"><span class="toc-number">1.2.3.2.5.</span> <span class="toc-text">5. 代码示例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-abort-%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.3.3.</span> <span class="toc-text">3. abort 函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%8A%9F%E8%83%BD-2"><span class="toc-number">1.2.3.3.1.</span> <span class="toc-text">1. 功能</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B-3"><span class="toc-number">1.2.3.3.2.</span> <span class="toc-text">2. 函数原型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.2.3.3.3.</span> <span class="toc-text">3. 代码示例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-kill%E3%80%81raise-%E5%92%8C-abort-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.2.3.4.</span> <span class="toc-text">4. kill、raise 和 abort 的区别</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%A1%AC%E4%BB%B6%E5%BC%82%E5%B8%B8"><span class="toc-number">1.2.4.</span> <span class="toc-text">4. 硬件异常</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E9%99%A4%E4%BB%A5-0-%E5%AF%BC%E8%87%B4%E5%BC%82%E5%B8%B8"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">1. 除以 0 导致异常</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E9%87%8E%E6%8C%87%E9%92%88%E5%AF%BC%E8%87%B4%E5%BC%82%E5%B8%B8"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">2. 野指针导致异常</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E8%BD%AF%E4%BB%B6%E6%9D%A1%E4%BB%B6"><span class="toc-number">1.2.5.</span> <span class="toc-text">5. 软件条件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-alarm-%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.5.1.</span> <span class="toc-text">1. alarm 函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%8A%9F%E8%83%BD-3"><span class="toc-number">1.2.5.1.1.</span> <span class="toc-text">1. 功能</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B-4"><span class="toc-number">1.2.5.1.2.</span> <span class="toc-text">2. 函数原型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%8F%82%E6%95%B0%E8%AF%A6%E8%A7%A3-3"><span class="toc-number">1.2.5.1.3.</span> <span class="toc-text">3. 参数详解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E8%BF%94%E5%9B%9E%E5%80%BC-3"><span class="toc-number">1.2.5.1.4.</span> <span class="toc-text">4. 返回值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B-2"><span class="toc-number">1.2.5.1.5.</span> <span class="toc-text">5. 代码示例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%B8%B8%E7%94%A8%E4%BF%A1%E5%8F%B7"><span class="toc-number">1.2.5.2.</span> <span class="toc-text">2. 常用信号</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-Core-dump-%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.2.5.2.1.</span> <span class="toc-text">1. Core dump 是什么？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E4%B8%BA%E4%BB%80%E4%B9%88-Core-Dump-%E4%B8%80%E8%88%AC%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%8A%E6%98%AF%E5%90%AF%E7%94%A8%E7%9A%84%EF%BC%8C%E8%80%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E6%98%AF%E5%85%B3%E9%97%AD%E7%9A%84%EF%BC%9F"><span class="toc-number">1.2.5.2.2.</span> <span class="toc-text">2. 为什么 Core Dump 一般虚拟机上是启用的，而云服务器上是关闭的？</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%99%AE%E9%80%9A%E4%BF%A1%E5%8F%B7-VS-%E5%AE%9E%E6%97%B6%E4%BF%A1%E5%8F%B7%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89"><span class="toc-number">1.2.5.3.</span> <span class="toc-text">3. 普通信号 VS 实时信号（了解）</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/62772.html" title="050 传输层 —— UDP"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/0k1JltC.jpeg?_r_=2f802891-8784-4ddb-e5bd-9d61b1397323" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="050 传输层 —— UDP"/></a><div class="content"><a class="title" href="/posts/62772.html" title="050 传输层 —— UDP">050 传输层 —— UDP</a><time datetime="2025-09-12T04:00:00.000Z" title="发表于 2025-09-12 12:00:00">2025-09-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/34998.html" title="049 HTTPS 协议原理"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/fETMVUS.jpeg?_r_=c529c723-4b01-5bf8-fe19-d1438fd9563d" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="049 HTTPS 协议原理"/></a><div class="content"><a class="title" href="/posts/34998.html" title="049 HTTPS 协议原理">049 HTTPS 协议原理</a><time datetime="2025-08-28T04:00:00.000Z" title="发表于 2025-08-28 12:00:00">2025-08-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/63840.html" title="048 HTTP 协议"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/aKlysyx.png?_r_=6011401b-b224-1423-1a89-ceeead1936d4" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="048 HTTP 协议"/></a><div class="content"><a class="title" href="/posts/63840.html" title="048 HTTP 协议">048 HTTP 协议</a><time datetime="2025-08-25T04:00:00.000Z" title="发表于 2025-08-25 12:00:00">2025-08-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/38905.html" title="047 网络传输基础：TCP 连接建立与数据序列化"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/Jci6x23.png?_r_=c7a9f229-9f6b-3f2e-87d5-e6ca5316f5f5" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="047 网络传输基础：TCP 连接建立与数据序列化"/></a><div class="content"><a class="title" href="/posts/38905.html" title="047 网络传输基础：TCP 连接建立与数据序列化">047 网络传输基础：TCP 连接建立与数据序列化</a><time datetime="2025-08-22T04:00:00.000Z" title="发表于 2025-08-22 12:00:00">2025-08-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/40348.html" title="046 网络编程套接字"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/fETMVUS.jpeg?_r_=c35415b9-7cc5-c591-5bcd-f604827a0a65" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="046 网络编程套接字"/></a><div class="content"><a class="title" href="/posts/40348.html" title="046 网络编程套接字">046 网络编程套接字</a><time datetime="2025-08-15T04:00:00.000Z" title="发表于 2025-08-15 12:00:00">2025-08-15</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:hc1960074081@qq.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://weibo.com/u/7913790969" title="微博"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/bFRjgdX.jpeg" size="50px"/><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com/1918272544" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2025 By <a class="footer-bar-link" href="/" title="小米里的大麦" target="_blank">小米里的大麦</a></div></div><div id="footer-type-tips"></div><div class="js-pjax"><script>function subtitleType () {
  fetch('https://v1.hitokoto.cn')
    .then(response => response.json())
    .then(data => {
      if (true) {
        const from = '出自 ' + data.from
        const sub = ["《左传》载曰：“太上有立德，其次有立功，其次有立言，虽久不废，此之谓不朽。”","纸上得来终觉浅，绝知此事要躬行！","你太专注于未来，却没有意识到，今天正是你多年前祈求的模样，因为你眺望远方视而不见。","梦想是不会发光的，发光的是追梦的你！","答案在风中飘扬"]
        sub.unshift(data.hitokoto, from)
        window.typed = new Typed('#footer-type-tips', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('footer-type-tips').innerHTML = data.hitokoto
      }
    })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.cbd.int/typed.js@2.1.0/dist/typed.umd.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="GitHub主页">GitHub主页</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">64</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">19</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">6</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">社交</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="GitHub"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="GitHub"/><span class="back-menu-item-text">GitHub</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://space.bilibili.com/1918272544" title="哔哩哔哩"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="哔哩哔哩"/><span class="back-menu-item-text">哔哩哔哩</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://gitee.com/huang-cancan-xbc" title="Gitee"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="Gitee"/><span class="back-menu-item-text">Gitee</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">博客</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.csdn.net/Huangcancan666?type=blog" title="CSDN"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="CSDN"/><span class="back-menu-item-text">CSDN</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://juejin.cn/user/3230789931118109" title="稀土掘金"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="稀土掘金"/><span class="back-menu-item-text">稀土掘金</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 外链</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/C/" style="font-size: 0.88rem;">C++<sup>8</sup></a><a href="/tags/Git/" style="font-size: 0.88rem;">Git<sup>3</sup></a><a href="/tags/IO/" style="font-size: 0.88rem;">IO<sup>3</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>50</sup></a><a href="/tags/Obsidian/" style="font-size: 0.88rem;">Obsidian<sup>1</sup></a><a href="/tags/STL/" style="font-size: 0.88rem;">STL<sup>2</sup></a><a href="/tags/VS-Code/" style="font-size: 0.88rem;">VS Code<sup>1</sup></a><a href="/tags/%E4%BF%A1%E5%8F%B7/" style="font-size: 0.88rem;">信号<sup>3</sup></a><a href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" style="font-size: 0.88rem;">内存管理<sup>1</sup></a><a href="/tags/%E5%8E%86%E7%A8%8B/" style="font-size: 0.88rem;">历程<sup>1</sup></a><a href="/tags/%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4/" style="font-size: 0.88rem;">地址空间<sup>6</sup></a><a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 0.88rem;">数学<sup>1</sup></a><a href="/tags/%E6%A8%A1%E6%9D%BF/" style="font-size: 0.88rem;">模板<sup>1</sup></a><a href="/tags/%E7%AE%A1%E9%81%93/" style="font-size: 0.88rem;">管道<sup>2</sup></a><a href="/tags/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/" style="font-size: 0.88rem;">类与对象<sup>3</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size: 0.88rem;">线程<sup>4</sup></a><a href="/tags/%E7%BD%91%E7%AB%99/" style="font-size: 0.88rem;">网站<sup>2</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 0.88rem;">网络<sup>6</sup></a><a href="/tags/%E8%BF%9B%E7%A8%8B/" style="font-size: 0.88rem;">进程<sup>15</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="anzhiyu.scrollToDest(document.body.scrollHeight, 500)"><i class="anzhiyufont anzhiyu-icon-arrow-down"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("01/01/2025 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `这里是 小米里的大麦`,
    `芝兰生于深谷，不以无人而不芳。`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2025 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 小米里的大麦 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-olive-one.vercel.app/',
      // 自己额外添加的：
      path: location.pathname.replace(/index\.html$/, ''),
      
      region: 'ap-shanghai',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.44/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-olive-one.vercel.app/',
      region: 'ap-shanghai',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"><script async src="/js/anzhiyu/comment_barrage.js"></script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo-olive-one.vercel.app/',
        region: 'ap-shanghai',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.44/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "xiaomilidedamai@minbit.top";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://cdn.cbd.int/qrcodejs@1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script src="https://cdn.bootcdn.net/ajax/libs/echarts/4.9.0-rc.1/echarts.min.js"></script><script src="/js/footer-animal.js" defer></script><script id="click-show-text" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="false" data-text="offer,暴富,健康,offer,喜乐,成功,offer,好运,自由,offer,坚持,上岸" data-fontsize="20px" data-random="true" async="async"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script><script>//- 留言板页面弹幕
window.addEventListener('load', () => {
  const getnaokuo_danmu = () => {
    if (!window.location.pathname.startsWith('/comments/')) return; //- 判断是否是留言板页面
    const naokuo_danmu = async () => {
      const Danmaku = new EasyDanmaku({
        page: '/comments/', //- 即留言板地址
        el: '#danmu-wrap', //- 弹幕挂载节点
        line: 5, //- 弹幕行数
        speed: 20, //- 弹幕播放速度
        hover: true, //- 鼠标hover时是否暂停播放弹幕
        loop: false, //- 开启循环播放
        colourful: true, //- 开启彩色弹幕
        coefficient: 1.38, //- 弹幕密度系数
        runtime: 10, //- 循环弹幕播放时长
      });
      try {
        let danmuStore = saveToLocal.get('twikoo-danmu');
        if (!danmuStore) {
          const options = {
            method: "POST",
            body: JSON.stringify({
              "event": "GET_RECENT_COMMENTS",
              "includeReply": false,
              "pageSize": 100
            }),
            headers: { 'Content-Type': 'application/json' }
          }
          danmuStore = [];
          const response = await fetch(`https://twikoo-olive-one.vercel.app/`, options);
          if (response.ok) {
            const { data } = await response.json();
            //- console.info(data);
            data.forEach(i => {
              if (i.avatar == undefined) i.avatar = 'https://cravatar.cn/avatar/d615d5793929e8c7d70eab5f00f7f5f1?d=mp'
              danmuStore.push({ avatar: i.avatar, content: i.nick + '：' + formatDanmaku(i.comment), url: i.url + '#' + i.id })
            });
            Danmaku.batchSend(danmuStore, true);
            saveToLocal.set('twikoo-danmu', danmuStore, 0.5)
          }
          //- 格式化评论
          function formatDanmaku(str) {
            str = str.replace(/<\/*br>|[\s\uFEFF\xA0]+/g, '');
            str = str.replace(/<img.*?>/g, '[图片]');
            str = str.replace(/<a.*?>.*?<\/a>/g, '[链接]');
            str = str.replace(/<pre.*?>.*?<\/pre>/g, '[代码块]');
            str = str.replace(/<.*?>/g, '');
            return str
          }
        } else {
          Danmaku.batchSend(danmuStore, true);
        }
      } catch (err) {
        console.error("Error fetching data:", err);
      }

      document.getElementById('danmu-Btn') && (document.getElementById('danmu-Btn').innerHTML = `<button class="hide-Btn" onclick="document.getElementById('danmu-wrap').classList.remove('hide-danmu')">显示弹幕</button> <button class="hide-Btn" onclick="document.getElementById('danmu-wrap').classList.add('hide-danmu')">隐藏弹幕</button>`)
    }
    (async () => {
      if (typeof EasyDanmaku === 'function') {
        await naokuo_danmu();
      } else {
        const easyDanmakuScript = await getScript('https://npm.onmicrosoft.cn/naokuo-blog@1.2.12/js/easy-Danmaku.js');
        if (typeof EasyDanmaku === 'function') {
          await naokuo_danmu();
        } else {
          console.error('EasyDanmaku function not found even after loading the script.');
        }
      }
    })();
  }
  getnaokuo_danmu()
  document.addEventListener('pjax:complete', getnaokuo_danmu)
})</script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>