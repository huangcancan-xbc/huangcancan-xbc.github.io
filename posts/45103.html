<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>回调函数 | 小米里的大麦</title><meta name="keywords" content="C++"><meta name="author" content="小米里的大麦"><meta name="copyright" content="小米里的大麦"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="回调函数"><meta name="application-name" content="回调函数"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="回调函数"><meta property="og:url" content="https://www.minbit.top/posts/45103.html"><meta property="og:site_name" content="小米里的大麦"><meta property="og:description" content="回调函数 3 分钟彻底理解回调函数 | B 站 3 分钟搞懂回调函数 每个开发者都具备的基础能力 | B 站 『教程』回调函数是个啥？ | B 站  1. 认识回调函数？1. 什么是回调函数？回调函数（Callback Function）是 函数指针的一种应用形式，它的核心思想是：“把函数作为参数传"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://image-kcm.pages.dev/v2/yPgfhRS.png?_r_=53433e98-d3f0-2298-7796-f3f1cc0dce48"><meta property="article:author" content="小米里的大麦"><meta property="article:tag" content="技术博客,Linux,C++,后端开发,编程学习,个人博客,技术分享"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://image-kcm.pages.dev/v2/yPgfhRS.png?_r_=53433e98-d3f0-2298-7796-f3f1cc0dce48"><meta name="description" content="回调函数 3 分钟彻底理解回调函数 | B 站 3 分钟搞懂回调函数 每个开发者都具备的基础能力 | B 站 『教程』回调函数是个啥？ | B 站  1. 认识回调函数？1. 什么是回调函数？回调函数（Callback Function）是 函数指针的一种应用形式，它的核心思想是：“把函数作为参数传"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "回调函数",
  "description": "回调函数 3 分钟彻底理解回调函数 | B 站 3 分钟搞懂回调函数 每个开发者都具备的基础能力 | B 站 『教程』回调函数是个啥？ | B 站  1. 认识回调函数？1. 什么是回调函数？回调函数（Callback Function）是 函数指针的一种应用形式，它的核心思想是：“把函数作为参数传",
  "image": "https://image-kcm.pages.dev/v2/yPgfhRS.png?_r_=53433e98-d3f0-2298-7796-f3f1cc0dce48",
  "datePublished": "2025-10-29T08:40:00.000Z",
  "dateModified": "2025-10-29T08:40:00.000Z",
  "author": {
    "@type": "Person",
    "name": "小米里的大麦",
    "url": "https://www.minbit.top"
  },
  "publisher": {
    "@type": "Organization",
    "name": "小米里的大麦",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.minbit.top/img/Profile%20picture.png"
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.minbit.top/posts/45103.html"
  },
  "keywords": "C++"
}</script><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "首页",
      "item": "https://www.minbit.top"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "回调函数",
      "item": "https://www.minbit.top/posts/45103.html"
    }
  ]
}</script><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "小米里的大麦",
  "url": "https://www.minbit.top",
  "image": "https://www.minbit.top/img/Profile%20picture.png",
  "description": "时间好像总会留下点什么，或许是一个人，或许是一个梦，或许……是一段有意义的经历~"
}</script><link rel="shortcut icon" href="/img/icons/funny.svg"><link rel="canonical" href="https://www.minbit.top/posts/45103.html"><link rel="preconnect" href="//cdn.cbd.int"><link rel="preconnect" href="//bsz.dusays.com:9001"><meta name="google-site-verification" content="xxx"><meta name="baidu-site-verification" content="code-xxx"><meta name="msvalidate.01" content="xxx"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="var(--anzhiyu-main)"><link rel="mask-icon" href="/img/siteicon/apple-icon-180.png" color="#5bbad5"><link rel="apple-touch-icon" sizes="180x180" href="/img/siteicon/apple-icon-180.png"><link rel="apple-touch-icon-precomposed" sizes="180x180" href="/img/siteicon/apple-icon-180.png"><link rel="icon" type="image/png" sizes="32x32" href="/img/siteicon/32.png"><link rel="icon" type="image/png" sizes="16x16" href="/img/siteicon/16.png"><link rel="bookmark" href="/img/siteicon/apple-icon-180.png"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-2732.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2732-2048.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2388.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2388-1668.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1536-2048.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-1536.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2224.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2224-1668.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1620-2160.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2160-1620.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1290-2796.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2796-1290.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1179-2556.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2556-1179.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1284-2778.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2778-1284.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1170-2532.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2532-1170.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1125-2436.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2436-1125.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2688.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2688-1242.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-828-1792.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1792-828.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2208.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2208-1242.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-750-1334.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1334-750.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-640-1136.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1136-640.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@6.1.6/dist/fancybox/fancybox.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={linkPageTop:{enable:!0,title:"友链 + 外链 + 无限进步！欢迎欣赏和贡献！",addFriendPlaceholder:"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},peoplecanvas:void 0,postHeadAiDescription:{enable:!0,gptName:"小米里的大麦",mode:"local",switchBtn:!1,btnLink:"https://afdian.net/item/886a79d4db6711eda42a52540025c377",randomNum:4,basicWordCount:1999,key:"93d1622eadde491eb0594b68ade51723.kaEiDD6A3KPzb7xv",Referer:"https://www.minbit.top/"},diytitle:{enable:!0,leaveTitle:"w(ﾟДﾟ)w 不要走！再看看嘛！",backTitle:"♪(^∇^*)欢迎肥来！"},LA51:{enable:!0,ck:"Jp8wwGQpp21utaFQ",LingQueMonitorID:"Jp8ztDRrxmTf7LDj"},greetingBox:{enable:!0,default:"晚上好👋",list:[{greeting:"晚安😴",startTime:0,endTime:5},{greeting:"早上好鸭👋, 祝你一天好心情！",startTime:6,endTime:9},{greeting:"上午好👋, 状态很好，鼓励一下～",startTime:10,endTime:10},{greeting:"11点多啦, 在坚持一下就吃饭啦～",startTime:11,endTime:11},{greeting:"午安👋, 宝贝",startTime:12,endTime:14},{greeting:"🌈充实的一天辛苦啦！",startTime:14,endTime:18},{greeting:"19点喽, 奖励一顿丰盛的大餐吧🍔。",startTime:19,endTime:19},{greeting:"晚上好👋, 在属于自己的时间好好放松😌~",startTime:20,endTime:24}]},twikooEnvId:"https://twikoo.minbit.top/",commentBarrageConfig:{enable:!0,maxBarrage:10,barrageTime:5e3,accessToken:"25c96851dd8a790c4819ad4bfbaf153c",mailMd5:"7b12ebc2be80f9159099f6ab0e16573c"},music_page_default:"nav_music",root:"/",preloader:{source:3},friends_vue_info:void 0,navMusic:!0,mainTone:{mode:"both",api:"https://img2color-go.vercel.app/api?img=",cover_change:!0},authorStatus:{skills:["🧐 准备中，就快好了，真的！😭","📚 正在学习中，加油！","🎵 喜欢听音乐，喜欢看动漫"]},algolia:void 0,localSearch:{path:"/search.xml",preload:!0,languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简",rightMenuMsgToTraditionalChinese:"转为繁体",rightMenuMsgToSimplifiedChinese:"转为简体"},noticeOutdate:{limitDay:365,position:"top",messagePrev:"距上次更新已过去",messageNext:"天了，这篇文章的内容可能已经过时了。"},highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:330},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,simplehomepage:!1,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{copy:!0,copyrightEbable:!0,limitCount:250,languages:{author:"作者: 小米里的大麦",link:"链接: ",source:"来源: 小米里的大麦",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。",copySuccess:"复制成功，复制和转载请标注本文地址"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#425AEF",bgDark:"#1f1f1f",position:"top-right"},source:{justifiedGallery:{js:"https://cdn.cbd.int/flickr-justified-gallery@2.2.0/dist/fjGallery.min.js",css:"https://cdn.cbd.int/flickr-justified-gallery@2.2.0/dist/fjGallery.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1,shortcutKey:void 0,autoDarkmode:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={configTitle:"小米里的大麦",title:"回调函数",postAI:"这篇文章讲述了回调函数的基本概念和使用方法。回调函数是一种函数指针的应用形式，核心思想是将一个函数作为参数传递给另一个函数，由那个函数在合适的时机再调用它。回调函数常用于事件驱动、异步编程、通用算法和钩子机制等场景。文章介绍了如何定义和使用回调函数，包括无参无值、有参有值的回调函数示例。此外，还介绍了如何使用typedef和using为回调函数取别名，以及模板支持。最后，文章还介绍了C++11及以后标准中的std::function，这是一个通用的函数包装器，可以存储和传递各种可调用对象，如普通函数、Lambda表达式、成员函数和仿函数对象等，使得函数也能像普通变量一样在回调中使用。",pageFillDescription:"回调函数, 1. 认识回调函数？, 1. 什么是回调函数？, 2. 使用场景, 2. 回调函数的使用, 1. 函数指针定义, 2. 基本使用（C 风格）, 1. 代码示例 1, 2. 代码示例 2, 3. 取别名, 1. typedef 为回调函数取别名, 2. using 为回调函数取别名, 3. 模板支持（为什么推荐使用 using？）, 4. stdfunction —— 通用的函数包装器, 1. 基本语法结构, 2. 代码示例 1（入门）, 3. 代码示例 2（进阶）, 4. stdbind 和占位符的使用, 5. bind 的返回值是什么？, 1. 万能 auto, 2. 显式指定类型的方法：用 stdfunction 包装, 3. 如何确定 stdfunction 的类型？, 6. 什么时候必须显式指定类型？, 5. 扩展, 1. stdref x2F stdcref —— 引用包装器, 2. stdmem_fn —— 将成员函数指针转成可调用对象, 3. stdnot_fn（C++17）—— 对逻辑函数取反, 4. 仿函数（函数对象）+ stdfunction 一起用, 3. 小结回调函数分钟彻底理解回调函数站分钟搞懂回调函数每个开发者都具备的基础能力站教程回调函数是个啥站认识回调函数什么是回调函数回调函数是函数指针的一种应用形式它的核心思想是把函数作为参数传给另一个函数由那个函数在合适的时机再调用它通常用于别人调用你自己的函数你把函数地址传给某个函数等它内部逻辑执行到某个阶段时再反过来调用你传入的函数换句话说你写函数定义了要做什么别人写函数控制什么时候做你把的函数地址交给内部回头去调用这就是回调如果你还是不理解那么我先在这里埋一个伏笔对于我来说回调函数虽然从英文翻译过来回调不太好理解但是用过函数传参就能直接上手回调函数它的用法就是将函数作为参数进行传递传到对方函数中类比变量一样被调用这就是回调函数还是很好理解吧后面来几个示例就能深入理解和上手啦使用场景回调函数常用于以下几种情况事件驱动如网络库等库中收到数据时触发回调函数异步编程任务完成后调用回调报告结果通用算法如让用户自定义排序比较规则钩子机制插件式扩展信号槽系统场景示例回调的含义按钮点击事件用户点击按钮后系统调用你的回调函数处理事件网络有数据到达时框架调用注册好的函数排序算法排序逻辑由库提供比较规则由你提供的比较回调函数定义当然回调函数的使用场景远不止于此回调函数的使用函数指针定义返回类型函数指针名参数列表注意函数名函数指针但是实际使用中直接传递函数名会自动退化为函数指针等价于函数名所以有返回类型函数名参数列表基本使用风格代码示例无参无值的回调函数无参无值的回调函数输出在这个代码中函数就是回调函数它被当作参数在函数中进行传递注意传参的写法返回值函数指针参数列表只是这里无参无返回值然后回调函数在循环中的被调用代码示例有参有返回值的回调函数都是回调函数除错误开始计算和的运算结果结果为输出开始计算和的运算结果结果为开始计算和的运算结果结果为开始计算和的运算结果结果为开始计算和的运算结果结果为开始计算和的运算结果除错误结果为在这个代码中加减乘除个函数都是回调函数在函数中当作参数进行传递注意此时传参写法指明了返回值函数指针及其参数由执行回调逻辑即每个回调函数自己内部的代码逻辑上面的代码虽然简单但是也差不多能看出来回调函数用处的强大回调函数有着很多高级用法本文暂不涉及用的多了和其他语法库容器等搭配使用才能领略回调的强大取别名不知道大家初看上面的代码感觉咋样反正我觉得不那么好看好辩认所以通常会用到取别名回调函数取别名的方法主要用和及其往后先介绍一下和回调函数搭配的语法返回值类型类型名参数列表旧名字新名字适用简单类型也是常见用法为回调函数取别名定义一个函数指针类型返回参数格式返回值类型类型名参数列表回调函数把字符串拼接次拼接次测试函数接收字符串回调函数次数调用回调函数得到拼接结果输出如果是初学者可能会对这个的用法比较疑惑没关系我来解答的语法本质是先写一个该类型的变量声明再把变量名换成新类型名旧名字新名字这种用法应该比较常见的但这种用法仅只适用于简单类型比如但对于复杂类型比如指针数组函数指针就会存在一点区别简单类型想给起个别名会用到此时是的别名指针类型想给起个别名会用到此时是的别名函数指针类型想给指向函数的指针起个别名先写定义一个这种指针的变量这里的是一个指针指向参数为返回的函数加把变量名换成新类型名就得到了此时是这个函数指针类型的别名更多复杂类型它表示是一个指向函数的指针该函数返回类型为并且参数列表为可以用自然语言读成是一个指向接受一个参数返回的函数的指针所以当你再次遇到它样子变种时知道怎么看了吧注意括号的作用是完全不同的意思它表示返回的函数只有加括号才表示指向函数的指针为回调函数取别名语法格式及其以后别名返回值类型参数列表定义一个函数指针类型返回参数格式别名返回值类型参数列表回调函数把字符串拼接次拼接次测试函数接收字符串回调函数次数调用回调函数得到拼接结果输出我觉得这里应该什么疑问吧按照格式套就行模板支持为什么推荐使用先来看看下面个代码代码引入后支持直接将与结合定义模板类型别名无需嵌套类使用时也无需额外语法实现步骤直接用模板参数别名目标类型的语法一步定义模板化的类型别名使用时直接用别名具体类型调用和普通类型别名的使用逻辑一致模板化回调类型多种写法用构造方式初始化函数指针的初始化与原写法等价可省略也可以输出输出输出代码本身不能直接跟模板参数结合但可以把它放在一个类模板内部通过类模板的参数间接实现模板化的类型别名实现步骤定义一个类模板在类内部用定义目标类型别名使用时必须通过类模板名具体类型的语法调用不能直接用类模板名简化用类模板嵌套实现模板化回调类型间接支持模板在类内部用定义函数指针类型必须通过类模板名类型访问定义的类型构造方式初始化可省略输出输出输出观察上面段代码对模板支持较弱需要依赖类模板嵌套使用繁琐是为解决这个问题设计的方案能直接定义模板类型别名在模板场景下包括模板化回调函数完全优于实际开发中只要环境支持及以上涉及模板化的类型别名如通用回调容器别名都应该优先用相信看完上面的代码在回调函数和模板同时存在时你再也不想用了还是来的香当遇到更复杂的场景你第一个想到的是还是呢言归正传即使在非回调函数的场景中我们始终推荐使用通用的函数包装器及以后标准中用等来封装传递和调用回调函数注意它能存储普通函数表达式成员函数仿函数对象等它让函数也能像普通变量一样传来传去用于回调最方便这一点在后面会遇到基本语法结构返回类型参数类型列表变量名示例可以存储任何接收返回的可调用对象代码示例入门这是第次调用如果上面传统风格的回调函数会用了那么这里了解完的语法格式代码其实很浅显易懂了锻炼一下不要注释能不能理解真不是我懒得不想写注释代码示例进阶示例普通函数直接传函数名示例语法格式别名返回值类型参数类型调用回调函数这个会传递给表达式即下面的部分理解将表达式作为参数传递给函数函数将表达式作为回调函数调用可以理解为这里的表达式就是回调函数表达式拿到上面传过来的值然后输出回调示例的本质是一个函数包装器可以存储任何可调用对象函数函数对象等它内部会管理这些可调用对象的拷贝或引用就像一个函数指针的升级版但更灵活注意就像一个函数容器本身是类型专门用来存放函数初始时这个容器是空的可以理解成是一个回调函数类型初始是空的不包含任何逻辑这里就会将表达式的逻辑拷贝给从而拥有和下面一样的效果初始是空的所以这里不会执行后续拥有一样的逻辑效果才会进入走到这里才会将传进来的导向回调逻辑即的逻辑注册回调本质上是一个匿名函数它有明确的参数和返回值正好匹配类型方法调用时这个会被拷贝到中会负责存储这个拷贝收到消息模拟事件触发当把传给时拥有和一样的效果这里就推荐以后直接用了和搭配的语法格式别名返回值类型参数类型需要注意一下示例的代码可能需要细细品味一下和占位符的使用的本质是把一个函数和它的部分参数提前绑定起来生成一个新的可调用对象其语法结构是新函数函数地址参数参数表示占位符对应该函数未来的参数返回一个新的可调用对象可以存到里代码示例可打开命名空间简写但通常不推荐可读性差表示占位将来会传给第个参数等价于输出占位符的意义可以延后传入某些参数会调用换句话说只是告诉编译器以后当我调用这个函数时把第个个实参放到对应位置这似乎很简单没什么难的吧下面要介绍个注意点的本质是提前绑定部分参数生成一个新的函数对象这个新函数对象的参数数量是固定的等于你在时使用的占位符个数所以生成的函数对象必须在一次调用中补全所有未绑定的占位符无法分多条语句逐个补充只要有占位符未被赋值就无法触发函数执行只能用一条语句全部补充意思是中存在占位符导致参数不完整后续只能用一条语句全部补充完整全部补充完毕才会执行回调只要有缺失就永远不会回调意思是只有当的参数真正完整的那一条语句才会执行回调函数如果不完整参数缺失占位符没被填补那么回调函数就永远不会生效永远不会被调用再来看一小段代码巩固一下吧绑定两个参数绑定三个参数注意这里的顺序报错补充的顺序默认就是第一个第二个第三个第一个参数会补充给第二个参数会补充给以此类推没有占位符的返回值是什么会返回一个可调用对象这个对象的类型是编译器自动生成的匿名类型类似表达式的类型因此无法直接用具体的类型名声明比如不能写成万能是个好东西我不关心直接就无脑就行了的类型是匿名的只能用接收显式指定类型的方法用包装虽然的返回值类型匿名但可以根据原函数的签名和绑定后的参数要求用显式指定类型具体规则是的模板参数绑定后需要传入的参数类型返回值类型示例绑定后需要传入个参数返回值为绑定规则的第个参数固定为第个参数由调用时传入绑定后调用时需要传入个返回值为对应等价于示例绑定后不需要传入参数返回值为绑定规则调用时不需要传参返回对应等价于输出示例绑定后需要传入个参数返回值为绑定规则固定为和由调用时传入和调用时需要传入个返回对应等价于输出如何确定的类型只需明确一个问题调用生成的函数对象时需要传入几个参数每个参数的类型是什么返回值类型是什么步骤拆解确定原函数的返回值类型比如统计中使用的占位符数量这就是调用时需要传入的参数个数占位符的类型对应原函数中未被固定的参数类型比如对应原函数中第一个未绑定的参数类型组合上述信息得到返回值类型参数类型参数类型似乎来的不如香所以实际怎么写不用我多说了吧什么时候必须显式指定类型作为类的成员变量类成员变量不能用声明必须显式指定类型显式指定返回值的类型为作为函数的返回值函数返回值不能用起允许但显式类型更清晰函数返回一个需要传入返回的可调用对象扩展引用包装器默认会拷贝参数若想传引用例如防止对象被拷贝要用传引用不是拷贝若不用会拷贝一份打印永远是此外比较简单就不多说了直接当这个引用用就行其他章节也会有涉及将成员函数指针转成可调用对象有时我们希望把成员函数当普通函数一样用就是干这个的转成可调用对象等价于适用于回调场景中成员函数的统一封装对逻辑函数取反如果你有个函数谓词返回可以生成一个逻辑相反的版本常用于等算法的逻辑反转仿函数函数对象一起用把重载的类也当作函数来使用仿函数等其实都能混合搭配出更高级的用法小结看到这里你或多或少也该理解回调函数了吧所以还记得文章开头的伏笔吗回调函数就是把函数当作参数传递使用和传普通参数大同小异简单回顾一下吧函数指针的定义返回类型函数指针名参数列表返回类型函数名参数列表取别名推荐使用别名返回值类型参数列表既因为模板支持较弱又因为语法糖库支持后推荐使用返回类型参数类型列表变量名和占位符新函数函数地址参数参数",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2025-10-29 16:40:00",postMainColor:""}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:(e,t,a)=>{if(0===a)return;const o={value:t,expiry:Date.now()+864e5*a};localStorage.setItem(e,JSON.stringify(o))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const a=JSON.parse(t);if(!(Date.now()>a.expiry))return a.value;localStorage.removeItem(e)}},e.getScript=(e,t={})=>new Promise((a,o)=>{const c=document.createElement("script");c.src=e,c.async=!0,c.onerror=o,c.onload=c.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(c.onload=c.onreadystatechange=null,a())},Object.keys(t).forEach(e=>{c.setAttribute(e,t[e])}),document.head.appendChild(c)}),e.getCSS=(e,t=!1)=>new Promise((a,o)=>{const c=document.createElement("link");c.rel="stylesheet",c.href=e,t&&(c.id=t),c.onerror=o,c.onload=c.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(c.onload=c.onreadystatechange=null,a())},document.head.appendChild(c)}),e.activateDarkMode=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#18171d")},e.activateLightMode=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#f7f9fe")};const t=saveToLocal.get("theme"),a=window.matchMedia("(prefers-color-scheme: dark)").matches,o=window.matchMedia("(prefers-color-scheme: light)").matches,c=window.matchMedia("(prefers-color-scheme: no-preference)").matches,n=!a&&!o&&!c;if(void 0===t){if(o)activateLightMode();else if(a)activateDarkMode();else if(c||n){const e=(new Date).getHours();e<=10||e>=20?activateDarkMode():activateLightMode()}window.matchMedia("(prefers-color-scheme: dark)").addListener(e=>{void 0===saveToLocal.get("theme")&&(e.matches?activateDarkMode():activateLightMode())})}else"light"===t?activateLightMode():activateDarkMode();const d=saveToLocal.get("aside-status");void 0!==d&&("hide"===d?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/custom/css/font.css"><link rel="stylesheet" href="/custom/css/bilibili.css"><meta name="generator" content="Hexo 8.1.1"><link rel="alternate" href="/atom.xml" title="小米里的大麦" type="application/atom+xml"><link rel="alternate" href="/rss2.xml" title="小米里的大麦" type="application/rss+xml"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/img/Profile%20picture.png"><div class="loading-image-dot"></div></div></div><script>const preloader={endLoading:()=>{document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",()=>{preloader.endLoading()}),setTimeout((function(){preloader.endLoading()}),1e4),document.addEventListener("pjax:send",()=>{preloader.initLoading()}),document.addEventListener("pjax:complete",()=>{preloader.endLoading()})</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"><script async src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">社交</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="GitHub"><img class="back-menu-item-icon" src="/img/icons/lollipop.svg" alt="GitHub"><span class="back-menu-item-text">GitHub</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://space.bilibili.com/1918272544" title="哔哩哔哩"><img class="back-menu-item-icon" src="/img/icons/wink.svg" alt="哔哩哔哩"><span class="back-menu-item-text">哔哩哔哩</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://gitee.com/huang-cancan-xbc" title="Gitee"><img class="back-menu-item-icon" src="/img/icons/laugh.svg" alt="Gitee"><span class="back-menu-item-text">Gitee</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">博客</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.csdn.net/Huangcancan666?type=blog" title="CSDN"><img class="back-menu-item-icon" src="/img/icons/celebrate.svg" alt="CSDN"><span class="back-menu-item-text">CSDN</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://juejin.cn/user/3230789931118109" title="稀土掘金"><img class="back-menu-item-icon" src="/img/icons/kiss.svg" alt="稀土掘金"><span class="back-menu-item-text">稀土掘金</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">算法</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://leetcode.cn/u/nifty-faradayzqn" title="力扣"><img class="back-menu-item-icon" src="/img/icons/thinking-glass.svg" alt="力扣"><span class="back-menu-item-text">力扣</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/profile/517073385" title="牛客"><img class="back-menu-item-icon" src="/img/icons/think.svg" alt="牛客"><span class="back-menu-item-text">牛客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.luogu.com.cn/user/1367427" title="洛谷"><img class="back-menu-item-icon" src="/img/icons/funny.svg" alt="洛谷"><span class="back-menu-item-text">洛谷</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">小米里的大麦</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i><span> 统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size:.9em"></i><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i><span> 外链</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i><span> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i><span> 关于本人</span></a></li></ul></div></div></div><div id="nav-right"><div id="nav-naoDark"><div class="container"><div class="components"><div class="main-button"><div class="moon"></div><div class="moon"></div><div class="moon"></div></div><div class="daytime-backgrond"></div><div class="daytime-backgrond"></div><div class="daytime-backgrond"></div><div class="cloud"><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div></div><div class="cloud-light"><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div></div><div class="stars"><div class="star big"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star big"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star medium"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star medium"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star small"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star small"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div></div></div></div></div><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole()"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/img/wechatANDalipay.webp" target="_blank"><img class="post-qr-code-img" alt="微信/支付宝" src="/img/wechatANDalipay.webp"></a><div class="post-qr-code-desc">微信/支付宝</div></li><li class="reward-item"><a href="/img/PayPal.webp" target="_blank"><img class="post-qr-code-img" alt="PayPal" src="/img/PayPal.webp"></a><div class="post-qr-code-desc">PayPal</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title">最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AI/" style="font-size:1.05rem">AI<sup>2</sup></a><a href="/tags/C/" style="font-size:1.05rem">C++<sup>11</sup></a><a href="/tags/Git/" style="font-size:1.05rem">Git<sup>3</sup></a><a href="/tags/IO/" style="font-size:1.05rem">IO<sup>5</sup></a><a href="/tags/Linux/" style="font-size:1.05rem">Linux<sup>60</sup></a><a href="/tags/MySQL/" style="font-size:1.05rem">MySQL<sup>9</sup></a><a href="/tags/Obsidian/" style="font-size:1.05rem">Obsidian<sup>2</sup></a><a href="/tags/Python/" style="font-size:1.05rem">Python<sup>1</sup></a><a href="/tags/Redis/" style="font-size:1.05rem">Redis<sup>2</sup></a><a href="/tags/STL/" style="font-size:1.05rem">STL<sup>2</sup></a><a href="/tags/VS-Code/" style="font-size:1.05rem">VS Code<sup>3</sup></a><a href="/tags/%E4%BF%A1%E5%8F%B7/" style="font-size:1.05rem">信号<sup>3</sup></a><a href="/tags/%E5%8E%86%E7%A8%8B/" style="font-size:1.05rem">历程<sup>3</sup></a><a href="/tags/%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4/" style="font-size:1.05rem">地址空间<sup>6</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size:1.05rem">工具<sup>13</sup></a><a href="/tags/%E6%B6%A8%E7%9F%A5%E8%AF%86/" style="font-size:1.05rem">涨知识<sup>7</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size:1.05rem">算法<sup>3</sup></a><a href="/tags/%E7%AE%A1%E9%81%93/" style="font-size:1.05rem">管道<sup>2</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size:1.05rem">线程<sup>5</sup></a><a href="/tags/%E7%BD%91%E7%AB%99/" style="font-size:1.05rem">网站<sup>4</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size:1.05rem">网络<sup>12</sup></a><a href="/tags/%E8%BF%9B%E7%A8%8B/" style="font-size:1.05rem">进程<sup>15</sup></a></div></div><hr></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多"> <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2026/02/"><span class="card-archive-list-date">二月 2026</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2026/01/"><span class="card-archive-list-date">一月 2026</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/12/"><span class="card-archive-list-date">十二月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/11/"><span class="card-archive-list-date">十一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/10/"><span class="card-archive-list-date">十月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">15</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">九月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/08/"><span class="card-archive-list-date">八月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/07/"><span class="card-archive-list-date">七月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>篇</span></div></a></li></ul></div><hr></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/C/" itemprop="url">C++</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/C/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>C++</span></a></span></div></div><h1 class="post-title" itemprop="name headline">回调函数</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-10-29T08:40:00.000Z" title="发表于 2025-10-29 16:40:00">2025-10-29</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-10-29T08:40:00.000Z" title="更新于 2025-10-29 16:40:00">2025-10-29</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">6.2k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>24分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" data-flag-title="回调函数"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator"> </span><span class="post-meta-position" title="作者IP属地为西安"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>西安</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://image-kcm.pages.dev/v2/yPgfhRS.png?_r_=53433e98-d3f0-2298-7796-f3f1cc0dce48"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><div class="post-ai-description"><div class="ai-title"><i class="anzhiyufont anzhiyu-icon-bilibili"></i><div class="ai-title-text">AI-摘要</div><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i><i class="anzhiyufont anzhiyu-icon-circle-dot" title="朗读摘要"></i><div id="ai-tag">小米里的大麦 GPT</div></div><div class="ai-explanation">AI初始化中...</div><div class="ai-btn-box"><div class="ai-btn-item">介绍自己 🙈</div><div class="ai-btn-item">生成本文简介 👋</div><div class="ai-btn-item">推荐相关文章 📖</div><div class="ai-btn-item">前往主页 🏠</div><div class="ai-btn-item" id="go-tianli-blog">前往爱发电购买</div></div><script data-pjax src="/js/anzhiyu/ai_abstract.js"></script></div><article class="post-content" id="article-container" itemscope itemtype="https://www.minbit.top/posts/45103.html"><header><a class="post-meta-categories" href="/categories/C/" itemprop="url">C++</a><a href="/tags/C/" tabindex="-1" itemprop="url">C++</a><h1 id="CrawlerTitle" itemprop="name headline">回调函数</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">小米里的大麦</span><time itemprop="dateCreated datePublished" datetime="2025-10-29T08:40:00.000Z" title="发表于 2025-10-29 16:40:00">2025-10-29</time><time itemprop="dateCreated datePublished" datetime="2025-10-29T08:40:00.000Z" title="更新于 2025-10-29 16:40:00">2025-10-29</time></header><h1 id="回调函数"><a href="#回调函数" class="headerlink" title="回调函数"></a>回调函数</h1><blockquote><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1cW421N7P2/?share_source=copy_web&vd_source=872e5e3ccf44874c39edaf42e30ab0de">3 分钟彻底理解回调函数 | B 站</a></p><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1NA4m1A7qr/?share_source=copy_web&vd_source=872e5e3ccf44874c39edaf42e30ab0de">3 分钟搞懂回调函数 每个开发者都具备的基础能力 | B 站</a></p><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1vL411t78b/?share_source=copy_web&vd_source=872e5e3ccf44874c39edaf42e30ab0de">『教程』回调函数是个啥？ | B 站</a></p></blockquote><h2 id="1-认识回调函数？"><a href="#1-认识回调函数？" class="headerlink" title="1. 认识回调函数？"></a>1. 认识回调函数？</h2><h3 id="1-什么是回调函数？"><a href="#1-什么是回调函数？" class="headerlink" title="1. 什么是回调函数？"></a>1. 什么是回调函数？</h3><p>回调函数（Callback Function）是 <strong>函数指针的一种应用形式</strong>，它的核心思想是：<strong>“把函数作为参数传给另一个函数，由那个函数在合适的时机再调用它。”</strong> 通常用于 <strong>“别人调用你自己的函数”</strong>，你把函数地址传给某个函数，等它内部逻辑执行到某个阶段时，再“反过来”调用你传入的函数。换句话说：</p><ul><li><strong>你写函数 A</strong>（定义了“要做什么”）。</li><li><strong>别人写函数 B</strong>（控制“什么时候做”）。</li><li>你把 A 的函数地址交给 B，B 内部“回头”去调用 A。这就是“回调”。</li></ul><p><strong>如果你还是不理解，那么我先在这里埋一个伏笔：对于我来说，回调函数虽然从英文翻译过来回调不太好理解，但是用过函数传参就能直接上手回调函数，它的用法就是将函数作为参数进行传递，传到对方函数中，类比变量一样被调用，这！就是回调函数，还是很好理解吧，后面来几个示例就能深入理解和上手啦。</strong></p><h3 id="2-使用场景"><a href="#2-使用场景" class="headerlink" title="2. 使用场景"></a>2. 使用场景</h3><p>回调函数常用于以下几种情况：</p><ol><li><strong>事件驱动</strong>：如网络库 muduo 等库中，收到数据时触发回调函数。</li><li><strong>异步编程</strong>：任务完成后调用回调报告结果。</li><li><strong>通用算法</strong>：如 <code>qsort()</code> 让用户自定义排序比较规则。</li><li><strong>钩子机制</strong>：插件式扩展、信号槽系统。</li></ol><table><thead><tr><th>场景示例</th><th>回调的含义</th></tr></thead><tbody><tr><td>GUI 按钮点击事件</td><td>用户点击按钮后，系统调用你的“回调函数”处理事件</td></tr><tr><td>网络 I&#x2F;O</td><td>有数据到达时，框架调用注册好的“onMessage”函数</td></tr><tr><td>排序算法</td><td>排序逻辑由库提供，比较规则由你提供的“比较回调函数”定义</td></tr></tbody></table><p>当然，回调函数的使用场景远不止于此！</p><h2 id="2-回调函数的使用"><a href="#2-回调函数的使用" class="headerlink" title="2. 回调函数的使用"></a>2. 回调函数的使用</h2><h3 id="1-函数指针定义"><a href="#1-函数指针定义" class="headerlink" title="1. 函数指针定义"></a>1. 函数指针定义</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">返回类型 (*函数指针名)(参数列表);</span><br><span class="line"><span class="comment">// 注意：函数名 ≠ 函数指针，但是实际使用中，直接传递函数名会自动退化为函数指针（等价于 &amp;函数名），所以有：</span></span><br><span class="line">返回类型 (函数名)(参数列表);</span><br></pre></td></tr></table></figure><h3 id="2-基本使用（C-风格）"><a href="#2-基本使用（C-风格）" class="headerlink" title="2. 基本使用（C 风格）"></a>2. 基本使用（C 风格）</h3><h4 id="1-代码示例-1"><a href="#1-代码示例-1" class="headerlink" title="1. 代码示例 1"></a>1. 代码示例 1</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 无参无值的回调函数：</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 无参无值的回调函数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Hello, world!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">(<span class="type">int</span> x, <span class="type">void</span> (*callback)())</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; x; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">callback</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">test</span>(<span class="number">3</span>, print);</span><br><span class="line">	<span class="comment">// 输出：</span></span><br><span class="line">	<span class="comment">//Hello, world!</span></span><br><span class="line">	<span class="comment">//Hello, world!</span></span><br><span class="line">	<span class="comment">//Hello, world!</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这个代码中，<code>print</code> 函数就是回调函数，它被当作参数在 <code>test</code> 函数中进行传递，注意传参的写法：<code>返回值 (*函数指针)(参数列表)</code>，只是这里无参无返回值，然后回调函数 <code>print</code> 在 for 循环中的 <code>callback();</code> 被调用。</p><h4 id="2-代码示例-2"><a href="#2-代码示例-2" class="headerlink" title="2. 代码示例 2"></a>2. 代码示例 2</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 有参有返回值的回调函数（add、sub、mul、divi 都是回调函数）</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sub</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a - b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">mul</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a * b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">divi</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (b == <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;除 0 错误！&quot;</span> &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> a / b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">calculate</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> (*callback)(<span class="type">int</span> x, <span class="type">int</span> y))</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;开始计算&quot;</span> &lt;&lt; a &lt;&lt; <span class="string">&quot;和&quot;</span> &lt;&lt; b &lt;&lt; <span class="string">&quot;的运算结果:&quot;</span> &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;结果为：&quot;</span> &lt;&lt; <span class="built_in">callback</span>(a, b) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">calculate</span>(<span class="number">10</span>, <span class="number">5</span>, add);</span><br><span class="line">	<span class="built_in">calculate</span>(<span class="number">10</span>, <span class="number">5</span>, sub);</span><br><span class="line">	<span class="built_in">calculate</span>(<span class="number">10</span>, <span class="number">5</span>, mul);</span><br><span class="line">	<span class="built_in">calculate</span>(<span class="number">10</span>, <span class="number">5</span>, divi);</span><br><span class="line">	<span class="built_in">calculate</span>(<span class="number">10</span>, <span class="number">0</span>, divi);</span><br><span class="line">	<span class="comment">//输出：</span></span><br><span class="line">	<span class="comment">//开始计算10和5的运算结果:</span></span><br><span class="line">	<span class="comment">//结果为：15</span></span><br><span class="line">	<span class="comment">//	开始计算10和5的运算结果 :</span></span><br><span class="line">	<span class="comment">//结果为：5</span></span><br><span class="line">	<span class="comment">//	开始计算10和5的运算结果 :</span></span><br><span class="line">	<span class="comment">//结果为：50</span></span><br><span class="line">	<span class="comment">//	开始计算10和5的运算结果 :</span></span><br><span class="line">	<span class="comment">//结果为：2</span></span><br><span class="line">	<span class="comment">//	开始计算10和0的运算结果 :</span></span><br><span class="line">	<span class="comment">//除 0 错误！</span></span><br><span class="line">	<span class="comment">//	结果为： - 1</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这个代码中，加减乘除 4 个函数都是回调函数，在 <code>calculate</code> 函数中当作参数进行传递，注意此时传参写法：<code>int (*callback)(int x, int y)</code>，指明了返回值、函数指针及其参数，由 <code>callback(a, b)</code> 执行回调逻辑，即每个回调函数自己内部的代码逻辑。</p><blockquote><p><strong>上面的代码虽然简单，但是也差不多能看出来回调函数用处的强大，回调函数有着很多高级用法，本文暂不涉及，用的多了，和其他语法、库、容器等搭配使用才能领略回调的强大！</strong></p></blockquote><h3 id="3-取别名"><a href="#3-取别名" class="headerlink" title="3. 取别名"></a>3. 取别名</h3><p>不知道大家初看上面的代码感觉咋样，反正我觉得不那么好看&#x2F;好辩认，所以通常会用到取别名，回调函数取别名的方法主要用 <code>typede</code> 和 <code>using</code>（C++11 及其往后），先介绍一下 <strong><code>typedef</code> 和回调函数搭配的语法：</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> 返回值类型 (*类型名)(参数列表);</span><br><span class="line"><span class="comment">// typedef 旧名字 新名字		// 适用简单类型（也是常见用法）</span></span><br></pre></td></tr></table></figure><h4 id="1-typedef-为回调函数取别名"><a href="#1-typedef-为回调函数取别名" class="headerlink" title="1. typedef 为回调函数取别名"></a>1. <code>typedef</code> 为回调函数取别名</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// 定义一个函数指针类型：返回 string，参数 (int, string)</span></span><br><span class="line"><span class="comment">// 格式：typedef 返回值类型 (*类型名)(参数列表)</span></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">string</span><span class="params">(*callback)</span><span class="params">(<span class="type">int</span>, string)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 回调函数：把字符串 s 拼接 x 次</span></span><br><span class="line"><span class="function">string <span class="title">append</span><span class="params">(<span class="type">int</span> x, string s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string res;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; x; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        res += s;    <span class="comment">// 拼接 x 次</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试函数：接收字符串 + 回调函数 + 次数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">(string s, <span class="type">int</span> x, callback cb)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string ret = s + <span class="built_in">cb</span>(x, <span class="string">&quot;World&quot;</span>);<span class="comment">// 调用回调函数，得到拼接结果</span></span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; ret &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">test</span>(<span class="string">&quot;Hello&quot;</span>, <span class="number">3</span>, append);</span><br><span class="line">    <span class="comment">// 输出：HelloWorldWorldWorld</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果是初学者可能会对这个 <code>typedef</code> 的用法比较疑惑，没关系，我来解答：<code>typedef</code> 的语法本质是 “<strong>先写一个该类型的变量声明，再把变量名换成新类型名</strong>”。<strong><code>typedef 旧名字 新名字</code></strong> 这种用法应该比较常见的，但这种用法仅只适用于 <strong>简单类型</strong>（比如 <code>typedef int MyInt;</code>），但对于 <strong>复杂类型</strong>，比如指针、数组、函数指针就会存在一点区别：</p><ol><li><strong>简单类型：</strong> 想给 <code>int</code> 起个别名 <code>MyInt</code> 会用到 <code>typedef int MyInt</code>，此时 <code>MyInt</code> 是 <code>int</code> 的别名。</li><li><strong>指针类型：</strong> 想给 <code>int</code> 起个别名 <code>IntPtr</code> 会用到 <code>typedef int* IntPtr</code>，此时 <code>IntPtr</code> 是 <code>int</code> 的别名。</li><li><strong>函数指针类型：</strong> 想给 <strong>指向 <code>void (int)</code> 函数的指针</strong> 起个别名 <code>callback</code>： 先写 <strong>定义一个这种指针的变量 cb</strong>：<code>void (*cb)(int);</code>，这里的 cb 是一个指针，指向 <strong>参数为 int、返回 void 的函数</strong>，加 typedef，把变量名 cb 换成新类型名 callback 就得到了 <code>typedef void (* callback)(int);</code>，此时 <code>callback</code> 是 <code>void (*)(int)</code> 这个函数指针类型的别名。</li><li>……（更多复杂类型）</li></ol><p><strong><code>void (*callback)(int)</code> 它表示：<code>callback</code> 是一个 指向函数的指针，该函数 返回类型为 void，并且 参数列表为 (int)。可以用自然语言读成：callback 是一个指向接受一个 int 参数、返回 void 的函数的指针。所以，当你再次遇到它样子变种时，知道怎么看了吧。</strong></p><blockquote><p><strong>注意括号的作用：</strong> <code>void *callback(int)</code> 是完全不同的意思（它表示“返回 <code>void*</code> 的函数”），只有加括号 <code>void (*callback)(int)</code> 才表示“<strong>指向函数的指针</strong>”！</p></blockquote><h4 id="2-using-为回调函数取别名"><a href="#2-using-为回调函数取别名" class="headerlink" title="2. using 为回调函数取别名"></a>2. <code>using</code> 为回调函数取别名</h4><p><strong>语法格式（C++11 及其以后）：</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> 别名 = 返回值类型 (*)(参数列表);</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// 定义一个函数指针类型：返回 string，参数 (int, string)</span></span><br><span class="line"><span class="comment">// 格式：using 别名 = 返回值类型 (*)(参数列表);</span></span><br><span class="line"><span class="keyword">using</span> callback = <span class="built_in">string</span> (*)(<span class="type">int</span>, string);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 回调函数：把字符串 s 拼接 x 次</span></span><br><span class="line"><span class="function">string <span class="title">append</span><span class="params">(<span class="type">int</span> x, string s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string res;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; x; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        res += s;    <span class="comment">// 拼接 x 次</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试函数：接收字符串 + 回调函数 + 次数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">(string s, <span class="type">int</span> x, callback cb)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string ret = s + <span class="built_in">cb</span>(x, <span class="string">&quot;World&quot;</span>);<span class="comment">// 调用回调函数，得到拼接结果</span></span><br><span class="line">    cout &lt;&lt; ret &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">test</span>(<span class="string">&quot;Hello&quot;</span>, <span class="number">3</span>, append);</span><br><span class="line">    <span class="comment">// 输出：HelloWorldWorldWorld</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我觉得这里应该什么疑问吧，按照格式套就行。</p><h4 id="3-模板支持（为什么推荐使用-using？）"><a href="#3-模板支持（为什么推荐使用-using？）" class="headerlink" title="3. 模板支持（为什么推荐使用 using？）"></a>3. 模板支持（为什么推荐使用 <code>using</code>？）</h4><p>先来看看下面 2 个代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 代码1：</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//C++11 引入using后，支持直接将using与template结合，定义 “模板类型别名”，无需嵌套类，使用时也无需额外语法。</span></span><br><span class="line"><span class="comment">//实现步骤：</span></span><br><span class="line"><span class="comment">//直接用 “template &lt;模板参数&gt; using 别名 = 目标类型” 的语法，一步定义模板化的类型别名。</span></span><br><span class="line"><span class="comment">//使用时，直接用 “别名&lt;具体类型&gt;” 调用，和普通类型别名的使用逻辑一致。</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">using</span> callback = <span class="built_in">void</span> (*)(T);  <span class="comment">// 模板化回调类型</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printI</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Int: &quot;</span> &lt;&lt; x &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printS</span><span class="params">(string s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;String: &quot;</span> &lt;&lt; s &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printD</span><span class="params">(<span class="type">double</span> d)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Double: &quot;</span> &lt;&lt; d &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 多种写法：</span></span><br><span class="line">	callback&lt;<span class="type">int</span>&gt; intCb = printI;</span><br><span class="line">	<span class="function">callback&lt;string&gt; <span class="title">strCb</span><span class="params">(printS)</span></span>;         <span class="comment">// 用构造方式初始化（函数指针的初始化）</span></span><br><span class="line">	callback&lt;<span class="type">double</span>&gt; doubleCb = &amp;printD;    <span class="comment">// 与原写法等价，&amp;可省略</span></span><br><span class="line">	<span class="comment">// auto ……也可以</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">intCb</span>(<span class="number">100</span>);         <span class="comment">// 输出：Int: 100</span></span><br><span class="line">	(*strCb)(<span class="string">&quot;test&quot;</span>);   <span class="comment">// 输出：String: test</span></span><br><span class="line">	<span class="built_in">doubleCb</span>(<span class="number">3.14</span>);     <span class="comment">// 输出：Double: 3.14</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 代码2：</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//typedef本身不能直接跟模板参数结合，但可以把它放在一个类模板内部，通过类模板的参数间接实现 “模板化的类型别名”。</span></span><br><span class="line"><span class="comment">//实现步骤：</span></span><br><span class="line"><span class="comment">//定义一个类模板，在类内部用typedef定义目标类型别名。</span></span><br><span class="line"><span class="comment">//使用时，必须通过 “类模板名&lt;具体类型&gt;::type” 的语法调用，不能直接用类模板名简化。</span></span><br><span class="line"><span class="comment">// 用类模板嵌套 typedef 实现模板化回调类型（间接支持模板）</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">callback</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="function"><span class="keyword">typedef</span> <span class="title">void</span> <span class="params">(*Type)</span><span class="params">(T)</span></span>;        <span class="comment">// 在类内部用 typedef 定义函数指针类型</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printI</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Int: &quot;</span> &lt;&lt; x &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printS</span><span class="params">(string s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;String: &quot;</span> &lt;&lt; s &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printD</span><span class="params">(<span class="type">double</span> d)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Double: &quot;</span> &lt;&lt; d &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 必须通过 &quot;类模板名&lt;类型&gt;::Type&quot; 访问 typedef 定义的类型</span></span><br><span class="line">	callback&lt;<span class="type">int</span>&gt;::Type intCb = printI;</span><br><span class="line">	callback&lt;string&gt;::<span class="function">Type <span class="title">strCb</span><span class="params">(printS)</span></span>;  <span class="comment">// 构造方式初始化</span></span><br><span class="line">	callback&lt;<span class="type">double</span>&gt;::Type doubleCb = &amp;printD;  <span class="comment">// &amp; 可省略</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">intCb</span>(<span class="number">100</span>);         <span class="comment">// 输出：Int: 100</span></span><br><span class="line">	(*strCb)(<span class="string">&quot;test&quot;</span>);   <span class="comment">// 输出：String: test</span></span><br><span class="line">	<span class="built_in">doubleCb</span>(<span class="number">3.14</span>);     <span class="comment">// 输出：Double: 3.14</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 观察上面2段代码：</span></span><br><span class="line"><span class="comment">// typedef 对模板支持较弱，需要依赖类模板嵌套，使用繁琐。</span></span><br><span class="line"><span class="comment">// using是 C++11 为解决这个问题设计的方案，能直接定义模板类型别名，在模板场景下（包括模板化回调函数）完全优于typedef。</span></span><br><span class="line"><span class="comment">// 实际开发中，只要环境支持 C++11 及以上，涉及模板化的类型别名（如通用回调、容器别名），都应该优先用using。</span></span><br></pre></td></tr></table></figure><p>相信看完上面的代码，在回调函数和模板同时存在时，你再也不想用 <code>typedef</code> 了，还是 <code>using</code> 来的香，当遇到更复杂的场景，你第一个想到的是 <code>typedef</code> 还是 <code>using</code> 呢？言归正传，即使在非回调函数的场景中，<strong>我们始终推荐使用 <code>using</code>！</strong></p><h3 id="4-std-function-——-通用的函数包装器"><a href="#4-std-function-——-通用的函数包装器" class="headerlink" title="4. std::function —— 通用的函数包装器"></a>4. <code>std::function</code> —— 通用的函数包装器</h3><p>C++11 及以后标准中，用 <code>std::function</code>、<code>std::bind</code>、Lambda 等来封装、传递和调用回调函数。<strong>注意：它能存储：普通函数、Lambda 表达式、成员函数、仿函数对象等，它让“函数”也能像普通变量一样传来传去，用于回调最方便，这一点在后面会遇到。</strong></p><h4 id="1-基本语法结构"><a href="#1-基本语法结构" class="headerlink" title="1. 基本语法结构"></a>1. 基本语法结构</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line">std::function&lt;返回类型(参数类型列表)&gt; 变量名;</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function&lt;<span class="type">void</span>(<span class="type">int</span>)&gt; cb;   <span class="comment">// 可以存储任何“接收int、返回void”的可调用对象</span></span><br></pre></td></tr></table></figure><h4 id="2-代码示例-1（入门）"><a href="#2-代码示例-1（入门）" class="headerlink" title="2. 代码示例 1（入门）"></a>2. 代码示例 1（入门）</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Hello, World!&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test1</span><span class="params">(<span class="type">int</span> n, function&lt;<span class="type">void</span>()&gt; callback)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">callback</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print2</span><span class="params">(string s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	cout &lt;&lt; s &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test2</span><span class="params">(<span class="type">int</span> n, function&lt;<span class="type">void</span>(string)&gt; callback)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">callback</span>(<span class="string">&quot;hello, callback!&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test3</span><span class="params">(<span class="type">int</span> n, function&lt;<span class="type">void</span>(string)&gt; callback)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		stringstream ss;</span><br><span class="line">		ss &lt;&lt; <span class="string">&quot;这是第 &quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; 次调用&quot;</span>;</span><br><span class="line">		<span class="built_in">callback</span>(ss.<span class="built_in">str</span>());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">test1</span>(<span class="number">3</span>, print1);</span><br><span class="line">	<span class="built_in">test2</span>(<span class="number">3</span>, print2);</span><br><span class="line">	<span class="built_in">test3</span>(<span class="number">3</span>, print2);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果上面传统 C 风格的回调函数会用了，那么这里了解完 <code>std::function</code> 的语法格式，代码其实很浅显易懂了，锻炼一下不要注释能不能理解，真不是我懒得不想写注释 🤪。</p><h4 id="3-代码示例-2（进阶）"><a href="#3-代码示例-2（进阶）" class="headerlink" title="3. 代码示例 2（进阶）"></a>3. 代码示例 2（进阶）</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 示例1：</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;普通函数: &quot;</span> &lt;&lt; x &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">(<span class="type">int</span> n, function&lt;<span class="type">void</span>(<span class="type">int</span>)&gt; cb)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cb</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">test</span>(<span class="number">3</span>, print);   <span class="comment">// 直接传函数名</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例2：</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// 语法格式：using 别名 = std::function&lt;返回值类型(参数类型...)&gt;;</span></span><br><span class="line"><span class="keyword">using</span> <span class="type">func_t</span> = function&lt;<span class="built_in">void</span>(<span class="type">int</span>)&gt;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">(<span class="type">int</span> n, <span class="type">func_t</span> cb)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cb</span>(i);   <span class="comment">// 调用回调函数，这个 i 会传递给 lambda 表达式，即下面的 int x 部分</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 理解：将 lambda 表达式作为参数传递给 test 函数，test 函数将 lambda 表达式作为回调函数调用。</span></span><br><span class="line">    <span class="comment">// 可以理解为：这里的 lambda 表达式就是回调函数。</span></span><br><span class="line">    <span class="comment">// lambda 表达式拿到上面传过来的 i 值，然后输出。</span></span><br><span class="line">    <span class="built_in">test</span>(<span class="number">3</span>, [](<span class="type">int</span> x) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Lambda 回调: &quot;</span> &lt;&lt; x &lt;&lt; endl;</span><br><span class="line">        &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例3：</span></span><br><span class="line"><span class="comment">// std::function 的本质是一个 “函数包装器”，可以存储任何可调用对象（函数、lambda、函数对象等）。</span></span><br><span class="line"><span class="comment">// 它内部会管理这些可调用对象的拷贝或引用，就像一个 “函数指针的升级版”，但更灵活。</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> Callback = function&lt;<span class="built_in">void</span>(<span class="type">int</span>)&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Server</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 注意：_onMessage 就像一个 “函数容器”（本身是 std::function 类型，专门用来存放函数），初始时这个容器是空的。</span></span><br><span class="line">    <span class="comment">// 可以理解成 _onMessage 是一个回调函数类型，初始是空的，不包含任何逻辑</span></span><br><span class="line">    Callback _onMessage;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">set</span><span class="params">(Callback cb)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        _onMessage = cb;    <span class="comment">// 这里就会将 lambda 表达式（的逻辑）拷贝给 _onMessage，从而拥有和下面lambda一样的效果</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">simulateMessage</span><span class="params">(<span class="type">int</span> data)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (_onMessage)     <span class="comment">// 初始_onMessage是空的，所以这里不会执行，后续拥有lambda一样的逻辑效果才会进入</span></span><br><span class="line">        &#123;</span><br><span class="line">            _onMessage(data);   <span class="comment">// 走到这里才会将传进来的42导向回调逻辑，即_onMessage（lambda的逻辑）</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Server s;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 注册回调</span></span><br><span class="line">    <span class="comment">// lambda[](int x) &#123; ... &#125; 本质上是一个 “匿名函数”，它有明确的参数（int x）和返回值（void），</span></span><br><span class="line">    <span class="comment">// 正好匹配 Callback 类型（function&lt;void(int)&gt;）。</span></span><br><span class="line">    <span class="comment">// set 方法调用时，这个 lambda 会被拷贝到 _onMessage 中（std::function 会负责存储这个拷贝）。</span></span><br><span class="line">    s.<span class="built_in">set</span>([](<span class="type">int</span> x) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;收到消息：&quot;</span> &lt;&lt; x &lt;&lt; endl;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 模拟事件触发</span></span><br><span class="line">    s.<span class="built_in">simulateMessage</span>(<span class="number">42</span>);  <span class="comment">// 当把42传给 _onMessage 时，_onMessage拥有和lambda一样的效果</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里就推荐以后直接用 <code>using</code> 了，<strong>和 <code>std::function</code> 搭配的语法格式：<code>using 别名 = std::function&lt;返回值类型(参数类型...)&gt;;</code> 需要注意一下。</strong> 示例 3 的代码可能需要细细品味一下……</p><h4 id="4-std-bind-和占位符的使用"><a href="#4-std-bind-和占位符的使用" class="headerlink" title="4. std::bind 和占位符的使用"></a>4. <code>std::bind</code> 和占位符的使用</h4><p><strong><code>std::bind</code> 的本质是：把一个函数和它的部分参数“提前绑定”起来，生成一个新的可调用对象，其语法结构是：</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> 新函数 = <span class="built_in">bind</span>(函数地址, 参数<span class="number">1</span>, 参数<span class="number">2</span>, ...);</span><br><span class="line"><span class="comment">// placeholders::_1, placeholders::_2, placeholders::_3, …… 表示占位符，对应该函数未来的参数。</span></span><br><span class="line"><span class="comment">// 返回一个新的可调用对象，可以存到 std::function 里。</span></span><br></pre></td></tr></table></figure><p><strong>代码示例：</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std::placeholders;  <span class="comment">// 可打开命名空间简写，但通常不推荐，可读性差！</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; a &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> f = <span class="built_in">bind</span>(show, _1, <span class="number">100</span>);  <span class="comment">// _1 表示占位，将来会传给第1个参数</span></span><br><span class="line">    <span class="built_in">f</span>(<span class="number">10</span>);                         <span class="comment">// 等价于 show(10, 100)，输出：10 100</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>占位符 <code>_1</code>、<code>_2</code> 的意义：<code>std::bind</code> 可以“延后传入”某些参数。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> f = <span class="built_in">bind</span>(show, _2, _1);</span><br><span class="line"><span class="built_in">f</span>(<span class="number">10</span>, <span class="number">20</span>);  <span class="comment">// 会调用 show(20, 10)</span></span><br></pre></td></tr></table></figure><p>换句话说，<code>_1</code>, <code>_2</code> 只是告诉编译器：以后当我调用这个函数时，把第 1 个、2 个实参放到对应位置。这似乎很简单，没什么难的吧，下面要介绍 <strong>2 个注意点：<code>bind</code> 的本质是 “提前绑定部分参数，生成一个新的函数对象”，这个新函数对象的参数数量是固定的 —— 等于你在 <code>bind</code> 时使用的占位符个数 ，所以：<code>bind</code> 生成的函数对象必须在一次调用中补全所有未绑定的占位符，无法分多条语句逐个补充，只要有占位符未被赋值，就无法触发函数执行。</strong></p><ul><li><strong>只能用一条语句全部补充：</strong> 意思是 <code>bind</code> 中存在占位符导致参数“不完整”，后续 <strong>只能用一条语句全部补充完整</strong>！</li><li><strong>全部补充完毕才会执行回调&#x2F;只要有缺失就永远不会回调：</strong> 意思是只有当 <code>bind</code> 的参数真正完整的那一条语句才会执行回调函数，如果不完整，参数缺失（占位符没被填补），那么回调函数就永远不会生效、永远不会被调用！</li></ul><p>再来看一小段代码巩固一下吧：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//using namespace std::placeholders;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; a &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; b &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; c &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> f1 = <span class="built_in">bind</span>(show, std::placeholders::_1, <span class="number">20</span>, <span class="number">30</span>);            <span class="comment">// 绑定两个参数</span></span><br><span class="line">    <span class="built_in">f1</span>(<span class="number">10</span>);                                                         <span class="comment">// show(10,20,30)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> f2 = <span class="built_in">bind</span>(show, placeholders::_2, placeholders::_1, <span class="number">30</span>);   <span class="comment">// 绑定三个参数（注意这里的顺序！）</span></span><br><span class="line">    <span class="comment">// f2(10);  // 报错！</span></span><br><span class="line">    <span class="built_in">f2</span>(<span class="number">10</span>, <span class="number">20</span>);                                                     <span class="comment">// show(20,10,30)</span></span><br><span class="line">    <span class="comment">// 补充的顺序默认就是第一个，第二个，第三个...第一个参数会补充给placeholders::_1，第二个参数会补充给placeholders::_2，以此类推</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> f3 = <span class="built_in">bind</span>(show, <span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>);       <span class="comment">// 没有占位符</span></span><br><span class="line">    <span class="built_in">f3</span>();                                   <span class="comment">// show(10,20,30)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-bind-的返回值是什么？"><a href="#5-bind-的返回值是什么？" class="headerlink" title="5. bind 的返回值是什么？"></a>5. bind 的返回值是什么？</h4><p><code>std::bind</code> 会返回一个 <strong>可调用对象</strong>，这个对象的类型是编译器自动生成的匿名类型（类似 lambda 表达式的类型），因此无法直接用具体的类型名声明（比如不能写成 <code>std::bind_type f = ...</code>）。</p><h5 id="1-万能-auto"><a href="#1-万能-auto" class="headerlink" title="1. 万能 auto"></a>1. 万能 <code>auto</code></h5><p><code>auto</code> 是个好东西，我不关心，直接就无脑 <code>auto</code> 就行了：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> f = std::<span class="built_in">bind</span>(func, <span class="number">1</span>, std::placeholders::_1); </span><br><span class="line"><span class="comment">// f的类型是匿名的，只能用auto接收</span></span><br></pre></td></tr></table></figure><h5 id="2-显式指定类型的方法：用-std-function-包装"><a href="#2-显式指定类型的方法：用-std-function-包装" class="headerlink" title="2. 显式指定类型的方法：用 std::function 包装"></a>2. 显式指定类型的方法：用 <code>std::function</code> 包装</h5><p>虽然 <code>bind</code> 的返回值类型匿名，但可以根据 <strong>原函数的签名和绑定后的参数要求</strong>，用 <code>std::function</code> 显式指定类型。具体规则是：<strong><code>std::function</code> 的模板参数 &#x3D; 绑定后需要传入的参数类型 + 返回值类型</strong>。</p><p>示例 1：绑定后需要传入 1 个参数，返回值为 void。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; a &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 绑定规则：show的第1个参数固定为100，第2个参数由调用时传入（_1）</span></span><br><span class="line">    <span class="comment">// 绑定后，调用f时需要传入1个int，返回值为void → 对应function&lt;void(int)&gt;</span></span><br><span class="line">    function&lt;<span class="type">void</span>(<span class="type">int</span>)&gt; f = <span class="built_in">bind</span>(show, <span class="number">100</span>, placeholders::_1);</span><br><span class="line">    <span class="built_in">f</span>(<span class="number">200</span>); <span class="comment">// 等价于show(100, 200)</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>示例 2：绑定后不需要传入参数，返回值为 int。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 绑定规则：a=10，b=20，调用时不需要传参，返回int → 对应function&lt;int()&gt;</span></span><br><span class="line">    function&lt;<span class="type">int</span>()&gt; f = <span class="built_in">bind</span>(add, <span class="number">10</span>, <span class="number">20</span>);</span><br><span class="line">    cout &lt;&lt; <span class="built_in">f</span>() &lt;&lt; endl; <span class="comment">// 等价于add(10, 20) → 输出30</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>示例 3：绑定后需要传入 2 个参数，返回值为 bool</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">compare</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (a + b) &gt; c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 绑定规则：c固定为100，a和b由调用时传入（_1和_2）</span></span><br><span class="line">    <span class="comment">// 调用时需要传入2个int，返回bool → 对应function&lt;bool(int, int)&gt;</span></span><br><span class="line">    function&lt;<span class="type">bool</span>(<span class="type">int</span>, <span class="type">int</span>)&gt; f = <span class="built_in">bind</span>(compare, placeholders::_1, placeholders::_2, <span class="number">100</span>);</span><br><span class="line">    cout &lt;&lt; <span class="built_in">f</span>(<span class="number">60</span>, <span class="number">50</span>) &lt;&lt; endl; <span class="comment">// 等价于compare(60,50,100) → 110&gt;100 → 输出1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="3-如何确定-std-function-的类型？"><a href="#3-如何确定-std-function-的类型？" class="headerlink" title="3. 如何确定 std::function 的类型？"></a>3. 如何确定 <code>std::function</code> 的类型？</h5><p>只需明确一个问题：<strong>调用 <code>bind</code> 生成的函数对象时，需要传入几个参数？每个参数的类型是什么？返回值类型是什么？</strong></p><p>步骤拆解：</p><ol><li>确定原函数的返回值类型（比如 <code>void</code>、<code>int</code>、<code>bool</code>）。</li><li>统计 <code>bind</code> 中使用的占位符数量（<code>_1</code>、<code>_2</code>…），这就是调用时需要传入的参数个数。</li><li>占位符的类型对应原函数中未被固定的参数类型（比如 <code>_1</code> 对应原函数中第一个未绑定的参数类型）。</li><li>组合上述信息，得到 <strong><code>std::function&lt;返回值类型(参数类型1, 参数类型2...)&gt;</code></strong>。</li></ol><blockquote><p>似乎来的不如 <code>auto</code> 香，所以实际怎么写，不用我多说了吧 🤪。</p></blockquote><h4 id="6-什么时候必须显式指定类型？"><a href="#6-什么时候必须显式指定类型？" class="headerlink" title="6. 什么时候必须显式指定类型？"></a>6. 什么时候必须显式指定类型？</h4><ol><li><p><strong>作为类的成员变量</strong>：类成员变量不能用 <code>auto</code> 声明，必须显式指定类型。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">// 显式指定bind返回值的类型为function&lt;void(int)&gt;</span></span><br><span class="line">    function&lt;<span class="type">void</span>(<span class="type">int</span>)&gt; callback; </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">setCallback</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        callback = <span class="built_in">bind</span>(show, <span class="number">100</span>, placeholders::_1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p><strong>作为函数的返回值</strong>：函数返回值不能用 <code>auto</code>（C++14 起允许，但显式类型更清晰）。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数返回一个&quot;需要传入int、返回void&quot;的可调用对象</span></span><br><span class="line"><span class="function">function&lt;<span class="title">void</span><span class="params">(<span class="type">int</span>)</span>&gt; <span class="title">getCallback</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">bind</span>(show, <span class="number">100</span>, placeholders::_1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="5-扩展"><a href="#5-扩展" class="headerlink" title="5. 扩展"></a>5. 扩展</h3><h4 id="1-std-ref-std-cref-——-引用包装器"><a href="#1-std-ref-std-cref-——-引用包装器" class="headerlink" title="1. std::ref &#x2F; std::cref —— 引用包装器"></a>1. <code>std::ref</code> &#x2F; <code>std::cref</code> —— 引用包装器</h4><p><code>bind</code>、<code>function</code> 默认会“拷贝”参数。若想 <strong>传引用</strong>（例如防止对象被拷贝），要用 <code>ref()</code>。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">(<span class="type">int</span> &amp;x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;x = &quot;</span> &lt;&lt; x &lt;&lt; endl;</span><br><span class="line">    ++x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">auto</span> f = <span class="built_in">bind</span>(print, <span class="built_in">ref</span>(a));  <span class="comment">// 传引用，不是拷贝</span></span><br><span class="line">    <span class="built_in">f</span>();  <span class="comment">// x=5</span></span><br><span class="line">    <span class="built_in">f</span>();  <span class="comment">// x=6</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>若不用 <code>ref()</code>，bind 会拷贝一份 a，打印永远是 5。此外，<code>ref()</code> 比较简单就不多说了，直接当 <code>&amp;</code> 这个引用用就行，其他章节也会有涉及。</p><h4 id="2-std-mem-fn-——-将“成员函数指针”转成可调用对象"><a href="#2-std-mem-fn-——-将“成员函数指针”转成可调用对象" class="headerlink" title="2. std::mem_fn —— 将“成员函数指针”转成可调用对象"></a>2. <code>std::mem_fn</code> —— 将“成员函数指针”转成可调用对象</h4><p>有时我们希望把 <strong>成员函数当普通函数一样用</strong>，<code>mem_fn</code> 就是干这个的。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Foo</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;x = &quot;</span> &lt;&lt; x &lt;&lt; endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Foo f;</span><br><span class="line">    <span class="keyword">auto</span> fn = <span class="built_in">mem_fn</span>(&amp;Foo::show);  <span class="comment">// 转成可调用对象</span></span><br><span class="line">    <span class="built_in">fn</span>(f, <span class="number">42</span>);                     <span class="comment">// 等价于 f.show(42)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>适用于回调场景中成员函数的统一封装。</p><h4 id="3-std-not-fn（C-17）——-对逻辑函数取反"><a href="#3-std-not-fn（C-17）——-对逻辑函数取反" class="headerlink" title="3. std::not_fn（C++17）—— 对逻辑函数取反"></a>3. <code>std::not_fn</code>（C++17）—— 对逻辑函数取反</h4><p>如果你有个函数&#x2F;谓词返回 bool，<code>not_fn</code> 可以生成一个“逻辑相反”的版本。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">isEven</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123; <span class="keyword">return</span> x % <span class="number">2</span> == <span class="number">0</span>; &#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> isOdd = <span class="built_in">not_fn</span>(isEven);</span><br><span class="line">    cout &lt;&lt; <span class="built_in">isOdd</span>(<span class="number">3</span>) &lt;&lt; endl;  <span class="comment">// 1</span></span><br><span class="line">    cout &lt;&lt; <span class="built_in">isOdd</span>(<span class="number">4</span>) &lt;&lt; endl;  <span class="comment">// 0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>常用于 <code>std::find_if_not</code>、<code>std::remove_if</code> 等 STL 算法的逻辑反转。</p></blockquote><h4 id="4-仿函数（函数对象）-std-function-一起用"><a href="#4-仿函数（函数对象）-std-function-一起用" class="headerlink" title="4. 仿函数（函数对象）+ std::function 一起用"></a>4. 仿函数（函数对象）+ <code>std::function</code> 一起用</h4><p>C++ 把“重载 <code>operator()</code> 的类”也当作函数来使用。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Add</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> a + b; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    function&lt;<span class="type">int</span>(<span class="type">int</span>,<span class="type">int</span>)&gt; f = <span class="built_in">Add</span>();</span><br><span class="line">    cout &lt;&lt; <span class="built_in">f</span>(<span class="number">1</span>,<span class="number">2</span>) &lt;&lt; endl; <span class="comment">// 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>bind</code>、<code>lambda</code>、仿函数等其实都能混合搭配出更高级的用法。</p><h2 id="3-小结"><a href="#3-小结" class="headerlink" title="3. 小结"></a>3. 小结</h2><p>看到这里，你或多或少也该理解回调函数了吧，所以，还记得文章开头的伏笔吗？回调函数就是把函数当作参数传递使用，和传普通参数大同小异！简单回顾一下吧：</p><ul><li>函数指针的定义：<code>返回类型 (*函数指针名)(参数列表);</code>&#x2F;<code>返回类型 (函数名)(参数列表);</code>。</li><li>取别名推荐使用：<code>using 别名 = 返回值类型 (*)(参数列表);</code>，既因为 <code>typedef</code> 模板支持较弱，又因为语法糖 🍭。</li><li>C++11 库支持后推荐使用：<code>std::function&lt;返回类型(参数类型列表)&gt; 变量名;</code>。</li><li><code>bind</code> 和占位符：<code>auto 新函数 = bind(函数地址, 参数1, 参数2, ...);</code>；<code>placeholders::_1</code>, <code>placeholders::_2</code>, <code>placeholders::_3</code>, ……</li></ul></article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/Profile%20picture.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/Profile%20picture.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">小米里的大麦</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://www.minbit.top/posts/45103.html">原创</a><a class="post-copyright-title"><span onclick='rm.copyPageUrl("https://www.minbit.top/posts/45103.html")'>回调函数</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="/img/wechatANDalipay.webp" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/wechatANDalipay.webp" alt="微信/支付宝"></a><div class="post-qr-code-desc">微信/支付宝</div></li><li class="reward-item"><a href="/img/PayPal.webp" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/PayPal.webp" alt="PayPal"></a><div class="post-qr-code-desc">PayPal</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display:none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://www.minbit.top/posts/45103.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=回调函数&amp;url=https://www.minbit.top/posts/45103.html&amp;pic=https://image-kcm.pages.dev/v2/yPgfhRS.png?_r_=53433e98-d3f0-2298-7796-f3f1cc0dce48" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl(){var e=window.location.href,t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(t)}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">知识共享署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0)</a> 许可协议。转载请注明来自 <a href="https://www.minbit.top" target="_blank">小米里的大麦</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/C/"><span class="tags-punctuation"><i class="anzhiyufont anzhiyu-icon-tag"></i></span>C++<span class="tagsPageCount">11</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://image-kcm.pages.dev/v2/12THR4h.png?_r_=7936633e-0757-8295-621e-92948d311261" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/26657.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/IAdmxAt.png?_r_=530044a1-d22d-ac36-e26b-fbf9922db59f" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">C++ 语言层面上的多线程</div></div></a></div><div class="next-post pull-right"><a href="/posts/37148.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/12THR4h.png?_r_=c63df55e-12e5-3751-c8af-cd8b1e36f5a5" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">06 表的约束</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size:1.5rem;margin-right:4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/38295.html" title="05 C&#x2F;C++内存管理"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/gDpBkQU.png?_r_=cd7208b0-159c-ecfd-1088-caa8bd922f86" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-22</div><div class="title">05 C&#x2F;C++内存管理</div></div></a></div><div><a href="/posts/30432.html" title="03 类与对象（中）"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/TISblXc.png?_r_=5a29db02-da0d-8d82-cb69-0c75205a1470" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-02</div><div class="title">03 类与对象（中）</div></div></a></div><div><a href="/posts/24103.html" title="02 类与对象（上）"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/TISblXc.png?_r_=f891d0c0-9ffb-8017-e9e4-81215e55e7db" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-01</div><div class="title">02 类与对象（上）</div></div></a></div><div><a href="/posts/51552.html" title="07 STL简介"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/IAdmxAt.png?_r_=e1da489b-1db1-b907-17c5-1f78efbd3426" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-22</div><div class="title">07 STL简介</div></div></a></div><div><a href="/posts/53002.html" title="06 模板初阶"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/TISblXc.png?_r_=c6253132-61a9-7c93-008e-b6b40bf3f0d7" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-02-25</div><div class="title">06 模板初阶</div></div></a></div><div><a href="/posts/123456.html" title="C++ STL —— 基于算法竞赛"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/gDpBkQU.png?_r_=12db4bc8-b1e1-27eb-1a70-d4ef5bde4fd5" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-01-01</div><div class="title">C++ STL —— 基于算法竞赛</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left:4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/Profile%20picture.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"></div></div><div class="author-info__description">时间好像总会留下点什么,或许是一个人,或许是一个梦,或许……是一段有意义的经历~</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">小米里的大麦</h1><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/huangcancan-xbc" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content"><span>👋🏻 Hi，我是 <a target="_blank" href="https://huangcancan-xbc.github.io" rel="external nofollow noreferrer noopener" style="font-weight:700;font-size:1.1em;color:#5166f0">小米里的大麦</a>，欢迎来看我的博客鸭！</span><br><span>👉 建议优先查看置顶的 <a target="_blank" href="https://huangcancan-xbc.github.io/posts/17934.html" rel="external nofollow noreferrer noopener" style="font-weight:700;font-size:1.1em;color:#5166f0">网站说明</a>，如有问题欢迎评论区交流！</span><br><span>😫 页面异常？尝试<kbd>Ctrl</kbd>+<kbd>F5</kbd></span><br><span>📩 联系我：<a href="mailto:hc1960074081@qq.com" rel="external nofollow noreferrer"><b>给我发送邮件🚀</b></a></span><br><div style="text-align:center;margin-top:10px"><style>.pp-AN88D43BPZLXN{text-align:center;border:none;border-radius:.25rem;min-width:11.625rem;padding:0 2rem;height:2.625rem;font-weight:700;background-color:#ffd140;color:#003087;font-family:"Helvetica Neue",Arial,sans-serif;font-size:1rem;line-height:1.25rem;cursor:pointer}</style><form action="https://www.paypal.com/ncp/payment/AN88D43BPZLXN" method="post" target="_blank" style="display:inline-grid;justify-items:center;align-content:start;gap:.5rem"><input class="pp-AN88D43BPZLXN" type="submit" value="打赏支持我"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://www.paypalobjects.com/images/Debit_Credit_APM.svg" alt="cards"><section style="font-size:.75rem">技术支持提供方： <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://www.paypalobjects.com/paypal-ui/logos/svg/paypal-wordmark-color.svg" alt="paypal" style="height:.875rem;vertical-align:middle"></section></form></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0"><span class="toc-number">1.</span> <span class="toc-text">回调函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E8%AE%A4%E8%AF%86%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%EF%BC%9F"><span class="toc-number">1.1.</span> <span class="toc-text">1. 认识回调函数？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%EF%BC%9F"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. 什么是回调函数？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. 使用场景</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.2.</span> <span class="toc-text">2. 回调函数的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88%E5%AE%9A%E4%B9%89"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. 函数指针定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%EF%BC%88C-%E9%A3%8E%E6%A0%BC%EF%BC%89"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. 基本使用（C 风格）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B-1"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">1. 代码示例 1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B-2"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">2. 代码示例 2</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%8F%96%E5%88%AB%E5%90%8D"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. 取别名</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-typedef-%E4%B8%BA%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E5%8F%96%E5%88%AB%E5%90%8D"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">1. typedef 为回调函数取别名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-using-%E4%B8%BA%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E5%8F%96%E5%88%AB%E5%90%8D"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">2. using 为回调函数取别名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%A8%A1%E6%9D%BF%E6%94%AF%E6%8C%81%EF%BC%88%E4%B8%BA%E4%BB%80%E4%B9%88%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8-using%EF%BC%9F%EF%BC%89"><span class="toc-number">1.2.3.3.</span> <span class="toc-text">3. 模板支持（为什么推荐使用 using？）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-std-function-%E2%80%94%E2%80%94-%E9%80%9A%E7%94%A8%E7%9A%84%E5%87%BD%E6%95%B0%E5%8C%85%E8%A3%85%E5%99%A8"><span class="toc-number">1.2.4.</span> <span class="toc-text">4. std::function —— 通用的函数包装器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%E7%BB%93%E6%9E%84"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">1. 基本语法结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B-1%EF%BC%88%E5%85%A5%E9%97%A8%EF%BC%89"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">2. 代码示例 1（入门）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B-2%EF%BC%88%E8%BF%9B%E9%98%B6%EF%BC%89"><span class="toc-number">1.2.4.3.</span> <span class="toc-text">3. 代码示例 2（进阶）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-std-bind-%E5%92%8C%E5%8D%A0%E4%BD%8D%E7%AC%A6%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.2.4.4.</span> <span class="toc-text">4. std::bind 和占位符的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-bind-%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.2.4.5.</span> <span class="toc-text">5. bind 的返回值是什么？</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E4%B8%87%E8%83%BD-auto"><span class="toc-number">1.2.4.5.1.</span> <span class="toc-text">1. 万能 auto</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%98%BE%E5%BC%8F%E6%8C%87%E5%AE%9A%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9A%E7%94%A8-std-function-%E5%8C%85%E8%A3%85"><span class="toc-number">1.2.4.5.2.</span> <span class="toc-text">2. 显式指定类型的方法：用 std::function 包装</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%A6%82%E4%BD%95%E7%A1%AE%E5%AE%9A-std-function-%E7%9A%84%E7%B1%BB%E5%9E%8B%EF%BC%9F"><span class="toc-number">1.2.4.5.3.</span> <span class="toc-text">3. 如何确定 std::function 的类型？</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E5%BF%85%E9%A1%BB%E6%98%BE%E5%BC%8F%E6%8C%87%E5%AE%9A%E7%B1%BB%E5%9E%8B%EF%BC%9F"><span class="toc-number">1.2.4.6.</span> <span class="toc-text">6. 什么时候必须显式指定类型？</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%89%A9%E5%B1%95"><span class="toc-number">1.2.5.</span> <span class="toc-text">5. 扩展</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-std-ref-std-cref-%E2%80%94%E2%80%94-%E5%BC%95%E7%94%A8%E5%8C%85%E8%A3%85%E5%99%A8"><span class="toc-number">1.2.5.1.</span> <span class="toc-text">1. std::ref &#x2F; std::cref —— 引用包装器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-std-mem-fn-%E2%80%94%E2%80%94-%E5%B0%86%E2%80%9C%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88%E2%80%9D%E8%BD%AC%E6%88%90%E5%8F%AF%E8%B0%83%E7%94%A8%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.2.5.2.</span> <span class="toc-text">2. std::mem_fn —— 将“成员函数指针”转成可调用对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-std-not-fn%EF%BC%88C-17%EF%BC%89%E2%80%94%E2%80%94-%E5%AF%B9%E9%80%BB%E8%BE%91%E5%87%BD%E6%95%B0%E5%8F%96%E5%8F%8D"><span class="toc-number">1.2.5.3.</span> <span class="toc-text">3. std::not_fn（C++17）—— 对逻辑函数取反</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E4%BB%BF%E5%87%BD%E6%95%B0%EF%BC%88%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1%EF%BC%89-std-function-%E4%B8%80%E8%B5%B7%E7%94%A8"><span class="toc-number">1.2.5.4.</span> <span class="toc-text">4. 仿函数（函数对象）+ std::function 一起用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%B0%8F%E7%BB%93"><span class="toc-number">1.3.</span> <span class="toc-text">3. 小结</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/13131.html" title="一台服务器 / VPS 的玩法：1Panel 面板与 3x-ui 的完美融合"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/12THR4h.png?_r_=7936633e-0757-8295-621e-92948d311261" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="一台服务器 / VPS 的玩法：1Panel 面板与 3x-ui 的完美融合"></a><div class="content"><a class="title" href="/posts/13131.html" title="一台服务器 / VPS 的玩法：1Panel 面板与 3x-ui 的完美融合">一台服务器 / VPS 的玩法：1Panel 面板与 3x-ui 的完美融合</a><time datetime="2026-01-31T16:00:00.000Z" title="发表于 2026-02-01 00:00:00">2026-02-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/62197.html" title="实用的 Obsidian 的插件"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/yPgfhRS.png?_r_=70a87ba7-a4be-dad0-1a82-e3dd7b38b350" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="实用的 Obsidian 的插件"></a><div class="content"><a class="title" href="/posts/62197.html" title="实用的 Obsidian 的插件">实用的 Obsidian 的插件</a><time datetime="2026-01-24T05:00:00.000Z" title="发表于 2026-01-24 13:00:00">2026-01-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/50073.html" title="解决 Gemini “出了点问题”"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/gDpBkQU.png?_r_=8e583f89-c72a-89a8-2f9f-6fd4b58391b7" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="解决 Gemini “出了点问题”"></a><div class="content"><a class="title" href="/posts/50073.html" title="解决 Gemini “出了点问题”">解决 Gemini “出了点问题”</a><time datetime="2026-01-14T16:00:00.000Z" title="发表于 2026-01-15 00:00:00">2026-01-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/22243.html" title="2025 年度总结"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/08taomy.jpeg?_r_=0600792e-6f32-c571-4e02-560ebdb5efdb" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="2025 年度总结"></a><div class="content"><a class="title" href="/posts/22243.html" title="2025 年度总结">2025 年度总结</a><time datetime="2025-12-31T16:00:00.000Z" title="发表于 2026-01-01 00:00:00">2026-01-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/39993.html" title="08 表的增删改查下"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/gDpBkQU.png?_r_=eff7e7f8-d8d8-c569-ab5e-ed0e3e49442d" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="08 表的增删改查下"></a><div class="content"><a class="title" href="/posts/39993.html" title="08 表的增删改查下">08 表的增删改查下</a><time datetime="2025-12-12T16:00:00.000Z" title="发表于 2025-12-13 00:00:00">2025-12-13</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:hc1960074081@qq.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://weibo.com/u/7913790969" title="微博"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0,500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/Profile picture.png" size="50px"><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com/1918272544" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2025 - 2026 By <a class="footer-bar-link" href="/" title="小米里的大麦" target="_blank">小米里的大麦</a></div></div><div id="footer-type-tips"></div><div class="js-pjax"><script>function subtitleType(){fetch("https://v1.hitokoto.cn").then(t=>t.json()).then(t=>{{const e="出自 "+t.from,n=["《左传》载曰：“太上有立德，其次有立功，其次有立言，虽久不废，此之谓不朽。”","纸上得来终觉浅，绝知此事要躬行！","《答案在风中飘扬》（Blowing in The Wind）","梦想是不会发光的，发光的是追梦的你！","你太专注于未来，却没有意识到，今天正是你多年前祈求的模样，因为你眺望远方视而不见。"];n.unshift(t.hitokoto,e),window.typed=new Typed("#footer-type-tips",{strings:n,startDelay:300,typeSpeed:150,loop:!0,backSpeed:50})}})}"function"==typeof Typed?subtitleType():getScript("https://cdn.cbd.int/typed.js@2.1.0/dist/typed.umd.js").then(subtitleType)</script></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="GitHub主页">GitHub主页</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">102</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">22</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">10</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">社交</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="GitHub"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/lollipop.svg" alt="GitHub"><span class="back-menu-item-text">GitHub</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://space.bilibili.com/1918272544" title="哔哩哔哩"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/wink.svg" alt="哔哩哔哩"><span class="back-menu-item-text">哔哩哔哩</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://gitee.com/huang-cancan-xbc" title="Gitee"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/laugh.svg" alt="Gitee"><span class="back-menu-item-text">Gitee</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">博客</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.csdn.net/Huangcancan666?type=blog" title="CSDN"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/celebrate.svg" alt="CSDN"><span class="back-menu-item-text">CSDN</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://juejin.cn/user/3230789931118109" title="稀土掘金"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/kiss.svg" alt="稀土掘金"><span class="back-menu-item-text">稀土掘金</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">算法</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://leetcode.cn/u/nifty-faradayzqn" title="力扣"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/thinking-glass.svg" alt="力扣"><span class="back-menu-item-text">力扣</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/profile/517073385" title="牛客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/think.svg" alt="牛客"><span class="back-menu-item-text">牛客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.luogu.com.cn/user/1367427" title="洛谷"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/funny.svg" alt="洛谷"><span class="back-menu-item-text">洛谷</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i><span> 统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size:.9em"></i><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i><span> 外链</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i><span> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i><span> 关于本人</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AI/" style="font-size:.88rem">AI<sup>2</sup></a><a href="/tags/C/" style="font-size:.88rem">C++<sup>11</sup></a><a href="/tags/Git/" style="font-size:.88rem">Git<sup>3</sup></a><a href="/tags/IO/" style="font-size:.88rem">IO<sup>5</sup></a><a href="/tags/Linux/" style="font-size:.88rem">Linux<sup>60</sup></a><a href="/tags/MySQL/" style="font-size:.88rem">MySQL<sup>9</sup></a><a href="/tags/Obsidian/" style="font-size:.88rem">Obsidian<sup>2</sup></a><a href="/tags/Python/" style="font-size:.88rem">Python<sup>1</sup></a><a href="/tags/Redis/" style="font-size:.88rem">Redis<sup>2</sup></a><a href="/tags/STL/" style="font-size:.88rem">STL<sup>2</sup></a><a href="/tags/VS-Code/" style="font-size:.88rem">VS Code<sup>3</sup></a><a href="/tags/%E4%BF%A1%E5%8F%B7/" style="font-size:.88rem">信号<sup>3</sup></a><a href="/tags/%E5%8E%86%E7%A8%8B/" style="font-size:.88rem">历程<sup>3</sup></a><a href="/tags/%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4/" style="font-size:.88rem">地址空间<sup>6</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size:.88rem">工具<sup>13</sup></a><a href="/tags/%E6%B6%A8%E7%9F%A5%E8%AF%86/" style="font-size:.88rem">涨知识<sup>7</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size:.88rem">算法<sup>3</sup></a><a href="/tags/%E7%AE%A1%E9%81%93/" style="font-size:.88rem">管道<sup>2</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size:.88rem">线程<sup>5</sup></a><a href="/tags/%E7%BD%91%E7%AB%99/" style="font-size:.88rem">网站<sup>4</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size:.88rem">网络<sup>12</sup></a><a href="/tags/%E8%BF%9B%E7%A8%8B/" style="font-size:.88rem">进程<sup>15</sup></a></div></div><hr></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="anzhiyu.scrollToDest(document.body.scrollHeight,500)"><i class="anzhiyufont anzhiyu-icon-arrow-down"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span> 数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size:1rem"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display:none"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@6.1.6/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>var HoldLog=console.log;console.log=function(){};let now1=new Date;queueMicrotask(()=>{const o=function(){HoldLog.apply(console,arguments)},n=new Date("01/01/2025 00:00:00");now1.setTime(now1.getTime()+250);const c=(now1-n)/1e3/60/60/24,e=["这里是 小米里的大麦","芝兰生于深谷，不以无人而不芳。","\n        \n       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗\n      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║\n      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║\n      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║\n      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝\n      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝\n        \n        ","已上线",Math.floor(c),"天","©2025 By 安知鱼 V1.7.1"],t=["NCC2-036","调用前置摄像头拍照成功，识别为【小笨蛋】.","Photo captured: ","🤪"];setTimeout(o.bind(console,`\n%c${e[0]} %c ${e[1]} %c ${e[2]} %c${e[3]}%c ${e[4]}%c ${e[5]}\n\n%c ${e[6]}\n`,"color:#425AEF","","color:#425AEF","color:#425AEF","","color:#425AEF","")),setTimeout(o.bind(console,`%c ${t[0]} %c ${t[1]} %c \n${t[2]} %c\n${t[3]}\n`,"color:white; background-color:#4fd953","","",'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%')),setTimeout(o.bind(console,"%c WELCOME %c 你好，小笨蛋.","color:white; background-color:#4f90d9","")),setTimeout(console.warn.bind(console,"%c ⚡ Powered by 安知鱼 %c 你正在访问 小米里的大麦 的博客.","color:white; background-color:#f0ad4e","")),setTimeout(o.bind(console,"%c W23-12 %c 你已打开控制台.","color:white; background-color:#4f90d9","")),setTimeout(console.warn.bind(console,"%c S013-782 %c 你现在正处于监控中.","color:white; background-color:#d9534f",""))})</script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(()=>{const t=()=>{"object"==typeof twikoo?setTimeout(o,0):getScript("https://cdn.cbd.int/twikoo@1.6.44/dist/twikoo.all.min.js").then(o)},o=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo.minbit.top/",path:window.location.pathname,region:"ap-shanghai",onCommentLoaded:()=>{anzhiyu.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null)),GLOBAL_CONFIG_SITE.isPost&&(()=>{const t=document.getElementById("twikoo-count");t&&twikoo.getCommentsCount({envId:"https://twikoo.minbit.top/",region:"ap-shanghai",urls:[window.location.pathname],includeReply:!1}).then(o=>{t.textContent=o[0].count}).catch(t=>{console.error(t)})})()};anzhiyu.loadComment(document.getElementById("twikoo-wrap"),t)})()</script><input type="hidden" name="page-type" id="page-type" value="post"><script async src="/js/anzhiyu/comment_barrage.js"></script></div><script>window.addEventListener("load",()=>{const e=e=>{let t="";if(e.length)for(let n=0;n<e.length;n++){t+="<div class='aside-list-item'>";{const a="data-lazy-src";t+=`<a href='${e[n].url}' class='thumbnail'><img ${a}='${e[n].avatar}' alt='${e[n].nick}'><div class='name'><span>${e[n].nick} </span></div></a>`}t+=`<div class='content'>\n        <a class='comment' href='${e[n].url}' title='${e[n].content}'>${e[n].content}</a>\n        <time datetime="${e[n].date}">${anzhiyu.diffDate(e[n].date,!0)}</time></div>\n        </div>`}else t+="没有评论";let n=document.querySelector("#card-newest-comments .aside-list");n&&(n.innerHTML=t),window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(n)},t=()=>{if(document.querySelector("#card-newest-comments .aside-list")){const t=saveToLocal.get("twikoo-newest-comments");t?e(JSON.parse(t)):(()=>{const t=()=>{twikoo.getRecentComments({envId:"https://twikoo.minbit.top/",region:"ap-shanghai",pageSize:6,includeReply:!0}).then((function(t){const n=t.map(e=>{return{content:(t=e.comment,""===t||(t=(t=(t=(t=t.replace(/<img.*?src="(.*?)"?[^\>]+>/gi,"[图片]")).replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,"[链接]")).replace(/<pre><code>.*?<\/pre>/gi,"[代码]")).replace(/<[^>]+>/g,"")).length>150&&(t=t.substring(0,150)+"..."),t),avatar:e.avatar,nick:e.nick,url:e.url+"#"+e.id,date:new Date(e.created).toISOString()};var t});saveToLocal.set("twikoo-newest-comments",JSON.stringify(n),10/1440),e(n)})).catch((function(e){document.querySelector("#card-newest-comments .aside-list").textContent="无法获取评论，请确认相关配置是否正确"}))};"object"==typeof twikoo?t():getScript("https://cdn.cbd.int/twikoo@1.6.44/dist/twikoo.all.min.js").then(t)})()}};t(),document.addEventListener("pjax:complete",t)})</script><script async data-pjax src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail="xiaomilidedamai@minbit.top"</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://cdn.cbd.int/qrcodejs@1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script src="https://cdn.bootcdn.net/ajax/libs/echarts/4.9.0-rc.1/echarts.min.js"></script><script src="/js/footer-animal.js" defer></script><script id="click-show-text" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="false" data-text="offer,暴富,健康,offer,喜乐,成功,offer,好运,自由,offer,坚持,上岸" data-fontsize="20px" data-random="true" async></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors=['meta[property="og:image"]','meta[property="og:title"]','meta[property="og:url"]','meta[property="og:type"]','meta[property="og:site_name"]','meta[property="og:description"]',"head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(anzhiyu.removeGlobalFnEvent("pjax"),anzhiyu.removeGlobalFnEvent("themeChange"),document.getElementById("rightside").classList.remove("rightside-show"),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()})),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async data-pjax src="https://events.vercount.one/js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script><script>window.addEventListener("load",()=>{const t=()=>{if(!window.location.pathname.startsWith("/comments/"))return;const t=async()=>{const t=new EasyDanmaku({page:"/comments/",el:"#danmu-wrap",line:5,speed:20,hover:!0,loop:!0,colourful:!0,coefficient:1.38,runtime:10});try{let a=saveToLocal.get("twikoo-danmu");if(a)t.batchSend(a,!0);else{const n={method:"POST",body:JSON.stringify({event:"GET_RECENT_COMMENTS",includeReply:!1,pageSize:100}),headers:{"Content-Type":"application/json"}};a=[];const o=await fetch("https://twikoo.minbit.top/",n);if(o.ok){const{data:n}=await o.json();n.forEach(t=>{null==t.avatar&&(t.avatar="https://cravatar.cn/avatar/d615d5793929e8c7d70eab5f00f7f5f1?d=mp"),a.push({avatar:t.avatar,content:t.nick+"："+e(t.comment),url:t.url+"#"+t.id})}),t.batchSend(a,!0),saveToLocal.set("twikoo-danmu",a,.5)}function e(t){return t=(t=(t=(t=(t=t.replace(/<\/*br>|[\s\uFEFF\xA0]+/g,"")).replace(/<img.*?>/g,"[图片]")).replace(/<a.*?>.*?<\/a>/g,"[链接]")).replace(/<pre.*?>.*?<\/pre>/g,"[代码块]")).replace(/<.*?>/g,"")}}}catch(t){console.error("Error fetching data:",t)}document.getElementById("danmu-Btn")&&(document.getElementById("danmu-Btn").innerHTML="<button class=\"hide-Btn\" onclick=\"document.getElementById('danmu-wrap').classList.remove('hide-danmu')\">显示弹幕</button> <button class=\"hide-Btn\" onclick=\"document.getElementById('danmu-wrap').classList.add('hide-danmu')\">隐藏弹幕</button>")};(async()=>{if("function"==typeof EasyDanmaku)await t();else{await getScript("/js/easy-Danmaku.js");"function"==typeof EasyDanmaku?await t():console.error("EasyDanmaku function not found even after loading the script.")}})()};t(),document.addEventListener("pjax:complete",t)})</script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>