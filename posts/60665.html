<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>07 表的增删改查上 | 小米里的大麦</title><meta name="keywords" content="MySQL"><meta name="author" content="小米里的大麦"><meta name="copyright" content="小米里的大麦"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="07 表的增删改查上"><meta name="application-name" content="07 表的增删改查上"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="07 表的增删改查上"><meta property="og:url" content="https://www.minbit.top/posts/60665.html"><meta property="og:site_name" content="小米里的大麦"><meta property="og:description" content="表的增删改查上1. Create（创建）1. 单行插入 + 全列插入（最基础）1. 语法格式1INSERT INTO 表名 VALUES (值1, 值2, ..., 值N);     省略列名时，必须按表定义的列顺序且写齐所有列（可用 NULL 或 DEFAULT 占位）。  2. 示例123456"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://image-kcm.pages.dev/v2/12THR4h.png?_r_=2094b2e0-3c58-71ab-7188-d1e51f8add0b"><meta property="article:author" content="小米里的大麦"><meta property="article:tag" content="技术博客,Linux,C++,后端开发,编程学习,个人博客,技术分享"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://image-kcm.pages.dev/v2/12THR4h.png?_r_=2094b2e0-3c58-71ab-7188-d1e51f8add0b"><meta name="description" content="表的增删改查上1. Create（创建）1. 单行插入 + 全列插入（最基础）1. 语法格式1INSERT INTO 表名 VALUES (值1, 值2, ..., 值N);     省略列名时，必须按表定义的列顺序且写齐所有列（可用 NULL 或 DEFAULT 占位）。  2. 示例123456"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "07 表的增删改查上",
  "description": "表的增删改查上1. Create（创建）1. 单行插入 + 全列插入（最基础）1. 语法格式1INSERT INTO 表名 VALUES (值1, 值2, ..., 值N);     省略列名时，必须按表定义的列顺序且写齐所有列（可用 NULL 或 DEFAULT 占位）。  2. 示例123456",
  "image": "https://image-kcm.pages.dev/v2/12THR4h.png?_r_=2094b2e0-3c58-71ab-7188-d1e51f8add0b",
  "datePublished": "2025-11-02T16:00:00.000Z",
  "dateModified": "2025-12-16T02:10:00.000Z",
  "author": {
    "@type": "Person",
    "name": "小米里的大麦",
    "url": "https://www.minbit.top"
  },
  "publisher": {
    "@type": "Organization",
    "name": "小米里的大麦",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.minbit.top/img/Profile%20picture.png"
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.minbit.top/posts/60665.html"
  },
  "keywords": "MySQL"
}</script><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "首页",
      "item": "https://www.minbit.top"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "07 表的增删改查上",
      "item": "https://www.minbit.top/posts/60665.html"
    }
  ]
}</script><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "小米里的大麦",
  "url": "https://www.minbit.top",
  "image": "https://www.minbit.top/img/Profile%20picture.png",
  "description": "时间好像总会留下点什么，或许是一个人，或许是一个梦，或许……是一段有意义的经历~"
}</script><link rel="shortcut icon" href="/img/icons/funny.svg"><link rel="canonical" href="https://www.minbit.top/posts/60665.html"><link rel="preconnect" href="//cdn.cbd.int"><link rel="preconnect" href="//bsz.dusays.com:9001"><meta name="google-site-verification" content="xxx"><meta name="baidu-site-verification" content="code-xxx"><meta name="msvalidate.01" content="xxx"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="var(--anzhiyu-main)"><link rel="mask-icon" href="/img/siteicon/apple-icon-180.png" color="#5bbad5"><link rel="apple-touch-icon" sizes="180x180" href="/img/siteicon/apple-icon-180.png"><link rel="apple-touch-icon-precomposed" sizes="180x180" href="/img/siteicon/apple-icon-180.png"><link rel="icon" type="image/png" sizes="32x32" href="/img/siteicon/32.png"><link rel="icon" type="image/png" sizes="16x16" href="/img/siteicon/16.png"><link rel="bookmark" href="/img/siteicon/apple-icon-180.png"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-2732.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2732-2048.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2388.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2388-1668.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1536-2048.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-1536.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2224.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2224-1668.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1620-2160.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2160-1620.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1290-2796.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2796-1290.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1179-2556.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2556-1179.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1284-2778.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2778-1284.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1170-2532.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2532-1170.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1125-2436.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2436-1125.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2688.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2688-1242.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-828-1792.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1792-828.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2208.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2208-1242.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-750-1334.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1334-750.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-640-1136.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1136-640.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@6.1.6/dist/fancybox/fancybox.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={linkPageTop:{enable:!0,title:"友链 + 外链 + 无限进步！欢迎欣赏和贡献！",addFriendPlaceholder:"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},peoplecanvas:void 0,postHeadAiDescription:{enable:!0,gptName:"小米里的大麦",mode:"local",switchBtn:!1,btnLink:"https://afdian.net/item/886a79d4db6711eda42a52540025c377",randomNum:4,basicWordCount:1999,key:"93d1622eadde491eb0594b68ade51723.kaEiDD6A3KPzb7xv",Referer:"https://www.minbit.top/"},diytitle:{enable:!0,leaveTitle:"w(ﾟДﾟ)w 不要走！再看看嘛！",backTitle:"♪(^∇^*)欢迎肥来！"},LA51:{enable:!0,ck:"Jp8wwGQpp21utaFQ",LingQueMonitorID:"Jp8ztDRrxmTf7LDj"},greetingBox:{enable:!0,default:"晚上好👋",list:[{greeting:"晚安😴",startTime:0,endTime:5},{greeting:"早上好鸭👋, 祝你一天好心情！",startTime:6,endTime:9},{greeting:"上午好👋, 状态很好，鼓励一下～",startTime:10,endTime:10},{greeting:"11点多啦, 在坚持一下就吃饭啦～",startTime:11,endTime:11},{greeting:"午安👋, 宝贝",startTime:12,endTime:14},{greeting:"🌈充实的一天辛苦啦！",startTime:14,endTime:18},{greeting:"19点喽, 奖励一顿丰盛的大餐吧🍔。",startTime:19,endTime:19},{greeting:"晚上好👋, 在属于自己的时间好好放松😌~",startTime:20,endTime:24}]},twikooEnvId:"https://twikoo.minbit.top/",commentBarrageConfig:{enable:!0,maxBarrage:10,barrageTime:5e3,accessToken:"25c96851dd8a790c4819ad4bfbaf153c",mailMd5:"7b12ebc2be80f9159099f6ab0e16573c"},music_page_default:"nav_music",root:"/",preloader:{source:3},friends_vue_info:void 0,navMusic:!0,mainTone:{mode:"both",api:"https://img2color-go.vercel.app/api?img=",cover_change:!0},authorStatus:{skills:["🧐 准备中，就快好了，真的！😭","📚 正在学习中，加油！","🎵 喜欢听音乐，喜欢看动漫"]},algolia:void 0,localSearch:{path:"/search.xml",preload:!0,languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简",rightMenuMsgToTraditionalChinese:"转为繁体",rightMenuMsgToSimplifiedChinese:"转为简体"},noticeOutdate:{limitDay:365,position:"top",messagePrev:"距上次更新已过去",messageNext:"天了，这篇文章的内容可能已经过时了。"},highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:330},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,simplehomepage:!1,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{copy:!0,copyrightEbable:!0,limitCount:150,languages:{author:"作者: 小米里的大麦",link:"链接: ",source:"来源: 小米里的大麦",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。",copySuccess:"复制成功，复制和转载请标注本文地址"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#425AEF",bgDark:"#1f1f1f",position:"top-right"},source:{justifiedGallery:{js:"https://cdn.cbd.int/flickr-justified-gallery@2.2.0/dist/fjGallery.min.js",css:"https://cdn.cbd.int/flickr-justified-gallery@2.2.0/dist/fjGallery.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1,shortcutKey:void 0,autoDarkmode:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={configTitle:"小米里的大麦",title:"07 表的增删改查上",postAI:"这篇文章讲述了数据库表中数据的增删改查操作。首先介绍了创建表的基本操作，包括单行插入和全列插入，强调了列顺序和省略列名时的注意事项。接着讨论了多行插入和指定列插入的高效写法，以及插入否则更新的INSERT ... ON DUPLICATE KEY UPDATE语句的使用场景和示例。文章还提到了REPLACE INTO语句，它会在插入数据时删除已存在的冲突记录，然后插入新数据。最后，文章详细讲解了查询操作，包括全列查询、指定列查询和查询字段为表达式的方法，并强调了WHERE、DISTINCT、ORDER BY和LIMIT等子句的使用顺序和注意事项。",pageFillDescription:"表的增删改查上, 1. Create（创建）, 1. 单行插入 + 全列插入（最基础）, 1. 语法格式, 2. 示例, 2. 多行插入 + 指定列插入（高效写法）, 1. 语法格式（指定列支持多行）, 2. 示例, 3. 插入否则更新：INSERT ... ON DUPLICATE KEY UPDATE, 1. 语法格式, 2. 示例（常见用法：计数、冲突合并）, 3. 常见变体：直接覆盖部分字段, 4. 替换数据：REPLACE INTO, 1. 语法格式, 2. 示例, 2. Retrieve（查）, 1. select 列, 1. 全列查询（查询所有列）, 1. 语法, 2. 示例, 2. 指定列查询, 1. 语法, 2. 示例, 3. 查询字段为表达式, 1. 语法, 2. 示例, 4. 为查询结果指定别名, 1. 语法, 2. 示例, 5. 结果去重, 1. 语法, 2. 示例, 2. where 条件, 1. 语法, 2. 示例, 1. 等值查询（常用）, 2. 不等于 x2F 大小比较, 3. AND x2F OR 组合条件（常用）, 4. IN（多个值之一）, 5. BETWEEN（范围查询）, 6. LIKE（模糊查询）, 7. IS NULL x2F IS NOT NULL, 8. WHERE 中用表达式（能用但要小心）, 3. 结果排序, 1. 语法, 2. 示例, 1. 单列排序, 2. 多列排序（真实项目常用）, 3. ORDER BY + WHERE（常见组合）, 3. ORDER BY 的几种进阶写法, 1. 按别名排序, 2. 按表达式排序（能用但慎用）, 3. ORDER BY NULL（禁止排序）, 4. 常见坑（重点）, 1. ORDER BY 大表非常慢, 2. ORDER BY 和索引方向不一致, 3. ORDER BY 随机排序（千万别用）, 4. 筛选分页结果, 1. 语法, 2. 示例, 1. 首页 x2F 最新列表（常用）, 2. 条件 + 分页（）, 3. 注意事项（坑点）, 1. 没写 ORDER BY（致命）, 2. ORDER BY + LIMIT 深分页（性能杀手）, 4. 高性能分页方式（进阶重点）, 1. 游标分页（强烈推荐）, 2. 时间游标分页, 3. 分页 + 索引的黄金组合, 4. 分页时统计总数（常见需求）表的增删改查上创建单行插入全列插入最基础语法格式表名值值值省略列名时必须按表定义的列顺序且写齐所有列可用或占位示例全列插入省略列名用占位触发自增张三注意简短但易错列顺序变动或新增列会导致问题若主键自增用或占位若某列且无必须提供值多行插入指定列插入高效写法语法格式指定列支持多行表名列列值值值值示例只插入和用自增李四王五赵六注意一次多行插入性能远优于循环单条插入可以省略不需要赋值的列使用默认值或若有唯一主键冲突会整个语句失败除非用或插入否则更新语法格式表名列列值值列新值列新值在插入行与表中已有行在主键或唯一索引冲突时执行子句而不是报错或忽略示例常见用法计数冲突合并尝试插入新名字若冲突就把累加在以后用被废弃可用的替代实际推荐写法在很多版本仍通用新版本可用结构或替代注意兼容常见变体直接覆盖部分字段注意触发器等仍会按插入流程触发冲突时也会触发相关触发器会把冲突情况视为更新可能影响值插入失败仍可能消耗自增性能对高并发唯一冲突场景可能产生较多锁竞争返回插入语句中指定的值注意版本兼容替换数据语法格式表名列列语句会首先删除表中与新数据冲突的旧记录通常是主键或唯一索引冲突然后插入新数据相当于也就是说如果插入的数据已存在会先删除原来的数据再插入新的数据示例若存在则先删除的行再插入新行注意是的组合会导致被删除行的所有外键级联触发器以及自增等副作用比如被删除行上的外键约束触发器会触发被删除的行会被真正删除删除可能触发级联或触发器会导致新的行有新的自增如果使用自增列且没有给出则新插入会产生新不如温和慎用在有外键或审计需求的表上创建表主键自增默认这是会自增长这是姓名这是年龄默认错误查看表无表名语法查看表结构非空自增默认插入数据张三张三错误值数量与字段数不匹配李四插入数据用触发自增李四李四插入数据指定和自增赵七批量插入错误已存在主键重复王五小明小红查看数据现有条记录张三李四赵七批量插入无重复用默认王五小明小红查看数据新增条默认张三李四赵七王五小明小红插入错误已存在主键重复李四错误后无更新内容语法不完整李四主键重复时更新更新原有的行改为改为李四李四李四查看数据原的行被更新为消失张三李四李四王五小明小红主键重复时更新更新原有的行改为改为小红红小红小红红查看数据原的行被更新为消失张三李四李四王五小明小红红插入数据仅自增查看数据新增张三李四李四王五小明小红红插入数据李四自增无重复李四查看数据新增张三李四李四王五小明小红红李四插入数据李四自增无重复李四查看数据新增张三李四李四王五小明小红红李四李四查的顺序记这个列表条件列跳过数每页条数永远在后前列全列查询查询所有列全列查询表示从表中查询所有的列只需要使用即可语法表名注意使用查询会返回表中所有列如果表的列很多或者数据量大会影响性能通常建议只查询需要的列示例张三李四李四王五小明小红红李四李四指定列查询指定列查询用于查询表中的特定列而不是所有列需要通过列名来选择需要的列语法列名列名表名示例张三李四李四王五小明小红红李四李四查询字段为表达式语句中可以使用表达式例如算术运算字符串拼接函数等来处理数据并将结果作为查询结果的一部分语法表达式表名示例查询表所有数据张三李四李四王五小明小红红李四李四每行判断结果以展示返回所有行张三李四李四王五小明小红红李四李四筛选且的行只展示列筛选且的行展示列李四展示乘并命名为返回所有行张三李四李四王五小明小红红李四李四为查询结果指定别名通过关键字可以给查询结果的字段指定别名使结果更具可读性通常用于表达式或列名较长时语法列名别名表名示例张三李四李四王五小明小红红李四李四结果去重当我们只关心某些列的不同值时可以用返回去除重复值的查询结果语法列名表名注意是对所选字段的组合去重不是单字段去重必须紧跟关键字且只能写一次不能插在字段列表中间后面示例只对字段去重不管张三李四王五小明小红红作用于组合去重重复的姓名年龄组合张三李四李四王五小明小红红李四条件用来筛选行不满足条件的记录直接不返回语法列名表名条件常用比较与条件运算符速查表分类运算符语法含义典型示例注意事项重点比较大于大于等于小于小于等于常用配合索引效果好比较等于不安全结果是比较等于安全一般不用判断优先用比较不等于两者等价常用范围在区间内含边界等价于集合在给定集合中值不要太多集合不在给定集合中集合中有会出大坑空值是判断只能用它空值不是可正常用索引模糊以开头能用索引推荐模糊以结尾不能用索引慢模糊包含大表慎用模糊不匹配常配合逻辑同时满足步骤按班级性别分组统计步骤过滤出人数的分组步骤对过滤后的结果排序逻辑满足一个即可一定配合括号逻辑条件取反常和用通配符说明符号含义任意多个字符包括个任意个字符表示以开头至少个字符实用规则判断永远用混用条件多时一定加括号保证逻辑清晰优先用等值查询能用就别用里的列尽量别参与计算写前先写验证示例等值查询常用查等于的那一行主键唯一键查询最常见注意字符串要加单引号不等于大小比较组合条件常用注意优先级坑重点等价于实际开发一定加括号多个值之一等价于注意里值不要太多几百上千会慢范围查询等价于模糊查询常见写法写法含义以开头以结尾包含重要性能点开头基本用不到索引大表慎用模糊查询错误写法中用表达式能用但要小心注意列参与计算索引基本失效实际应写成结果排序结果排序用默认升序会影响性能尤其在大表上语法列表条件列升序默认可不写降序注意升序时在最前降序时在最后因为把当成最小的值来排序代表没有值不是具体数据所以排序时统一放在最小端就排前面就被放到最后示例单列排序王五小明小红红张三李四李四李四李四李四李四李四张三李四王五小明小红红多列排序真实项目常用先按排相同再按排按降序升序降序多级排序李四李四小红红小明王五李四李四张三常见组合执行顺序过滤排序返回结果先给起别名再按别名排序李四张三李四王五小明小红红的几种进阶写法按别名排序可读性好表达式排序可能慢按表达式排序能用但慎用风险索引失效数据量大时很慢禁止排序用途明确告诉不需要排序聚合查询时可微优化常见坑重点大表非常慢原因排序需要额外内存磁盘解决思路的列尽量建索引排序方向要一致和索引方向不一致索引可能用不上索引随机排序千万别用大表灾难筛选分页结果筛选分页结果先筛选定序分页顺序写错方式选错要么结果乱要么性能炸语法列表条件排序列注意单参数表示仅取前条数据非分页双参数表示跳过前条取后续条数据属于分页分页计算逻辑是分页语法需要跳过的记录数计算方式页码每页条数每页显示的条数这里是示例假设需要取第页的数据每页显示条那么筛选条件只查的记录按降序排列分页跳过前条取接下来的条示例首页最新列表常用只取器前条数据非分页条件分页跳过前条数据取紧接着后面的条数据分页等价写法但更常见注意事项坑点没写致命问题每次返回顺序可能不同翻页会重复丢数据分页必须深分页性能杀手非常慢需要先扫描条再丢掉只取条高性能分页方式进阶重点游标分页强烈推荐思想用上一页最后一条数据翻页特点不用越往后速度越快实际项目常用时间游标分页分页索引的黄金组合条件排序列必须有索引否则分页再小也慢推荐分页时统计总数常见需求正确做法分两条不要在一条里又分页又慢查数据查总数",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2025-12-16 10:10:00",postMainColor:""}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:(e,t,a)=>{if(0===a)return;const o={value:t,expiry:Date.now()+864e5*a};localStorage.setItem(e,JSON.stringify(o))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const a=JSON.parse(t);if(!(Date.now()>a.expiry))return a.value;localStorage.removeItem(e)}},e.getScript=(e,t={})=>new Promise((a,o)=>{const c=document.createElement("script");c.src=e,c.async=!0,c.onerror=o,c.onload=c.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(c.onload=c.onreadystatechange=null,a())},Object.keys(t).forEach(e=>{c.setAttribute(e,t[e])}),document.head.appendChild(c)}),e.getCSS=(e,t=!1)=>new Promise((a,o)=>{const c=document.createElement("link");c.rel="stylesheet",c.href=e,t&&(c.id=t),c.onerror=o,c.onload=c.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(c.onload=c.onreadystatechange=null,a())},document.head.appendChild(c)}),e.activateDarkMode=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#18171d")},e.activateLightMode=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#f7f9fe")};const t=saveToLocal.get("theme"),a=window.matchMedia("(prefers-color-scheme: dark)").matches,o=window.matchMedia("(prefers-color-scheme: light)").matches,c=window.matchMedia("(prefers-color-scheme: no-preference)").matches,n=!a&&!o&&!c;if(void 0===t){if(o)activateLightMode();else if(a)activateDarkMode();else if(c||n){const e=(new Date).getHours();e<=10||e>=20?activateDarkMode():activateLightMode()}window.matchMedia("(prefers-color-scheme: dark)").addListener(e=>{void 0===saveToLocal.get("theme")&&(e.matches?activateDarkMode():activateLightMode())})}else"light"===t?activateLightMode():activateDarkMode();const d=saveToLocal.get("aside-status");void 0!==d&&("hide"===d?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/custom/css/font.css"><link rel="stylesheet" href="/custom/css/bilibili.css"><meta name="generator" content="Hexo 8.1.1"><link rel="alternate" href="/atom.xml" title="小米里的大麦" type="application/atom+xml">
</head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/img/Profile%20picture.png"><div class="loading-image-dot"></div></div></div><script>const preloader={endLoading:()=>{document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",()=>{preloader.endLoading()}),setTimeout((function(){preloader.endLoading()}),1e4),document.addEventListener("pjax:send",()=>{preloader.initLoading()}),document.addEventListener("pjax:complete",()=>{preloader.endLoading()})</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"><script async src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">社交</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="GitHub"><img class="back-menu-item-icon" src="/img/icons/lollipop.svg" alt="GitHub"><span class="back-menu-item-text">GitHub</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://space.bilibili.com/1918272544" title="哔哩哔哩"><img class="back-menu-item-icon" src="/img/icons/wink.svg" alt="哔哩哔哩"><span class="back-menu-item-text">哔哩哔哩</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://gitee.com/huang-cancan-xbc" title="Gitee"><img class="back-menu-item-icon" src="/img/icons/laugh.svg" alt="Gitee"><span class="back-menu-item-text">Gitee</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">博客</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.csdn.net/Huangcancan666?type=blog" title="CSDN"><img class="back-menu-item-icon" src="/img/icons/celebrate.svg" alt="CSDN"><span class="back-menu-item-text">CSDN</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://juejin.cn/user/3230789931118109" title="稀土掘金"><img class="back-menu-item-icon" src="/img/icons/kiss.svg" alt="稀土掘金"><span class="back-menu-item-text">稀土掘金</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">算法</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://leetcode.cn/u/nifty-faradayzqn" title="力扣"><img class="back-menu-item-icon" src="/img/icons/thinking-glass.svg" alt="力扣"><span class="back-menu-item-text">力扣</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/profile/517073385" title="牛客"><img class="back-menu-item-icon" src="/img/icons/think.svg" alt="牛客"><span class="back-menu-item-text">牛客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.luogu.com.cn/user/1367427" title="洛谷"><img class="back-menu-item-icon" src="/img/icons/funny.svg" alt="洛谷"><span class="back-menu-item-text">洛谷</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">小米里的大麦</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i><span> 统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size:.9em"></i><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i><span> 外链</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i><span> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i><span> 关于本人</span></a></li></ul></div></div></div><div id="nav-right"><div id="nav-naoDark"><div class="container"><div class="components"><div class="main-button"><div class="moon"></div><div class="moon"></div><div class="moon"></div></div><div class="daytime-backgrond"></div><div class="daytime-backgrond"></div><div class="daytime-backgrond"></div><div class="cloud"><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div></div><div class="cloud-light"><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div></div><div class="stars"><div class="star big"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star big"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star medium"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star medium"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star small"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star small"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div></div></div></div></div><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole()"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/img/wechat.webp" target="_blank"><img class="post-qr-code-img" alt="微信" src="/img/wechat.webp"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay.webp" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="/img/alipay.webp"></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title">最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AI/" style="font-size:1.05rem">AI<sup>2</sup></a><a href="/tags/C/" style="font-size:1.05rem">C++<sup>11</sup></a><a href="/tags/Git/" style="font-size:1.05rem">Git<sup>3</sup></a><a href="/tags/IO/" style="font-size:1.05rem">IO<sup>5</sup></a><a href="/tags/Linux/" style="font-size:1.05rem">Linux<sup>59</sup></a><a href="/tags/MySQL/" style="font-size:1.05rem">MySQL<sup>9</sup></a><a href="/tags/Redis/" style="font-size:1.05rem">Redis<sup>2</sup></a><a href="/tags/STL/" style="font-size:1.05rem">STL<sup>2</sup></a><a href="/tags/VS-Code/" style="font-size:1.05rem">VS Code<sup>1</sup></a><a href="/tags/%E4%BF%A1%E5%8F%B7/" style="font-size:1.05rem">信号<sup>3</sup></a><a href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" style="font-size:1.05rem">内存管理<sup>1</sup></a><a href="/tags/%E5%8E%86%E7%A8%8B/" style="font-size:1.05rem">历程<sup>2</sup></a><a href="/tags/%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4/" style="font-size:1.05rem">地址空间<sup>6</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size:1.05rem">工具<sup>4</sup></a><a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size:1.05rem">数学<sup>1</sup></a><a href="/tags/%E6%A8%A1%E6%9D%BF/" style="font-size:1.05rem">模板<sup>1</sup></a><a href="/tags/%E7%81%B5%E5%85%89%E8%8D%9F%E8%90%83/" style="font-size:1.05rem">灵光荟萃<sup>3</sup></a><a href="/tags/%E7%AE%A1%E9%81%93/" style="font-size:1.05rem">管道<sup>2</sup></a><a href="/tags/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/" style="font-size:1.05rem">类与对象<sup>3</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size:1.05rem">线程<sup>5</sup></a><a href="/tags/%E7%BD%91%E7%AB%99/" style="font-size:1.05rem">网站<sup>3</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size:1.05rem">网络<sup>11</sup></a><a href="/tags/%E8%BF%9B%E7%A8%8B/" style="font-size:1.05rem">进程<sup>15</sup></a></div></div><hr></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多"> <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2026/01/"><span class="card-archive-list-date">一月 2026</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/12/"><span class="card-archive-list-date">十二月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/11/"><span class="card-archive-list-date">十一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/10/"><span class="card-archive-list-date">十月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">15</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">九月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/08/"><span class="card-archive-list-date">八月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/07/"><span class="card-archive-list-date">七月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/06/"><span class="card-archive-list-date">六月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>篇</span></div></a></li></ul></div><hr></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/MySQL/" itemprop="url">MySQL</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/MySQL/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>MySQL</span></a></span></div></div><h1 class="post-title" itemprop="name headline">07 表的增删改查上</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-11-02T16:00:00.000Z" title="发表于 2025-11-03 00:00:00">2025-11-03</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-12-16T02:10:00.000Z" title="更新于 2025-12-16 10:10:00">2025-12-16</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">4.9k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>20分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" data-flag-title="07 表的增删改查上"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator"> </span><span class="post-meta-position" title="作者IP属地为西安"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>西安</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://image-kcm.pages.dev/v2/12THR4h.png?_r_=2094b2e0-3c58-71ab-7188-d1e51f8add0b"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><div class="post-ai-description"><div class="ai-title"><i class="anzhiyufont anzhiyu-icon-bilibili"></i><div class="ai-title-text">AI-摘要</div><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i><i class="anzhiyufont anzhiyu-icon-circle-dot" title="朗读摘要"></i><div id="ai-tag">小米里的大麦 GPT</div></div><div class="ai-explanation">AI初始化中...</div><div class="ai-btn-box"><div class="ai-btn-item">介绍自己 🙈</div><div class="ai-btn-item">生成本文简介 👋</div><div class="ai-btn-item">推荐相关文章 📖</div><div class="ai-btn-item">前往主页 🏠</div><div class="ai-btn-item" id="go-tianli-blog">前往爱发电购买</div></div><script data-pjax src="/js/anzhiyu/ai_abstract.js"></script></div><article class="post-content" id="article-container" itemscope itemtype="https://www.minbit.top/posts/60665.html"><header><a class="post-meta-categories" href="/categories/MySQL/" itemprop="url">MySQL</a><a href="/tags/MySQL/" tabindex="-1" itemprop="url">MySQL</a><h1 id="CrawlerTitle" itemprop="name headline">07 表的增删改查上</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">小米里的大麦</span><time itemprop="dateCreated datePublished" datetime="2025-11-02T16:00:00.000Z" title="发表于 2025-11-03 00:00:00">2025-11-03</time><time itemprop="dateCreated datePublished" datetime="2025-12-16T02:10:00.000Z" title="更新于 2025-12-16 10:10:00">2025-12-16</time></header><h1 id="表的增删改查上"><a href="#表的增删改查上" class="headerlink" title="表的增删改查上"></a>表的增删改查上</h1><h2 id="1-Create（创建）"><a href="#1-Create（创建）" class="headerlink" title="1. Create（创建）"></a>1. Create（创建）</h2><h3 id="1-单行插入-全列插入（最基础）"><a href="#1-单行插入-全列插入（最基础）" class="headerlink" title="1. 单行插入 + 全列插入（最基础）"></a>1. 单行插入 + 全列插入（最基础）</h3><h4 id="1-语法格式"><a href="#1-语法格式" class="headerlink" title="1. 语法格式"></a>1. 语法格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT INTO</span> 表名 <span class="keyword">VALUES</span> (值<span class="number">1</span>, 值<span class="number">2</span>, ..., 值N);</span><br></pre></td></tr></table></figure><blockquote><p>省略列名时，<strong>必须按表定义的列顺序且写齐所有列</strong>（可用 <code>NULL</code> 或 <code>DEFAULT</code> 占位）。</p></blockquote><h4 id="2-示例"><a href="#2-示例" class="headerlink" title="2. 示例"></a>2. 示例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> t (</span><br><span class="line">  id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT,</span><br><span class="line">  name <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">  age <span class="type">INT</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># 全列插入（省略列名），id 用 <span class="keyword">NULL</span> 占位触发自增</span><br><span class="line"><span class="keyword">INSERT INTO</span> t <span class="keyword">VALUES</span> (<span class="keyword">NULL</span>, <span class="string">&#x27;张三&#x27;</span>, <span class="number">20</span>);</span><br></pre></td></tr></table></figure><p><strong>注意：</strong></p><ul><li>简短但 <strong>易错</strong>（列顺序变动或新增列会导致问题）。</li><li>若主键自增，用 <code>NULL</code> 或 <code>DEFAULT</code> 占位。</li><li>若某列 <code>NOT NULL</code> 且无 <code>DEFAULT</code>，必须提供值。</li></ul><h3 id="2-多行插入-指定列插入（高效写法）"><a href="#2-多行插入-指定列插入（高效写法）" class="headerlink" title="2. 多行插入 + 指定列插入（高效写法）"></a>2. 多行插入 + 指定列插入（高效写法）</h3><h4 id="1-语法格式（指定列，支持多行）"><a href="#1-语法格式（指定列，支持多行）" class="headerlink" title="1. 语法格式（指定列，支持多行）"></a>1. 语法格式（指定列，支持多行）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT INTO</span> 表名 (列<span class="number">1</span>, 列<span class="number">2</span>, ...) <span class="keyword">VALUES</span></span><br><span class="line">  (值<span class="number">11</span>, 值<span class="number">12</span>, ...),</span><br><span class="line">  (值<span class="number">21</span>, 值<span class="number">22</span>, ...),</span><br><span class="line">  ...;</span><br></pre></td></tr></table></figure><h4 id="2-示例-1"><a href="#2-示例-1" class="headerlink" title="2. 示例"></a>2. 示例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 只插入 name 和 age，id 用自增</span><br><span class="line"><span class="keyword">INSERT INTO</span> t (name, age) <span class="keyword">VALUES</span></span><br><span class="line">  (<span class="string">&#x27;李四&#x27;</span>, <span class="number">22</span>),</span><br><span class="line">  (<span class="string">&#x27;王五&#x27;</span>, <span class="number">19</span>),</span><br><span class="line">  (<span class="string">&#x27;赵六&#x27;</span>, <span class="number">21</span>);</span><br></pre></td></tr></table></figure><p><strong>注意：</strong></p><ul><li><strong>一次多行插入性能远优于循环单条插入</strong>。</li><li>可以省略不需要赋值的列（使用默认值或 NULL）。</li><li>若有唯一&#x2F;主键冲突，会整个语句失败（除非用 IGNORE 或 ON DUPLICATE）。</li></ul><h3 id="3-插入否则更新：INSERT-ON-DUPLICATE-KEY-UPDATE"><a href="#3-插入否则更新：INSERT-ON-DUPLICATE-KEY-UPDATE" class="headerlink" title="3. 插入否则更新：INSERT ... ON DUPLICATE KEY UPDATE"></a>3. 插入否则更新：<code>INSERT ... ON DUPLICATE KEY UPDATE</code></h3><h4 id="1-语法格式-1"><a href="#1-语法格式-1" class="headerlink" title="1. 语法格式"></a>1. 语法格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT INTO</span> 表名 (列<span class="number">1</span>, 列<span class="number">2</span>, ...)</span><br><span class="line"><span class="keyword">VALUES</span> (值<span class="number">1</span>, 值<span class="number">2</span>, ...)</span><br><span class="line"><span class="keyword">ON</span> DUPLICATE KEY <span class="keyword">UPDATE</span></span><br><span class="line">  列A <span class="operator">=</span> 新值A, 列B <span class="operator">=</span> 新值B, ...;</span><br></pre></td></tr></table></figure><p>在插入行与表中已有行在 <strong>主键或唯一索引</strong> 冲突时，MySQL 执行 <code>UPDATE</code> 子句而不是报错或忽略。</p><h4 id="2-示例（常见用法：计数、冲突合并）"><a href="#2-示例（常见用法：计数、冲突合并）" class="headerlink" title="2. 示例（常见用法：计数、冲突合并）"></a>2. 示例（常见用法：计数、冲突合并）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> item (</span><br><span class="line">  id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span>,</span><br><span class="line">  name <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">  cnt <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY (name)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># 尝试插入新名字；若 name 冲突就把 cnt 累加</span><br><span class="line"><span class="keyword">INSERT INTO</span> item (id, name, cnt)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;apple&#x27;</span>, <span class="number">1</span>)</span><br><span class="line"><span class="keyword">ON</span> DUPLICATE KEY <span class="keyword">UPDATE</span> cnt <span class="operator">=</span> cnt <span class="operator">+</span> <span class="keyword">VALUES</span>(cnt);</span><br></pre></td></tr></table></figure><p><code>VALUES(cnt)</code> 在 MySQL 8.0.20 以后用 <code>VALUES()</code> 被废弃，可用 <code>VALUES()</code> 的替代 <code>NEW</code>，实际推荐写法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">... <span class="keyword">ON</span> DUPLICATE KEY <span class="keyword">UPDATE</span> cnt <span class="operator">=</span> cnt <span class="operator">+</span> <span class="keyword">VALUES</span>(cnt);</span><br></pre></td></tr></table></figure><p>（在很多 MySQL 版本仍通用；新版本可用 <code>INSERT ... AS new</code> 结构或 <code>VALUES()</code> 替代注意兼容）</p><h4 id="3-常见变体：直接覆盖部分字段"><a href="#3-常见变体：直接覆盖部分字段" class="headerlink" title="3. 常见变体：直接覆盖部分字段"></a>3. 常见变体：直接覆盖部分字段</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT INTO</span> users (id, name, email)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;Tom&#x27;</span>, <span class="string">&#x27;t@x&#x27;</span>)</span><br><span class="line"><span class="keyword">ON</span> DUPLICATE KEY <span class="keyword">UPDATE</span></span><br><span class="line">  name <span class="operator">=</span> <span class="keyword">VALUES</span>(name), email <span class="operator">=</span> <span class="keyword">VALUES</span>(email);</span><br></pre></td></tr></table></figure><p><strong>注意：</strong></p><ul><li>触发器 <code>BEFORE INSERT</code> &#x2F; <code>AFTER INSERT</code> 等仍会按插入流程触发，冲突时也会触发 <code>UPDATE</code> 相关触发器。</li><li><code>ON DUPLICATE KEY UPDATE</code> 会把冲突情况视为更新，可能影响 <code>AUTO_INCREMENT</code> 值（插入失败仍可能消耗自增）。</li><li>性能：对高并发唯一冲突场景，可能产生较多锁竞争。</li><li><code>VALUES(col)</code> 返回插入语句中指定的值（注意版本兼容）。</li></ul><h3 id="4-替换数据：REPLACE-INTO"><a href="#4-替换数据：REPLACE-INTO" class="headerlink" title="4. 替换数据：REPLACE INTO"></a>4. 替换数据：<code>REPLACE INTO</code></h3><h4 id="1-语法格式-2"><a href="#1-语法格式-2" class="headerlink" title="1. 语法格式"></a>1. 语法格式</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">REPLACE <span class="keyword">INTO</span> 表名 (列<span class="number">1</span>, 列<span class="number">2</span>, ...)</span><br><span class="line"><span class="keyword">VALUES</span> (...);</span><br></pre></td></tr></table></figure><p><code>REPLACE</code> 语句会首先删除表中与新数据冲突的旧记录（通常是主键或唯一索引冲突），然后插入新数据（相当于 DELETE + INSERT）。也就是说，如果插入的数据已存在，MySQL 会先删除原来的数据，再插入新的数据。</p><h4 id="2-示例-2"><a href="#2-示例-2" class="headerlink" title="2. 示例"></a>2. 示例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 若 id<span class="operator">=</span><span class="number">1</span> 存在，则先删除 id<span class="operator">=</span><span class="number">1</span> 的行，再插入新行</span><br><span class="line">REPLACE <span class="keyword">INTO</span> t (id, name, age) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;Tom&#x27;</span>, <span class="number">30</span>);</span><br></pre></td></tr></table></figure><p><strong>注意：</strong></p><ul><li><code>REPLACE</code> 是 <code>DELETE</code> + <code>INSERT</code> 的组合：会导致被删除行的所有外键级联、触发器、以及自增等副作用（比如被删除行上的外键约束、触发器会触发）。</li><li>被删除的行会被真正删除，删除可能触发 <code>ON DELETE</code> 级联或触发器。</li><li><code>REPLACE</code> 会导致新的行有新的自增 id（如果使用自增列且没有给出 id，则新插入会产生新 id）。</li><li><code>REPLACE</code> 不如 <code>INSERT ... ON DUPLICATE KEY UPDATE</code> 温和，慎用在有外键或审计需求的表上。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line"># 创建t1表：id主键自增，age默认18</span><br><span class="line">mysql&gt; create table t1(</span><br><span class="line">    -&gt; id int primary key auto_increment comment &#x27;这是id，会自增长&#x27;,</span><br><span class="line">    -&gt; name varchar(20) comment &#x27;这是姓名&#x27;,</span><br><span class="line">    -&gt; age int default 18 comment &#x27;这是年龄，默认18&#x27;);</span><br><span class="line"></span><br><span class="line"># 错误：查看表无show 表名语法</span><br><span class="line">mysql&gt; show t1;</span><br><span class="line">ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#x27;t1&#x27; at line 1</span><br><span class="line"></span><br><span class="line"># 查看表结构：id非空自增，age默认18</span><br><span class="line">mysql&gt; desc t1;</span><br><span class="line">+-------+-------------+------+-----+---------+----------------+</span><br><span class="line">| Field | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+-------+-------------+------+-----+---------+----------------+</span><br><span class="line">| id    | int         | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| name  | varchar(20) | YES  |     | NULL    |                |</span><br><span class="line">| age   | int         | YES  |     | 18      |                |</span><br><span class="line">+-------+-------------+------+-----+---------+----------------+</span><br><span class="line"></span><br><span class="line"># 插入数据：id=1，name=张三，age=20</span><br><span class="line">mysql&gt; insert into t1 values(1,&#x27;张三&#x27;,20);</span><br><span class="line"></span><br><span class="line"># 错误：值数量与字段数不匹配</span><br><span class="line">mysql&gt; insert t1 values(null,&#x27;李四&#x27;);</span><br><span class="line">ERROR 1136 (21S01): Column count doesn&#x27;t match value count at row 1</span><br><span class="line"></span><br><span class="line"># 插入数据：id用null触发自增（→2），name=李四，age=20</span><br><span class="line">mysql&gt; insert t1 values(null,&#x27;李四&#x27;,20);</span><br><span class="line"></span><br><span class="line"># 插入数据：指定name和age，id自增→3</span><br><span class="line">mysql&gt; insert t1(name,age) values(&#x27;赵七&#x27;,25);</span><br><span class="line"></span><br><span class="line"># 批量插入错误：id=3已存在，主键重复</span><br><span class="line">mysql&gt; insert into t1(id,name) </span><br><span class="line">    -&gt; values(3,&#x27;王五&#x27;),</span><br><span class="line">    -&gt; (4,&#x27;小明&#x27;),</span><br><span class="line">    -&gt; (5,&#x27;小红&#x27;);</span><br><span class="line">ERROR 1062 (23000): Duplicate entry &#x27;3&#x27; for key &#x27;t1.PRIMARY&#x27;</span><br><span class="line"></span><br><span class="line"># 查看数据：现有3条记录</span><br><span class="line">mysql&gt; select *from t1;</span><br><span class="line">+----+--------+------+</span><br><span class="line">| id | name   | age  |</span><br><span class="line">+----+--------+------+</span><br><span class="line">|  1 | 张三   |   20 |</span><br><span class="line">|  2 | 李四   |   20 |</span><br><span class="line">|  3 | 赵七   |   25 |</span><br><span class="line">+----+--------+------+</span><br><span class="line"></span><br><span class="line"># 批量插入：id=5/7/8（无重复），age用默认18</span><br><span class="line">mysql&gt; insert into t1(id,name) values</span><br><span class="line">    -&gt; (5,&#x27;王五&#x27;),</span><br><span class="line">    -&gt; (7,&#x27;小明&#x27;),</span><br><span class="line">    -&gt; (8,&#x27;小红&#x27;);</span><br><span class="line">Query OK, 3 rows affected (0.01 sec)</span><br><span class="line">Records: 3  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line"># 查看数据：新增3条，age默认18</span><br><span class="line">mysql&gt; select *from t1;</span><br><span class="line">+----+--------+------+</span><br><span class="line">| id | name   | age  |</span><br><span class="line">+----+--------+------+</span><br><span class="line">|  1 | 张三   |   20 |</span><br><span class="line">|  2 | 李四   |   20 |</span><br><span class="line">|  3 | 赵七   |   25 |</span><br><span class="line">|  5 | 王五   |   18 |</span><br><span class="line">|  7 | 小明   |   18 |</span><br><span class="line">|  8 | 小红   |   18 |</span><br><span class="line">+----+--------+------+</span><br><span class="line"></span><br><span class="line"># 插入错误：id=3已存在，主键重复</span><br><span class="line">mysql&gt; insert into t1(id,name) values(3,&#x27;李四&#x27;);</span><br><span class="line">ERROR 1062 (23000): Duplicate entry &#x27;3&#x27; for key &#x27;t1.PRIMARY&#x27;</span><br><span class="line"></span><br><span class="line"># 错误：on duplicate key update后无更新内容，语法不完整</span><br><span class="line">mysql&gt; insert into t1(id,name) values(3,&#x27;李四&#x27;) on duplicate key update;</span><br><span class="line">ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#x27;&#x27; at line 1</span><br><span class="line"></span><br><span class="line"># 主键重复时更新：更新原有id=3的行，id改为4、name改为李四</span><br><span class="line">mysql&gt; insert into t1(id,name) values(3,&#x27;李四&#x27;) on duplicate key update id=4,name=&#x27;李四&#x27;;</span><br><span class="line"></span><br><span class="line"># 查看数据：原id=3的行被更新为id=4，id=3消失</span><br><span class="line">mysql&gt; select *from t1;</span><br><span class="line">+----+--------+------+</span><br><span class="line">| id | name   | age  |</span><br><span class="line">+----+--------+------+</span><br><span class="line">|  1 | 张三   |   20 |</span><br><span class="line">|  2 | 李四   |   20 |</span><br><span class="line">|  4 | 李四   |   25 |</span><br><span class="line">|  5 | 王五   |   18 |</span><br><span class="line">|  7 | 小明   |   18 |</span><br><span class="line">|  8 | 小红   |   18 |</span><br><span class="line">+----+--------+------+</span><br><span class="line"></span><br><span class="line"># 主键重复时更新：更新原有id=8的行，id改为99、name改为小红红</span><br><span class="line">mysql&gt; insert into t1(id,name) values(8,&#x27;小红&#x27;) on duplicate key update id=99,name=&#x27;小红红&#x27;;</span><br><span class="line"></span><br><span class="line"># 查看数据：原id=8的行被更新为id=99，id=8消失</span><br><span class="line">mysql&gt; select *from t1;</span><br><span class="line">+----+-----------+------+</span><br><span class="line">| id | name      | age  |</span><br><span class="line">+----+-----------+------+</span><br><span class="line">|  1 | 张三      |   20 |</span><br><span class="line">|  2 | 李四      |   20 |</span><br><span class="line">|  4 | 李四      |   25 |</span><br><span class="line">|  5 | 王五      |   18 |</span><br><span class="line">|  7 | 小明      |   18 |</span><br><span class="line">| 99 | 小红红    |   18 |</span><br><span class="line">+----+-----------+------+</span><br><span class="line"></span><br><span class="line"># 插入数据：仅age=100，id自增→100，name=null</span><br><span class="line">mysql&gt; insert into t1(age) values(100) on duplicate key update age=100;</span><br><span class="line"></span><br><span class="line"># 查看数据：新增id=100（name=null）</span><br><span class="line">mysql&gt; select *from t1;</span><br><span class="line">+-----+-----------+------+</span><br><span class="line">| id  | name      | age  |</span><br><span class="line">+-----+-----------+------+</span><br><span class="line">|   1 | 张三      |   20 |</span><br><span class="line">|   2 | 李四      |   20 |</span><br><span class="line">|   4 | 李四      |   25 |</span><br><span class="line">|   5 | 王五      |   18 |</span><br><span class="line">|   7 | 小明      |   18 |</span><br><span class="line">|  99 | 小红红    |   18 |</span><br><span class="line">| 100 | NULL      |  100 |</span><br><span class="line">+-----+-----------+------+</span><br><span class="line"></span><br><span class="line"># 插入数据：name=李四、age=100，id自增→101（无重复）</span><br><span class="line">mysql&gt; insert into t1(name,age) values(&#x27;李四&#x27;,100) on duplicate key update age=66;</span><br><span class="line"></span><br><span class="line"># 查看数据：新增id=101</span><br><span class="line">mysql&gt; select *from t1;</span><br><span class="line">+-----+-----------+------+</span><br><span class="line">| id  | name      | age  |</span><br><span class="line">+-----+-----------+------+</span><br><span class="line">|   1 | 张三      |   20 |</span><br><span class="line">|   2 | 李四      |   20 |</span><br><span class="line">|   4 | 李四      |   25 |</span><br><span class="line">|   5 | 王五      |   18 |</span><br><span class="line">|   7 | 小明      |   18 |</span><br><span class="line">|  99 | 小红红    |   18 |</span><br><span class="line">| 100 | NULL      |  100 |</span><br><span class="line">| 101 | 李四      |  100 |</span><br><span class="line">+-----+-----------+------+</span><br><span class="line"></span><br><span class="line"># 插入数据：name=李四、age=100，id自增→102（无重复）</span><br><span class="line">mysql&gt; insert into t1(name,age) values(&#x27;李四&#x27;,100) on duplicate key update age=66;</span><br><span class="line"></span><br><span class="line"># 查看数据：新增id=102</span><br><span class="line">mysql&gt; select *from t1;</span><br><span class="line">+-----+-----------+------+</span><br><span class="line">| id  | name      | age  |</span><br><span class="line">+-----+-----------+------+</span><br><span class="line">|   1 | 张三      |   20 |</span><br><span class="line">|   2 | 李四      |   20 |</span><br><span class="line">|   4 | 李四      |   25 |</span><br><span class="line">|   5 | 王五      |   18 |</span><br><span class="line">|   7 | 小明      |   18 |</span><br><span class="line">|  99 | 小红红    |   18 |</span><br><span class="line">| 100 | NULL      |  100 |</span><br><span class="line">| 101 | 李四      |  100 |</span><br><span class="line">| 102 | 李四      |  100 |</span><br><span class="line">+-----+-----------+------+</span><br></pre></td></tr></table></figure><hr><h2 id="2-Retrieve（查）"><a href="#2-Retrieve（查）" class="headerlink" title="2. Retrieve（查）"></a>2. Retrieve（查）</h2><blockquote><p><strong>WHERE + DISTINCT &#x2F; ORDER &#x2F; LIMIT 的顺序（记这个）</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> 列</span><br><span class="line"><span class="operator">&gt;</span><span class="keyword">FROM</span> 表</span><br><span class="line"><span class="operator">&gt;</span><span class="keyword">WHERE</span> 条件</span><br><span class="line"><span class="operator">&gt;</span><span class="keyword">ORDER</span> <span class="keyword">BY</span> 列</span><br><span class="line"><span class="operator">&gt;</span>LIMIT 跳过数，每页条数;</span><br></pre></td></tr></table></figure><p><strong>WHERE 永远在 SELECT 后、ORDER BY 前。</strong></p></blockquote><h3 id="1-select-列"><a href="#1-select-列" class="headerlink" title="1. select 列"></a>1. select 列</h3><h4 id="1-全列查询（查询所有列）"><a href="#1-全列查询（查询所有列）" class="headerlink" title="1. 全列查询（查询所有列）"></a>1. 全列查询（查询所有列）</h4><p>全列查询表示从表中查询所有的列。只需要使用 <code>SELECT *</code> 即可。</p><h5 id="1-语法"><a href="#1-语法" class="headerlink" title="1. 语法"></a>1. 语法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM 表名;</span><br><span class="line">select * from users;</span><br></pre></td></tr></table></figure><p><strong>注意：</strong> 使用 <code>*</code> 查询会返回表中所有列，如果表的列很多或者数据量大，会影响性能，通常建议只查询需要的列。</p><h5 id="2-示例-3"><a href="#2-示例-3" class="headerlink" title="2. 示例"></a>2. 示例</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from t1;</span><br><span class="line">+-----+-----------+------+</span><br><span class="line">| id  | name      | age  |</span><br><span class="line">+-----+-----------+------+</span><br><span class="line">|   1 | 张三      |   20 |</span><br><span class="line">|   2 | 李四      |   20 |</span><br><span class="line">|   4 | 李四      |   25 |</span><br><span class="line">|   5 | 王五      |   18 |</span><br><span class="line">|   7 | 小明      |   18 |</span><br><span class="line">|  99 | 小红红    |   18 |</span><br><span class="line">| 100 | NULL      |  100 |</span><br><span class="line">| 101 | 李四      |  100 |</span><br><span class="line">| 102 | 李四      |  100 |</span><br><span class="line">+-----+-----------+------+</span><br></pre></td></tr></table></figure><h4 id="2-指定列查询"><a href="#2-指定列查询" class="headerlink" title="2. 指定列查询"></a>2. 指定列查询</h4><p>指定列查询用于查询表中的特定列，而不是所有列，需要通过列名来选择需要的列。</p><h5 id="1-语法-1"><a href="#1-语法-1" class="headerlink" title="1. 语法"></a>1. 语法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 列名1, 列名2, ... FROM 表名;</span><br></pre></td></tr></table></figure><h5 id="2-示例-4"><a href="#2-示例-4" class="headerlink" title="2. 示例"></a>2. 示例</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select id from t1;</span><br><span class="line">+-----+</span><br><span class="line">| id  |</span><br><span class="line">+-----+</span><br><span class="line">|   1 |</span><br><span class="line">|   2 |</span><br><span class="line">|   4 |</span><br><span class="line">|   5 |</span><br><span class="line">|   7 |</span><br><span class="line">|  99 |</span><br><span class="line">| 100 |</span><br><span class="line">| 101 |</span><br><span class="line">| 102 |</span><br><span class="line">+-----+</span><br><span class="line"></span><br><span class="line">mysql&gt; select name, age from t1;</span><br><span class="line">+-----------+------+</span><br><span class="line">| name      | age  |</span><br><span class="line">+-----------+------+</span><br><span class="line">| 张三      |   20 |</span><br><span class="line">| 李四      |   20 |</span><br><span class="line">| 李四      |   25 |</span><br><span class="line">| 王五      |   18 |</span><br><span class="line">| 小明      |   18 |</span><br><span class="line">| 小红红    |   18 |</span><br><span class="line">| NULL      |  100 |</span><br><span class="line">| 李四      |  100 |</span><br><span class="line">| 李四      |  100 |</span><br><span class="line">+-----------+------+</span><br></pre></td></tr></table></figure><h4 id="3-查询字段为表达式"><a href="#3-查询字段为表达式" class="headerlink" title="3. 查询字段为表达式"></a>3. 查询字段为表达式</h4><p><code>SELECT</code> 语句中可以使用表达式（例如算术运算、字符串拼接、函数等）来处理数据，并将结果作为查询结果的一部分。</p><h5 id="1-语法-2"><a href="#1-语法-2" class="headerlink" title="1. 语法"></a>1. 语法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 表达式 FROM 表名;</span><br></pre></td></tr></table></figure><h5 id="2-示例-5"><a href="#2-示例-5" class="headerlink" title="2. 示例"></a>2. 示例</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"># 查询t1表所有数据</span><br><span class="line">mysql&gt; select * from t1;</span><br><span class="line">+-----+-----------+------+</span><br><span class="line">| id  | name      | age  |</span><br><span class="line">+-----+-----------+------+</span><br><span class="line">|   1 | 张三      |   20 |</span><br><span class="line">|   2 | 李四      |   20 |</span><br><span class="line">|   4 | 李四      |   25 |</span><br><span class="line">|   5 | 王五      |   18 |</span><br><span class="line">|   7 | 小明      |   18 |</span><br><span class="line">|  99 | 小红红    |   18 |</span><br><span class="line">| 100 | NULL      |  100 |</span><br><span class="line">| 101 | 李四      |  100 |</span><br><span class="line">| 102 | 李四      |  100 |</span><br><span class="line">+-----+-----------+------+</span><br><span class="line"></span><br><span class="line"># 每行判断id&lt;50、age&gt;=20，结果以1/0展示，返回所有行</span><br><span class="line">mysql&gt; select id&lt;50,name, age&gt;=20 from t1;</span><br><span class="line">+-------+-----------+---------+</span><br><span class="line">| id&lt;50 | name      | age&gt;=20 |</span><br><span class="line">+-------+-----------+---------+</span><br><span class="line">|     1 | 张三      |       1 |</span><br><span class="line">|     1 | 李四      |       1 |</span><br><span class="line">|     1 | 李四      |       1 |</span><br><span class="line">|     1 | 王五      |       0 |</span><br><span class="line">|     1 | 小明      |       0 |</span><br><span class="line">|     0 | 小红红    |       0 |</span><br><span class="line">|     0 | NULL      |       1 |</span><br><span class="line">|     0 | 李四      |       1 |</span><br><span class="line">|     0 | 李四      |       1 |</span><br><span class="line">+-------+-----------+---------+</span><br><span class="line"></span><br><span class="line"># 筛选age&gt;20且&lt;=50的行，只展示age列</span><br><span class="line">mysql&gt; select age from t1 where age&gt;20 and age &lt;=50;</span><br><span class="line">+------+</span><br><span class="line">| age  |</span><br><span class="line">+------+</span><br><span class="line">|   25 |</span><br><span class="line">+------+</span><br><span class="line"></span><br><span class="line"># 筛选age&gt;20且&lt;=500的行，展示id、name、age列</span><br><span class="line">mysql&gt; select id,name,age from t1 where age&gt;20 and age &lt;=500;</span><br><span class="line">+----+--------+------+</span><br><span class="line">| id | name   | age  |</span><br><span class="line">+----+--------+------+</span><br><span class="line">|  4 | 李四   |   25 |</span><br><span class="line">+----+--------+------+</span><br><span class="line"></span><br><span class="line"># 展示id、name，age乘2并命名为double_age，返回所有行</span><br><span class="line">mysql&gt; select id,name, age*2 as double_age from t1;</span><br><span class="line">+-----+-----------+------------+</span><br><span class="line">| id  | name      | double_age |</span><br><span class="line">+-----+-----------+------------+</span><br><span class="line">|   1 | 张三      |         40 |</span><br><span class="line">|   2 | 李四      |         40 |</span><br><span class="line">|   4 | 李四      |         50 |</span><br><span class="line">|   5 | 王五      |         36 |</span><br><span class="line">|   7 | 小明      |         36 |</span><br><span class="line">|  99 | 小红红    |         36 |</span><br><span class="line">| 100 | NULL      |        200 |</span><br><span class="line">| 101 | 李四      |        200 |</span><br><span class="line">| 102 | 李四      |        200 |</span><br><span class="line">+-----+-----------+------------+</span><br></pre></td></tr></table></figure><h4 id="4-为查询结果指定别名"><a href="#4-为查询结果指定别名" class="headerlink" title="4. 为查询结果指定别名"></a>4. 为查询结果指定别名</h4><p>通过 <code>AS</code> 关键字，可以给查询结果的字段指定别名，使结果更具可读性，通常用于表达式或列名较长时。</p><h5 id="1-语法-3"><a href="#1-语法-3" class="headerlink" title="1. 语法"></a>1. 语法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 列名 AS 别名 FROM 表名;</span><br></pre></td></tr></table></figure><h5 id="2-示例-6"><a href="#2-示例-6" class="headerlink" title="2. 示例"></a>2. 示例</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select id as my_id,name,age as my_age from t1;</span><br><span class="line">+-------+-----------+--------+</span><br><span class="line">| my_id | name      | my_age |</span><br><span class="line">+-------+-----------+--------+</span><br><span class="line">|     1 | 张三      |     20 |</span><br><span class="line">|     2 | 李四      |     20 |</span><br><span class="line">|     4 | 李四      |     25 |</span><br><span class="line">|     5 | 王五      |     18 |</span><br><span class="line">|     7 | 小明      |     18 |</span><br><span class="line">|    99 | 小红红    |     18 |</span><br><span class="line">|   100 | NULL      |    100 |</span><br><span class="line">|   101 | 李四      |    100 |</span><br><span class="line">|   102 | 李四      |    100 |</span><br><span class="line">+-------+-----------+--------+</span><br></pre></td></tr></table></figure><h4 id="5-结果去重"><a href="#5-结果去重" class="headerlink" title="5. 结果去重"></a>5. 结果去重</h4><p>当我们只关心某些列的不同值时，可以用 <code>DISTINCT</code> 返回去除重复值的查询结果。</p><h5 id="1-语法-4"><a href="#1-语法-4" class="headerlink" title="1. 语法"></a>1. 语法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DISTINCT 列名 FROM 表名;</span><br></pre></td></tr></table></figure><p><strong>注意：<code>distinct</code> 是对 “所选字段的组合” 去重，不是单字段去重！<code>DISTINCT</code> 必须紧跟 <code>SELECT</code> 关键字，且只能写一次，不能插在字段列表中间&#x2F;后面。</strong></p><h5 id="2-示例-7"><a href="#2-示例-7" class="headerlink" title="2. 示例"></a>2. 示例</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"># 只对name字段去重，不管age/id</span><br><span class="line">mysql&gt; select distinct name from t1;</span><br><span class="line">+-----------+</span><br><span class="line">| name      |</span><br><span class="line">+-----------+</span><br><span class="line">| 张三      |</span><br><span class="line">| 李四      |</span><br><span class="line">| 王五      |</span><br><span class="line">| 小明      |</span><br><span class="line">| 小红红    |</span><br><span class="line">| NULL      |</span><br><span class="line">+-----------+</span><br><span class="line"></span><br><span class="line"># distinct作用于(name,age)组合，去重重复的姓名+年龄组合</span><br><span class="line">mysql&gt; select distinct name,age from t1;</span><br><span class="line">+-----------+------+</span><br><span class="line">| name      | age  |</span><br><span class="line">+-----------+------+</span><br><span class="line">| 张三      |   20 |</span><br><span class="line">| 李四      |   20 |</span><br><span class="line">| 李四      |   25 |</span><br><span class="line">| 王五      |   18 |</span><br><span class="line">| 小明      |   18 |</span><br><span class="line">| 小红红    |   18 |</span><br><span class="line">| NULL      |  100 |</span><br><span class="line">| 李四      |  100 |</span><br><span class="line">+-----------+------+</span><br></pre></td></tr></table></figure><h3 id="2-where-条件"><a href="#2-where-条件" class="headerlink" title="2. where 条件"></a>2. where 条件</h3><p><strong>WHERE 用来“筛选行”</strong>，不满足条件的记录，<strong>直接不返回</strong>。</p><h4 id="1-语法-5"><a href="#1-语法-5" class="headerlink" title="1. 语法"></a>1. 语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT 列名</span><br><span class="line">FROM 表名</span><br><span class="line">WHERE 条件;</span><br></pre></td></tr></table></figure><p>WHERE 常用比较与条件运算符速查表：</p><table><thead><tr><th align="center">分类</th><th>运算符 &#x2F; 语法</th><th>含义</th><th>典型示例</th><th>注意事项（重点）</th></tr></thead><tbody><tr><td align="center">比较</td><td><code>&gt;</code> <code>&gt;=</code> <code>&lt;</code> <code>&lt;=</code></td><td>大于 &#x2F; 大于等于 &#x2F; 小于 &#x2F; 小于等于</td><td><code>age &gt;= 18</code></td><td>常用，配合索引效果好</td></tr><tr><td align="center">比较</td><td><code>=</code></td><td>等于</td><td><code>id = 1</code></td><td><strong>NULL 不安全</strong>，<code>NULL = NULL</code> 结果是 NULL</td></tr><tr><td align="center">比较</td><td><code>&lt;=&gt;</code></td><td>等于（NULL 安全）</td><td><code>col &lt;=&gt; NULL</code></td><td>一般不用，判断 NULL 优先用 <code>IS NULL</code></td></tr><tr><td align="center">比较</td><td><code>!=</code> <code>&lt;&gt;</code></td><td>不等于</td><td><code>status != 0</code></td><td>两者等价，常用 <code>!=</code></td></tr><tr><td align="center">范围</td><td><code>BETWEEN a AND b</code></td><td>在区间内（含边界）</td><td><code>age BETWEEN 18 AND 30</code></td><td>等价于 <code>&gt;= a AND &lt;= b</code></td></tr><tr><td align="center">集合</td><td><code>IN (v1, v2, ...)</code></td><td>在给定集合中</td><td><code>id IN (1,3,5)</code></td><td>值不要太多</td></tr><tr><td align="center">集合</td><td><code>NOT IN (v1, v2, ...)</code></td><td>不在给定集合中</td><td><code>id NOT IN (1,3)</code></td><td><strong>集合中有 NULL 会出大坑</strong></td></tr><tr><td align="center">空值</td><td><code>IS NULL</code></td><td>是 NULL</td><td><code>email IS NULL</code></td><td>判断 NULL <strong>只能用它</strong></td></tr><tr><td align="center">空值</td><td><code>IS NOT NULL</code></td><td>不是 NULL</td><td><code>email IS NOT NULL</code></td><td>可正常用索引</td></tr><tr><td align="center">模糊</td><td><code>LIKE &#39;xxx%&#39;</code></td><td>以 xxx 开头</td><td><code>name LIKE &#39;tom%&#39;</code></td><td><strong>能用索引，推荐</strong></td></tr><tr><td align="center">模糊</td><td><code>LIKE &#39;%xxx&#39;</code></td><td>以 xxx 结尾</td><td><code>name LIKE &#39;%tom&#39;</code></td><td><strong>不能用索引，慢</strong></td></tr><tr><td align="center">模糊</td><td><code>LIKE &#39;%xxx%&#39;</code></td><td>包含 xxx</td><td><code>name LIKE &#39;%tom%&#39;</code></td><td>大表慎用</td></tr><tr><td align="center">模糊</td><td><code>NOT LIKE</code></td><td>不匹配</td><td><code>name NOT LIKE &#39;test%&#39;</code></td><td>常配合 AND</td></tr><tr><td align="center">逻辑</td><td><code>AND</code></td><td>同时满足</td><td><code>age&gt;=18 AND age&lt;=30</code></td><td>xxxxxxxxxx6 1SELECT class_id, gender,2  COUNT(<em>) AS student_num3FROM student4GROUP BY class_id, gender  # 步骤1：按“班级+性别”分组统计5HAVING COUNT(</em>) &gt;&#x3D; 2       # 步骤2：过滤出人数≥2的分组6ORDER BY student_num DESC, class_id ASC;  # 步骤3：对过滤后的结果排序mysql</td></tr><tr><td align="center">逻辑</td><td><code>OR</code></td><td>满足一个即可</td><td><code>city=&#39;bj&#39; OR city=&#39;sh&#39;</code></td><td>一定配合括号</td></tr><tr><td align="center">逻辑</td><td><code>NOT</code></td><td>条件取反</td><td><code>NOT status=1</code></td><td>常和 IN &#x2F; LIKE 用</td></tr></tbody></table><p>LIKE 通配符说明：</p><table><thead><tr><th>符号</th><th>含义</th></tr></thead><tbody><tr><td><code>%</code></td><td>任意多个字符（包括 0 个）</td></tr><tr><td><code>_</code></td><td>任意 1 个字符（<code>name LIKE &#39;a_%&#39;</code> 表示以 a 开头，至少 2 个字符）</td></tr></tbody></table><blockquote><p><strong>实用规则：</strong></p><ul><li><strong>判断 NULL 永远用 <code>IS NULL / IS NOT NULL</code></strong></li><li><strong>AND &#x2F; OR 混用、条件多时，一定加括号保证逻辑清晰</strong></li><li><strong>优先用等值查询（&#x3D;），能用 <code>=</code> 就别用 <code>LIKE</code></strong></li><li><strong>WHERE 里的列尽量别参与计算</strong></li><li><strong>写 UPDATE &#x2F; DELETE 前先写 SELECT 验证</strong></li></ul></blockquote><h4 id="2-示例-8"><a href="#2-示例-8" class="headerlink" title="2. 示例"></a>2. 示例</h4><h5 id="1-等值查询（常用）"><a href="#1-等值查询（常用）" class="headerlink" title="1. 等值查询（常用）"></a>1. 等值查询（常用）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure><ul><li>查 id 等于 1 的那一行</li><li><strong>主键 &#x2F; 唯一键查询最常见</strong></li><li><strong>注意：字符串要加单引号</strong></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;tom&#x27;</span>;</span><br></pre></td></tr></table></figure><h5 id="2-不等于-大小比较"><a href="#2-不等于-大小比较" class="headerlink" title="2. 不等于 &#x2F; 大小比较"></a>2. 不等于 &#x2F; 大小比较</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> age <span class="operator">&gt;</span> <span class="number">18</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> age <span class="operator">&gt;=</span> <span class="number">18</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> age <span class="operator">&lt;</span> <span class="number">60</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> age <span class="operator">!=</span> <span class="number">30</span>;</span><br></pre></td></tr></table></figure><h5 id="3-AND-OR-组合条件（常用）"><a href="#3-AND-OR-组合条件（常用）" class="headerlink" title="3. AND &#x2F; OR 组合条件（常用）"></a>3. AND &#x2F; OR 组合条件（常用）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users</span><br><span class="line"><span class="keyword">WHERE</span> age <span class="operator">&gt;=</span> <span class="number">18</span> <span class="keyword">AND</span> age <span class="operator">&lt;=</span> <span class="number">30</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users</span><br><span class="line"><span class="keyword">WHERE</span> city <span class="operator">=</span> <span class="string">&#x27;beijing&#x27;</span> <span class="keyword">OR</span> city <span class="operator">=</span> <span class="string">&#x27;shanghai&#x27;</span>;</span><br></pre></td></tr></table></figure><p><strong>注意：优先级坑（重点）</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WHERE</span> a <span class="operator">=</span> <span class="number">1</span> <span class="keyword">OR</span> b <span class="operator">=</span> <span class="number">2</span> <span class="keyword">AND</span> c <span class="operator">=</span> <span class="number">3</span></span><br><span class="line"># 等价于：</span><br><span class="line"><span class="keyword">WHERE</span> a <span class="operator">=</span> <span class="number">1</span> <span class="keyword">OR</span> (b <span class="operator">=</span> <span class="number">2</span> <span class="keyword">AND</span> c <span class="operator">=</span> <span class="number">3</span>)</span><br><span class="line"># 实际开发一定加括号</span><br><span class="line"><span class="keyword">WHERE</span> (a <span class="operator">=</span> <span class="number">1</span> <span class="keyword">OR</span> b <span class="operator">=</span> <span class="number">2</span>) <span class="keyword">AND</span> c <span class="operator">=</span> <span class="number">3</span>;</span><br></pre></td></tr></table></figure><h5 id="4-IN（多个值之一）"><a href="#4-IN（多个值之一）" class="headerlink" title="4. IN（多个值之一）"></a>4. IN（多个值之一）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> id <span class="keyword">IN</span> (<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>);</span><br><span class="line"># 等价于：</span><br><span class="line"><span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span> <span class="keyword">OR</span> id <span class="operator">=</span> <span class="number">3</span> <span class="keyword">OR</span> id <span class="operator">=</span> <span class="number">5</span>;</span><br></pre></td></tr></table></figure><p><strong>注意：IN 里值不要太多（几百上千会慢）！</strong></p><h5 id="5-BETWEEN（范围查询）"><a href="#5-BETWEEN（范围查询）" class="headerlink" title="5. BETWEEN（范围查询）"></a>5. BETWEEN（范围查询）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> age <span class="keyword">BETWEEN</span> <span class="number">18</span> <span class="keyword">AND</span> <span class="number">30</span>;</span><br><span class="line"># 等价于：</span><br><span class="line"><span class="keyword">WHERE</span> age <span class="operator">&gt;=</span> <span class="number">18</span> <span class="keyword">AND</span> age <span class="operator">&lt;=</span> <span class="number">30</span>;</span><br></pre></td></tr></table></figure><h5 id="6-LIKE（模糊查询）"><a href="#6-LIKE（模糊查询）" class="headerlink" title="6. LIKE（模糊查询）"></a>6. LIKE（模糊查询）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;tom%&#x27;</span>;</span><br></pre></td></tr></table></figure><p>常见写法：</p><table><thead><tr><th>写法</th><th>含义</th></tr></thead><tbody><tr><td><code>&#39;tom%&#39;</code></td><td>以 tom 开头</td></tr><tr><td><code>&#39;%tom&#39;</code></td><td>以 tom 结尾</td></tr><tr><td><code>&#39;%tom%&#39;</code></td><td>包含 tom</td></tr></tbody></table><p>重要性能点：<strong><code>%xxx</code> 开头基本用不到索引</strong>、大表慎用模糊查询。</p><h5 id="7-IS-NULL-IS-NOT-NULL"><a href="#7-IS-NULL-IS-NOT-NULL" class="headerlink" title="7. IS NULL &#x2F; IS NOT NULL"></a>7. IS NULL &#x2F; IS NOT NULL</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> email <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> email <span class="keyword">IS</span> <span class="keyword">NOT NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">WHERE</span> email <span class="operator">=</span> <span class="keyword">NULL</span>;	# 错误写法！！！</span><br></pre></td></tr></table></figure><h5 id="8-WHERE-中用表达式（能用但要小心）"><a href="#8-WHERE-中用表达式（能用但要小心）" class="headerlink" title="8. WHERE 中用表达式（能用但要小心）"></a>8. WHERE 中用表达式（能用但要小心）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users</span><br><span class="line"><span class="keyword">WHERE</span> age <span class="operator">+</span> <span class="number">1</span> <span class="operator">=</span> <span class="number">19</span>;</span><br><span class="line"># 注意：列参与计算，索引基本失效，实际应写成：</span><br><span class="line"><span class="keyword">WHERE</span> age <span class="operator">=</span> <span class="number">18</span>;</span><br></pre></td></tr></table></figure><h3 id="3-结果排序"><a href="#3-结果排序" class="headerlink" title="3. 结果排序"></a>3. 结果排序</h3><p>结果排序用 <code>ORDER BY</code>，默认升序；会影响性能，尤其在大表上。</p><h4 id="1-语法-6"><a href="#1-语法-6" class="headerlink" title="1. 语法"></a>1. 语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT 列</span><br><span class="line">FROM 表</span><br><span class="line">WHERE 条件</span><br><span class="line">ORDER BY 列 [ASC|DESC];</span><br></pre></td></tr></table></figure><ul><li><code>ASC</code>：升序（默认，可不写）。</li><li><code>DESC</code>：降序。</li></ul><p><strong>注意：升序（ASC）时 NULL 在最前，降序（DESC）时 NULL 在最后，因为 MySQL 把 NULL 当成“最小的值”来排序。NULL 代表“没有值”，不是具体数据，所以排序时统一放在最小端，ASC 就排前面，DESC 就被放到最后。</strong></p><h4 id="2-示例-9"><a href="#2-示例-9" class="headerlink" title="2. 示例"></a>2. 示例</h4><h5 id="1-单列排序"><a href="#1-单列排序" class="headerlink" title="1. 单列排序"></a>1. 单列排序</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">ORDER</span> <span class="keyword">BY</span> age [<span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span>];</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select name,age from t1 order by age asc;</span><br><span class="line">+-----------+------+</span><br><span class="line">| name      | age  |</span><br><span class="line">+-----------+------+</span><br><span class="line">| 王五      |   18 |</span><br><span class="line">| 小明      |   18 |</span><br><span class="line">| 小红红    |   18 |</span><br><span class="line">| 张三      |   20 |</span><br><span class="line">| 李四      |   20 |</span><br><span class="line">| 李四      |   25 |</span><br><span class="line">| NULL      |  100 |</span><br><span class="line">| 李四      |  100 |</span><br><span class="line">| 李四      |  100 |</span><br><span class="line">+-----------+------+</span><br><span class="line"></span><br><span class="line">mysql&gt; select name,age from t1 order by age desc;</span><br><span class="line">+-----------+------+</span><br><span class="line">| name      | age  |</span><br><span class="line">+-----------+------+</span><br><span class="line">| NULL      |  100 |</span><br><span class="line">| 李四      |  100 |</span><br><span class="line">| 李四      |  100 |</span><br><span class="line">| 李四      |   25 |</span><br><span class="line">| 张三      |   20 |</span><br><span class="line">| 李四      |   20 |</span><br><span class="line">| 王五      |   18 |</span><br><span class="line">| 小明      |   18 |</span><br><span class="line">| 小红红    |   18 |</span><br><span class="line">+-----------+------+</span><br></pre></td></tr></table></figure><h5 id="2-多列排序（真实项目常用）"><a href="#2-多列排序（真实项目常用）" class="headerlink" title="2. 多列排序（真实项目常用）"></a>2. 多列排序（真实项目常用）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">ORDER</span> <span class="keyword">BY</span> age <span class="keyword">DESC</span>, id <span class="keyword">ASC</span>;	# 先按 age 排，age 相同，再按 id 排</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 按id降序、name升序、age降序多级排序</span><br><span class="line">mysql&gt; select * from t1 order by id desc, name asc, age desc;</span><br><span class="line">+-----+-----------+------+</span><br><span class="line">| id  | name      | age  |</span><br><span class="line">+-----+-----------+------+</span><br><span class="line">| 102 | 李四      |  100 |</span><br><span class="line">| 101 | 李四      |  100 |</span><br><span class="line">| 100 | NULL      |  100 |</span><br><span class="line">|  99 | 小红红    |   18 |</span><br><span class="line">|   7 | 小明      |   18 |</span><br><span class="line">|   5 | 王五      |   18 |</span><br><span class="line">|   4 | 李四      |   25 |</span><br><span class="line">|   2 | 李四      |   20 |</span><br><span class="line">|   1 | 张三      |   20 |</span><br><span class="line">+-----+-----------+------+</span><br></pre></td></tr></table></figure><h5 id="3-ORDER-BY-WHERE（常见组合）"><a href="#3-ORDER-BY-WHERE（常见组合）" class="headerlink" title="3. ORDER BY + WHERE（常见组合）"></a>3. ORDER BY + WHERE（常见组合）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users</span><br><span class="line"><span class="keyword">WHERE</span> age <span class="operator">&gt;=</span> <span class="number">18</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> created_at <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure><p><strong>执行顺序：</strong></p><ol><li>WHERE 过滤</li><li>ORDER BY 排序</li><li>返回结果</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 先给 age 起别名，再按别名排序</span><br><span class="line">mysql&gt; select *, age as my_age from t1 where age&lt;30 order by my_age desc;</span><br><span class="line">+----+-----------+------+--------+</span><br><span class="line">| id | name      | age  | my_age |</span><br><span class="line">+----+-----------+------+--------+</span><br><span class="line">|  4 | 李四      |   25 |     25 |</span><br><span class="line">|  1 | 张三      |   20 |     20 |</span><br><span class="line">|  2 | 李四      |   20 |     20 |</span><br><span class="line">|  5 | 王五      |   18 |     18 |</span><br><span class="line">|  7 | 小明      |   18 |     18 |</span><br><span class="line">| 99 | 小红红    |   18 |     18 |</span><br><span class="line">+----+-----------+------+--------+</span><br></pre></td></tr></table></figure><hr><h4 id="3-ORDER-BY-的几种进阶写法"><a href="#3-ORDER-BY-的几种进阶写法" class="headerlink" title="3. ORDER BY 的几种进阶写法"></a>3. ORDER BY 的几种进阶写法</h4><h5 id="1-按别名排序"><a href="#1-按别名排序" class="headerlink" title="1. 按别名排序"></a>1. 按别名排序</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> age <span class="operator">+</span> <span class="number">1</span> <span class="keyword">AS</span> new_age</span><br><span class="line"><span class="keyword">FROM</span> users</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> new_age <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure><p>可读性好，<strong>表达式排序可能慢</strong>！</p><h5 id="2-按表达式排序（能用但慎用）"><a href="#2-按表达式排序（能用但慎用）" class="headerlink" title="2. 按表达式排序（能用但慎用）"></a>2. 按表达式排序（能用但慎用）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> age <span class="operator">+</span> score <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure><p><strong>风险：索引失效、数据量大时很慢。</strong></p><h5 id="3-ORDER-BY-NULL（禁止排序）"><a href="#3-ORDER-BY-NULL（禁止排序）" class="headerlink" title="3. ORDER BY NULL（禁止排序）"></a>3. ORDER BY NULL（禁止排序）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> users <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure><p>用途：明确告诉 MySQL <strong>不需要排序</strong>，聚合查询时可微优化。</p><hr><h4 id="4-常见坑（重点）"><a href="#4-常见坑（重点）" class="headerlink" title="4. 常见坑（重点）"></a>4. 常见坑（重点）</h4><h5 id="1-ORDER-BY-大表非常慢"><a href="#1-ORDER-BY-大表非常慢" class="headerlink" title="1. ORDER BY 大表非常慢"></a>1. ORDER BY 大表非常慢</h5><p>原因：排序需要额外内存 &#x2F; 磁盘。</p><p>解决思路：</p><ul><li><strong>ORDER BY 的列尽量建索引</strong>。</li><li>排序方向要一致（ASC &#x2F; DESC）。</li></ul><h5 id="2-ORDER-BY-和索引方向不一致"><a href="#2-ORDER-BY-和索引方向不一致" class="headerlink" title="2. ORDER BY 和索引方向不一致"></a>2. ORDER BY 和索引方向不一致</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 索引： (age <span class="keyword">ASC</span>)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> age <span class="keyword">DESC</span>;  # 可能用不上索引</span><br></pre></td></tr></table></figure><h5 id="3-ORDER-BY-随机排序（千万别用）"><a href="#3-ORDER-BY-随机排序（千万别用）" class="headerlink" title="3. ORDER BY 随机排序（千万别用）"></a>3. ORDER BY 随机排序（千万别用）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> RAND();  # 大表灾难</span><br></pre></td></tr></table></figure><h3 id="4-筛选分页结果"><a href="#4-筛选分页结果" class="headerlink" title="4. 筛选分页结果"></a>4. 筛选分页结果</h3><p><strong>“筛选分页结果”&#x3D; <code>WHERE</code> 先筛选 + <code>ORDER BY</code> 定序 + <code>LIMIT</code> 分页</strong>，顺序写错、方式选错，<strong>要么结果乱、要么性能炸</strong>。</p><h4 id="1-语法-7"><a href="#1-语法-7" class="headerlink" title="1. 语法"></a>1. 语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT 列</span><br><span class="line">FROM 表</span><br><span class="line">WHERE 条件</span><br><span class="line">ORDER BY 排序列</span><br><span class="line">LIMIT offset, page_size; # 注意：LIMIT单参数表示仅取前n条数据（非分页），双参数表示跳过前x条、取后续n条数据（属于分页）</span><br></pre></td></tr></table></figure><p><strong>分页计算逻辑：</strong></p><p><code>LIMIT offset, page_size</code> 是 MySQL 分页语法：</p><ul><li><code>offset</code>：需要跳过的记录数（计算方式：<code>(页码 - 1) * 每页条数</code>&#x2F;<code>offset = (page - 1) * page_size</code>）。</li><li><code>page_size</code>：每页显示的条数（这里是 10）。</li></ul><p><strong>示例：</strong> 假设需要取第 3 页的数据，每页显示 10 条，那么：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users</span><br><span class="line">WHERE status = 1  # 筛选条件（只查status=1的记录）</span><br><span class="line">ORDER BY id DESC  # 按id降序排列</span><br><span class="line">LIMIT 20, 10;     # 分页：跳过前20条，取接下来的10条(offset = (3-1)*10 = 20)</span><br></pre></td></tr></table></figure><h4 id="2-示例-10"><a href="#2-示例-10" class="headerlink" title="2. 示例"></a>2. 示例</h4><h5 id="1-首页-最新列表（常用）"><a href="#1-首页-最新列表（常用）" class="headerlink" title="1. 首页 &#x2F; 最新列表（常用）"></a>1. 首页 &#x2F; 最新列表（常用）</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users</span><br><span class="line">WHERE age = 18</span><br><span class="line">ORDER BY created_at DESC</span><br><span class="line">LIMIT 10;	# 只取器前10条数据（非分页）</span><br></pre></td></tr></table></figure><h5 id="2-条件-分页（）"><a href="#2-条件-分页（）" class="headerlink" title="2. 条件 + 分页（）"></a>2. 条件 + 分页（）</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users</span><br><span class="line">WHERE id = 1001</span><br><span class="line">  AND age = 18</span><br><span class="line">ORDER BY id DESC</span><br><span class="line">LIMIT 0, 20;	# 跳过前0条数据，取紧接着后面的20条数据（分页）</span><br><span class="line"></span><br><span class="line">SELECT * FROM users</span><br><span class="line">ORDER BY id DESC</span><br><span class="line">LIMIT 20 OFFSET 40;	# 等价写法，但 LIMIT 40, 20; 更常见</span><br></pre></td></tr></table></figure><h4 id="3-注意事项（坑点）"><a href="#3-注意事项（坑点）" class="headerlink" title="3. 注意事项（坑点）"></a>3. 注意事项（坑点）</h4><h5 id="1-没写-ORDER-BY（致命）"><a href="#1-没写-ORDER-BY（致命）" class="headerlink" title="1. 没写 ORDER BY（致命）"></a>1. 没写 ORDER BY（致命）</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users LIMIT 10;</span><br></pre></td></tr></table></figure><p>问题：每次返回顺序可能不同、翻页会 <strong>重复 &#x2F; 丢数据</strong>，<strong>分页必须 ORDER BY</strong>！</p><h5 id="2-ORDER-BY-LIMIT-深分页（性能杀手）"><a href="#2-ORDER-BY-LIMIT-深分页（性能杀手）" class="headerlink" title="2. ORDER BY + LIMIT 深分页（性能杀手）"></a>2. ORDER BY + LIMIT 深分页（性能杀手）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LIMIT <span class="number">100000</span>, <span class="number">20</span>;  # 非常慢，MySQL需要先扫描<span class="number">100000</span>条，再丢掉，只取<span class="number">20</span>条。</span><br></pre></td></tr></table></figure><h4 id="4-高性能分页方式（进阶重点）"><a href="#4-高性能分页方式（进阶重点）" class="headerlink" title="4. 高性能分页方式（进阶重点）"></a>4. 高性能分页方式（进阶重点）</h4><h5 id="1-游标分页（强烈推荐）"><a href="#1-游标分页（强烈推荐）" class="headerlink" title="1. 游标分页（强烈推荐）"></a>1. 游标分页（强烈推荐）</h5><p><strong>思想：用“上一页最后一条数据”翻页</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users</span><br><span class="line">WHERE id &lt; 10000</span><br><span class="line">ORDER BY id DESC</span><br><span class="line">LIMIT 20;</span><br></pre></td></tr></table></figure><p>特点：不用 offset、越往后 <strong>速度越快</strong>、实际项目常用。</p><h5 id="2-时间游标分页"><a href="#2-时间游标分页" class="headerlink" title="2. 时间游标分页"></a>2. 时间游标分页</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users</span><br><span class="line">WHERE created_at &lt; &#x27;2025-01-01 10:00:00&#x27;</span><br><span class="line">ORDER BY created_at DESC</span><br><span class="line">LIMIT 20;</span><br></pre></td></tr></table></figure><h5 id="3-分页-索引的黄金组合"><a href="#3-分页-索引的黄金组合" class="headerlink" title="3. 分页 + 索引的黄金组合"></a>3. 分页 + 索引的黄金组合</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">WHERE 条件</span><br><span class="line">ORDER BY id DESC</span><br><span class="line">LIMIT 20;</span><br></pre></td></tr></table></figure><p><strong>排序列必须有索引</strong>，否则分页再小也慢。推荐：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INDEX(id)</span><br><span class="line">INDEX(created_at)</span><br></pre></td></tr></table></figure><h5 id="4-分页时统计总数（常见需求）"><a href="#4-分页时统计总数（常见需求）" class="headerlink" title="4. 分页时统计总数（常见需求）"></a>4. 分页时统计总数（常见需求）</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 正确做法：分两条 SQL，不要在一条 SQL 里又分页又 count（慢）</span><br><span class="line"># 查数据</span><br><span class="line">SELECT * FROM users</span><br><span class="line">WHERE age = 18</span><br><span class="line">ORDER BY id DESC</span><br><span class="line">LIMIT 20;</span><br><span class="line"></span><br><span class="line"># 查总数</span><br><span class="line">SELECT COUNT(*) FROM users WHERE age = 1;</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/Profile%20picture.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/Profile%20picture.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">小米里的大麦</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://www.minbit.top/posts/60665.html">原创</a><a class="post-copyright-title"><span onclick='rm.copyPageUrl("https://www.minbit.top/posts/60665.html")'>07 表的增删改查上</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="/img/wechat.webp" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/wechat.webp" alt="微信"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay.webp" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/alipay.webp" alt="支付宝"></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display:none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://www.minbit.top/posts/60665.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=07 表的增删改查上&amp;url=https://www.minbit.top/posts/60665.html&amp;pic=https://image-kcm.pages.dev/v2/12THR4h.png?_r_=2094b2e0-3c58-71ab-7188-d1e51f8add0b" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl(){var e=window.location.href,t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(t)}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">知识共享署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0)</a> 许可协议。转载请注明来自 <a href="https://www.minbit.top" target="_blank">小米里的大麦</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/MySQL/"><span class="tags-punctuation"><i class="anzhiyufont anzhiyu-icon-tag"></i></span>MySQL<span class="tagsPageCount">9</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://image-kcm.pages.dev/v2/gDpBkQU.png?_r_=62a52fd3-92ab-d4eb-8575-9f52ed7325b5" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/37148.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/gDpBkQU.png?_r_=ee966f35-0228-999c-318b-78cc04442530" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">06 表的约束</div></div></a></div><div class="next-post pull-right"><a href="/posts/41191.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/TISblXc.png?_r_=db7b3b87-966f-5550-05a4-b800999c97fe" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">免费白嫖 ChatGPT Go 套餐</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size:1.5rem;margin-right:4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/42386.html" title="01 在 Ubuntu 22.04 上安装 MySQL"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/IAdmxAt.png?_r_=f7afb5f8-d077-e52d-3c5a-47cad37cd24f" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-05</div><div class="title">01 在 Ubuntu 22.04 上安装 MySQL</div></div></a></div><div><a href="/posts/9972.html" title="01 在 CentOS 7 中安装 MySQL"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/TISblXc.png?_r_=f26be5b4-9d9a-5aa7-52cc-58affce8c949" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-10</div><div class="title">01 在 CentOS 7 中安装 MySQL</div></div></a></div><div><a href="/posts/6432.html" title="02 数据库基础"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/08taomy.jpeg?_r_=ad721b6a-1c85-1488-120d-0e1b1e510695" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-16</div><div class="title">02 数据库基础</div></div></a></div><div><a href="/posts/19289.html" title="03 库的操作"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/08taomy.jpeg?_r_=ee6ae0c9-1558-f3bb-9fe3-88347574cf8d" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-10-11</div><div class="title">03 库的操作</div></div></a></div><div><a href="/posts/41394.html" title="04 表的操作"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/IAdmxAt.png?_r_=0a742aa3-507c-691f-ff3e-e8c60ae32c29" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-10-11</div><div class="title">04 表的操作</div></div></a></div><div><a href="/posts/37148.html" title="06 表的约束"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/gDpBkQU.png?_r_=ee966f35-0228-999c-318b-78cc04442530" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-11-02</div><div class="title">06 表的约束</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left:4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/Profile%20picture.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"></div></div><div class="author-info__description">时间好像总会留下点什么,或许是一个人,或许是一个梦,或许……是一段有意义的经历~</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">小米里的大麦</h1><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/huangcancan-xbc" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content"><span>👋🏻 Hi，我是 <a target="_blank" href="https://huangcancan-xbc.github.io" rel="external nofollow noreferrer noopener" style="font-weight:700;font-size:1.1em;color:#5166f0">小米里的大麦</a>，欢迎来看我的博客鸭！</span><br><span>👉 建议优先查看置顶的 <a target="_blank" href="https://huangcancan-xbc.github.io/posts/17934.html" rel="external nofollow noreferrer noopener" style="font-weight:700;font-size:1.1em;color:#5166f0">网站说明</a>，如有问题欢迎评论区交流！</span><br><span>😫 页面异常？尝试<kbd>Ctrl</kbd>+<kbd>F5</kbd></span><br><span>📩 联系我：<a href="mailto:hc1960074081@qq.com" rel="external nofollow noreferrer"><b>给我发送邮件🚀</b></a></span></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A1%A8%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E4%B8%8A"><span class="toc-number">1.</span> <span class="toc-text">表的增删改查上</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Create%EF%BC%88%E5%88%9B%E5%BB%BA%EF%BC%89"><span class="toc-number">1.1.</span> <span class="toc-text">1. Create（创建）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%8D%95%E8%A1%8C%E6%8F%92%E5%85%A5-%E5%85%A8%E5%88%97%E6%8F%92%E5%85%A5%EF%BC%88%E6%9C%80%E5%9F%BA%E7%A1%80%EF%BC%89"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. 单行插入 + 全列插入（最基础）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F"><span class="toc-number">1.1.1.1.</span> <span class="toc-text">1. 语法格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.1.1.2.</span> <span class="toc-text">2. 示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%A4%9A%E8%A1%8C%E6%8F%92%E5%85%A5-%E6%8C%87%E5%AE%9A%E5%88%97%E6%8F%92%E5%85%A5%EF%BC%88%E9%AB%98%E6%95%88%E5%86%99%E6%B3%95%EF%BC%89"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. 多行插入 + 指定列插入（高效写法）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F%EF%BC%88%E6%8C%87%E5%AE%9A%E5%88%97%EF%BC%8C%E6%94%AF%E6%8C%81%E5%A4%9A%E8%A1%8C%EF%BC%89"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">1. 语法格式（指定列，支持多行）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%A4%BA%E4%BE%8B-1"><span class="toc-number">1.1.2.2.</span> <span class="toc-text">2. 示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%8F%92%E5%85%A5%E5%90%A6%E5%88%99%E6%9B%B4%E6%96%B0%EF%BC%9AINSERT-ON-DUPLICATE-KEY-UPDATE"><span class="toc-number">1.1.3.</span> <span class="toc-text">3. 插入否则更新：INSERT ... ON DUPLICATE KEY UPDATE</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F-1"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">1. 语法格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%A4%BA%E4%BE%8B%EF%BC%88%E5%B8%B8%E8%A7%81%E7%94%A8%E6%B3%95%EF%BC%9A%E8%AE%A1%E6%95%B0%E3%80%81%E5%86%B2%E7%AA%81%E5%90%88%E5%B9%B6%EF%BC%89"><span class="toc-number">1.1.3.2.</span> <span class="toc-text">2. 示例（常见用法：计数、冲突合并）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%B8%B8%E8%A7%81%E5%8F%98%E4%BD%93%EF%BC%9A%E7%9B%B4%E6%8E%A5%E8%A6%86%E7%9B%96%E9%83%A8%E5%88%86%E5%AD%97%E6%AE%B5"><span class="toc-number">1.1.3.3.</span> <span class="toc-text">3. 常见变体：直接覆盖部分字段</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%9B%BF%E6%8D%A2%E6%95%B0%E6%8D%AE%EF%BC%9AREPLACE-INTO"><span class="toc-number">1.1.4.</span> <span class="toc-text">4. 替换数据：REPLACE INTO</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F-2"><span class="toc-number">1.1.4.1.</span> <span class="toc-text">1. 语法格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%A4%BA%E4%BE%8B-2"><span class="toc-number">1.1.4.2.</span> <span class="toc-text">2. 示例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Retrieve%EF%BC%88%E6%9F%A5%EF%BC%89"><span class="toc-number">1.2.</span> <span class="toc-text">2. Retrieve（查）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-select-%E5%88%97"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. select 列</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%85%A8%E5%88%97%E6%9F%A5%E8%AF%A2%EF%BC%88%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E5%88%97%EF%BC%89"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">1. 全列查询（查询所有列）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E8%AF%AD%E6%B3%95"><span class="toc-number">1.2.1.1.1.</span> <span class="toc-text">1. 语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E7%A4%BA%E4%BE%8B-3"><span class="toc-number">1.2.1.1.2.</span> <span class="toc-text">2. 示例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%8C%87%E5%AE%9A%E5%88%97%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">2. 指定列查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E8%AF%AD%E6%B3%95-1"><span class="toc-number">1.2.1.2.1.</span> <span class="toc-text">1. 语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E7%A4%BA%E4%BE%8B-4"><span class="toc-number">1.2.1.2.2.</span> <span class="toc-text">2. 示例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%9F%A5%E8%AF%A2%E5%AD%97%E6%AE%B5%E4%B8%BA%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">3. 查询字段为表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E8%AF%AD%E6%B3%95-2"><span class="toc-number">1.2.1.3.1.</span> <span class="toc-text">1. 语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E7%A4%BA%E4%BE%8B-5"><span class="toc-number">1.2.1.3.2.</span> <span class="toc-text">2. 示例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E4%B8%BA%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E6%8C%87%E5%AE%9A%E5%88%AB%E5%90%8D"><span class="toc-number">1.2.1.4.</span> <span class="toc-text">4. 为查询结果指定别名</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E8%AF%AD%E6%B3%95-3"><span class="toc-number">1.2.1.4.1.</span> <span class="toc-text">1. 语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E7%A4%BA%E4%BE%8B-6"><span class="toc-number">1.2.1.4.2.</span> <span class="toc-text">2. 示例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E7%BB%93%E6%9E%9C%E5%8E%BB%E9%87%8D"><span class="toc-number">1.2.1.5.</span> <span class="toc-text">5. 结果去重</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E8%AF%AD%E6%B3%95-4"><span class="toc-number">1.2.1.5.1.</span> <span class="toc-text">1. 语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E7%A4%BA%E4%BE%8B-7"><span class="toc-number">1.2.1.5.2.</span> <span class="toc-text">2. 示例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-where-%E6%9D%A1%E4%BB%B6"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. where 条件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%AF%AD%E6%B3%95-5"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">1. 语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%A4%BA%E4%BE%8B-8"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">2. 示例</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E7%AD%89%E5%80%BC%E6%9F%A5%E8%AF%A2%EF%BC%88%E5%B8%B8%E7%94%A8%EF%BC%89"><span class="toc-number">1.2.2.2.1.</span> <span class="toc-text">1. 等值查询（常用）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E4%B8%8D%E7%AD%89%E4%BA%8E-%E5%A4%A7%E5%B0%8F%E6%AF%94%E8%BE%83"><span class="toc-number">1.2.2.2.2.</span> <span class="toc-text">2. 不等于 &#x2F; 大小比较</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-AND-OR-%E7%BB%84%E5%90%88%E6%9D%A1%E4%BB%B6%EF%BC%88%E5%B8%B8%E7%94%A8%EF%BC%89"><span class="toc-number">1.2.2.2.3.</span> <span class="toc-text">3. AND &#x2F; OR 组合条件（常用）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-IN%EF%BC%88%E5%A4%9A%E4%B8%AA%E5%80%BC%E4%B9%8B%E4%B8%80%EF%BC%89"><span class="toc-number">1.2.2.2.4.</span> <span class="toc-text">4. IN（多个值之一）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-BETWEEN%EF%BC%88%E8%8C%83%E5%9B%B4%E6%9F%A5%E8%AF%A2%EF%BC%89"><span class="toc-number">1.2.2.2.5.</span> <span class="toc-text">5. BETWEEN（范围查询）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-LIKE%EF%BC%88%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2%EF%BC%89"><span class="toc-number">1.2.2.2.6.</span> <span class="toc-text">6. LIKE（模糊查询）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-IS-NULL-IS-NOT-NULL"><span class="toc-number">1.2.2.2.7.</span> <span class="toc-text">7. IS NULL &#x2F; IS NOT NULL</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-WHERE-%E4%B8%AD%E7%94%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%88%E8%83%BD%E7%94%A8%E4%BD%86%E8%A6%81%E5%B0%8F%E5%BF%83%EF%BC%89"><span class="toc-number">1.2.2.2.8.</span> <span class="toc-text">8. WHERE 中用表达式（能用但要小心）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%BB%93%E6%9E%9C%E6%8E%92%E5%BA%8F"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. 结果排序</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%AF%AD%E6%B3%95-6"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">1. 语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%A4%BA%E4%BE%8B-9"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">2. 示例</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%8D%95%E5%88%97%E6%8E%92%E5%BA%8F"><span class="toc-number">1.2.3.2.1.</span> <span class="toc-text">1. 单列排序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%A4%9A%E5%88%97%E6%8E%92%E5%BA%8F%EF%BC%88%E7%9C%9F%E5%AE%9E%E9%A1%B9%E7%9B%AE%E5%B8%B8%E7%94%A8%EF%BC%89"><span class="toc-number">1.2.3.2.2.</span> <span class="toc-text">2. 多列排序（真实项目常用）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-ORDER-BY-WHERE%EF%BC%88%E5%B8%B8%E8%A7%81%E7%BB%84%E5%90%88%EF%BC%89"><span class="toc-number">1.2.3.2.3.</span> <span class="toc-text">3. ORDER BY + WHERE（常见组合）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-ORDER-BY-%E7%9A%84%E5%87%A0%E7%A7%8D%E8%BF%9B%E9%98%B6%E5%86%99%E6%B3%95"><span class="toc-number">1.2.3.3.</span> <span class="toc-text">3. ORDER BY 的几种进阶写法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%8C%89%E5%88%AB%E5%90%8D%E6%8E%92%E5%BA%8F"><span class="toc-number">1.2.3.3.1.</span> <span class="toc-text">1. 按别名排序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%8C%89%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%8E%92%E5%BA%8F%EF%BC%88%E8%83%BD%E7%94%A8%E4%BD%86%E6%85%8E%E7%94%A8%EF%BC%89"><span class="toc-number">1.2.3.3.2.</span> <span class="toc-text">2. 按表达式排序（能用但慎用）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-ORDER-BY-NULL%EF%BC%88%E7%A6%81%E6%AD%A2%E6%8E%92%E5%BA%8F%EF%BC%89"><span class="toc-number">1.2.3.3.3.</span> <span class="toc-text">3. ORDER BY NULL（禁止排序）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%B8%B8%E8%A7%81%E5%9D%91%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89"><span class="toc-number">1.2.3.4.</span> <span class="toc-text">4. 常见坑（重点）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-ORDER-BY-%E5%A4%A7%E8%A1%A8%E9%9D%9E%E5%B8%B8%E6%85%A2"><span class="toc-number">1.2.3.4.1.</span> <span class="toc-text">1. ORDER BY 大表非常慢</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-ORDER-BY-%E5%92%8C%E7%B4%A2%E5%BC%95%E6%96%B9%E5%90%91%E4%B8%8D%E4%B8%80%E8%87%B4"><span class="toc-number">1.2.3.4.2.</span> <span class="toc-text">2. ORDER BY 和索引方向不一致</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-ORDER-BY-%E9%9A%8F%E6%9C%BA%E6%8E%92%E5%BA%8F%EF%BC%88%E5%8D%83%E4%B8%87%E5%88%AB%E7%94%A8%EF%BC%89"><span class="toc-number">1.2.3.4.3.</span> <span class="toc-text">3. ORDER BY 随机排序（千万别用）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%AD%9B%E9%80%89%E5%88%86%E9%A1%B5%E7%BB%93%E6%9E%9C"><span class="toc-number">1.2.4.</span> <span class="toc-text">4. 筛选分页结果</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%AF%AD%E6%B3%95-7"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">1. 语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%A4%BA%E4%BE%8B-10"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">2. 示例</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E9%A6%96%E9%A1%B5-%E6%9C%80%E6%96%B0%E5%88%97%E8%A1%A8%EF%BC%88%E5%B8%B8%E7%94%A8%EF%BC%89"><span class="toc-number">1.2.4.2.1.</span> <span class="toc-text">1. 首页 &#x2F; 最新列表（常用）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%9D%A1%E4%BB%B6-%E5%88%86%E9%A1%B5%EF%BC%88%EF%BC%89"><span class="toc-number">1.2.4.2.2.</span> <span class="toc-text">2. 条件 + 分页（）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%EF%BC%88%E5%9D%91%E7%82%B9%EF%BC%89"><span class="toc-number">1.2.4.3.</span> <span class="toc-text">3. 注意事项（坑点）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%B2%A1%E5%86%99-ORDER-BY%EF%BC%88%E8%87%B4%E5%91%BD%EF%BC%89"><span class="toc-number">1.2.4.3.1.</span> <span class="toc-text">1. 没写 ORDER BY（致命）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-ORDER-BY-LIMIT-%E6%B7%B1%E5%88%86%E9%A1%B5%EF%BC%88%E6%80%A7%E8%83%BD%E6%9D%80%E6%89%8B%EF%BC%89"><span class="toc-number">1.2.4.3.2.</span> <span class="toc-text">2. ORDER BY + LIMIT 深分页（性能杀手）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E9%AB%98%E6%80%A7%E8%83%BD%E5%88%86%E9%A1%B5%E6%96%B9%E5%BC%8F%EF%BC%88%E8%BF%9B%E9%98%B6%E9%87%8D%E7%82%B9%EF%BC%89"><span class="toc-number">1.2.4.4.</span> <span class="toc-text">4. 高性能分页方式（进阶重点）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%B8%B8%E6%A0%87%E5%88%86%E9%A1%B5%EF%BC%88%E5%BC%BA%E7%83%88%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="toc-number">1.2.4.4.1.</span> <span class="toc-text">1. 游标分页（强烈推荐）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%97%B6%E9%97%B4%E6%B8%B8%E6%A0%87%E5%88%86%E9%A1%B5"><span class="toc-number">1.2.4.4.2.</span> <span class="toc-text">2. 时间游标分页</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%88%86%E9%A1%B5-%E7%B4%A2%E5%BC%95%E7%9A%84%E9%BB%84%E9%87%91%E7%BB%84%E5%90%88"><span class="toc-number">1.2.4.4.3.</span> <span class="toc-text">3. 分页 + 索引的黄金组合</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E5%88%86%E9%A1%B5%E6%97%B6%E7%BB%9F%E8%AE%A1%E6%80%BB%E6%95%B0%EF%BC%88%E5%B8%B8%E8%A7%81%E9%9C%80%E6%B1%82%EF%BC%89"><span class="toc-number">1.2.4.4.4.</span> <span class="toc-text">4. 分页时统计总数（常见需求）</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/22243.html" title="2025 年度总结"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/gDpBkQU.png?_r_=62a52fd3-92ab-d4eb-8575-9f52ed7325b5" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="2025 年度总结"></a><div class="content"><a class="title" href="/posts/22243.html" title="2025 年度总结">2025 年度总结</a><time datetime="2025-12-31T16:00:00.000Z" title="发表于 2026-01-01 00:00:00">2026-01-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/39993.html" title="08 表的增删改查下"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/TISblXc.png?_r_=401e0f95-fdf5-2a37-24b7-9f6407238dd7" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="08 表的增删改查下"></a><div class="content"><a class="title" href="/posts/39993.html" title="08 表的增删改查下">08 表的增删改查下</a><time datetime="2025-12-12T16:00:00.000Z" title="发表于 2025-12-13 00:00:00">2025-12-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/38170.html" title="Ubuntu 22.04 中安装 thefuck 与 tldr 工具"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/IAdmxAt.png?_r_=3f4a0b21-77fc-aaa3-bb1d-ec5f7076840b" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Ubuntu 22.04 中安装 thefuck 与 tldr 工具"></a><div class="content"><a class="title" href="/posts/38170.html" title="Ubuntu 22.04 中安装 thefuck 与 tldr 工具">Ubuntu 22.04 中安装 thefuck 与 tldr 工具</a><time datetime="2025-11-22T04:00:00.000Z" title="发表于 2025-11-22 12:00:00">2025-11-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/31539.html" title="CodeX CLI 的使用备忘"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/IAdmxAt.png?_r_=96b26ab2-bd17-f853-af15-abd8e2c00565" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="CodeX CLI 的使用备忘"></a><div class="content"><a class="title" href="/posts/31539.html" title="CodeX CLI 的使用备忘">CodeX CLI 的使用备忘</a><time datetime="2025-11-19T04:00:00.000Z" title="发表于 2025-11-19 12:00:00">2025-11-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/41191.html" title="免费白嫖 ChatGPT Go 套餐"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/TISblXc.png?_r_=db7b3b87-966f-5550-05a4-b800999c97fe" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="免费白嫖 ChatGPT Go 套餐"></a><div class="content"><a class="title" href="/posts/41191.html" title="免费白嫖 ChatGPT Go 套餐">免费白嫖 ChatGPT Go 套餐</a><time datetime="2025-11-04T16:00:00.000Z" title="发表于 2025-11-05 00:00:00">2025-11-05</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:hc1960074081@qq.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://weibo.com/u/7913790969" title="微博"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0,500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/Profile picture.png" size="50px"><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com/1918272544" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2025 - 2026 By <a class="footer-bar-link" href="/" title="小米里的大麦" target="_blank">小米里的大麦</a></div></div><div id="footer-type-tips"></div><div class="js-pjax"><script>function subtitleType(){fetch("https://v1.hitokoto.cn").then(t=>t.json()).then(t=>{{const e="出自 "+t.from,n=["《左传》载曰：“太上有立德，其次有立功，其次有立言，虽久不废，此之谓不朽。”","纸上得来终觉浅，绝知此事要躬行！","你太专注于未来，却没有意识到，今天正是你多年前祈求的模样，因为你眺望远方视而不见。","梦想是不会发光的，发光的是追梦的你！","《答案在风中飘扬》（Blowing in The Wind）"];n.unshift(t.hitokoto,e),window.typed=new Typed("#footer-type-tips",{strings:n,startDelay:300,typeSpeed:150,loop:!0,backSpeed:50})}})}"function"==typeof Typed?subtitleType():getScript("https://cdn.cbd.int/typed.js@2.1.0/dist/typed.umd.js").then(subtitleType)</script></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="GitHub主页">GitHub主页</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">93</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">23</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">9</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">社交</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="GitHub"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/lollipop.svg" alt="GitHub"><span class="back-menu-item-text">GitHub</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://space.bilibili.com/1918272544" title="哔哩哔哩"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/wink.svg" alt="哔哩哔哩"><span class="back-menu-item-text">哔哩哔哩</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://gitee.com/huang-cancan-xbc" title="Gitee"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/laugh.svg" alt="Gitee"><span class="back-menu-item-text">Gitee</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">博客</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.csdn.net/Huangcancan666?type=blog" title="CSDN"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/celebrate.svg" alt="CSDN"><span class="back-menu-item-text">CSDN</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://juejin.cn/user/3230789931118109" title="稀土掘金"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/kiss.svg" alt="稀土掘金"><span class="back-menu-item-text">稀土掘金</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">算法</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://leetcode.cn/u/nifty-faradayzqn" title="力扣"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/thinking-glass.svg" alt="力扣"><span class="back-menu-item-text">力扣</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/profile/517073385" title="牛客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/think.svg" alt="牛客"><span class="back-menu-item-text">牛客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.luogu.com.cn/user/1367427" title="洛谷"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/funny.svg" alt="洛谷"><span class="back-menu-item-text">洛谷</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i><span> 统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size:.9em"></i><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i><span> 外链</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i><span> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i><span> 关于本人</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AI/" style="font-size:.88rem">AI<sup>2</sup></a><a href="/tags/C/" style="font-size:.88rem">C++<sup>11</sup></a><a href="/tags/Git/" style="font-size:.88rem">Git<sup>3</sup></a><a href="/tags/IO/" style="font-size:.88rem">IO<sup>5</sup></a><a href="/tags/Linux/" style="font-size:.88rem">Linux<sup>59</sup></a><a href="/tags/MySQL/" style="font-size:.88rem">MySQL<sup>9</sup></a><a href="/tags/Redis/" style="font-size:.88rem">Redis<sup>2</sup></a><a href="/tags/STL/" style="font-size:.88rem">STL<sup>2</sup></a><a href="/tags/VS-Code/" style="font-size:.88rem">VS Code<sup>1</sup></a><a href="/tags/%E4%BF%A1%E5%8F%B7/" style="font-size:.88rem">信号<sup>3</sup></a><a href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" style="font-size:.88rem">内存管理<sup>1</sup></a><a href="/tags/%E5%8E%86%E7%A8%8B/" style="font-size:.88rem">历程<sup>2</sup></a><a href="/tags/%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4/" style="font-size:.88rem">地址空间<sup>6</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size:.88rem">工具<sup>4</sup></a><a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size:.88rem">数学<sup>1</sup></a><a href="/tags/%E6%A8%A1%E6%9D%BF/" style="font-size:.88rem">模板<sup>1</sup></a><a href="/tags/%E7%81%B5%E5%85%89%E8%8D%9F%E8%90%83/" style="font-size:.88rem">灵光荟萃<sup>3</sup></a><a href="/tags/%E7%AE%A1%E9%81%93/" style="font-size:.88rem">管道<sup>2</sup></a><a href="/tags/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/" style="font-size:.88rem">类与对象<sup>3</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size:.88rem">线程<sup>5</sup></a><a href="/tags/%E7%BD%91%E7%AB%99/" style="font-size:.88rem">网站<sup>3</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size:.88rem">网络<sup>11</sup></a><a href="/tags/%E8%BF%9B%E7%A8%8B/" style="font-size:.88rem">进程<sup>15</sup></a></div></div><hr></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="anzhiyu.scrollToDest(document.body.scrollHeight,500)"><i class="anzhiyufont anzhiyu-icon-arrow-down"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span> 数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size:1rem"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display:none"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@6.1.6/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>var HoldLog=console.log;console.log=function(){};let now1=new Date;queueMicrotask(()=>{const o=function(){HoldLog.apply(console,arguments)},n=new Date("01/01/2025 00:00:00");now1.setTime(now1.getTime()+250);const c=(now1-n)/1e3/60/60/24,e=["这里是 小米里的大麦","芝兰生于深谷，不以无人而不芳。","\n        \n       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗\n      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║\n      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║\n      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║\n      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝\n      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝\n        \n        ","已上线",Math.floor(c),"天","©2025 By 安知鱼 V1.7.1"],t=["NCC2-036","调用前置摄像头拍照成功，识别为【小笨蛋】.","Photo captured: ","🤪"];setTimeout(o.bind(console,`\n%c${e[0]} %c ${e[1]} %c ${e[2]} %c${e[3]}%c ${e[4]}%c ${e[5]}\n\n%c ${e[6]}\n`,"color:#425AEF","","color:#425AEF","color:#425AEF","","color:#425AEF","")),setTimeout(o.bind(console,`%c ${t[0]} %c ${t[1]} %c \n${t[2]} %c\n${t[3]}\n`,"color:white; background-color:#4fd953","","",'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%')),setTimeout(o.bind(console,"%c WELCOME %c 你好，小笨蛋.","color:white; background-color:#4f90d9","")),setTimeout(console.warn.bind(console,"%c ⚡ Powered by 安知鱼 %c 你正在访问 小米里的大麦 的博客.","color:white; background-color:#f0ad4e","")),setTimeout(o.bind(console,"%c W23-12 %c 你已打开控制台.","color:white; background-color:#4f90d9","")),setTimeout(console.warn.bind(console,"%c S013-782 %c 你现在正处于监控中.","color:white; background-color:#d9534f",""))})</script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(()=>{const t=()=>{"object"==typeof twikoo?setTimeout(o,0):getScript("https://cdn.cbd.int/twikoo@1.6.44/dist/twikoo.all.min.js").then(o)},o=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo.minbit.top/",path:window.location.pathname,region:"ap-shanghai",onCommentLoaded:()=>{anzhiyu.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null)),GLOBAL_CONFIG_SITE.isPost&&(()=>{const t=document.getElementById("twikoo-count");t&&twikoo.getCommentsCount({envId:"https://twikoo.minbit.top/",region:"ap-shanghai",urls:[window.location.pathname],includeReply:!1}).then(o=>{t.textContent=o[0].count}).catch(t=>{console.error(t)})})()};anzhiyu.loadComment(document.getElementById("twikoo-wrap"),t)})()</script><input type="hidden" name="page-type" id="page-type" value="post"><script async src="/js/anzhiyu/comment_barrage.js"></script></div><script>window.addEventListener("load",()=>{const e=e=>{let t="";if(e.length)for(let n=0;n<e.length;n++){t+="<div class='aside-list-item'>";{const a="data-lazy-src";t+=`<a href='${e[n].url}' class='thumbnail'><img ${a}='${e[n].avatar}' alt='${e[n].nick}'><div class='name'><span>${e[n].nick} </span></div></a>`}t+=`<div class='content'>\n        <a class='comment' href='${e[n].url}' title='${e[n].content}'>${e[n].content}</a>\n        <time datetime="${e[n].date}">${anzhiyu.diffDate(e[n].date,!0)}</time></div>\n        </div>`}else t+="没有评论";let n=document.querySelector("#card-newest-comments .aside-list");n&&(n.innerHTML=t),window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(n)},t=()=>{if(document.querySelector("#card-newest-comments .aside-list")){const t=saveToLocal.get("twikoo-newest-comments");t?e(JSON.parse(t)):(()=>{const t=()=>{twikoo.getRecentComments({envId:"https://twikoo.minbit.top/",region:"ap-shanghai",pageSize:6,includeReply:!0}).then((function(t){const n=t.map(e=>{return{content:(t=e.comment,""===t||(t=(t=(t=(t=t.replace(/<img.*?src="(.*?)"?[^\>]+>/gi,"[图片]")).replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,"[链接]")).replace(/<pre><code>.*?<\/pre>/gi,"[代码]")).replace(/<[^>]+>/g,"")).length>150&&(t=t.substring(0,150)+"..."),t),avatar:e.avatar,nick:e.nick,url:e.url+"#"+e.id,date:new Date(e.created).toISOString()};var t});saveToLocal.set("twikoo-newest-comments",JSON.stringify(n),10/1440),e(n)})).catch((function(e){document.querySelector("#card-newest-comments .aside-list").textContent="无法获取评论，请确认相关配置是否正确"}))};"object"==typeof twikoo?t():getScript("https://cdn.cbd.int/twikoo@1.6.44/dist/twikoo.all.min.js").then(t)})()}};t(),document.addEventListener("pjax:complete",t)})</script><script async data-pjax src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail="xiaomilidedamai@minbit.top"</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://cdn.cbd.int/qrcodejs@1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script src="https://cdn.bootcdn.net/ajax/libs/echarts/4.9.0-rc.1/echarts.min.js"></script><script src="/js/footer-animal.js" defer></script><script id="click-show-text" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="false" data-text="offer,暴富,健康,offer,喜乐,成功,offer,好运,自由,offer,坚持,上岸" data-fontsize="20px" data-random="true" async></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors=['meta[property="og:image"]','meta[property="og:title"]','meta[property="og:url"]','meta[property="og:type"]','meta[property="og:site_name"]','meta[property="og:description"]',"head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(anzhiyu.removeGlobalFnEvent("pjax"),anzhiyu.removeGlobalFnEvent("themeChange"),document.getElementById("rightside").classList.remove("rightside-show"),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()})),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async data-pjax src="https://events.vercount.one/js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script><script>window.addEventListener("load",()=>{const t=()=>{if(!window.location.pathname.startsWith("/comments/"))return;const t=async()=>{const t=new EasyDanmaku({page:"/comments/",el:"#danmu-wrap",line:5,speed:20,hover:!0,loop:!1,colourful:!0,coefficient:1.38,runtime:10});try{let a=saveToLocal.get("twikoo-danmu");if(a)t.batchSend(a,!0);else{const n={method:"POST",body:JSON.stringify({event:"GET_RECENT_COMMENTS",includeReply:!1,pageSize:100}),headers:{"Content-Type":"application/json"}};a=[];const o=await fetch("https://twikoo.minbit.top/",n);if(o.ok){const{data:n}=await o.json();n.forEach(t=>{null==t.avatar&&(t.avatar="https://cravatar.cn/avatar/d615d5793929e8c7d70eab5f00f7f5f1?d=mp"),a.push({avatar:t.avatar,content:t.nick+"："+e(t.comment),url:t.url+"#"+t.id})}),t.batchSend(a,!0),saveToLocal.set("twikoo-danmu",a,.5)}function e(t){return t=(t=(t=(t=(t=t.replace(/<\/*br>|[\s\uFEFF\xA0]+/g,"")).replace(/<img.*?>/g,"[图片]")).replace(/<a.*?>.*?<\/a>/g,"[链接]")).replace(/<pre.*?>.*?<\/pre>/g,"[代码块]")).replace(/<.*?>/g,"")}}}catch(t){console.error("Error fetching data:",t)}document.getElementById("danmu-Btn")&&(document.getElementById("danmu-Btn").innerHTML="<button class=\"hide-Btn\" onclick=\"document.getElementById('danmu-wrap').classList.remove('hide-danmu')\">显示弹幕</button> <button class=\"hide-Btn\" onclick=\"document.getElementById('danmu-wrap').classList.add('hide-danmu')\">隐藏弹幕</button>")};(async()=>{if("function"==typeof EasyDanmaku)await t();else{await getScript("https://npm.onmicrosoft.cn/naokuo-blog@1.2.12/js/easy-Danmaku.js");"function"==typeof EasyDanmaku?await t():console.error("EasyDanmaku function not found even after loading the script.")}})()};t(),document.addEventListener("pjax:complete",t)})</script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>