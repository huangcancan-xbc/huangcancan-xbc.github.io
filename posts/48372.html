<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>055 其他重要协议和技术 | 小米里的大麦</title><meta name="keywords" content="Linux,网络"><meta name="author" content="小米里的大麦"><meta name="copyright" content="小米里的大麦"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="055 其他重要协议和技术"><meta name="application-name" content="055 其他重要协议和技术"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="055 其他重要协议和技术"><meta property="og:url" content="https://www.minbit.top/posts/48372.html"><meta property="og:site_name" content="小米里的大麦"><meta property="og:description" content="其他重要协议和技术 DNS 协议、ICMP 协议、NAT 技术 | CSDN  1. DNS1. DNS 背景与作用   DNS（Domain Name System，域名系统） 是互联网中 负责把域名转换为 IP 地址 的系统。人记域名（如 www.baidu.com），机器识别 IP（如 110"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://zycs-img-8kd.pages.dev/v2/fETMVUS.jpeg?_r_=7f6981c6-26e1-289f-cab6-5f8b347f400a"><meta property="article:author" content="小米里的大麦"><meta property="article:tag" content="技术博客,Linux,C++,后端开发,编程学习,个人博客,技术分享"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://zycs-img-8kd.pages.dev/v2/fETMVUS.jpeg?_r_=7f6981c6-26e1-289f-cab6-5f8b347f400a"><meta name="description" content="其他重要协议和技术 DNS 协议、ICMP 协议、NAT 技术 | CSDN  1. DNS1. DNS 背景与作用   DNS（Domain Name System，域名系统） 是互联网中 负责把域名转换为 IP 地址 的系统。人记域名（如 www.baidu.com），机器识别 IP（如 110"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "055 其他重要协议和技术",
  "description": "其他重要协议和技术 DNS 协议、ICMP 协议、NAT 技术 | CSDN  1. DNS1. DNS 背景与作用   DNS（Domain Name System，域名系统） 是互联网中 负责把域名转换为 IP 地址 的系统。人记域名（如 www.baidu.com），机器识别 IP（如 110",
  "image": "https://zycs-img-8kd.pages.dev/v2/fETMVUS.jpeg?_r_=7f6981c6-26e1-289f-cab6-5f8b347f400a",
  "datePublished": "2025-10-12T04:00:00.000Z",
  "dateModified": "2025-10-12T04:00:00.000Z",
  "author": {
    "@type": "Person",
    "name": "小米里的大麦",
    "url": "https://www.minbit.top"
  },
  "publisher": {
    "@type": "Organization",
    "name": "小米里的大麦",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.minbit.top/img/minbit.png"
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.minbit.top/posts/48372.html"
  },
  "keywords": "Linux, 网络"
}</script><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "首页",
      "item": "https://www.minbit.top"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "055 其他重要协议和技术",
      "item": "https://www.minbit.top/posts/48372.html"
    }
  ]
}</script><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "小米里的大麦",
  "url": "https://www.minbit.top",
  "image": "https://www.minbit.top/img/minbit.png",
  "description": "时间好像总会留下点什么，或许是一个人，或许是一个梦，或许……是一段有意义的经历~"
}</script><link rel="shortcut icon" href="/img/icons/funny.svg"><link rel="canonical" href="https://www.minbit.top/posts/48372.html"><link rel="preconnect" href="//cdn.cbd.int"><link rel="preconnect" href="//bsz.dusays.com:9001"><meta name="google-site-verification" content="Cd-RTVhRO2mndEhicN2cvLXbsNxPqFC6fSn6ql80eVg"><meta name="baidu-site-verification" content="codeva-1H2kM6MEtN"><meta name="msvalidate.01" content="6DF744D82FE6D1FD11CE18658760B59D"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="var(--anzhiyu-main)"><link rel="mask-icon" href="/img/siteicon/apple-icon-180.png" color="#5bbad5"><link rel="apple-touch-icon" sizes="180x180" href="/img/siteicon/apple-icon-180.png"><link rel="apple-touch-icon-precomposed" sizes="180x180" href="/img/siteicon/apple-icon-180.png"><link rel="icon" type="image/png" sizes="32x32" href="/img/siteicon/32.png"><link rel="icon" type="image/png" sizes="16x16" href="/img/siteicon/16.png"><link rel="bookmark" href="/img/siteicon/apple-icon-180.png"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-2732.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2732-2048.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2388.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2388-1668.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1536-2048.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-1536.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2224.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2224-1668.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1620-2160.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2160-1620.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1290-2796.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2796-1290.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1179-2556.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2556-1179.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1284-2778.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2778-1284.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1170-2532.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2532-1170.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1125-2436.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2436-1125.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2688.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2688-1242.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-828-1792.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1792-828.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2208.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2208-1242.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-750-1334.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1334-750.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-640-1136.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1136-640.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={linkPageTop:{enable:!0,title:"友链 + 外链 + 无限进步！欢迎欣赏和贡献！",addFriendPlaceholder:"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},peoplecanvas:void 0,postHeadAiDescription:{enable:!0,gptName:"小米里的大麦",mode:"local",switchBtn:!1,btnLink:"https://afdian.net/item/886a79d4db6711eda42a52540025c377",randomNum:4,basicWordCount:1999,key:"93d1622eadde491eb0594b68ade51723.kaEiDD6A3KPzb7xv",Referer:"https://www.minbit.top/"},diytitle:{enable:!0,leaveTitle:"w(ﾟДﾟ)w 不要走！再看看嘛！",backTitle:"♪(^∇^*)欢迎肥来！"},LA51:{enable:!0,ck:"Jp8wwGQpp21utaFQ",LingQueMonitorID:"Jp8ztDRrxmTf7LDj"},greetingBox:{enable:!0,default:"晚上好👋",list:[{greeting:"晚安😴",startTime:0,endTime:5},{greeting:"早上好鸭👋, 祝你一天好心情！",startTime:6,endTime:9},{greeting:"上午好👋, 状态很好，鼓励一下～",startTime:10,endTime:10},{greeting:"11点多啦, 在坚持一下就吃饭啦～",startTime:11,endTime:11},{greeting:"午安👋, 宝贝",startTime:12,endTime:14},{greeting:"🌈充实的一天辛苦啦！",startTime:14,endTime:18},{greeting:"19点喽, 奖励一顿丰盛的大餐吧🍔。",startTime:19,endTime:19},{greeting:"晚上好👋, 在属于自己的时间好好放松😌~",startTime:20,endTime:24}]},twikooEnvId:"https://twikoo.minbit.top/",commentBarrageConfig:{enable:!0,maxBarrage:10,barrageTime:5e3,accessToken:"25c96851dd8a790c4819ad4bfbaf153c",mailMd5:"7b12ebc2be80f9159099f6ab0e16573c"},music_page_default:"nav_music",root:"/",preloader:{source:3},friends_vue_info:void 0,navMusic:!0,mainTone:{mode:"both",api:"https://img2color-go.vercel.app/api?img=",cover_change:!0},authorStatus:{skills:["🧐 准备中，就快好了，真的！😭","📚 正在学习中，加油！","🎵 喜欢听音乐，喜欢看动漫"]},algolia:void 0,localSearch:{path:"/search.xml",preload:!0,languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简",rightMenuMsgToTraditionalChinese:"转为繁体",rightMenuMsgToSimplifiedChinese:"转为简体"},noticeOutdate:{limitDay:365,position:"top",messagePrev:"It has been",messageNext:"days since the last update, the content of the article may be outdated."},highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:330},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,simplehomepage:!1,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{copy:!0,copyrightEbable:!0,limitCount:150,languages:{author:"作者: 小米里的大麦",link:"链接: ",source:"来源: 小米里的大麦",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。",copySuccess:"复制成功，复制和转载请标注本文地址"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#425AEF",bgDark:"#1f1f1f",position:"top-right"},source:{justifiedGallery:{js:"https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js",css:"https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1,shortcutKey:void 0,autoDarkmode:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={configTitle:"小米里的大麦",title:"055 其他重要协议和技术",postAI:"这篇文章讲述了DNS协议、ICMP协议和NAT技术的重要性及其在网络中的作用。DNS协议负责将域名转换为IP地址，通过分层结构解析域名，并详细描述了DNS解析过程和`dig`工具的使用。ICMP协议作为IP协议的辅助协议，主要用于网络诊断和错误报告，通过ping和traceroute等命令检测网络连通性和追踪路由路径。NAT技术通过将多个内网设备共享一个公网IP地址，解决了IPv4地址短缺问题，并介绍了NAPT技术的应用和内网穿透方法。文章还总结了网络协议在应用层、传输层和网络层的作用，以及数据链路层的相关知识，为理解和应用这些协议提供了全面的指导。",pageFillDescription:"其他重要协议和技术, 1. DNS, 1. DNS 背景与作用, 2. 域名简介, 3. DNS 解析过程（简化说明）, 4. dig 工具简介与安装, 1. CentOS 7.6, 2. Ubuntu 22.04, 5. 浏览器输入 URL 后发生的事情（核心）, 2. ICMP 协议, 1. ICMP 是什么？, 2. ICMP 的位置和关系, 3. ICMP 的功能, 4. ICMP 常见类型, 5. ICMP 报文格式（了解）, 6. 两个典型工具：Ping 与 Traceroute, 1. ping 命令工作流程, 2. traceroute 命令, 3. NAT 技术, 1. NAT 技术背景, 1. 问题来源, 2. 解决思路, 3. 关键前提, 4. 补充价值, 2. NAT IP 转换过程（理解核心）, 1. 局域网 → 公网（出站）, 2. 公网 → 局域网（入站）, 3. NAPT（端口转换） —— NAT 的升级版, 1. 为什么需要 NAPT？, 2. 核心思路：IP + 端口共同唯一标识一次通信, 4. NAT 技术的缺陷, 5. 内网穿透, 6. NAT 与代理服务器的区别（很容易混淆）, 7. 正向代理 vs 反向代理, 1. 正反向代理, 2. FRP 的介绍, 3. FRP 的工作流程（简短步骤）, 4. 网络协议总结, 1. 应用层, 2. 传输层, 3. 网络层, 4. 数据链路层其他重要协议和技术协议协议技术背景与作用域名系统是互联网中负责把域名转换为地址的系统人记域名如机器识别如就是充当这两者之间的翻译官为什么需要地址难记会变动而域名容易记访问网站发邮件请求时都依赖域名解析到具体主机域名简介域名是分层结构从右往左层级递减顶级域二级域注册主体主机名子域可省略说明根域隐藏的由全球组根服务器管理顶级域如商业类网络服务类开源组织或非盈利组织二级域企业或组织自行注册如子域三级及以下如解析过程简化说明查询是一个从根到叶的分层查找过程递归服务器负责一层层问下去直到拿到最终结果假设用户访问浏览器缓存查询先查本地浏览器缓存看是否已有操作系统缓存查询若浏览器无则查缓存可看本地服务器查询通常是自己所在网络的如本地会缓存常见记录若命中则直接返回递归查询若本地未命中向根请求谁管根返回顶级域服务器地址向顶级域请求谁管返回的权威地址向权威请求的是多少最终得到工具简介与安装是调试利器用于查询域名解析信息命令使用方法慕课网安装命令浏览器输入后发生的事情核心整体流程可以概括为五个阶段输入域名解析建立连接请求响应页面渲染其中是从域名到的入口是可靠通信的保障是传输层的协议规范最后浏览器负责把字节变成视觉结果当你在浏览器地址栏输入一个后回车将会发生的事情解析浏览器操作系统本地根权威得到服务器建立连接通过三次握手若是会在之后进行握手证书校验加密协商发送请求浏览器发出请求报文服务器处理请求服务器如解析请求调用后端逻辑生成响应返回响应返回状态码响应头正文等浏览器渲染页面解析构建树解析构建树执行合成渲染树布局绘制页面建立持久连接用于减少后续请求的延迟协议是协议的辅助协议主要用于网络诊断与错误报告常见命令有检测连通性和追踪路由路径不属于传输层没有端口号而是直接封装在报文中它让网络具备了自我反馈能力帮助发现问题所在是什么是协议的信使负责在主机和路由器之间传递网络错误与状态信息它不传输用户数据只传递控制消息用来检测诊断和报告网络问题的位置和关系层级常见协议应用层传输层网络层数据链路层帧属于网络层协议但它是的上层协议使用封装报文中字段时就表示这是一个报文类比理解送快递的司机告诉司机路堵了地址不存在包送到了的消息员的功能错误报告通知发送方网络中出现的问题常见错误目标不可达超时重定向诊断查询用于检测网络状态典型命令常见类型我们记几个关键的就行类型值含义应用场景回复目标不可达路由重定向请求超时用于报文格式了解字段说明报文类型例如表示进一步说明原因校验和其他字段根据类型不同变化两个典型工具与命令工作流程解析构造包头发送目标主机收到后自动返回统计往返时间丢包率常见面试陷阱使用哪个端口没有端口工作在网络层绕过不涉及端口号命令功能追踪数据包经过的路径每一跳路由器也是基于协议实现能够打印出可执行程序主机一直到目标主机之前经历多少路由器工作原理发送多个包从开始逐步递增每经过一个路由器就减当减为时该路由器丢弃包并返回收集所有返回的得出路径示例返回解释跳均显示表示这些跳数的路由器未返回响应可能因防火墙屏蔽或网络配置限制第跳首次出现响应的节点等延迟约毫秒推测为本地网络内部的网关或交换机第跳连续出现响应的节点如等延迟逐渐增加到毫秒左右这些是运营商骨干网的路由节点逐步向百度服务器靠近跳再次出现连续说明到达目标前的最后几跳路由未响应或目标服务器本身不返回响应网络路径在经过跳后未能完全到达目标服务器百度可能屏蔽了追踪响应前几跳的屏蔽通常是网络安全策略导致属于正常现象从响应节点的延迟来看本地网络到运营商骨干网的连接正常延迟较低技术网络地址转换是什么一个视频带你看懂它站网络知识是什么它有什么作用一个视频带你了解清楚站虚拟机网络模式网络桥接内部网络仅主机站摘自趣味网络图解从基础到应用页地址有限但通过路由器可以使得整个内网的多台机器对外只使用一个公网地址大大节省了地址资源内网机器主动连接公网地址中间的会将内网机器的内网地址转换为公网地址从而实现内网和外网的数据交互普通的技术只会修改网络包中的发送端和接收端地址当内网设备较多时将有可能导致冲突因此一般会使用技术同时修改发送端和接收端的地址和端口由于的存在公网地址是无法访问内网服务的但通过内网穿透技术就可以让公网地址访问内网服务一拨操作下来就可以在公司的网络里访问家里的计算机技术背景问题来源的地址是位最多支持约亿个地址随着网络设备爆炸式增长公网远远不够用解决思路网络地址转换通过让多个内网设备共享一个公网上网解决不足问题简单说就是让一整个局域网看起来像只有一台主机在上网关键前提私有仅内网有效如可重复使用公网全球唯一由分配本质是时代的地址复用技术不是协议升级而是补充价值除了节省公网还能隐藏内网结构提升安全性阻止外部主动访问内网主机除非端口映射转换过程理解核心假设局域网有三台主机它们都通过一台路由器上网局域网公网出站阶段源目的说明主机发包源为私有路由器转换源地址改为路由器公网公网传输已是公网间通信公网局域网入站阶段源目的说明服务器发回目标为公网路由器查表查表反向转换转发给主机主机收到数据路由器维护一张转换表记录了私网公网的映射关系端口转换的升级版为什么需要如果两台主机同时访问同一个公网服务器它们的源都被改成了同一个公网路由器的服务器返回时路由器无法区分响应该转给谁于是需要引入端口号核心思路端口共同唯一标识一次通信局域网主机源端口映射后公网端口主机主机当服务器返回时数据包目的地址端口号或路由器查表即可知道数据属于谁这样既能让多台主机共享一个公网又能通过端口区分不同连接技术的缺陷无法从外网主动访问内网主机因为公网只看到的一个不知道内部真实如果想访问内部服务器需做端口映射转换表有性能消耗每个连接都要建立查找维护映射表连接中断问题路由器重启或切换时表清空所有连接断开破坏端到端原则原本层应是点到点通信插入其中导致某些协议如无法直接使用内网穿透使用云服务器搭建内网穿透纵享独属于个人的丝滑体验站内网穿透就是把位于私有网络被隐藏的内网服务暴露到公网从而让公网客户端能访问内网主机常见方法有端口映射点对点打洞和中继反向代理等把内网地址隐藏在路由器后面若无公网地址或无端口映射外部无法主动连入内网穿透要么打洞利用的出站连接建立返向通路要么中继代理内网主动连到公网服务器由公网服务器转发流量常见技术分类端口映射端口转发在路由器上手动映射端口最简单但需路由器权限打洞借助公服协调让双方同时发起出站连接实现直连适用于对称以外的场景不保证总能成功专线把内网主机加入到公网可路由的虚拟网段复杂但稳定中继反向代理内网客户端主动与公网中继服建立长连接公网客户端连中继服由中继转发到内网最稳健但需要公网服务器带宽隧道技术在请求正文中携带加密的有效载荷数据绕过运营商检测实现外网访问响应也进行加密处理后返回还可套着壳子携带其他数据如游戏数据与代理服务器的区别很容易混淆对比维度代理服务器工作层次网络层应用层处理对象端口应用数据等主要目的节省隐藏内网缓存访问控制负载均衡部署位置路由器防火墙设备软件部署在服务器上示例家用无线路由器连接方向双向透明客户端或服务器主动配置是否缓存内容否可缓存网页资源是层的代理是应用层的代理正向代理反向代理正向代理原理利用国内可访问外网的服务器将请求交给该服务器经外网访问目标服务器再将响应返回服务器充当正向代理角色正反向代理类型位置谁在用作用正向代理客户端侧客户端搭建访问受限网站缓存内容反向代理服务端侧服务端搭建负载均衡安全防护如正向代理客户端用的如公司上网代理帮用户访问服务器隐藏客户端反向代理服务端用的如帮服务器服务用户做负载均衡隐藏服务器的介绍属于反向代理中继型内网穿透工具主要特点分为部署在有公网的服务器和部署在内网主机内网的主动与建立并维持长连接公网客户端连接的某个公网端口或域名将流量通过已建立的连接反向代理到对应的支持等协议和多路复用注意不是纯打洞工具它通过内网发起出站连接到公服然后公服中转来实现穿透适合不能修改路由器或无法打洞的场景的工作流程简短步骤在公网主机运行监听公网端口在内网主机运行主动与建立持久连接并注册要暴露的服务公网用户访问的公网端口把流量通过的长连接转发到内网服务网络协议总结应用层应用层的作用负责应用程序间沟通完成一系列业务处理所需服务能够根据自己的需求设计对应的应用层协议了解协议理解的原理和工作流程传输层传输层的作用负责为两个网络通信进程之间的通信提供服务更多的是为数据的传输提供一些策略理解端口号的概念认识协议理解协议的可靠性理解协议的状态转化掌握的连接管理确认应答超时重传滑动窗口流量控制拥塞控制延迟应答捎带应答特性理解面向字节流理解粘包问题和解决方案能够基于实现可靠传输理解对的影响网络层网络层的作用在复杂的网络环境中确定一条合适的路径理解地址理解地址和地址的区别理解协议格式理解如何解决数目不足的问题掌握网段划分的两种方案理解私有和公网理解网络层的地址路由过程理解一个数据包如何跨网段到达最终目的地理解数据包分片的原因了解协议了解设备的工作原理数据链路层数据链路层的作用负责局域网内两个设备之间的数据传递理解以太网通信原理以太网帧格式理解地址理解协议理解",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2025-10-12 12:00:00",postMainColor:""}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:(e,t,a)=>{if(0===a)return;const o={value:t,expiry:Date.now()+864e5*a};localStorage.setItem(e,JSON.stringify(o))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const a=JSON.parse(t);if(!(Date.now()>a.expiry))return a.value;localStorage.removeItem(e)}},e.getScript=(e,t={})=>new Promise((a,o)=>{const c=document.createElement("script");c.src=e,c.async=!0,c.onerror=o,c.onload=c.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(c.onload=c.onreadystatechange=null,a())},Object.keys(t).forEach(e=>{c.setAttribute(e,t[e])}),document.head.appendChild(c)}),e.getCSS=(e,t=!1)=>new Promise((a,o)=>{const c=document.createElement("link");c.rel="stylesheet",c.href=e,t&&(c.id=t),c.onerror=o,c.onload=c.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(c.onload=c.onreadystatechange=null,a())},document.head.appendChild(c)}),e.activateDarkMode=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#18171d")},e.activateLightMode=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#f7f9fe")};const t=saveToLocal.get("theme"),a=window.matchMedia("(prefers-color-scheme: dark)").matches,o=window.matchMedia("(prefers-color-scheme: light)").matches,c=window.matchMedia("(prefers-color-scheme: no-preference)").matches,n=!a&&!o&&!c;if(void 0===t){if(o)activateLightMode();else if(a)activateDarkMode();else if(c||n){const e=(new Date).getHours();e<=10||e>=20?activateDarkMode():activateLightMode()}window.matchMedia("(prefers-color-scheme: dark)").addListener(e=>{void 0===saveToLocal.get("theme")&&(e.matches?activateDarkMode():activateLightMode())})}else"light"===t?activateLightMode():activateDarkMode();const d=saveToLocal.get("aside-status");void 0!==d&&("hide"===d?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/custom/css/font.css"><link rel="stylesheet" href="/custom/css/bilibili.css"><meta name="generator" content="Hexo 8.1.1"><link rel="alternate" href="/atom.xml" title="小米里的大麦" type="application/atom+xml">
</head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/img/minbit.png"><div class="loading-image-dot"></div></div></div><script>const preloader={endLoading:()=>{document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",()=>{preloader.endLoading()}),setTimeout((function(){preloader.endLoading()}),1e4),document.addEventListener("pjax:send",()=>{preloader.initLoading()}),document.addEventListener("pjax:complete",()=>{preloader.endLoading()})</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"><script async src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">社交</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="GitHub"><img class="back-menu-item-icon" src="/img/icons/lollipop.svg" alt="GitHub"><span class="back-menu-item-text">GitHub</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://leetcode.cn/u/nifty-faradayzqn" title="力扣"><img class="back-menu-item-icon" src="/img/icons/thinking-glass.svg" alt="力扣"><span class="back-menu-item-text">力扣</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://space.bilibili.com/1918272544" title="哔哩哔哩"><img class="back-menu-item-icon" src="/img/icons/wink.svg" alt="哔哩哔哩"><span class="back-menu-item-text">哔哩哔哩</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://gitee.com/huang-cancan-xbc" title="Gitee"><img class="back-menu-item-icon" src="/img/icons/laugh.svg" alt="Gitee"><span class="back-menu-item-text">Gitee</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">博客</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.csdn.net/Huangcancan666?type=blog" title="CSDN"><img class="back-menu-item-icon" src="/img/icons/celebrate.svg" alt="CSDN"><span class="back-menu-item-text">CSDN</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://juejin.cn/user/3230789931118109" title="稀土掘金"><img class="back-menu-item-icon" src="/img/icons/kiss.svg" alt="稀土掘金"><span class="back-menu-item-text">稀土掘金</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">小米里的大麦</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i><span> 统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size:.9em"></i><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i><span> 外链</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i><span> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i><span> 关于本人</span></a></li></ul></div></div></div><div id="nav-right"><div id="nav-naoDark"><div class="container"><div class="components"><div class="main-button"><div class="moon"></div><div class="moon"></div><div class="moon"></div></div><div class="daytime-backgrond"></div><div class="daytime-backgrond"></div><div class="daytime-backgrond"></div><div class="cloud"><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div></div><div class="cloud-light"><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div></div><div class="stars"><div class="star big"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star big"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star medium"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star medium"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star small"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star small"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div></div></div></div></div><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole()"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/img/wechat.webp" target="_blank"><img class="post-qr-code-img" alt="微信" src="/img/wechat.webp"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay.webp" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="/img/alipay.webp"></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title">最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AI/" style="font-size:1.05rem">AI<sup>1</sup></a><a href="/tags/C/" style="font-size:1.05rem">C++<sup>8</sup></a><a href="/tags/ChatGPT/" style="font-size:1.05rem">ChatGPT<sup>1</sup></a><a href="/tags/Git/" style="font-size:1.05rem">Git<sup>3</sup></a><a href="/tags/IO/" style="font-size:1.05rem">IO<sup>5</sup></a><a href="/tags/Linux/" style="font-size:1.05rem">Linux<sup>58</sup></a><a href="/tags/MySQL/" style="font-size:1.05rem">MySQL<sup>4</sup></a><a href="/tags/Obsidian/" style="font-size:1.05rem">Obsidian<sup>1</sup></a><a href="/tags/Redis/" style="font-size:1.05rem">Redis<sup>2</sup></a><a href="/tags/STL/" style="font-size:1.05rem">STL<sup>2</sup></a><a href="/tags/VS-Code/" style="font-size:1.05rem">VS Code<sup>1</sup></a><a href="/tags/%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1/" style="font-size:1.05rem">临时邮箱<sup>1</sup></a><a href="/tags/%E4%BF%A1%E5%8F%B7/" style="font-size:1.05rem">信号<sup>3</sup></a><a href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" style="font-size:1.05rem">内存管理<sup>1</sup></a><a href="/tags/%E5%8E%86%E7%A8%8B/" style="font-size:1.05rem">历程<sup>1</sup></a><a href="/tags/%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4/" style="font-size:1.05rem">地址空间<sup>6</sup></a><a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size:1.05rem">数学<sup>1</sup></a><a href="/tags/%E6%A8%A1%E6%9D%BF/" style="font-size:1.05rem">模板<sup>1</sup></a><a href="/tags/%E7%AE%A1%E9%81%93/" style="font-size:1.05rem">管道<sup>2</sup></a><a href="/tags/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/" style="font-size:1.05rem">类与对象<sup>3</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size:1.05rem">线程<sup>4</sup></a><a href="/tags/%E7%BD%91%E7%AB%99/" style="font-size:1.05rem">网站<sup>3</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size:1.05rem">网络<sup>11</sup></a><a href="/tags/%E8%BF%9B%E7%A8%8B/" style="font-size:1.05rem">进程<sup>15</sup></a></div></div><hr></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多"> <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/11/"><span class="card-archive-list-date">十一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/10/"><span class="card-archive-list-date">十月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">11</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">九月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/08/"><span class="card-archive-list-date">八月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/07/"><span class="card-archive-list-date">七月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/06/"><span class="card-archive-list-date">六月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/05/"><span class="card-archive-list-date">五月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/04/"><span class="card-archive-list-date">四月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li></ul></div><hr></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div><div id="console-naoDark"><div class="container"><div class="components"><div class="main-button"><div class="moon"></div><div class="moon"></div><div class="moon"></div></div><div class="daytime-backgrond"></div><div class="daytime-backgrond"></div><div class="daytime-backgrond"></div><div class="cloud"><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div></div><div class="cloud-light"><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div></div><div class="stars"><div class="star big"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star big"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star medium"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star medium"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star small"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star small"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div></div></div></div></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/" itemprop="url">Linux</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/Linux/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>Linux</span></a><a class="article-meta__tags" href="/tags/%E7%BD%91%E7%BB%9C/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>网络</span></a></span></div></div><h1 class="post-title" itemprop="name headline">055 其他重要协议和技术</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-10-12T04:00:00.000Z" title="发表于 2025-10-12 12:00:00">2025-10-12</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-10-12T04:00:00.000Z" title="更新于 2025-10-12 12:00:00">2025-10-12</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">4.6k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>15分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" data-flag-title="055 其他重要协议和技术"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator"> </span><span class="post-meta-position" title="作者IP属地为西安"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>西安</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://zycs-img-8kd.pages.dev/v2/fETMVUS.jpeg?_r_=7f6981c6-26e1-289f-cab6-5f8b347f400a"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><div class="post-ai-description"><div class="ai-title"><i class="anzhiyufont anzhiyu-icon-bilibili"></i><div class="ai-title-text">AI-摘要</div><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i><i class="anzhiyufont anzhiyu-icon-circle-dot" title="朗读摘要"></i><div id="ai-tag">小米里的大麦 GPT</div></div><div class="ai-explanation">AI初始化中...</div><div class="ai-btn-box"><div class="ai-btn-item">介绍自己 🙈</div><div class="ai-btn-item">生成本文简介 👋</div><div class="ai-btn-item">推荐相关文章 📖</div><div class="ai-btn-item">前往主页 🏠</div><div class="ai-btn-item" id="go-tianli-blog">前往爱发电购买</div></div><script data-pjax src="/js/anzhiyu/ai_abstract.js"></script></div><article class="post-content" id="article-container" itemscope itemtype="https://www.minbit.top/posts/48372.html"><header><a class="post-meta-categories" href="/categories/Linux/" itemprop="url">Linux</a><a href="/tags/Linux/" tabindex="-1" itemprop="url">Linux</a><a href="/tags/%E7%BD%91%E7%BB%9C/" tabindex="-1" itemprop="url">网络</a><h1 id="CrawlerTitle" itemprop="name headline">055 其他重要协议和技术</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">小米里的大麦</span><time itemprop="dateCreated datePublished" datetime="2025-10-12T04:00:00.000Z" title="发表于 2025-10-12 12:00:00">2025-10-12</time><time itemprop="dateCreated datePublished" datetime="2025-10-12T04:00:00.000Z" title="更新于 2025-10-12 12:00:00">2025-10-12</time></header><h1 id="其他重要协议和技术"><a href="#其他重要协议和技术" class="headerlink" title="其他重要协议和技术"></a>其他重要协议和技术</h1><blockquote><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/chenlong_cxy/article/details/124788487">DNS 协议、ICMP 协议、NAT 技术 | CSDN</a></p></blockquote><h2 id="1-DNS"><a href="#1-DNS" class="headerlink" title="1. DNS"></a>1. DNS</h2><h3 id="1-DNS-背景与作用"><a href="#1-DNS-背景与作用" class="headerlink" title="1. DNS 背景与作用"></a>1. DNS 背景与作用</h3><blockquote><p><strong>DNS（Domain Name System，域名系统）</strong> 是互联网中 <strong>负责把域名转换为 IP 地址</strong> 的系统。人记域名（如 <code>www.baidu.com</code>），机器识别 IP（如 <code>110.242.69.21</code>）。DNS 就是充当这两者之间的“翻译官”。</p></blockquote><p><strong>为什么需要 DNS？</strong></p><ul><li>IP 地址难记、会变动，而域名容易记。</li><li>访问网站、发邮件、请求 API 时都依赖域名解析到具体主机。</li></ul><h3 id="2-域名简介"><a href="#2-域名简介" class="headerlink" title="2. 域名简介"></a>2. 域名简介</h3><p>域名是分层结构（<strong>从右往左层级递减</strong>）：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">www.example.com.</span><br><span class="line">│   │       └── 顶级域（TLD）：.com / .org / .cn / .edu</span><br><span class="line">│   └────────── 二级域（注册主体）：example</span><br><span class="line">└────────────── 主机名（子域）：www（可省略）</span><br></pre></td></tr></table></figure><p><strong>说明：</strong></p><ul><li><strong>根域</strong>：隐藏的 “.”，由全球 13 组根 DNS 服务器管理。</li><li><strong>顶级域（TLD）</strong>：如 <code>.com</code>：商业类；<code>.net</code>：网络服务类；<code>.org</code>：开源组织或非盈利组织。</li><li><strong>二级域</strong>：企业或组织自行注册（如 baidu.com）。</li><li><strong>子域（三级及以下）</strong>：如 <code>www.baidu.com</code>、<code>api.baidu.com</code>。</li></ul><h3 id="3-DNS-解析过程（简化说明）"><a href="#3-DNS-解析过程（简化说明）" class="headerlink" title="3. DNS 解析过程（简化说明）"></a>3. DNS 解析过程（简化说明）</h3><blockquote><p>DNS 查询是一个“从根到叶”的 <strong>分层查找过程</strong>，递归服务器负责一层层问下去，直到拿到最终结果。</p></blockquote><p>假设用户访问 <code>www.baidu.com</code>：</p><ol><li><p><strong>浏览器缓存查询：</strong> 先查本地浏览器缓存，看是否已有 IP。</p></li><li><p><strong>操作系统缓存查询：</strong> 若浏览器无，则查 OS 缓存（Linux 可看 <code>/etc/hosts</code>）。</p></li><li><p><strong>本地 DNS 服务器查询：</strong>（通常是自己所在网络的 DNS，如 8.8.8.8）本地 DNS 会缓存常见记录，若命中则直接返回。</p></li><li><p><strong>递归查询</strong>（若本地 DNS 未命中）：</p><ul><li><p>向 <strong>根 DNS</strong> 请求：谁管 <code>.com</code>？</p></li><li><p>根 DNS 返回顶级域服务器地址。</p></li><li><p>向 <strong>.com 顶级域 DNS</strong> 请求：谁管 <code>baidu.com</code>？</p></li><li><p>返回 <code>baidu.com</code> 的权威 DNS 地址。</p></li><li><p>向 <strong>baidu.com 权威 DNS</strong> 请求：<code>www</code> 的 IP 是多少？</p></li><li><p>最终得到 <code>110.242.69.21</code>。</p></li></ul></li></ol><hr><h3 id="4-dig-工具简介与安装"><a href="#4-dig-工具简介与安装" class="headerlink" title="4. dig 工具简介与安装"></a>4. <code>dig</code> 工具简介与安装</h3><blockquote><p><code>dig</code>（Domain Information Groper）是 DNS 调试利器，用于查询域名解析信息。<a target="_blank" rel="noopener" href="https://www.imooc.com/article/26971?block_id=tuijian_wz">linux dig 命令使用方法 | 慕课网</a>。</p></blockquote><p>安装命令：</p><h4 id="1-CentOS-7-6"><a href="#1-CentOS-7-6" class="headerlink" title="1. CentOS 7.6"></a>1. CentOS 7.6</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> yum install bind-utils -y</span><br></pre></td></tr></table></figure><h4 id="2-Ubuntu-22-04"><a href="#2-Ubuntu-22-04" class="headerlink" title="2. Ubuntu 22.04"></a>2. Ubuntu 22.04</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install dnsutils -y</span><br></pre></td></tr></table></figure><hr><h3 id="5-浏览器输入-URL-后发生的事情（核心）"><a href="#5-浏览器输入-URL-后发生的事情（核心）" class="headerlink" title="5. 浏览器输入 URL 后发生的事情（核心）"></a>5. 浏览器输入 URL 后发生的事情（核心）</h3><blockquote><p><strong>整体流程可以概括为五个阶段：输入域名 → DNS 解析 → 建立连接 → 请求响应 → 页面渲染。其中 DNS 是从域名到 IP 的入口，TCP 是可靠通信的保障，HTTP&#x2F;HTTPS 是传输层的协议规范，最后浏览器负责把字节变成视觉结果。</strong></p><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wuhenliushui/article/details/20038819/">当你在浏览器地址栏输入一个 URL 后回车，将会发生的事情？ | CSDN</a></p></blockquote><ol><li><p>DNS 解析：浏览器 → 操作系统 → 本地 DNS→ 根 →TLD→ 权威 DNS → 得到服务器 IP。</p></li><li><p>建立 TCP 连接：通过三次握手（SYN → SYN+ACK → ACK）。若是 HTTPS，会在 TCP 之后进行 <strong>TLS 握手</strong>（证书校验 + 加密协商）。</p></li><li><p>发送 HTTP 请求：浏览器发出请求报文：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">/</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>www.baidu.com</span><br></pre></td></tr></table></figure></li><li><p>服务器处理请求：Web 服务器（如 Nginx）解析请求，调用后端逻辑，生成响应。</p></li><li><p>返回 HTTP 响应：返回状态码、响应头、HTML 正文等。</p></li><li><p>浏览器渲染页面</p><ul><li>解析 HTML → 构建 DOM 树。</li><li>解析 CSS → 构建 CSSOM 树。</li><li>执行 JS、合成渲染树、布局、绘制页面。</li></ul></li><li><p>建立持久连接（Keep-Alive）：用于减少后续请求的延迟。</p></li></ol><hr><h2 id="2-ICMP-协议"><a href="#2-ICMP-协议" class="headerlink" title="2. ICMP 协议"></a>2. ICMP 协议</h2><blockquote><p><strong>ICMP 是 IP 协议的辅助协议，主要用于网络诊断与错误报告。常见命令有 ping（检测连通性）和 traceroute（追踪路由路径）。ICMP 不属于传输层，没有端口号，而是直接封装在 IP 报文中。它让网络具备了‘自我反馈’能力，帮助发现问题所在。</strong></p></blockquote><h3 id="1-ICMP-是什么？"><a href="#1-ICMP-是什么？" class="headerlink" title="1. ICMP 是什么？"></a>1. ICMP 是什么？</h3><p><strong>ICMP（Internet Control Message Protocol）是 IP 协议的“信使”，负责在主机和路由器之间传递网络错误与状态信息。它不传输用户数据，只传递“控制消息”，用来检测、诊断和报告网络问题。</strong></p><h3 id="2-ICMP-的位置和关系"><a href="#2-ICMP-的位置和关系" class="headerlink" title="2. ICMP 的位置和关系"></a>2. ICMP 的位置和关系</h3><table><thead><tr><th>层级</th><th>常见协议</th></tr></thead><tbody><tr><td>应用层</td><td>HTTP、DNS</td></tr><tr><td>传输层</td><td>TCP、UDP</td></tr><tr><td>网络层</td><td>IP、ICMP、IGMP</td></tr><tr><td>数据链路层</td><td>MAC 帧、ARP、RARP</td></tr></tbody></table><p>ICMP 属于 <strong>网络层协议</strong>，但它是 <strong>IP 的上层协议</strong>（使用 IP 封装），IP 报文中 <code>Protocol 字段 = 1</code> 时，就表示这是一个 <strong>ICMP 报文</strong>。类比理解：</p><ul><li><strong>IP：送快递的司机。</strong></li><li><strong>ICMP：告诉司机“路堵了 &#x2F; 地址不存在 &#x2F; 包送到了”的消息员。</strong></li></ul><h3 id="3-ICMP-的功能"><a href="#3-ICMP-的功能" class="headerlink" title="3. ICMP 的功能"></a>3. ICMP 的功能</h3><ol><li><p><strong>错误报告：</strong> → 通知发送方网络中出现的问题。常见错误：</p><ul><li><p>目标不可达（Destination Unreachable）</p></li><li><p>超时（Time Exceeded）</p></li><li><p>重定向（Redirect）</p></li></ul></li><li><p><strong>诊断查询：</strong> → 用于检测网络状态，典型命令：<code>ping</code>、<code>traceroute</code>。</p></li></ol><h3 id="4-ICMP-常见类型"><a href="#4-ICMP-常见类型" class="headerlink" title="4. ICMP 常见类型"></a>4. ICMP 常见类型</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Linux/20251010134038655.png" alt="PixPin_2025-10-10_13-40-34"></p><p>我们记几个关键的就行：</p><table><thead><tr><th>类型值</th><th>含义</th><th>应用场景</th></tr></thead><tbody><tr><td>0</td><td>Echo Reply</td><td>ping 回复</td></tr><tr><td>3</td><td>Destination Unreachable</td><td>目标不可达</td></tr><tr><td>5</td><td>Redirect</td><td>路由重定向</td></tr><tr><td>8</td><td>Echo Request</td><td>ping 请求</td></tr><tr><td>11</td><td>Time Exceeded</td><td>TTL 超时（用于 traceroute）</td></tr></tbody></table><h3 id="5-ICMP-报文格式（了解）"><a href="#5-ICMP-报文格式（了解）" class="headerlink" title="5. ICMP 报文格式（了解）"></a>5. ICMP 报文格式（了解）</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Linux/20251010134259972.png" alt="PixPin_2025-10-10_13-42-56"></p><table><thead><tr><th>字段</th><th>说明</th></tr></thead><tbody><tr><td>Type</td><td>报文类型（例如 8 表示 Echo Request）</td></tr><tr><td>Code</td><td>进一步说明原因</td></tr><tr><td>Checksum</td><td>校验和</td></tr><tr><td>其他字段</td><td>根据类型不同变化</td></tr></tbody></table><hr><h3 id="6-两个典型工具：Ping-与-Traceroute"><a href="#6-两个典型工具：Ping-与-Traceroute" class="headerlink" title="6. 两个典型工具：Ping 与 Traceroute"></a>6. 两个典型工具：Ping 与 Traceroute</h3><h4 id="1-ping-命令工作流程"><a href="#1-ping-命令工作流程" class="headerlink" title="1. ping 命令工作流程"></a>1. ping 命令工作流程</h4><ol><li><code>ping www.baidu.com</code>。</li><li>DNS 解析 → <code>110.242.69.21</code>。</li><li>构造 IP 包：<code>Protocol=1</code>，ICMP 头 <code>Type=8</code>。</li><li>发送 → 目标主机收到后，<strong>自动返回 <code>Type=0</code></strong>。</li><li>统计：往返时间（RTT）、TTL、丢包率。</li></ol><blockquote><p><strong>常见面试陷阱：Q: ping 使用哪个端口？</strong><br><strong>A: 没有端口！ICMP 工作在网络层，绕过 TCP&#x2F;UDP，不涉及端口号。</strong></p></blockquote><h4 id="2-traceroute-命令"><a href="#2-traceroute-命令" class="headerlink" title="2. traceroute 命令"></a>2. traceroute 命令</h4><p><strong>功能：</strong> 追踪数据包经过的路径（每一跳路由器），也是基于 ICMP 协议实现，能够打印出可执行程序主机，一直到目标主机之前经历多少路由器。</p><p><strong>工作原理：</strong> 发送多个 IP 包，从 <code>TTL=1</code> 开始逐步递增，每经过一个路由器，TTL 就减 1，当 TTL 减为 0 时，该路由器丢弃包并返回 <code>ICMP Time Exceeded</code>，traceroute 收集所有返回的 IP → 得出路径。</p><p>示例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">traceroute www.baidu.com</span><br></pre></td></tr></table></figure><p>返回：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">root@hcss-ecs-be68:~# traceroute www.baidu.com</span><br><span class="line">traceroute to www.baidu.com (180.101.51.73), 30 hops max, 60 byte packets</span><br><span class="line"> 1  * * *</span><br><span class="line"> 2  * * *</span><br><span class="line"> 3  * * *</span><br><span class="line"> 4  * * *</span><br><span class="line"> 5  11.87.210.128 (11.87.210.128)  1.183 ms 11.87.111.128 (11.87.111.128)  1.284 ms 11.87.210.134 (11.87.210.134)  1.694 ms</span><br><span class="line"> 6  * * *</span><br><span class="line"> 7  * * *</span><br><span class="line"> 8  * * *</span><br><span class="line"> 9  172.16.65.70 (172.16.65.70)  3.104 ms  3.306 ms 180.163.107.161 (180.163.107.161)  4.342 ms</span><br><span class="line">10  180.163.107.177 (180.163.107.177)  3.115 ms  3.309 ms 101.95.246.65 (101.95.246.65)  4.649 ms</span><br><span class="line">11  101.95.224.125 (101.95.224.125)  5.762 ms 101.95.226.245 (101.95.226.245)  5.271 ms 101.95.219.21 (101.95.219.21)  4.961 ms</span><br><span class="line">12  * 101.95.219.65 (101.95.219.65)  4.649 ms 202.97.52.222 (202.97.52.222)  10.990 ms</span><br><span class="line">13  58.213.95.214 (58.213.95.214)  26.524 ms 202.97.101.54 (202.97.101.54)  7.736 ms 180.110.207.18 (180.110.207.18)  10.984 ms</span><br><span class="line">14  * * *</span><br><span class="line">15  58.213.96.50 (58.213.96.50)  10.689 ms * *</span><br><span class="line">16  * * *</span><br><span class="line">17  * * *</span><br><span class="line">18  * * *</span><br><span class="line">19  * * *</span><br><span class="line">20  * * *</span><br><span class="line">21  * * *</span><br><span class="line">22  * * *</span><br><span class="line">23  * * *</span><br><span class="line">24  * * *</span><br><span class="line">25  * * *</span><br><span class="line">26  * * *</span><br><span class="line">27  * * *</span><br><span class="line">28  * * *</span><br><span class="line">29  * * *</span><br><span class="line">30  * * *</span><br></pre></td></tr></table></figure><p>解释：</p><ul><li>1-4 跳：均显示 * * *，表示这些跳数的路由器未返回响应（可能因防火墙屏蔽或网络配置限制）。</li><li>第 5 跳：首次出现响应的节点（11.87.210.128 等），延迟约 1-1.7 毫秒，推测为本地网络内部的网关或交换机。</li><li>第 9-13 跳：连续出现响应的节点（如 172.16.65.70、180.163.107.161 等），延迟逐渐增加到 26 毫秒左右，这些是运营商骨干网的路由节点，逐步向百度服务器靠近。</li><li>14-30 跳：再次出现连续 * * *，说明到达目标前的最后几跳路由未响应，或目标服务器本身不返回 ICMP 响应。</li></ul><p>网络路径在经过 13 跳后未能完全到达目标服务器（百度可能屏蔽了追踪响应），前几跳的屏蔽通常是网络安全策略导致，属于正常现象，从响应节点的延迟来看，本地网络到运营商骨干网的连接正常（延迟较低）。</p><hr><h2 id="3-NAT-技术"><a href="#3-NAT-技术" class="headerlink" title="3. NAT 技术"></a>3. NAT 技术</h2><blockquote><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1TK3YzmEJx/?share_source=copy_web&vd_source=872e5e3ccf44874c39edaf42e30ab0de">NAT(网络地址转换)是什么？一个视频带你看懂它 | B 站</a></p><p>[[网络知识] NAT 是什么？它有什么作用？一个视频带你了解清楚 NAT！ | B 站](<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1rN89zCE1r/?share_source">https://www.bilibili.com/video/BV1rN89zCE1r/?share_source</a> &#x3D; copy_web&amp;vd_source &#x3D; 872e5e3ccf44874c39edaf42e30ab0de)</p><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV11M4y1J7zP/?share_source=copy_web&vd_source=872e5e3ccf44874c39edaf42e30ab0de">【虚拟机网络模式】NAT | NAT 网络 | 桥接 Bridged | 内部网络 Internal | 仅主机(Host-Only) | B 站</a></p></blockquote><blockquote><p><strong>摘自《趣味网络图解 —— 从基础到应用》46 页：</strong></p><ul><li>IPv4 地址有限，但通过 NAT 路由器，可以使得整个内网的多台机器对外只使用一个公网 IP 地址，大大节省了 IP 地址资源。</li><li>内网机器主动连接公网 IP 地址，中间的 NAT 会将内网机器的内网 IP 地址转换为公网 IP 地址，从而实现内网和外网的数据交互。</li><li>普通的 NAT 技术只会修改网络包中的发送端和接收端 IP 地址，当内网设备较多时，将有可能导致冲突。因此一般会使用 NAPT 技术，同时修改发送端和接收端的 <strong>IP 地址和端口</strong>。</li><li>由于 NAT 的存在，公网 IP 地址是无法访问内网服务的，但通过内网穿透技术，就可以让公网 IP 地址访问内网服务。一拨操作下来，就可以在公司的网络里访问家里的计算机。</li></ul></blockquote><h3 id="1-NAT-技术背景"><a href="#1-NAT-技术背景" class="headerlink" title="1. NAT 技术背景"></a>1. NAT 技术背景</h3><h4 id="1-问题来源"><a href="#1-问题来源" class="headerlink" title="1. 问题来源"></a>1. 问题来源</h4><p>IPv4 的地址是 32 位，最多支持约 43 亿个地址，随着网络设备爆炸式增长，公网 IP 远远不够用。</p><h4 id="2-解决思路"><a href="#2-解决思路" class="headerlink" title="2. 解决思路"></a>2. 解决思路</h4><p><strong>NAT（Network Address Translation，网络地址转换）：通过 “让多个内网设备共享一个公网 IP 上网”，解决 IP 不足问题。简单说：NAT 就是让一整个局域网看起来像只有一台主机在上网。</strong></p><h4 id="3-关键前提"><a href="#3-关键前提" class="headerlink" title="3. 关键前提"></a>3. 关键前提</h4><ul><li><strong>私有 IP</strong>：仅内网有效（如 <code>192.168.x.x</code>），可重复使用。</li><li><strong>公网 IP</strong>：全球唯一，由 ISP 分配。</li></ul><blockquote><p><strong>本质</strong>：NAT 是 <strong>IPv4 时代的“地址复用”技术</strong>，不是协议升级，而是“ workaround”。</p></blockquote><h4 id="4-补充价值"><a href="#4-补充价值" class="headerlink" title="4. 补充价值"></a>4. 补充价值</h4><p>除了节省公网 IP，NAT 还能：</p><ul><li><strong>隐藏内网结构</strong>（提升安全性）。</li><li><strong>阻止外部主动访问内网主机</strong>（除非端口映射）。</li></ul><hr><h3 id="2-NAT-IP-转换过程（理解核心）"><a href="#2-NAT-IP-转换过程（理解核心）" class="headerlink" title="2. NAT IP 转换过程（理解核心）"></a>2. NAT IP 转换过程（理解核心）</h3><p>假设局域网有三台主机：A、B、C，它们都通过一台 <strong>NAT 路由器</strong> 上网。</p><h4 id="1-局域网-→-公网（出站）"><a href="#1-局域网-→-公网（出站）" class="headerlink" title="1. 局域网 → 公网（出站）"></a>1. 局域网 → 公网（出站）</h4><table><thead><tr><th>阶段</th><th>源 IP</th><th>目的 IP</th><th>说明</th></tr></thead><tbody><tr><td>主机 A 发包</td><td>192.168.1.10</td><td>8.8.8.8</td><td>源为私有 IP</td></tr><tr><td>路由器 NAT 转换</td><td><strong>203.0.113.5</strong></td><td>8.8.8.8</td><td>源地址改为路由器公网 IP</td></tr><tr><td>公网传输</td><td>203.0.113.5</td><td>8.8.8.8</td><td>已是公网间通信</td></tr></tbody></table><h4 id="2-公网-→-局域网（入站）"><a href="#2-公网-→-局域网（入站）" class="headerlink" title="2. 公网 → 局域网（入站）"></a>2. 公网 → 局域网（入站）</h4><table><thead><tr><th>阶段</th><th>源 IP</th><th>目的 IP</th><th>说明</th></tr></thead><tbody><tr><td>服务器发回</td><td>8.8.8.8</td><td><strong>203.0.113.5</strong></td><td>目标为 NAT 公网 IP</td></tr><tr><td>路由器查表</td><td>8.8.8.8</td><td>192.168.1.10</td><td>查 NAT 表反向转换</td></tr><tr><td>转发给主机 A</td><td>8.8.8.8</td><td>192.168.1.10</td><td>主机 A 收到数据</td></tr></tbody></table><blockquote><p>NAT 路由器维护一张 “转换表”，记录了私网 IP ↔ 公网 IP 的映射关系。</p></blockquote><h3 id="3-NAPT（端口转换）-——-NAT-的升级版"><a href="#3-NAPT（端口转换）-——-NAT-的升级版" class="headerlink" title="3. NAPT（端口转换） —— NAT 的升级版"></a>3. NAPT（端口转换） —— NAT 的升级版</h3><h4 id="1-为什么需要-NAPT？"><a href="#1-为什么需要-NAPT？" class="headerlink" title="1. 为什么需要 NAPT？"></a>1. 为什么需要 NAPT？</h4><p>如果 A、B 两台主机同时访问同一个公网服务器：它们的源 IP 都被改成了同一个公网 IP（NAT 路由器的 IP），服务器返回时，路由器无法区分响应该转给谁，于是需要引入端口号。</p><h4 id="2-核心思路：IP-端口共同唯一标识一次通信"><a href="#2-核心思路：IP-端口共同唯一标识一次通信" class="headerlink" title="2. 核心思路：IP + 端口共同唯一标识一次通信"></a>2. 核心思路：IP + 端口共同唯一标识一次通信</h4><table><thead><tr><th>局域网主机</th><th>源 IP: 端口</th><th>映射后公网 IP: 端口</th></tr></thead><tbody><tr><td>主机 A</td><td>192.168.1.10:1025</td><td>203.0.113.5:1025</td></tr><tr><td>主机 B</td><td>192.168.1.11:1025</td><td>203.0.113.5:1026</td></tr></tbody></table><p>当服务器返回时：数据包目的地址 &#x3D; <code>203.0.113.5</code>，端口号 &#x3D; 1025 或 1026，路由器查表即可知道数据属于谁。这样既能让多台主机共享一个公网 IP，又能通过端口区分不同连接。</p><h3 id="4-NAT-技术的缺陷"><a href="#4-NAT-技术的缺陷" class="headerlink" title="4. NAT 技术的缺陷"></a>4. NAT 技术的缺陷</h3><ul><li><strong>无法从外网主动访问内网主机：</strong> 因为公网只看到 NAT 的一个 IP，不知道内部真实 IP，如果想访问内部服务器，需做“端口映射”。</li><li><strong>转换表有性能消耗：</strong> 每个连接都要建立 &#x2F; 查找 &#x2F; 维护映射表。</li><li><strong>连接中断问题：</strong> NAT 路由器重启或切换时，表清空 → 所有 TCP 连接断开。</li><li><strong>破坏端到端原则：</strong> 原本 IP 层应是“点到点”通信，NAT 插入其中，导致某些协议（如 P2P、IPsec）无法直接使用。</li></ul><h3 id="5-内网穿透"><a href="#5-内网穿透" class="headerlink" title="5. 内网穿透"></a>5. 内网穿透</h3><blockquote><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1FV4xz9EPt/?share_source=copy_web&vd_source=872e5e3ccf44874c39edaf42e30ab0de">使用云服务器搭建内网穿透！纵享独属于个人的丝滑体验！| B 站</a></p></blockquote><p>内网穿透就是把位于私有网络、被 NAT 隐藏的内网服务暴露到公网，从而让公网客户端能访问内网主机。常见方法有端口映射、VPN、点对点打洞和中继&#x2F;反向代理等。NAT 把内网地址隐藏在路由器后面，若无公网地址或无端口映射，外部无法主动连入，内网穿透要么打洞（利用 NAT 的出站连接建立返向通路），要么中继&#x2F;代理（内网主动连到公网服务器，由公网服务器转发流量）。常见技术分类：</p><ul><li>端口映射&#x2F;端口转发：在路由器上手动映射端口。最简单但需路由器权限。</li><li>UDP&#x2F;TCP Hole Punching（打洞）：借助公服协调，让双方同时发起出站连接实现直连。适用于对称 NAT 以外的场景，不保证总能成功。</li><li>VPN &#x2F; 专线：把内网主机加入到公网可路由的虚拟网段，复杂但稳定。</li><li>中继&#x2F;反向代理（Relay&#x2F;Reverse Proxy）：内网客户端主动与公网中继服建立长连接，公网客户端连中继服由中继转发到内网。最稳健但需要公网服务器带宽。</li></ul><blockquote><p><strong>HTTP 隧道技术</strong>：在 HTTP 请求正文中携带加密的有效载荷数据，绕过运营商检测，实现外网访问，响应也进行加密处理后返回，还可套着 HTTP 壳子携带其他数据，如游戏数据。</p></blockquote><hr><h3 id="6-NAT-与代理服务器的区别（很容易混淆）"><a href="#6-NAT-与代理服务器的区别（很容易混淆）" class="headerlink" title="6. NAT 与代理服务器的区别（很容易混淆）"></a>6. NAT 与代理服务器的区别（很容易混淆）</h3><table><thead><tr><th>对比维度</th><th>NAT</th><th>代理服务器（Proxy）</th></tr></thead><tbody><tr><td>工作层次</td><td>网络层</td><td>应用层</td></tr><tr><td>处理对象</td><td>IP、端口</td><td>应用数据（HTTP、FTP 等）</td></tr><tr><td>主要目的</td><td>节省 IP、隐藏内网</td><td>缓存、访问控制、负载均衡</td></tr><tr><td>部署位置</td><td>路由器、防火墙设备</td><td>软件部署在服务器上</td></tr><tr><td>示例</td><td>家用无线路由器</td><td>Nginx、Squid、Apache</td></tr><tr><td>连接方向</td><td>双向透明</td><td>客户端或服务器主动配置</td></tr><tr><td>是否缓存内容</td><td>否</td><td>可缓存网页、资源</td></tr></tbody></table><blockquote><p><strong>NAT 是 IP 层的代理，Proxy 是 应用层的代理。</strong></p></blockquote><hr><h3 id="7-正向代理-vs-反向代理"><a href="#7-正向代理-vs-反向代理" class="headerlink" title="7. 正向代理 vs 反向代理"></a>7. 正向代理 vs 反向代理</h3><blockquote><p><strong>正向代理原理</strong>：利用国内可访问外网的服务器，将请求交给该服务器，经外网访问目标服务器，再将响应返回，服务器充当正向代理角色。</p></blockquote><h4 id="1-正反向代理"><a href="#1-正反向代理" class="headerlink" title="1. 正反向代理"></a>1. 正反向代理</h4><table><thead><tr><th>类型</th><th>位置</th><th>谁在用</th><th>作用</th></tr></thead><tbody><tr><td>正向代理</td><td>客户端侧</td><td>客户端搭建</td><td>访问受限网站、缓存内容</td></tr><tr><td>反向代理</td><td>服务端侧</td><td>服务端搭建</td><td>负载均衡、安全防护（如 Nginx）</td></tr></tbody></table><ul><li><p><strong>正向代理</strong>：<strong>客户端</strong> 用的（如公司上网代理，帮用户访问服务器）→ 隐藏客户端。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Linux/20251010164447854.png" alt="PixPin_2025-10-10_16-44-42"></p></li><li><p><strong>反向代理</strong>：<strong>服务端</strong> 用的（如帮服务器服务用户：Nginx 做负载均衡）→ 隐藏服务器。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/huangcancan-xbc/Drawing-bed@master/Linux/20251010164542739.png" alt="PixPin_2025-10-10_16-45-37"></p></li></ul><h4 id="2-FRP-的介绍"><a href="#2-FRP-的介绍" class="headerlink" title="2. FRP 的介绍"></a>2. FRP 的介绍</h4><p><a target="_blank" rel="noopener" href="https://github.com/fatedier/frp">FRP</a>（Fast Reverse Proxy）属于 <strong>反向代理 &#x2F; 中继型内网穿透工具</strong>。主要特点：分为 <code>frps</code>（部署在有公网 IP 的服务器）和 <code>frpc</code>（部署在内网主机），内网的 <code>frpc</code> 主动与 <code>frps</code> 建立并维持长连接，公网客户端连接 <code>frps</code> 的某个公网端口或域名，<code>frps</code> 将流量通过已建立的连接反向代理到对应的 <code>frpc</code>，支持 TCP&#x2F;UDP&#x2F;http&#x2F;https&#x2F;websocket 等协议和多路复用。</p><p>注意：FRP 不是纯打洞工具，它通过“内网发起出站连接到公服，然后公服中转”来实现穿透，适合不能修改路由器或无法打洞的场景。</p><h4 id="3-FRP-的工作流程（简短步骤）"><a href="#3-FRP-的工作流程（简短步骤）" class="headerlink" title="3. FRP 的工作流程（简短步骤）"></a>3. FRP 的工作流程（简短步骤）</h4><ol><li>在公网主机运行 <code>frps</code>，监听公网端口。</li><li>在内网主机运行 <code>frpc</code>，主动与 <code>frps</code> 建立持久连接并注册要暴露的服务。</li><li>公网用户访问 <code>frps</code> 的公网端口。</li><li><code>frps</code> 把流量通过 <code>frpc</code> 的长连接转发到内网服务。</li></ol><hr><h2 id="4-网络协议总结"><a href="#4-网络协议总结" class="headerlink" title="4. 网络协议总结"></a>4. 网络协议总结</h2><h3 id="1-应用层"><a href="#1-应用层" class="headerlink" title="1. 应用层"></a>1. 应用层</h3><ul><li>应用层的作用：负责应用程序间沟通，完成一系列业务处理所需服务。</li><li>能够根据自己的需求，设计对应的应用层协议。</li><li>了解 HTTP 协议。</li><li>理解 DNS 的原理和工作流程。</li></ul><h3 id="2-传输层"><a href="#2-传输层" class="headerlink" title="2. 传输层"></a>2. 传输层</h3><ul><li>传输层的作用：负责为两个网络通信进程之间的通信提供服务，更多的是为数据的传输提供一些策略。</li><li>理解端口号的概念。</li><li>认识 TCP 协议，理解 TCP 协议的可靠性，理解 TCP 协议的状态转化。</li><li>掌握 TCP 的连接管理、确认应答、超时重传、滑动窗口、流量控制、拥塞控制、延迟应答、捎带应答特性。</li><li>理解 TCP 面向字节流，理解粘包问题和解决方案。</li><li>能够基于 UDP 实现可靠传输。</li><li>理解 MTU 对 UDP&#x2F;TCP 的影响。</li></ul><h3 id="3-网络层"><a href="#3-网络层" class="headerlink" title="3. 网络层"></a>3. 网络层</h3><ul><li>网络层的作用：在复杂的网络环境中确定一条合适的路径。</li><li>理解 IP 地址，理解 IP 地址和 MAC 地址的区别。</li><li>理解 IP 协议格式。</li><li>理解如何解决 IP 数目不足的问题，掌握网段划分的两种方案，理解私有 IP 和公网 IP。</li><li>理解网络层的 IP 地址路由过程，理解一个数据包如何跨网段到达最终目的地。</li><li>理解 IP 数据包分片的原因。</li><li>了解 ICMP 协议。</li><li>了解 NAT 设备的工作原理。</li></ul><h3 id="4-数据链路层"><a href="#4-数据链路层" class="headerlink" title="4. 数据链路层"></a>4. 数据链路层</h3><ul><li>数据链路层的作用：负责局域网内两个设备之间的数据传递。</li><li>理解以太网通信原理</li><li>以太网帧格式。</li><li>理解 MAC 地址。</li><li>理解 ARP 协议。</li><li>理解 MTU。</li></ul></article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/minbit.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/minbit.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">小米里的大麦</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://www.minbit.top/posts/48372.html">原创</a><a class="post-copyright-title"><span onclick='rm.copyPageUrl("https://www.minbit.top/posts/48372.html")'>055 其他重要协议和技术</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="/img/wechat.webp" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/wechat.webp" alt="微信"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay.webp" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/alipay.webp" alt="支付宝"></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display:none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://www.minbit.top/posts/48372.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=055 其他重要协议和技术&amp;url=https://www.minbit.top/posts/48372.html&amp;pic=https://zycs-img-8kd.pages.dev/v2/fETMVUS.jpeg?_r_=7f6981c6-26e1-289f-cab6-5f8b347f400a" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl(){var e=window.location.href,t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(t)}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">知识共享署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0)</a> 许可协议。转载请注明来自 <a href="https://www.minbit.top" target="_blank">小米里的大麦</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/Linux/"><span class="tags-punctuation"><i class="anzhiyufont anzhiyu-icon-tag"></i></span>Linux<span class="tagsPageCount">58</span></a><a class="post-meta__box__tags" href="/tags/%E7%BD%91%E7%BB%9C/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>网络<span class="tagsPageCount">11</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://zycs-img-8kd.pages.dev/v2/Jci6x23.png?_r_=cd6ab6d9-777f-ddf2-7e99-67e102f8beb2" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/19289.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/PXXdojm.png?_r_=71de36aa-d238-3363-c614-84db659e2c15" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">03 库的操作</div></div></a></div><div class="next-post pull-right"><a href="/posts/7814.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/0k1JltC.jpeg?_r_=62a2c9b9-baa7-7f9f-8ee4-eedc6c0f4edd" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">056 高级 IO</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size:1.5rem;margin-right:4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/47537.html" title="045 网络基础"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/aKlysyx.png?_r_=3163eb3c-1b77-3014-d82d-03f81b706753" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-08-12</div><div class="title">045 网络基础</div></div></a></div><div><a href="/posts/63840.html" title="048 HTTP 协议"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/Jci6x23.png?_r_=c9859442-c801-6b1d-2ef9-2a7c6759d552" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-08-25</div><div class="title">048 HTTP 协议</div></div></a></div><div><a href="/posts/40348.html" title="046 网络编程套接字"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/uH1MN2u.png?_r_=fe08dd4b-45c4-bf3b-2c71-cf477eb043b3" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-08-15</div><div class="title">046 网络编程套接字</div></div></a></div><div><a href="/posts/34998.html" title="049 HTTPS 协议原理"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/Jci6x23.png?_r_=22a1c05c-7d50-f198-9647-5698fdfa59f6" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-08-28</div><div class="title">049 HTTPS 协议原理</div></div></a></div><div><a href="/posts/62772.html" title="050 传输层 —— UDP"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/Jci6x23.png?_r_=04c1849e-c047-9316-1d2e-28c9757e1775" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-12</div><div class="title">050 传输层 —— UDP</div></div></a></div><div><a href="/posts/38905.html" title="047 网络传输基础：TCP 连接建立与数据序列化"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/aKlysyx.png?_r_=86ada8a3-ae58-00d4-0bcd-3ddd3b45acd2" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-08-22</div><div class="title">047 网络传输基础：TCP 连接建立与数据序列化</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left:4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/minbit.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"></div></div><div class="author-info__description">时间好像总会留下点什么,或许是一个人,或许是一个梦,或许……是一段有意义的经历~</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">小米里的大麦</h1><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/huangcancan-xbc" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content"><span>👋🏻 Hi，我是 <a target="_blank" href="https://huangcancan-xbc.github.io" rel="external nofollow noreferrer noopener" style="font-weight:700;font-size:1.1em;color:#5166f0">小米里的大麦</a>，欢迎来看我的博客鸭！</span><br><span>👉 建议优先查看置顶的 <a target="_blank" href="https://huangcancan-xbc.github.io/posts/17934.html" rel="external nofollow noreferrer noopener" style="font-weight:700;font-size:1.1em;color:#5166f0">网站说明</a>，如有问题欢迎评论区交流！</span><br><span>😫 页面异常？尝试<kbd>Ctrl</kbd>+<kbd>F5</kbd></span><br><span>📩 联系我：<a href="mailto:hc1960074081@qq.com" rel="external nofollow noreferrer"><b>给我发送邮件🚀</b></a></span></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E9%87%8D%E8%A6%81%E5%8D%8F%E8%AE%AE%E5%92%8C%E6%8A%80%E6%9C%AF"><span class="toc-number">1.</span> <span class="toc-text">其他重要协议和技术</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-DNS"><span class="toc-number">1.1.</span> <span class="toc-text">1. DNS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-DNS-%E8%83%8C%E6%99%AF%E4%B8%8E%E4%BD%9C%E7%94%A8"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. DNS 背景与作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%9F%9F%E5%90%8D%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. 域名简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-DNS-%E8%A7%A3%E6%9E%90%E8%BF%87%E7%A8%8B%EF%BC%88%E7%AE%80%E5%8C%96%E8%AF%B4%E6%98%8E%EF%BC%89"><span class="toc-number">1.1.3.</span> <span class="toc-text">3. DNS 解析过程（简化说明）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-dig-%E5%B7%A5%E5%85%B7%E7%AE%80%E4%BB%8B%E4%B8%8E%E5%AE%89%E8%A3%85"><span class="toc-number">1.1.4.</span> <span class="toc-text">4. dig 工具简介与安装</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-CentOS-7-6"><span class="toc-number">1.1.4.1.</span> <span class="toc-text">1. CentOS 7.6</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Ubuntu-22-04"><span class="toc-number">1.1.4.2.</span> <span class="toc-text">2. Ubuntu 22.04</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%B5%8F%E8%A7%88%E5%99%A8%E8%BE%93%E5%85%A5-URL-%E5%90%8E%E5%8F%91%E7%94%9F%E7%9A%84%E4%BA%8B%E6%83%85%EF%BC%88%E6%A0%B8%E5%BF%83%EF%BC%89"><span class="toc-number">1.1.5.</span> <span class="toc-text">5. 浏览器输入 URL 后发生的事情（核心）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-ICMP-%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.2.</span> <span class="toc-text">2. ICMP 协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-ICMP-%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. ICMP 是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-ICMP-%E7%9A%84%E4%BD%8D%E7%BD%AE%E5%92%8C%E5%85%B3%E7%B3%BB"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. ICMP 的位置和关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-ICMP-%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. ICMP 的功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-ICMP-%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.2.4.</span> <span class="toc-text">4. ICMP 常见类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-ICMP-%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89"><span class="toc-number">1.2.5.</span> <span class="toc-text">5. ICMP 报文格式（了解）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E4%B8%A4%E4%B8%AA%E5%85%B8%E5%9E%8B%E5%B7%A5%E5%85%B7%EF%BC%9APing-%E4%B8%8E-Traceroute"><span class="toc-number">1.2.6.</span> <span class="toc-text">6. 两个典型工具：Ping 与 Traceroute</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-ping-%E5%91%BD%E4%BB%A4%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-number">1.2.6.1.</span> <span class="toc-text">1. ping 命令工作流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-traceroute-%E5%91%BD%E4%BB%A4"><span class="toc-number">1.2.6.2.</span> <span class="toc-text">2. traceroute 命令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-NAT-%E6%8A%80%E6%9C%AF"><span class="toc-number">1.3.</span> <span class="toc-text">3. NAT 技术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-NAT-%E6%8A%80%E6%9C%AF%E8%83%8C%E6%99%AF"><span class="toc-number">1.3.1.</span> <span class="toc-text">1. NAT 技术背景</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E9%97%AE%E9%A2%98%E6%9D%A5%E6%BA%90"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">1. 问题来源</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%A7%A3%E5%86%B3%E6%80%9D%E8%B7%AF"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">2. 解决思路</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%85%B3%E9%94%AE%E5%89%8D%E6%8F%90"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">3. 关键前提</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E8%A1%A5%E5%85%85%E4%BB%B7%E5%80%BC"><span class="toc-number">1.3.1.4.</span> <span class="toc-text">4. 补充价值</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-NAT-IP-%E8%BD%AC%E6%8D%A2%E8%BF%87%E7%A8%8B%EF%BC%88%E7%90%86%E8%A7%A3%E6%A0%B8%E5%BF%83%EF%BC%89"><span class="toc-number">1.3.2.</span> <span class="toc-text">2. NAT IP 转换过程（理解核心）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%B1%80%E5%9F%9F%E7%BD%91-%E2%86%92-%E5%85%AC%E7%BD%91%EF%BC%88%E5%87%BA%E7%AB%99%EF%BC%89"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">1. 局域网 → 公网（出站）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%85%AC%E7%BD%91-%E2%86%92-%E5%B1%80%E5%9F%9F%E7%BD%91%EF%BC%88%E5%85%A5%E7%AB%99%EF%BC%89"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">2. 公网 → 局域网（入站）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-NAPT%EF%BC%88%E7%AB%AF%E5%8F%A3%E8%BD%AC%E6%8D%A2%EF%BC%89-%E2%80%94%E2%80%94-NAT-%E7%9A%84%E5%8D%87%E7%BA%A7%E7%89%88"><span class="toc-number">1.3.3.</span> <span class="toc-text">3. NAPT（端口转换） —— NAT 的升级版</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81-NAPT%EF%BC%9F"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">1. 为什么需要 NAPT？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%A0%B8%E5%BF%83%E6%80%9D%E8%B7%AF%EF%BC%9AIP-%E7%AB%AF%E5%8F%A3%E5%85%B1%E5%90%8C%E5%94%AF%E4%B8%80%E6%A0%87%E8%AF%86%E4%B8%80%E6%AC%A1%E9%80%9A%E4%BF%A1"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">2. 核心思路：IP + 端口共同唯一标识一次通信</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-NAT-%E6%8A%80%E6%9C%AF%E7%9A%84%E7%BC%BA%E9%99%B7"><span class="toc-number">1.3.4.</span> <span class="toc-text">4. NAT 技术的缺陷</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F"><span class="toc-number">1.3.5.</span> <span class="toc-text">5. 内网穿透</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-NAT-%E4%B8%8E%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%88%E5%BE%88%E5%AE%B9%E6%98%93%E6%B7%B7%E6%B7%86%EF%BC%89"><span class="toc-number">1.3.6.</span> <span class="toc-text">6. NAT 与代理服务器的区别（很容易混淆）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86-vs-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86"><span class="toc-number">1.3.7.</span> <span class="toc-text">7. 正向代理 vs 反向代理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%AD%A3%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86"><span class="toc-number">1.3.7.1.</span> <span class="toc-text">1. 正反向代理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-FRP-%E7%9A%84%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.3.7.2.</span> <span class="toc-text">2. FRP 的介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-FRP-%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%EF%BC%88%E7%AE%80%E7%9F%AD%E6%AD%A5%E9%AA%A4%EF%BC%89"><span class="toc-number">1.3.7.3.</span> <span class="toc-text">3. FRP 的工作流程（简短步骤）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E6%80%BB%E7%BB%93"><span class="toc-number">1.4.</span> <span class="toc-text">4. 网络协议总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%BA%94%E7%94%A8%E5%B1%82"><span class="toc-number">1.4.1.</span> <span class="toc-text">1. 应用层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BC%A0%E8%BE%93%E5%B1%82"><span class="toc-number">1.4.2.</span> <span class="toc-text">2. 传输层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="toc-number">1.4.3.</span> <span class="toc-text">3. 网络层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">1.4.4.</span> <span class="toc-text">4. 数据链路层</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/41191.html" title="免费白嫖 ChatGPT Go 套餐"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/Jci6x23.png?_r_=cd6ab6d9-777f-ddf2-7e99-67e102f8beb2" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="免费白嫖 ChatGPT Go 套餐"></a><div class="content"><a class="title" href="/posts/41191.html" title="免费白嫖 ChatGPT Go 套餐">免费白嫖 ChatGPT Go 套餐</a><time datetime="2025-11-04T16:00:00.000Z" title="发表于 2025-11-05 00:00:00">2025-11-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/4211.html" title="057 高级 IO 之 epoll 详解与 CMake 入门"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/IB9fMsM.png?_r_=d6cd9a90-ea90-0b4a-bc6c-ade1d1774e6d" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="057 高级 IO 之 epoll 详解与 CMake 入门"></a><div class="content"><a class="title" href="/posts/4211.html" title="057 高级 IO 之 epoll 详解与 CMake 入门">057 高级 IO 之 epoll 详解与 CMake 入门</a><time datetime="2025-10-19T04:00:00.000Z" title="发表于 2025-10-19 12:00:00">2025-10-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/7814.html" title="056 高级 IO"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/0k1JltC.jpeg?_r_=62a2c9b9-baa7-7f9f-8ee4-eedc6c0f4edd" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="056 高级 IO"></a><div class="content"><a class="title" href="/posts/7814.html" title="056 高级 IO">056 高级 IO</a><time datetime="2025-10-14T04:00:00.000Z" title="发表于 2025-10-14 12:00:00">2025-10-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/48372.html" title="055 其他重要协议和技术"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/fETMVUS.jpeg?_r_=7f6981c6-26e1-289f-cab6-5f8b347f400a" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="055 其他重要协议和技术"></a><div class="content"><a class="title" href="/posts/48372.html" title="055 其他重要协议和技术">055 其他重要协议和技术</a><time datetime="2025-10-12T04:00:00.000Z" title="发表于 2025-10-12 12:00:00">2025-10-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/19289.html" title="03 库的操作"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://zycs-img-8kd.pages.dev/v2/PXXdojm.png?_r_=71de36aa-d238-3363-c614-84db659e2c15" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="03 库的操作"></a><div class="content"><a class="title" href="/posts/19289.html" title="03 库的操作">03 库的操作</a><time datetime="2025-10-10T16:00:00.000Z" title="发表于 2025-10-11 00:00:00">2025-10-11</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:hc1960074081@qq.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://weibo.com/u/7913790969" title="微博"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0,500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/minbit.png" size="50px"><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com/1918272544" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2025 By <a class="footer-bar-link" href="/" title="小米里的大麦" target="_blank">小米里的大麦</a></div></div><div id="footer-type-tips"></div><div class="js-pjax"><script>function subtitleType(){fetch("https://v1.hitokoto.cn").then(t=>t.json()).then(t=>{{const e="出自 "+t.from,n=["《左传》载曰：“太上有立德，其次有立功，其次有立言，虽久不废，此之谓不朽。”","纸上得来终觉浅，绝知此事要躬行！","你太专注于未来，却没有意识到，今天正是你多年前祈求的模样，因为你眺望远方视而不见。","梦想是不会发光的，发光的是追梦的你！","《答案在风中飘扬》（Blowing in The Wind）"];n.unshift(t.hitokoto,e),window.typed=new Typed("#footer-type-tips",{strings:n,startDelay:300,typeSpeed:150,loop:!0,backSpeed:50})}})}"function"==typeof Typed?subtitleType():getScript("https://cdn.cbd.int/typed.js@2.1.0/dist/typed.umd.js").then(subtitleType)</script></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="GitHub主页">GitHub主页</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">82</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">24</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">9</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">社交</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="GitHub"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/lollipop.svg" alt="GitHub"><span class="back-menu-item-text">GitHub</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://leetcode.cn/u/nifty-faradayzqn" title="力扣"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/thinking-glass.svg" alt="力扣"><span class="back-menu-item-text">力扣</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://space.bilibili.com/1918272544" title="哔哩哔哩"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/wink.svg" alt="哔哩哔哩"><span class="back-menu-item-text">哔哩哔哩</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://gitee.com/huang-cancan-xbc" title="Gitee"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/laugh.svg" alt="Gitee"><span class="back-menu-item-text">Gitee</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">博客</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.csdn.net/Huangcancan666?type=blog" title="CSDN"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/celebrate.svg" alt="CSDN"><span class="back-menu-item-text">CSDN</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://juejin.cn/user/3230789931118109" title="稀土掘金"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/kiss.svg" alt="稀土掘金"><span class="back-menu-item-text">稀土掘金</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i><span> 统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size:.9em"></i><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i><span> 外链</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i><span> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i><span> 关于本人</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AI/" style="font-size:.88rem">AI<sup>1</sup></a><a href="/tags/C/" style="font-size:.88rem">C++<sup>8</sup></a><a href="/tags/ChatGPT/" style="font-size:.88rem">ChatGPT<sup>1</sup></a><a href="/tags/Git/" style="font-size:.88rem">Git<sup>3</sup></a><a href="/tags/IO/" style="font-size:.88rem">IO<sup>5</sup></a><a href="/tags/Linux/" style="font-size:.88rem">Linux<sup>58</sup></a><a href="/tags/MySQL/" style="font-size:.88rem">MySQL<sup>4</sup></a><a href="/tags/Obsidian/" style="font-size:.88rem">Obsidian<sup>1</sup></a><a href="/tags/Redis/" style="font-size:.88rem">Redis<sup>2</sup></a><a href="/tags/STL/" style="font-size:.88rem">STL<sup>2</sup></a><a href="/tags/VS-Code/" style="font-size:.88rem">VS Code<sup>1</sup></a><a href="/tags/%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1/" style="font-size:.88rem">临时邮箱<sup>1</sup></a><a href="/tags/%E4%BF%A1%E5%8F%B7/" style="font-size:.88rem">信号<sup>3</sup></a><a href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" style="font-size:.88rem">内存管理<sup>1</sup></a><a href="/tags/%E5%8E%86%E7%A8%8B/" style="font-size:.88rem">历程<sup>1</sup></a><a href="/tags/%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4/" style="font-size:.88rem">地址空间<sup>6</sup></a><a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size:.88rem">数学<sup>1</sup></a><a href="/tags/%E6%A8%A1%E6%9D%BF/" style="font-size:.88rem">模板<sup>1</sup></a><a href="/tags/%E7%AE%A1%E9%81%93/" style="font-size:.88rem">管道<sup>2</sup></a><a href="/tags/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/" style="font-size:.88rem">类与对象<sup>3</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size:.88rem">线程<sup>4</sup></a><a href="/tags/%E7%BD%91%E7%AB%99/" style="font-size:.88rem">网站<sup>3</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size:.88rem">网络<sup>11</sup></a><a href="/tags/%E8%BF%9B%E7%A8%8B/" style="font-size:.88rem">进程<sup>15</sup></a></div></div><hr></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="anzhiyu.scrollToDest(document.body.scrollHeight,500)"><i class="anzhiyufont anzhiyu-icon-arrow-down"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span> 数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size:1rem"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display:none"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>var HoldLog=console.log;console.log=function(){};let now1=new Date;queueMicrotask(()=>{const o=function(){HoldLog.apply(console,arguments)},n=new Date("01/01/2025 00:00:00");now1.setTime(now1.getTime()+250);const c=(now1-n)/1e3/60/60/24,e=["这里是 小米里的大麦","芝兰生于深谷，不以无人而不芳。","\n        \n       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗\n      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║\n      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║\n      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║\n      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝\n      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝\n        \n        ","已上线",Math.floor(c),"天","©2025 By 安知鱼 V1.6.14"],t=["NCC2-036","调用前置摄像头拍照成功，识别为【小笨蛋】.","Photo captured: ","🤪"];setTimeout(o.bind(console,`\n%c${e[0]} %c ${e[1]} %c ${e[2]} %c${e[3]}%c ${e[4]}%c ${e[5]}\n\n%c ${e[6]}\n`,"color:#425AEF","","color:#425AEF","color:#425AEF","","color:#425AEF","")),setTimeout(o.bind(console,`%c ${t[0]} %c ${t[1]} %c \n${t[2]} %c\n${t[3]}\n`,"color:white; background-color:#4fd953","","",'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%')),setTimeout(o.bind(console,"%c WELCOME %c 你好，小笨蛋.","color:white; background-color:#4f90d9","")),setTimeout(console.warn.bind(console,"%c ⚡ Powered by 安知鱼 %c 你正在访问 小米里的大麦 的博客.","color:white; background-color:#f0ad4e","")),setTimeout(o.bind(console,"%c W23-12 %c 你已打开控制台.","color:white; background-color:#4f90d9","")),setTimeout(console.warn.bind(console,"%c S013-782 %c 你现在正处于监控中.","color:white; background-color:#d9534f",""))})</script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(()=>{const t=()=>{"object"==typeof twikoo?setTimeout(o,0):getScript("https://cdn.cbd.int/twikoo@1.6.44/dist/twikoo.all.min.js").then(o)},o=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo.minbit.top/",path:location.pathname.replace(/index\.html$/,""),region:"ap-shanghai",onCommentLoaded:()=>{anzhiyu.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null)),GLOBAL_CONFIG_SITE.isPost&&(()=>{const t=document.getElementById("twikoo-count");t&&twikoo.getCommentsCount({envId:"https://twikoo.minbit.top/",region:"ap-shanghai",urls:[window.location.pathname],includeReply:!1}).then(o=>{t.textContent=o[0].count}).catch(t=>{console.error(t)})})()};anzhiyu.loadComment(document.getElementById("twikoo-wrap"),t)})()</script><input type="hidden" name="page-type" id="page-type" value="post"><script async src="/js/anzhiyu/comment_barrage.js"></script></div><script>window.addEventListener("load",()=>{const e=e=>{let t="";if(e.length)for(let n=0;n<e.length;n++){t+="<div class='aside-list-item'>";{const a="data-lazy-src";t+=`<a href='${e[n].url}' class='thumbnail'><img ${a}='${e[n].avatar}' alt='${e[n].nick}'><div class='name'><span>${e[n].nick} </span></div></a>`}t+=`<div class='content'>\n        <a class='comment' href='${e[n].url}' title='${e[n].content}'>${e[n].content}</a>\n        <time datetime="${e[n].date}">${anzhiyu.diffDate(e[n].date,!0)}</time></div>\n        </div>`}else t+="没有评论";let n=document.querySelector("#card-newest-comments .aside-list");n&&(n.innerHTML=t),window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(n)},t=()=>{if(document.querySelector("#card-newest-comments .aside-list")){const t=saveToLocal.get("twikoo-newest-comments");t?e(JSON.parse(t)):(()=>{const t=()=>{twikoo.getRecentComments({envId:"https://twikoo.minbit.top/",region:"ap-shanghai",pageSize:6,includeReply:!0}).then((function(t){const n=t.map(e=>{return{content:(t=e.comment,""===t||(t=(t=(t=(t=t.replace(/<img.*?src="(.*?)"?[^\>]+>/gi,"[图片]")).replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,"[链接]")).replace(/<pre><code>.*?<\/pre>/gi,"[代码]")).replace(/<[^>]+>/g,"")).length>150&&(t=t.substring(0,150)+"..."),t),avatar:e.avatar,nick:e.nick,url:e.url+"#"+e.id,date:new Date(e.created).toISOString()};var t});saveToLocal.set("twikoo-newest-comments",JSON.stringify(n),10/1440),e(n)})).catch((function(e){document.querySelector("#card-newest-comments .aside-list").textContent="无法获取评论，请确认相关配置是否正确"}))};"object"==typeof twikoo?t():getScript("https://cdn.cbd.int/twikoo@1.6.44/dist/twikoo.all.min.js").then(t)})()}};t(),document.addEventListener("pjax:complete",t)})</script><script async data-pjax src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail="xiaomilidedamai@minbit.top"</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://cdn.cbd.int/qrcodejs@1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script src="https://cdn.bootcdn.net/ajax/libs/echarts/4.9.0-rc.1/echarts.min.js"></script><script src="/js/footer-animal.js" defer></script><script id="click-show-text" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="false" data-text="offer,暴富,健康,offer,喜乐,成功,offer,好运,自由,offer,坚持,上岸" data-fontsize="20px" data-random="true" async></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors=['meta[property="og:image"]','meta[property="og:title"]','meta[property="og:url"]','meta[property="og:type"]','meta[property="og:site_name"]','meta[property="og:description"]',"head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(anzhiyu.removeGlobalFnEvent("pjax"),anzhiyu.removeGlobalFnEvent("themeChange"),document.getElementById("rightside").classList.remove("rightside-show"),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()})),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async data-pjax src="//npm.elemecdn.com/penndu@1.0.0/bsz.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script><script>window.addEventListener("load",()=>{const t=()=>{if(!window.location.pathname.startsWith("/comments/"))return;const t=async()=>{const t=new EasyDanmaku({page:"/comments/",el:"#danmu-wrap",line:5,speed:20,hover:!0,loop:!1,colourful:!0,coefficient:1.38,runtime:10});try{let a=saveToLocal.get("twikoo-danmu");if(a)t.batchSend(a,!0);else{const n={method:"POST",body:JSON.stringify({event:"GET_RECENT_COMMENTS",includeReply:!1,pageSize:100}),headers:{"Content-Type":"application/json"}};a=[];const o=await fetch("https://twikoo.minbit.top/",n);if(o.ok){const{data:n}=await o.json();n.forEach(t=>{null==t.avatar&&(t.avatar="https://cravatar.cn/avatar/d615d5793929e8c7d70eab5f00f7f5f1?d=mp"),a.push({avatar:t.avatar,content:t.nick+"："+e(t.comment),url:t.url+"#"+t.id})}),t.batchSend(a,!0),saveToLocal.set("twikoo-danmu",a,.5)}function e(t){return t=(t=(t=(t=(t=t.replace(/<\/*br>|[\s\uFEFF\xA0]+/g,"")).replace(/<img.*?>/g,"[图片]")).replace(/<a.*?>.*?<\/a>/g,"[链接]")).replace(/<pre.*?>.*?<\/pre>/g,"[代码块]")).replace(/<.*?>/g,"")}}}catch(t){console.error("Error fetching data:",t)}document.getElementById("danmu-Btn")&&(document.getElementById("danmu-Btn").innerHTML="<button class=\"hide-Btn\" onclick=\"document.getElementById('danmu-wrap').classList.remove('hide-danmu')\">显示弹幕</button> <button class=\"hide-Btn\" onclick=\"document.getElementById('danmu-wrap').classList.add('hide-danmu')\">隐藏弹幕</button>")};(async()=>{if("function"==typeof EasyDanmaku)await t();else{await getScript("https://npm.onmicrosoft.cn/naokuo-blog@1.2.12/js/easy-Danmaku.js");"function"==typeof EasyDanmaku?await t():console.error("EasyDanmaku function not found even after loading the script.")}})()};t(),document.addEventListener("pjax:complete",t)})</script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>