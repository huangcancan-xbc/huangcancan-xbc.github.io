<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>08 表的增删改查下 | 小米里的大麦</title><meta name="keywords" content="MySQL"><meta name="author" content="小米里的大麦"><meta name="copyright" content="小米里的大麦"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="08 表的增删改查下"><meta name="application-name" content="08 表的增删改查下"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="08 表的增删改查下"><meta property="og:url" content="https://www.minbit.top/posts/39993.html"><meta property="og:site_name" content="小米里的大麦"><meta property="og:description" content="表的增删改查下1. update（修改）1. 语法UPDATE 用于修改已有数据，必须配合 WHERE 精确更新；并发场景下要用原子更新和事务，避免先查再改。 1234UPDATE 表名SET 列1 &amp;#x3D; 值1,    列2 &amp;#x3D; 值2WHERE 条件;  注意：UPDATE 会对 WHERE 条件匹配"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://image-kcm.pages.dev/v2/TISblXc.png?_r_=784b23fb-15a7-eb8f-33eb-0d96dfe181cb"><meta property="article:author" content="小米里的大麦"><meta property="article:tag" content="技术博客,Linux,C++,后端开发,编程学习,个人博客,技术分享"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://image-kcm.pages.dev/v2/TISblXc.png?_r_=784b23fb-15a7-eb8f-33eb-0d96dfe181cb"><meta name="description" content="表的增删改查下1. update（修改）1. 语法UPDATE 用于修改已有数据，必须配合 WHERE 精确更新；并发场景下要用原子更新和事务，避免先查再改。 1234UPDATE 表名SET 列1 &amp;#x3D; 值1,    列2 &amp;#x3D; 值2WHERE 条件;  注意：UPDATE 会对 WHERE 条件匹配"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "08 表的增删改查下",
  "description": "表的增删改查下1. update（修改）1. 语法UPDATE 用于修改已有数据，必须配合 WHERE 精确更新；并发场景下要用原子更新和事务，避免先查再改。 1234UPDATE 表名SET 列1 &#x3D; 值1,    列2 &#x3D; 值2WHERE 条件;  注意：UPDATE 会对 WHERE 条件匹配",
  "image": "https://image-kcm.pages.dev/v2/TISblXc.png?_r_=784b23fb-15a7-eb8f-33eb-0d96dfe181cb",
  "datePublished": "2025-12-12T16:00:00.000Z",
  "dateModified": "2025-12-16T02:10:00.000Z",
  "author": {
    "@type": "Person",
    "name": "小米里的大麦",
    "url": "https://www.minbit.top"
  },
  "publisher": {
    "@type": "Organization",
    "name": "小米里的大麦",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.minbit.top/img/Profile%20picture.png"
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.minbit.top/posts/39993.html"
  },
  "keywords": "MySQL"
}</script><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "首页",
      "item": "https://www.minbit.top"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "08 表的增删改查下",
      "item": "https://www.minbit.top/posts/39993.html"
    }
  ]
}</script><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "小米里的大麦",
  "url": "https://www.minbit.top",
  "image": "https://www.minbit.top/img/Profile%20picture.png",
  "description": "时间好像总会留下点什么，或许是一个人，或许是一个梦，或许……是一段有意义的经历~"
}</script><link rel="shortcut icon" href="/img/icons/funny.svg"><link rel="canonical" href="https://www.minbit.top/posts/39993.html"><link rel="preconnect" href="//cdn.cbd.int"><link rel="preconnect" href="//bsz.dusays.com:9001"><meta name="google-site-verification" content="xxx"><meta name="baidu-site-verification" content="code-xxx"><meta name="msvalidate.01" content="xxx"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="var(--anzhiyu-main)"><link rel="mask-icon" href="/img/siteicon/apple-icon-180.png" color="#5bbad5"><link rel="apple-touch-icon" sizes="180x180" href="/img/siteicon/apple-icon-180.png"><link rel="apple-touch-icon-precomposed" sizes="180x180" href="/img/siteicon/apple-icon-180.png"><link rel="icon" type="image/png" sizes="32x32" href="/img/siteicon/32.png"><link rel="icon" type="image/png" sizes="16x16" href="/img/siteicon/16.png"><link rel="bookmark" href="/img/siteicon/apple-icon-180.png"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-2732.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2732-2048.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2388.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2388-1668.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1536-2048.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-1536.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2224.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2224-1668.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1620-2160.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2160-1620.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1290-2796.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2796-1290.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1179-2556.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2556-1179.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1284-2778.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2778-1284.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1170-2532.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2532-1170.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1125-2436.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2436-1125.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2688.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2688-1242.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-828-1792.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1792-828.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2208.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2208-1242.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-750-1334.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1334-750.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-640-1136.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1136-640.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@6.1.6/dist/fancybox/fancybox.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={linkPageTop:{enable:!0,title:"友链 + 外链 + 无限进步！欢迎欣赏和贡献！",addFriendPlaceholder:"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},peoplecanvas:void 0,postHeadAiDescription:{enable:!0,gptName:"小米里的大麦",mode:"local",switchBtn:!1,btnLink:"https://afdian.net/item/886a79d4db6711eda42a52540025c377",randomNum:4,basicWordCount:1999,key:"93d1622eadde491eb0594b68ade51723.kaEiDD6A3KPzb7xv",Referer:"https://www.minbit.top/"},diytitle:{enable:!0,leaveTitle:"w(ﾟДﾟ)w 不要走！再看看嘛！",backTitle:"♪(^∇^*)欢迎肥来！"},LA51:{enable:!0,ck:"Jp8wwGQpp21utaFQ",LingQueMonitorID:"Jp8ztDRrxmTf7LDj"},greetingBox:{enable:!0,default:"晚上好👋",list:[{greeting:"晚安😴",startTime:0,endTime:5},{greeting:"早上好鸭👋, 祝你一天好心情！",startTime:6,endTime:9},{greeting:"上午好👋, 状态很好，鼓励一下～",startTime:10,endTime:10},{greeting:"11点多啦, 在坚持一下就吃饭啦～",startTime:11,endTime:11},{greeting:"午安👋, 宝贝",startTime:12,endTime:14},{greeting:"🌈充实的一天辛苦啦！",startTime:14,endTime:18},{greeting:"19点喽, 奖励一顿丰盛的大餐吧🍔。",startTime:19,endTime:19},{greeting:"晚上好👋, 在属于自己的时间好好放松😌~",startTime:20,endTime:24}]},twikooEnvId:"https://twikoo.minbit.top/",commentBarrageConfig:{enable:!0,maxBarrage:10,barrageTime:5e3,accessToken:"25c96851dd8a790c4819ad4bfbaf153c",mailMd5:"7b12ebc2be80f9159099f6ab0e16573c"},music_page_default:"nav_music",root:"/",preloader:{source:3},friends_vue_info:void 0,navMusic:!0,mainTone:{mode:"both",api:"https://img2color-go.vercel.app/api?img=",cover_change:!0},authorStatus:{skills:["🧐 准备中，就快好了，真的！😭","📚 正在学习中，加油！","🎵 喜欢听音乐，喜欢看动漫"]},algolia:void 0,localSearch:{path:"/search.xml",preload:!0,languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简",rightMenuMsgToTraditionalChinese:"转为繁体",rightMenuMsgToSimplifiedChinese:"转为简体"},noticeOutdate:{limitDay:365,position:"top",messagePrev:"距上次更新已过去",messageNext:"天了，这篇文章的内容可能已经过时了。"},highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:330},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,simplehomepage:!1,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{copy:!0,copyrightEbable:!0,limitCount:150,languages:{author:"作者: 小米里的大麦",link:"链接: ",source:"来源: 小米里的大麦",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。",copySuccess:"复制成功，复制和转载请标注本文地址"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#425AEF",bgDark:"#1f1f1f",position:"top-right"},source:{justifiedGallery:{js:"https://cdn.cbd.int/flickr-justified-gallery@2.2.0/dist/fjGallery.min.js",css:"https://cdn.cbd.int/flickr-justified-gallery@2.2.0/dist/fjGallery.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1,shortcutKey:void 0,autoDarkmode:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={configTitle:"小米里的大麦",title:"08 表的增删改查下",postAI:"这篇文章讲述了表的增删改查操作，重点介绍了如何使用UPDATE语句修改已有数据，包括按主键更新、更新单个字段、条件更新多行、自增自减更新以及使用表达式和子查询更新数据。文章还讨论了DELETE语句按条件删除数据以及TRUNCATE语句快速清空表数据的特点和用法。此外，文章还介绍了如何使用INSERT INTO SELECT语句插入查询结果，以及如何处理主键或唯一键冲突的情况。最后，文章详细解释了聚合函数如COUNT、SUM、AVG、MAX和MIN的使用，以及分组查询和HAVING语句的语法和示例。",pageFillDescription:"表的增删改查下, 1. update（修改）, 1. 语法, 2. 示例, 1. 按主键更新（常用、安全）, 2. 更新单个字段, 3. 条件更新多行, 4. 自增 x2F 自减更新（高频）, 5. UPDATE + 表达式（能用但要小心）, 3. UPDATE + 子查询（常见）, 1. 用查询结果更新, 2. UPDATE JOIN（非常常用）, 2. Delete（删除）, 1. DELETE 删除数据, 1. 语法, 2. 示例, 1. 按条件删除（常用）, 2. 批量删除多行, 3. DELETE + LIMIT（MySQL 特有）, 2. TRUNCATE 截断表（清空表数据）, 1. 语法, 2. 示例, 3. 插入查询结果, 1. 语法, 2. 示例, 1. 把一张表的数据复制到另一张表, 2. 按条件插入, 3. 插入计算后的结果, 4. 从多表查询结果插入（JOIN、进阶）, 3. INSERT SELECT 和普通 INSERT 的区别, 4. 和主键 x2F 唯一键冲突怎么办？, 1. 冲突就失败（默认）, 2. 忽略冲突行（不推荐滥用）, 3. 冲突就更新（常用）, 4. 聚合函数, 1. 常见聚合函数一览, 1. COUNT（计数、常用）, 2. SUM（求和）, 3. AVG（平均值）, 4. MAX x2F MIN（最大最小）, 5. 示例, 2. 聚合 + WHERE（常见）, 5. 分组查询, 1. 语法, 2. 示例, 1. 按某个字段分组统计数量, 2. 分组 + WHERE（常见）, 3. 分组 + 多个聚合函数, 3. GROUP BY, 1. 错误示例, 2. 正确使用, 4. GROUP BY 多列分组（实用）, 5. HAVING —— 分组后的 WHERE, 1. 为什么需要 HAVING？, 2. WHERE vs HAVING, 3. 示例表的增删改查下修改语法用于修改已有数据必须配合精确更新并发场景下要用原子更新和事务避免先查再改表名列值列值条件注意会对条件匹配到的所有行统一执行同一套修改匹配多少行就改多少行没有全表修改极其危险示例按主键更新常用安全按主键更新常用安全通过主键精准定位只改行张三把改成张三把改成只改的所有行更新单个字段更新单个字段只修改一个字段的值仅把改成只改的所有行条件更新多行找出所有最后登录时间早于的用户把它们的全部改成自增自减更新高频用当前值减直接更新用当前值加直接更新注意不要先查值再并发场景会出错表达式能用但要小心注意中写表达式没问题中尽量别对列做计算子查询常见用查询结果更新把改成只改在子查询结果里的行子查询取表中的非常常用关联两张表基于关联条件更新给表起别名关联和表通过匹配把表的改成只改关联到的用户是的订单作用把所有用户的订单状态设为删除按条件删行可回滚可触发器慢但安全一刀清空整张表不可回滚极快危险删除数据语法表名条件注意没有清空全表数据示例按条件删除常用删除表中所有的行如果是主键只会删行批量删除多行删除表中所有年龄等于的行特有操作表按创建时间排序默认升序即最早的记录在前只删除前条用途分批清理数据防止一次删太多锁表截断表清空表数据语法表名用于想要快速清空全表不要数据清空表数据但不删除表的场景对比截断表删除操作类型数据定义语言数据操作语言能否回滚不支持执行后无法恢复数据支持事务中可回滚清空效率极高直接重置表不记录单行操作低逐行删除记录日志自增主键重置为初始值如自增回到保留原自增最大值如从继续适用场景彻底清空表无需恢复追求速度条件删除部分删除需可控可回滚示例创建表为自增主键为字符串字段插入条数据自动从开始递增张三李四王五查看表所有数据依次为张三李四王五截断表清空所有数据保留表结构自增主键重置查看截断后的表无数据重新插入条数据自增从重新开始赵六孙奇查看重新插入后的数据为赵六孙奇插入查询结果插入查询结果用意思是把查出来的结果直接插入到另一张表效率高常用于数据迁移和批量插入但要求列数和类型严格匹配而且是一条原子操作中途出错整条语句失败不会插一半语法插入查询结果的基本用法模板目标表列列列列来源表条件插入查询结果表示查什么就插入什么示例把一张表的数据复制到另一张表把表里的的数据全部复制到表不过需要注意两边列的数量和类型要对得上顺序按的列顺序来按条件插入把的用户插入到表中插入计算后的结果说明里可以是表达式插入的是计算结果所以这条语句的意思是从表中读取所有行的并把得到新值把这些新值插入到表中对应对应从多表查询结果插入进阶关联查询批量插入从表和表关联查询数据再插回表往表的字段插入数据取表别名的表别名的数据源表起别名关联表别名和普通的区别手写值一次一行少量来源是查询结果可一次插成千上万行效率高和主键唯一键冲突怎么办冲突就失败默认如果已存在直接报错整条失败忽略冲突行不推荐滥用冲突的行被跳过不报错容易悄悄丢数据冲突就更新常用有就更新没有就插入聚合函数聚合函数可以把多行数据计算成一个结果常与和配合使用负责聚合前过滤负责聚合后过滤常见聚合函数一览函数作用解释计数有多少行求和数字加起来平均值求平均最大值找最大的最小值找最小的计数常用统计表一共有多少行数据会统计列名不会统计只统计不为的行数求和列名把表中所有的加和注意列必须是数字会被自动忽略平均值列名统计表中所有年龄的平均值注意不参与计算返回值可能是小数最大最小找出表中最大和最小年龄示例查看表所有数据张三李四李四王五小明小红红我已修改李四李四统计表中字段的非空行数即表的总记录数共条记录计算表中所有字段值的总和计算表中字段的平均值保留位小数同时查询表中字段的最大值和最小值最大值最小值聚合常见分组查询分组查询就是把查询结果按某个字段分成一组一组的然后每组算一次语法分组列聚合函数表条件分组列执行顺序先筛选行再分组聚合函数每组算一次对分组后的结果筛选排序分页示例按某个字段分组统计数量按字段分组统计每个年龄的人数查值用统计每组的行数别名查的是表按字段分组相同的行是一组分组常见先找的用户再按分组统计查统计每组行数别名查的是表先找出的行再按分组分组多个聚合函数按班级分组展示班级统计每个班级的学生总数别名计算每个班级学生的年龄总和别名找出每个班级学生的最大年龄别名学生表按班级分组同一班级的学生归为一组非聚合列比如是直接从表中取的字段不是聚合计算的结果聚合列比如是对一组数据计算后的结果里出现的非聚合列必须出现在中中出现的非聚合列直接取的学生班级字段如必须出现在里只有聚合列等计算结果可以不出现在里这句话可能不要好理解说白了就是只要里所有直接抄的字段非聚合列在后面中出现就合法不管聚合列有个还是个都绝对安全反之哪怕只漏个非聚合列就会报错出脏数据错误示例错误写法里有两个非聚合列但只写了非聚合列非聚合列未出现在聚合列统计人数仅按班级分组原因同一个可能有多条不知道该选哪一个正确使用是分组依据非聚合列出现在里是对每个班级的学生数做聚合计算不需要非聚合列出现在作为分组依据聚合列无需在分组依据班级或者和都是非聚合列且都出现在里会按班级性别组合分组比如班男为一组非聚合列加入非聚合列加入聚合列所有非聚合列都在多列分组实用先按分再按年龄分分组后的为什么需要是对分组后的结果进行筛选过滤掉不满足条件的分组搭配使用分组前只保留年龄的学生分组后只保留学生数的班级对比筛选时机分组之前筛选行分组之后筛选分组作用对象原始行比如单个学生分组结果比如整个班级是否依赖不需要可单独用必须搭配使用能否用聚合函数不能只能用原始字段如能可以用聚合函数如示例步骤按班级分组统计人数步骤过滤出人数的班级步骤对过滤后的结果排序步骤按班级性别分组统计步骤过滤出人数的分组步骤对过滤后的结果排序",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2025-12-16 10:10:00",postMainColor:""}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:(e,t,a)=>{if(0===a)return;const o={value:t,expiry:Date.now()+864e5*a};localStorage.setItem(e,JSON.stringify(o))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const a=JSON.parse(t);if(!(Date.now()>a.expiry))return a.value;localStorage.removeItem(e)}},e.getScript=(e,t={})=>new Promise((a,o)=>{const c=document.createElement("script");c.src=e,c.async=!0,c.onerror=o,c.onload=c.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(c.onload=c.onreadystatechange=null,a())},Object.keys(t).forEach(e=>{c.setAttribute(e,t[e])}),document.head.appendChild(c)}),e.getCSS=(e,t=!1)=>new Promise((a,o)=>{const c=document.createElement("link");c.rel="stylesheet",c.href=e,t&&(c.id=t),c.onerror=o,c.onload=c.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(c.onload=c.onreadystatechange=null,a())},document.head.appendChild(c)}),e.activateDarkMode=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#18171d")},e.activateLightMode=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#f7f9fe")};const t=saveToLocal.get("theme"),a=window.matchMedia("(prefers-color-scheme: dark)").matches,o=window.matchMedia("(prefers-color-scheme: light)").matches,c=window.matchMedia("(prefers-color-scheme: no-preference)").matches,n=!a&&!o&&!c;if(void 0===t){if(o)activateLightMode();else if(a)activateDarkMode();else if(c||n){const e=(new Date).getHours();e<=10||e>=20?activateDarkMode():activateLightMode()}window.matchMedia("(prefers-color-scheme: dark)").addListener(e=>{void 0===saveToLocal.get("theme")&&(e.matches?activateDarkMode():activateLightMode())})}else"light"===t?activateLightMode():activateDarkMode();const d=saveToLocal.get("aside-status");void 0!==d&&("hide"===d?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/custom/css/font.css"><link rel="stylesheet" href="/custom/css/bilibili.css"><meta name="generator" content="Hexo 8.1.1"><link rel="alternate" href="/atom.xml" title="小米里的大麦" type="application/atom+xml">
</head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/img/Profile%20picture.png"><div class="loading-image-dot"></div></div></div><script>const preloader={endLoading:()=>{document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",()=>{preloader.endLoading()}),setTimeout((function(){preloader.endLoading()}),1e4),document.addEventListener("pjax:send",()=>{preloader.initLoading()}),document.addEventListener("pjax:complete",()=>{preloader.endLoading()})</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"><script async src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">社交</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="GitHub"><img class="back-menu-item-icon" src="/img/icons/lollipop.svg" alt="GitHub"><span class="back-menu-item-text">GitHub</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://space.bilibili.com/1918272544" title="哔哩哔哩"><img class="back-menu-item-icon" src="/img/icons/wink.svg" alt="哔哩哔哩"><span class="back-menu-item-text">哔哩哔哩</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://gitee.com/huang-cancan-xbc" title="Gitee"><img class="back-menu-item-icon" src="/img/icons/laugh.svg" alt="Gitee"><span class="back-menu-item-text">Gitee</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">博客</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.csdn.net/Huangcancan666?type=blog" title="CSDN"><img class="back-menu-item-icon" src="/img/icons/celebrate.svg" alt="CSDN"><span class="back-menu-item-text">CSDN</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://juejin.cn/user/3230789931118109" title="稀土掘金"><img class="back-menu-item-icon" src="/img/icons/kiss.svg" alt="稀土掘金"><span class="back-menu-item-text">稀土掘金</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">算法</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://leetcode.cn/u/nifty-faradayzqn" title="力扣"><img class="back-menu-item-icon" src="/img/icons/thinking-glass.svg" alt="力扣"><span class="back-menu-item-text">力扣</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/profile/517073385" title="牛客"><img class="back-menu-item-icon" src="/img/icons/think.svg" alt="牛客"><span class="back-menu-item-text">牛客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.luogu.com.cn/user/1367427" title="洛谷"><img class="back-menu-item-icon" src="/img/icons/funny.svg" alt="洛谷"><span class="back-menu-item-text">洛谷</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">小米里的大麦</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i><span> 统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size:.9em"></i><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i><span> 外链</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i><span> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i><span> 关于本人</span></a></li></ul></div></div></div><div id="nav-right"><div id="nav-naoDark"><div class="container"><div class="components"><div class="main-button"><div class="moon"></div><div class="moon"></div><div class="moon"></div></div><div class="daytime-backgrond"></div><div class="daytime-backgrond"></div><div class="daytime-backgrond"></div><div class="cloud"><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div></div><div class="cloud-light"><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div><div class="cloud-son"></div></div><div class="stars"><div class="star big"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star big"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star medium"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star medium"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star small"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div><div class="star small"><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div><div class="star-son"></div></div></div></div></div></div><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole()"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/img/wechat.webp" target="_blank"><img class="post-qr-code-img" alt="微信" src="/img/wechat.webp"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay.webp" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="/img/alipay.webp"></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title">最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AI/" style="font-size:1.05rem">AI<sup>2</sup></a><a href="/tags/C/" style="font-size:1.05rem">C++<sup>11</sup></a><a href="/tags/Git/" style="font-size:1.05rem">Git<sup>3</sup></a><a href="/tags/IO/" style="font-size:1.05rem">IO<sup>5</sup></a><a href="/tags/Linux/" style="font-size:1.05rem">Linux<sup>59</sup></a><a href="/tags/MySQL/" style="font-size:1.05rem">MySQL<sup>9</sup></a><a href="/tags/Redis/" style="font-size:1.05rem">Redis<sup>2</sup></a><a href="/tags/STL/" style="font-size:1.05rem">STL<sup>2</sup></a><a href="/tags/VS-Code/" style="font-size:1.05rem">VS Code<sup>1</sup></a><a href="/tags/%E4%BF%A1%E5%8F%B7/" style="font-size:1.05rem">信号<sup>3</sup></a><a href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" style="font-size:1.05rem">内存管理<sup>1</sup></a><a href="/tags/%E5%8E%86%E7%A8%8B/" style="font-size:1.05rem">历程<sup>2</sup></a><a href="/tags/%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4/" style="font-size:1.05rem">地址空间<sup>6</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size:1.05rem">工具<sup>4</sup></a><a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size:1.05rem">数学<sup>1</sup></a><a href="/tags/%E6%A8%A1%E6%9D%BF/" style="font-size:1.05rem">模板<sup>1</sup></a><a href="/tags/%E7%81%B5%E5%85%89%E8%8D%9F%E8%90%83/" style="font-size:1.05rem">灵光荟萃<sup>3</sup></a><a href="/tags/%E7%AE%A1%E9%81%93/" style="font-size:1.05rem">管道<sup>2</sup></a><a href="/tags/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/" style="font-size:1.05rem">类与对象<sup>3</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size:1.05rem">线程<sup>5</sup></a><a href="/tags/%E7%BD%91%E7%AB%99/" style="font-size:1.05rem">网站<sup>3</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size:1.05rem">网络<sup>11</sup></a><a href="/tags/%E8%BF%9B%E7%A8%8B/" style="font-size:1.05rem">进程<sup>15</sup></a></div></div><hr></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多"> <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2026/01/"><span class="card-archive-list-date">一月 2026</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/12/"><span class="card-archive-list-date">十二月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/11/"><span class="card-archive-list-date">十一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/10/"><span class="card-archive-list-date">十月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">15</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">九月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/08/"><span class="card-archive-list-date">八月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/07/"><span class="card-archive-list-date">七月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/06/"><span class="card-archive-list-date">六月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>篇</span></div></a></li></ul></div><hr></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/MySQL/" itemprop="url">MySQL</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/MySQL/" tabindex="-1" itemprop="url"> <span><i class="anzhiyufont anzhiyu-icon-hashtag"></i>MySQL</span></a></span></div></div><h1 class="post-title" itemprop="name headline">08 表的增删改查下</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-12-12T16:00:00.000Z" title="发表于 2025-12-13 00:00:00">2025-12-13</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-12-16T02:10:00.000Z" title="更新于 2025-12-16 10:10:00">2025-12-16</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">3.3k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>12分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" data-flag-title="08 表的增删改查下"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator"> </span><span class="post-meta-position" title="作者IP属地为西安"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>西安</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://image-kcm.pages.dev/v2/TISblXc.png?_r_=784b23fb-15a7-eb8f-33eb-0d96dfe181cb"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><div class="post-ai-description"><div class="ai-title"><i class="anzhiyufont anzhiyu-icon-bilibili"></i><div class="ai-title-text">AI-摘要</div><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i><i class="anzhiyufont anzhiyu-icon-circle-dot" title="朗读摘要"></i><div id="ai-tag">小米里的大麦 GPT</div></div><div class="ai-explanation">AI初始化中...</div><div class="ai-btn-box"><div class="ai-btn-item">介绍自己 🙈</div><div class="ai-btn-item">生成本文简介 👋</div><div class="ai-btn-item">推荐相关文章 📖</div><div class="ai-btn-item">前往主页 🏠</div><div class="ai-btn-item" id="go-tianli-blog">前往爱发电购买</div></div><script data-pjax src="/js/anzhiyu/ai_abstract.js"></script></div><article class="post-content" id="article-container" itemscope itemtype="https://www.minbit.top/posts/39993.html"><header><a class="post-meta-categories" href="/categories/MySQL/" itemprop="url">MySQL</a><a href="/tags/MySQL/" tabindex="-1" itemprop="url">MySQL</a><h1 id="CrawlerTitle" itemprop="name headline">08 表的增删改查下</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">小米里的大麦</span><time itemprop="dateCreated datePublished" datetime="2025-12-12T16:00:00.000Z" title="发表于 2025-12-13 00:00:00">2025-12-13</time><time itemprop="dateCreated datePublished" datetime="2025-12-16T02:10:00.000Z" title="更新于 2025-12-16 10:10:00">2025-12-16</time></header><h1 id="表的增删改查下"><a href="#表的增删改查下" class="headerlink" title="表的增删改查下"></a>表的增删改查下</h1><h2 id="1-update（修改）"><a href="#1-update（修改）" class="headerlink" title="1. update（修改）"></a>1. update（修改）</h2><h3 id="1-语法"><a href="#1-语法" class="headerlink" title="1. 语法"></a>1. 语法</h3><p>UPDATE 用于修改已有数据，必须配合 WHERE 精确更新；并发场景下要用原子更新和事务，避免先查再改。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> 表名</span><br><span class="line"><span class="keyword">SET</span> 列<span class="number">1</span> <span class="operator">=</span> 值<span class="number">1</span>,</span><br><span class="line">    列<span class="number">2</span> <span class="operator">=</span> 值<span class="number">2</span></span><br><span class="line"><span class="keyword">WHERE</span> 条件;</span><br></pre></td></tr></table></figure><p><strong>注意：UPDATE 会对 <code>WHERE</code> 条件匹配到的「所有行」，统一执行同一套修改，匹配多少行，就改多少行。没有 WHERE &#x3D; 全表修改（极其危险）。</strong></p><h3 id="2-示例"><a href="#2-示例" class="headerlink" title="2. 示例"></a>2. 示例</h3><h4 id="1-按主键更新（常用、安全）"><a href="#1-按主键更新（常用、安全）" class="headerlink" title="1. 按主键更新（常用、安全）"></a>1. 按主键更新（常用、安全）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 按主键更新（常用、安全）：通过主键id精准定位，只改<span class="number">1</span>行</span><br><span class="line"><span class="keyword">UPDATE</span> users</span><br><span class="line"><span class="keyword">SET</span> name <span class="operator">=</span> <span class="string">&#x27;张三&#x27;</span>,  # 把name改成“张三”</span><br><span class="line">    age <span class="operator">=</span> <span class="number">20</span>       # 把age改成<span class="number">20</span></span><br><span class="line"><span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;      # 只改id<span class="operator">=</span><span class="number">1</span>的所有行</span><br></pre></td></tr></table></figure><h4 id="2-更新单个字段"><a href="#2-更新单个字段" class="headerlink" title="2. 更新单个字段"></a>2. 更新单个字段</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 更新单个字段：只修改一个字段的值</span><br><span class="line"><span class="keyword">UPDATE</span> users</span><br><span class="line"><span class="keyword">SET</span> age <span class="operator">=</span> <span class="number">18</span>       # 仅把age改成<span class="number">18</span></span><br><span class="line"><span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">100</span>;    # 只改id<span class="operator">=</span><span class="number">100</span>的所有行</span><br></pre></td></tr></table></figure><h4 id="3-条件更新多行"><a href="#3-条件更新多行" class="headerlink" title="3. 条件更新多行"></a>3. 条件更新多行</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 找出 所有最后登录时间早于 <span class="number">2025</span><span class="number">-01</span><span class="number">-01</span> 的用户，把它们的 id 全部改成 <span class="number">0</span></span><br><span class="line"><span class="keyword">UPDATE</span> users</span><br><span class="line"><span class="keyword">SET</span> id <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">WHERE</span> last_login <span class="operator">&lt;</span> <span class="string">&#x27;2025-01-01&#x27;</span>;</span><br></pre></td></tr></table></figure><h4 id="4-自增-自减更新（高频）"><a href="#4-自增-自减更新（高频）" class="headerlink" title="4. 自增 &#x2F; 自减更新（高频）"></a>4. 自增 &#x2F; 自减更新（高频）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> t1</span><br><span class="line"><span class="keyword">SET</span> cnt <span class="operator">=</span> cnt <span class="operator">-</span> <span class="number">1</span>	# 用当前cnt值减<span class="number">1</span>，直接更新</span><br><span class="line"><span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> t2</span><br><span class="line"><span class="keyword">SET</span> new_count <span class="operator">=</span> new_count <span class="operator">+</span> <span class="number">1</span>	# 用当前new_count值加<span class="number">1</span>，直接更新</span><br><span class="line"><span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">5</span>;</span><br></pre></td></tr></table></figure><p><strong>注意：不要先 SELECT 查值再 UPDATE（并发场景会出错）。</strong></p><h4 id="5-UPDATE-表达式（能用但要小心）"><a href="#5-UPDATE-表达式（能用但要小心）" class="headerlink" title="5. UPDATE + 表达式（能用但要小心）"></a>5. UPDATE + 表达式（能用但要小心）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> users</span><br><span class="line"><span class="keyword">SET</span> age <span class="operator">=</span> age <span class="operator">+</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">WHERE</span> birthday <span class="operator">&lt;</span> <span class="string">&#x27;2005-01-01&#x27;</span>;</span><br></pre></td></tr></table></figure><p><strong>注意：SET 中写表达式没问题，WHERE 中尽量别对列做计算</strong></p><h3 id="3-UPDATE-子查询（常见）"><a href="#3-UPDATE-子查询（常见）" class="headerlink" title="3. UPDATE + 子查询（常见）"></a>3. UPDATE + 子查询（常见）</h3><h4 id="1-用查询结果更新"><a href="#1-用查询结果更新" class="headerlink" title="1. 用查询结果更新"></a>1. 用查询结果更新</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> users</span><br><span class="line"><span class="keyword">SET</span> val <span class="operator">=</span> <span class="number">2</span>	# 把val改成<span class="number">2</span></span><br><span class="line"><span class="keyword">WHERE</span> id <span class="keyword">IN</span> (	# 只改id在子查询结果里的行</span><br><span class="line">    <span class="keyword">SELECT</span> id <span class="keyword">FROM</span> t3	# 子查询：取t3表中的id</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h4 id="2-UPDATE-JOIN（非常常用）"><a href="#2-UPDATE-JOIN（非常常用）" class="headerlink" title="2. UPDATE JOIN（非常常用）"></a>2. UPDATE JOIN（非常常用）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">UPDATE</span> <span class="keyword">JOIN</span>：关联两张表，基于关联条件更新</span><br><span class="line"><span class="keyword">UPDATE</span> orders o  # 给orders表起别名o</span><br><span class="line"><span class="keyword">JOIN</span> users u <span class="keyword">ON</span> o.user_id <span class="operator">=</span> u.id  # 关联orders和users表（通过user_id匹配）</span><br><span class="line"><span class="keyword">SET</span> o.status <span class="operator">=</span> <span class="number">1</span>  # 把orders表的status改成<span class="number">1</span></span><br><span class="line"><span class="keyword">WHERE</span> u.vip <span class="operator">=</span> <span class="number">1</span>;  # 只改“关联到的用户是VIP（u.vip<span class="operator">=</span><span class="number">1</span>）”的订单</span><br><span class="line"># 作用：把所有VIP用户的订单，状态设为<span class="number">1</span></span><br></pre></td></tr></table></figure><h2 id="2-Delete（删除）"><a href="#2-Delete（删除）" class="headerlink" title="2. Delete（删除）"></a>2. Delete（删除）</h2><blockquote><ul><li><strong>DELETE</strong>：按条件删“行”，可回滚，可触发器，慢但安全。</li><li><strong>TRUNCATE</strong>：一刀 <strong>清空</strong> 整张表，<strong>不可回滚</strong>，极快，危险。</li></ul></blockquote><h3 id="1-DELETE-删除数据"><a href="#1-DELETE-删除数据" class="headerlink" title="1. DELETE 删除数据"></a>1. DELETE 删除数据</h3><h4 id="1-语法-1"><a href="#1-语法-1" class="headerlink" title="1. 语法"></a>1. 语法</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> 表名 <span class="keyword">WHERE</span> 条件;</span><br></pre></td></tr></table></figure><p><strong>注意：没有 WHERE &#x3D; 清空全表数据！</strong></p><h4 id="2-示例-1"><a href="#2-示例-1" class="headerlink" title="2. 示例"></a>2. 示例</h4><h5 id="1-按条件删除（常用）"><a href="#1-按条件删除（常用）" class="headerlink" title="1. 按条件删除（常用）"></a>1. 按条件删除（常用）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;	# 删除users表中所有id<span class="operator">=</span><span class="number">1</span>的行（如果id是主键，只会删<span class="number">1</span>行）</span><br></pre></td></tr></table></figure><h5 id="2-批量删除多行"><a href="#2-批量删除多行" class="headerlink" title="2. 批量删除多行"></a>2. 批量删除多行</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> t1 <span class="keyword">WHERE</span> age <span class="operator">=</span> <span class="number">18</span>; # 删除t1表中所有年龄等于<span class="number">18</span>的行</span><br></pre></td></tr></table></figure><h5 id="3-DELETE-LIMIT（MySQL-特有）"><a href="#3-DELETE-LIMIT（MySQL-特有）" class="headerlink" title="3. DELETE + LIMIT（MySQL 特有）"></a>3. DELETE + LIMIT（MySQL 特有）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> logs       # 操作logs表</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> created_at    # 按创建时间排序（默认升序，即最早的记录在前）</span><br><span class="line">LIMIT <span class="number">1000</span>;            # 只删除前<span class="number">1000</span>条</span><br></pre></td></tr></table></figure><p>用途：分批清理数据、防止一次删太多（锁表）。</p><h3 id="2-TRUNCATE-截断表（清空表数据）"><a href="#2-TRUNCATE-截断表（清空表数据）" class="headerlink" title="2. TRUNCATE 截断表（清空表数据）"></a>2. TRUNCATE 截断表（清空表数据）</h3><h4 id="1-语法-2"><a href="#1-语法-2" class="headerlink" title="1. 语法"></a>1. 语法</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> 表名;</span><br></pre></td></tr></table></figure><p><code>TRUNCATE</code> 用于想要 <strong>快速清空全表、不要数据（清空表数据，但不删除表）</strong> 的场景。</p><table><thead><tr><th>对比</th><th>TRUNCATE（截断表）</th><th>DELETE（删除）</th></tr></thead><tbody><tr><td>操作类型</td><td>DDL（数据定义语言）</td><td>DML（数据操作语言）</td></tr><tr><td>能否回滚</td><td>不支持（执行后无法恢复数据）</td><td>支持（事务中可回滚）</td></tr><tr><td>清空效率</td><td>极高（直接重置表，不记录单行操作）</td><td>低（逐行删除，记录日志）</td></tr><tr><td>自增主键</td><td>重置为初始值（如自增 id 回到 1）</td><td>保留原自增最大值（如 id 从 100 继续）</td></tr><tr><td>适用场景</td><td>彻底清空表（无需恢复、追求速度）</td><td>条件删除 &#x2F; 部分删除（需可控、可回滚）</td></tr></tbody></table><h4 id="2-示例-2"><a href="#2-示例-2" class="headerlink" title="2. 示例"></a>2. 示例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"># 创建t2表，id为自增主键，name为字符串字段</span><br><span class="line">mysql&gt; create table t2(</span><br><span class="line">    -&gt; id int auto_increment primary key,</span><br><span class="line">    -&gt; name varchar(20));</span><br><span class="line"></span><br><span class="line"># 插入3条数据，id自动从1开始递增</span><br><span class="line">mysql&gt; insert into t2(name) values(&#x27;张三&#x27;),(&#x27;李四&#x27;),(&quot;王五&quot;);</span><br><span class="line"></span><br><span class="line"># 查看t2表所有数据，id依次为1、2、3</span><br><span class="line">mysql&gt; select *from t2;</span><br><span class="line">+----+--------+</span><br><span class="line">| id | name   |</span><br><span class="line">+----+--------+</span><br><span class="line">|  1 | 张三   |</span><br><span class="line">|  2 | 李四   |</span><br><span class="line">|  3 | 王五   |</span><br><span class="line">+----+--------+</span><br><span class="line"></span><br><span class="line"># 截断t2表：清空所有数据，保留表结构，自增主键重置</span><br><span class="line">mysql&gt; truncate table t2;</span><br><span class="line"></span><br><span class="line"># 查看截断后的表，无数据</span><br><span class="line">mysql&gt; select *from t2;</span><br><span class="line">Empty set (0.00 sec)</span><br><span class="line"></span><br><span class="line"># 重新插入2条数据，自增id从1重新开始</span><br><span class="line">mysql&gt; insert into t2(name) values (&quot;赵六&quot;),(&quot;孙奇&quot;);</span><br><span class="line"></span><br><span class="line"># 查看重新插入后的数据，id为1、2</span><br><span class="line">mysql&gt; select *from t2;</span><br><span class="line">+----+--------+</span><br><span class="line">| id | name   |</span><br><span class="line">+----+--------+</span><br><span class="line">|  1 | 赵六   |</span><br><span class="line">|  2 | 孙奇   |</span><br><span class="line">+----+--------+</span><br></pre></td></tr></table></figure><h2 id="3-插入查询结果"><a href="#3-插入查询结果" class="headerlink" title="3. 插入查询结果"></a>3. 插入查询结果</h2><p><strong>插入查询结果用 <code>INSERT INTO ... SELECT ...</code>，意思是：把 SELECT 查出来的结果，直接插入到另一张表，效率高，常用于数据迁移和批量插入，但要求列数和类型严格匹配！而且 <code>INSERT SELECT</code> 是“一条原子操作”，中途出错、整条语句失败、不会插一半！</strong></p><h3 id="1-语法-3"><a href="#1-语法-3" class="headerlink" title="1. 语法"></a>1. 语法</h3><p>插入查询结果的基本用法模板：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT INTO</span> 目标表 (列<span class="number">1</span>, 列<span class="number">2</span>, ...)</span><br><span class="line"><span class="keyword">SELECT</span> 列<span class="number">1</span>, 列<span class="number">2</span>, ...</span><br><span class="line"><span class="keyword">FROM</span> 来源表</span><br><span class="line"><span class="keyword">WHERE</span> 条件;</span><br></pre></td></tr></table></figure><p><strong>插入查询结果表示 SELECT 查什么，INSERT 就插入什么。</strong></p><h3 id="2-示例-3"><a href="#2-示例-3" class="headerlink" title="2. 示例"></a>2. 示例</h3><h4 id="1-把一张表的数据复制到另一张表"><a href="#1-把一张表的数据复制到另一张表" class="headerlink" title="1. 把一张表的数据复制到另一张表"></a>1. 把一张表的数据复制到另一张表</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT INTO</span> x (id, name, age)</span><br><span class="line"><span class="keyword">SELECT</span> id, name, age</span><br><span class="line"><span class="keyword">FROM</span> y;</span><br></pre></td></tr></table></figure><p>把 x 表里的 id、name、age 的数据全部复制到 y 表，不过需要注意：两边列的 <strong>数量和类型要对得上</strong>、顺序按 INSERT 的列顺序来。</p><h4 id="2-按条件插入"><a href="#2-按条件插入" class="headerlink" title="2. 按条件插入"></a>2. 按条件插入</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT INTO</span> x (id, name)</span><br><span class="line"><span class="keyword">SELECT</span> id, name</span><br><span class="line"><span class="keyword">FROM</span> users</span><br><span class="line"><span class="keyword">WHERE</span> age <span class="operator">=</span> <span class="number">18</span>;</span><br></pre></td></tr></table></figure><p>把 age &#x3D; 18 的用户插入到 x 表中。</p><h4 id="3-插入“计算后的结果”"><a href="#3-插入“计算后的结果”" class="headerlink" title="3. 插入“计算后的结果”"></a>3. 插入“计算后的结果”</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT INTO</span> x (id, score)</span><br><span class="line"><span class="keyword">SELECT</span> id, age <span class="operator">*</span> <span class="number">10</span></span><br><span class="line"><span class="keyword">FROM</span> users;</span><br></pre></td></tr></table></figure><p>说明：SELECT 里可以是表达式，插入的是 <strong>计算结果</strong>。所以，这条 sql 语句的意思是：从 <code>users</code> 表中读取所有行的 <code>id</code>，并把 age×10 得到新值，把这些新值插入到 x 表中：<code>users.id</code> 对应 <code>x.id</code>，<code>age×10</code> 对应 <code>x.score</code>。</p><h4 id="4-从多表查询结果插入（JOIN、进阶）"><a href="#4-从多表查询结果插入（JOIN、进阶）" class="headerlink" title="4. 从多表查询结果插入（JOIN、进阶）"></a>4. 从多表查询结果插入（JOIN、进阶）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 关联查询<span class="operator">+</span>批量插入：从y表和users表关联查询数据，再插回y表</span><br><span class="line"><span class="keyword">INSERT INTO</span> y (id, name)  # 往y表的id、name字段插入数据</span><br><span class="line"><span class="keyword">SELECT</span> o.id, u.name       # 取y表（别名o）的id、users表（别名u）的name</span><br><span class="line"><span class="keyword">FROM</span> y o                  # 数据源<span class="number">1</span>：y表，起别名o</span><br><span class="line"><span class="keyword">JOIN</span> users u <span class="keyword">ON</span> o.user_id <span class="operator">=</span> u.id;  # 关联users表（别名u）：y.user_id <span class="operator">=</span> users.id</span><br></pre></td></tr></table></figure><h3 id="3-INSERT-SELECT-和普通-INSERT-的区别"><a href="#3-INSERT-SELECT-和普通-INSERT-的区别" class="headerlink" title="3. INSERT SELECT 和普通 INSERT 的区别"></a>3. INSERT SELECT 和普通 INSERT 的区别</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT INTO</span> x <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;test&#x27;</span>, <span class="number">20</span>);	# 手写值、一次一行（少量）</span><br><span class="line"><span class="keyword">INSERT INTO</span> y <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users;		# 来源是查询结果、可一次插 成千上万行、效率高</span><br></pre></td></tr></table></figure><h3 id="4-和主键-唯一键冲突怎么办？"><a href="#4-和主键-唯一键冲突怎么办？" class="headerlink" title="4. 和主键 &#x2F; 唯一键冲突怎么办？"></a>4. 和主键 &#x2F; 唯一键冲突怎么办？</h3><h4 id="1-冲突就失败（默认）"><a href="#1-冲突就失败（默认）" class="headerlink" title="1. 冲突就失败（默认）"></a>1. 冲突就失败（默认）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT INTO</span> x (id, name) <span class="keyword">SELECT</span> id, name <span class="keyword">FROM</span> users;	# 如果id已存在，直接报错，整条失败</span><br></pre></td></tr></table></figure><h4 id="2-忽略冲突行（不推荐滥用）"><a href="#2-忽略冲突行（不推荐滥用）" class="headerlink" title="2. 忽略冲突行（不推荐滥用）"></a>2. 忽略冲突行（不推荐滥用）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> IGNORE <span class="keyword">INTO</span> x (id, name) <span class="keyword">SELECT</span> id, name <span class="keyword">FROM</span> users;	# 冲突的行被跳过、不报错、容易悄悄丢数据</span><br></pre></td></tr></table></figure><h4 id="3-冲突就更新（常用）"><a href="#3-冲突就更新（常用）" class="headerlink" title="3. 冲突就更新（常用）"></a>3. 冲突就更新（常用）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 有就更新，没有就插入：</span><br><span class="line"><span class="keyword">INSERT INTO</span> x (id, name)</span><br><span class="line"><span class="keyword">SELECT</span> id, name <span class="keyword">FROM</span> users</span><br><span class="line"><span class="keyword">ON</span> DUPLICATE KEY <span class="keyword">UPDATE</span></span><br><span class="line">name <span class="operator">=</span> <span class="keyword">VALUES</span>(name);</span><br></pre></td></tr></table></figure><h2 id="4-聚合函数"><a href="#4-聚合函数" class="headerlink" title="4. 聚合函数"></a>4. 聚合函数</h2><blockquote><p>聚合函数可以把多行数据计算成一个结果，常与 GROUP BY 和 HAVING 配合使用，WHERE 负责聚合前过滤，HAVING 负责聚合后过滤。</p></blockquote><h3 id="1-常见聚合函数一览"><a href="#1-常见聚合函数一览" class="headerlink" title="1. 常见聚合函数一览"></a>1. 常见聚合函数一览</h3><table><thead><tr><th align="center">函数</th><th>作用</th><th>解释</th></tr></thead><tbody><tr><td align="center"><code>COUNT()</code></td><td>计数</td><td>有多少行</td></tr><tr><td align="center"><code>SUM()</code></td><td>求和</td><td>数字加起来</td></tr><tr><td align="center"><code>AVG()</code></td><td>平均值</td><td>求平均</td></tr><tr><td align="center"><code>MAX()</code></td><td>最大值</td><td>找最大的</td></tr><tr><td align="center"><code>MIN()</code></td><td>最小值</td><td>找最小的</td></tr></tbody></table><h4 id="1-COUNT（计数、常用）"><a href="#1-COUNT（计数、常用）" class="headerlink" title="1. COUNT（计数、常用）"></a>1. COUNT（计数、常用）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> users;	# 统计users表一共有多少行数据(<span class="operator">*</span>会统计<span class="keyword">NULL</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(列名) <span class="keyword">FROM</span> users;	# 不会统计<span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(email) <span class="keyword">FROM</span> users;		# 只统计email不为<span class="keyword">NULL</span>的行数</span><br></pre></td></tr></table></figure><h4 id="2-SUM（求和）"><a href="#2-SUM（求和）" class="headerlink" title="2. SUM（求和）"></a>2. SUM（求和）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(列名) <span class="keyword">FROM</span> users;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(id) <span class="keyword">FROM</span> users;	# 把users表中所有的id加和</span><br></pre></td></tr></table></figure><p><strong>注意：列必须是数字、NULL 会被自动忽略。</strong></p><h4 id="3-AVG（平均值）"><a href="#3-AVG（平均值）" class="headerlink" title="3. AVG（平均值）"></a>3. AVG（平均值）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(列名) <span class="keyword">FROM</span> users;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(age) <span class="keyword">FROM</span> users;		# 统计users表中所有年龄的平均值</span><br></pre></td></tr></table></figure><p><strong>注意：NULL 不参与计算、返回值可能是小数。</strong></p><h4 id="4-MAX-MIN（最大最小）"><a href="#4-MAX-MIN（最大最小）" class="headerlink" title="4. MAX &#x2F; MIN（最大最小）"></a>4. MAX &#x2F; MIN（最大最小）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(age), <span class="built_in">MIN</span>(age) <span class="keyword">FROM</span> users;	# 找出users表中最大和最小年龄</span><br></pre></td></tr></table></figure><h4 id="5-示例"><a href="#5-示例" class="headerlink" title="5. 示例"></a>5. 示例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"># 查看t1表所有数据</span><br><span class="line">mysql&gt; select *from t1;</span><br><span class="line">+-----+--------------+------+</span><br><span class="line">| id  | name         | age  |</span><br><span class="line">+-----+--------------+------+</span><br><span class="line">|   1 | 张三         |   20 |</span><br><span class="line">|   2 | 李四         |   20 |</span><br><span class="line">|   4 | 李四         |   25 |</span><br><span class="line">|   5 | 王五         |   18 |</span><br><span class="line">|   7 | 小明         |   18 |</span><br><span class="line">|  99 | 小红红       |   18 |</span><br><span class="line">| 100 | 我已修改     |   88 |</span><br><span class="line">| 101 | 李四         |  111 |</span><br><span class="line">| 102 | 李四         |  111 |</span><br><span class="line">+-----+--------------+------+</span><br><span class="line"></span><br><span class="line"># 统计t1表中id字段的非空行数（即表的总记录数）</span><br><span class="line">mysql&gt; select count(id) from t1;</span><br><span class="line">+-----------+</span><br><span class="line">| count(id) |</span><br><span class="line">+-----------+</span><br><span class="line">|         9 |  # 共9条记录</span><br><span class="line">+-----------+</span><br><span class="line"></span><br><span class="line"># 计算t1表中所有id字段值的总和</span><br><span class="line">mysql&gt; select sum(id) from t1;</span><br><span class="line">+---------+</span><br><span class="line">| sum(id) |</span><br><span class="line">+---------+</span><br><span class="line">|     421 |  # 1+2+4+5+7+99+100+101+102=421</span><br><span class="line">+---------+</span><br><span class="line"></span><br><span class="line"># 计算t1表中age字段的平均值（保留4位小数）</span><br><span class="line">mysql&gt; select avg(age) from t1;</span><br><span class="line">+----------+</span><br><span class="line">| avg(age) |</span><br><span class="line">+----------+</span><br><span class="line">|  47.6667 |  # (20+20+25+18+18+18+88+111+111)/9 ≈ 47.6667</span><br><span class="line">+----------+</span><br><span class="line"></span><br><span class="line"># 同时查询t1表中age字段的最大值和最小值</span><br><span class="line">mysql&gt; select max(age),min(age) from t1;</span><br><span class="line">+----------+----------+</span><br><span class="line">| max(age) | min(age) |</span><br><span class="line">+----------+----------+</span><br><span class="line">|      111 |       18 |  # age最大值111，最小值18</span><br><span class="line">+----------+----------+</span><br></pre></td></tr></table></figure><h3 id="2-聚合-WHERE（常见）"><a href="#2-聚合-WHERE（常见）" class="headerlink" title="2. 聚合 + WHERE（常见）"></a>2. 聚合 + WHERE（常见）</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) </span><br><span class="line"><span class="keyword">FROM</span> users</span><br><span class="line"><span class="keyword">WHERE</span> age <span class="operator">=</span> <span class="number">18</span>;</span><br></pre></td></tr></table></figure><h2 id="5-分组查询"><a href="#5-分组查询" class="headerlink" title="5. 分组查询"></a>5. 分组查询</h2><p><strong>分组查询就是把查询结果按某个字段分成一组一组的，然后每组算一次。</strong></p><h3 id="1-语法-4"><a href="#1-语法-4" class="headerlink" title="1. 语法"></a>1. 语法</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 分组列, 聚合函数</span><br><span class="line"><span class="keyword">FROM</span> 表</span><br><span class="line"><span class="keyword">WHERE</span> 条件</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> 分组列;</span><br></pre></td></tr></table></figure><p>执行顺序：WHERE（先筛选行）→ GROUP BY（再分组）→ 聚合函数（每组算一次）→ HAVING（对分组后的结果筛选）→ ORDER BY（排序） → LIMIT（分页）。</p><h3 id="2-示例-4"><a href="#2-示例-4" class="headerlink" title="2. 示例"></a>2. 示例</h3><h4 id="1-按某个字段分组统计数量"><a href="#1-按某个字段分组统计数量" class="headerlink" title="1. 按某个字段分组统计数量"></a>1. 按某个字段分组统计数量</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 按age字段分组，统计每个年龄的人数</span><br><span class="line"><span class="keyword">SELECT</span> age, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> cnt		# 查age值，用<span class="built_in">COUNT</span>(<span class="operator">*</span>)统计每组的行数，别名cnt</span><br><span class="line"><span class="keyword">FROM</span> users						# 查的是users表</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> age;					# 按age字段分组（相同age的行是一组）</span><br></pre></td></tr></table></figure><h4 id="2-分组-WHERE（常见）"><a href="#2-分组-WHERE（常见）" class="headerlink" title="2. 分组 + WHERE（常见）"></a>2. 分组 + WHERE（常见）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 先找age<span class="operator">=</span><span class="number">18</span>的用户，再按id分组统计</span><br><span class="line"><span class="keyword">SELECT</span> id, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> my_id	# 查id，统计每组行数，别名my_id</span><br><span class="line"><span class="keyword">FROM</span> users						# 查的是users表</span><br><span class="line"><span class="keyword">WHERE</span> age <span class="operator">=</span> <span class="number">18</span>					# 先找出age<span class="operator">=</span><span class="number">18</span>的行</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> id;					# 再按id分组</span><br></pre></td></tr></table></figure><h4 id="3-分组-多个聚合函数"><a href="#3-分组-多个聚合函数" class="headerlink" title="3. 分组 + 多个聚合函数"></a>3. 分组 + 多个聚合函数</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> class_id,  # 按班级分组，展示班级ID</span><br><span class="line">  <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> student_count,  # 统计每个班级的学生总数（别名student_count）</span><br><span class="line">  <span class="built_in">SUM</span>(age) <span class="keyword">AS</span> total_age,      # 计算每个班级学生的年龄总和（别名total_age）</span><br><span class="line">  <span class="built_in">MAX</span>(age) <span class="keyword">AS</span> max_age         # 找出每个班级学生的最大年龄（别名max_age）</span><br><span class="line"><span class="keyword">FROM</span> students  # 学生表</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> class_id;  # 按班级ID分组（同一班级的学生归为一组）</span><br></pre></td></tr></table></figure><hr><h3 id="3-GROUP-BY"><a href="#3-GROUP-BY" class="headerlink" title="3. GROUP BY"></a>3. GROUP BY</h3><blockquote><ul><li><strong>非聚合列</strong>：比如 <code>id</code>、<code>age</code>（是直接从表中取的字段，不是聚合计算的结果）。</li><li><strong>聚合列</strong>：比如 <code>COUNT(*)</code>（是对一组数据计算后的结果）。</li></ul></blockquote><p><strong>SELECT 里出现的非聚合列，必须出现在 GROUP BY 中：</strong> <code>SELECT</code> 中出现的 <strong>非聚合列</strong>（直接取的学生 &#x2F; 班级字段，如 <code>class_id</code>、<code>gender</code>），必须出现在 <code>GROUP BY</code> 里，只有 <strong>聚合列</strong>（COUNT&#x2F;SUM&#x2F;AVG 等计算结果），可以不出现在 <code>GROUP BY</code> 里。这句话可能不要好理解，说白了就是：<strong>只要 SELECT 里所有 “直接抄的字段”（非聚合列），在后面 GROUP BY 中出现就合法，不管聚合列有 1 个还是 10 个，都绝对安全，反之，哪怕只漏 1 个非聚合列，就会报错&#x2F;出脏数据。</strong></p><h4 id="1-错误示例"><a href="#1-错误示例" class="headerlink" title="1. 错误示例"></a>1. 错误示例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 错误写法：<span class="keyword">SELECT</span>里有class_id、gender（两个非聚合列），但<span class="keyword">GROUP</span> <span class="keyword">BY</span>只写了class_id</span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  class_id,  # 非聚合列<span class="number">1</span></span><br><span class="line">  gender,    # 非聚合列<span class="number">2</span>（未出现在<span class="keyword">GROUP</span> <span class="keyword">BY</span>）</span><br><span class="line">  <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> student_num  # 聚合列（统计人数）</span><br><span class="line"><span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> class_id;  # 仅按班级分组</span><br></pre></td></tr></table></figure><p>原因：同一个 class_id 可能有多条 gender，MySQL 不知道该选哪一个。</p><h4 id="2-正确使用"><a href="#2-正确使用" class="headerlink" title="2. 正确使用"></a>2. 正确使用</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># class_id是分组依据（非聚合列），出现在<span class="keyword">GROUP</span> <span class="keyword">BY</span>里；<span class="built_in">COUNT</span>(<span class="operator">*</span>)是对每个班级的学生数做聚合计算，不需要<span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line"><span class="keyword">SELECT</span> class_id,  # 非聚合列（出现在<span class="keyword">GROUP</span> <span class="keyword">BY</span>，作为分组依据）</span><br><span class="line">  <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> student_num  # 聚合列（无需在<span class="keyword">GROUP</span> <span class="keyword">BY</span>）</span><br><span class="line"><span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> class_id;  # 分组依据：班级ID</span><br></pre></td></tr></table></figure><p>或者：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># class_id和gender都是非聚合列，且都出现在<span class="keyword">GROUP</span> <span class="keyword">BY</span>里，MySQL会按班级<span class="operator">+</span>性别组合分组（比如<span class="number">1</span>班<span class="operator">+</span>男为一组）</span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  class_id,  # 非聚合列<span class="number">1</span>（加入<span class="keyword">GROUP</span> <span class="keyword">BY</span>）</span><br><span class="line">  gender,    # 非聚合列<span class="number">2</span>（加入<span class="keyword">GROUP</span> <span class="keyword">BY</span>）</span><br><span class="line">  <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> student_num  # 聚合列</span><br><span class="line"><span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> class_id, gender;  # 所有非聚合列都在<span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br></pre></td></tr></table></figure><h3 id="4-GROUP-BY-多列分组（实用）"><a href="#4-GROUP-BY-多列分组（实用）" class="headerlink" title="4. GROUP BY 多列分组（实用）"></a>4. GROUP BY 多列分组（实用）</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id, age, <span class="built_in">COUNT</span>(<span class="operator">*</span>)</span><br><span class="line"><span class="keyword">FROM</span> users</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> id, age;	# 先按id分再按年龄分</span><br></pre></td></tr></table></figure><h3 id="5-HAVING-——-分组后的-WHERE"><a href="#5-HAVING-——-分组后的-WHERE" class="headerlink" title="5. HAVING —— 分组后的 WHERE"></a>5. HAVING —— 分组后的 WHERE</h3><h4 id="1-为什么需要-HAVING？"><a href="#1-为什么需要-HAVING？" class="headerlink" title="1. 为什么需要 HAVING？"></a>1. 为什么需要 HAVING？</h4><p><code>HAVING</code> 是 <strong>对「分组后的结果」进行筛选</strong>（过滤掉不满足条件的分组），搭配 <code>GROUP BY</code> 使用。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> class_id,</span><br><span class="line">  <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> student_num</span><br><span class="line"><span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> age <span class="operator">&gt;=</span> <span class="number">18</span>  # 分组前：只保留年龄≥<span class="number">18</span>的学生</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> class_id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> class_id,</span><br><span class="line">  <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> student_num</span><br><span class="line"><span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> class_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">&gt;=</span> <span class="number">3</span>;  # 分组后：只保留学生数≥<span class="number">3</span>的班级</span><br></pre></td></tr></table></figure><h4 id="2-WHERE-vs-HAVING"><a href="#2-WHERE-vs-HAVING" class="headerlink" title="2. WHERE vs HAVING"></a>2. WHERE vs HAVING</h4><table><thead><tr><th>对比</th><th>WHERE</th><th>HAVING</th></tr></thead><tbody><tr><td>筛选时机</td><td>分组 <strong>之前</strong> 筛选行</td><td>分组 <strong>之后</strong> 筛选分组</td></tr><tr><td>作用对象</td><td>原始行（比如单个学生）</td><td>分组结果（比如整个班级）</td></tr><tr><td>是否依赖 GROUP BY</td><td>不需要（可单独用）</td><td>必须搭配 GROUP BY 使用</td></tr><tr><td>能否用聚合函数</td><td>不能（只能用原始字段，如 <code>age &lt; 18</code>）</td><td>能（可以用聚合函数，如 <code>COUNT(*) &gt; 2</code>）</td></tr></tbody></table><h4 id="3-示例"><a href="#3-示例" class="headerlink" title="3. 示例"></a>3. 示例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT class_id,</span><br><span class="line">  COUNT(*) AS student_num</span><br><span class="line">FROM student</span><br><span class="line">GROUP BY class_id          # 步骤1：按班级分组统计人数</span><br><span class="line">HAVING COUNT(*) &gt;= 2       # 步骤2：过滤出人数≥2的班级</span><br><span class="line">ORDER BY student_num DESC, class_id ASC;  # 步骤3：对过滤后的结果排序</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT class_id, gender,</span><br><span class="line">  COUNT(*) AS student_num</span><br><span class="line">FROM student</span><br><span class="line">GROUP BY class_id, gender  # 步骤1：按“班级+性别”分组统计</span><br><span class="line">HAVING COUNT(*) &gt;= 2       # 步骤2：过滤出人数≥2的分组</span><br><span class="line">ORDER BY student_num DESC, class_id ASC;  # 步骤3：对过滤后的结果排序</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/Profile%20picture.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/Profile%20picture.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">小米里的大麦</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://www.minbit.top/posts/39993.html">原创</a><a class="post-copyright-title"><span onclick='rm.copyPageUrl("https://www.minbit.top/posts/39993.html")'>08 表的增删改查下</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="/img/wechat.webp" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/wechat.webp" alt="微信"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay.webp" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/alipay.webp" alt="支付宝"></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display:none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://www.minbit.top/posts/39993.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=08 表的增删改查下&amp;url=https://www.minbit.top/posts/39993.html&amp;pic=https://image-kcm.pages.dev/v2/TISblXc.png?_r_=784b23fb-15a7-eb8f-33eb-0d96dfe181cb" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl(){var e=window.location.href,t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(t)}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">知识共享署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0)</a> 许可协议。转载请注明来自 <a href="https://www.minbit.top" target="_blank">小米里的大麦</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/MySQL/"><span class="tags-punctuation"><i class="anzhiyufont anzhiyu-icon-tag"></i></span>MySQL<span class="tagsPageCount">9</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://image-kcm.pages.dev/v2/gDpBkQU.png?_r_=ebdc8f73-2df6-eb02-56e4-2e58830a0423" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/38170.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/IAdmxAt.png?_r_=2efc2a28-f1f4-769a-5e7b-21833cf2c899" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Ubuntu 22.04 中安装 thefuck 与 tldr 工具</div></div></a></div><div class="next-post pull-right"><a href="/posts/22243.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/gDpBkQU.png?_r_=ebdc8f73-2df6-eb02-56e4-2e58830a0423" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">2025 年度总结</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size:1.5rem;margin-right:4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/9972.html" title="01 在 CentOS 7 中安装 MySQL"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/12THR4h.png?_r_=094b8ab7-c4c8-9929-53fd-59a23c70754c" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-10</div><div class="title">01 在 CentOS 7 中安装 MySQL</div></div></a></div><div><a href="/posts/19289.html" title="03 库的操作"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/IAdmxAt.png?_r_=c00edb5e-6d35-faed-8960-711ed15463a6" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-10-11</div><div class="title">03 库的操作</div></div></a></div><div><a href="/posts/42386.html" title="01 在 Ubuntu 22.04 上安装 MySQL"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/gDpBkQU.png?_r_=91cf5f5b-d364-5479-63b7-b2a517379fd8" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-05</div><div class="title">01 在 Ubuntu 22.04 上安装 MySQL</div></div></a></div><div><a href="/posts/41394.html" title="04 表的操作"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/gDpBkQU.png?_r_=67a9f1c0-b49f-3a47-643e-fb43419083ee" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-10-11</div><div class="title">04 表的操作</div></div></a></div><div><a href="/posts/6432.html" title="02 数据库基础"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/TISblXc.png?_r_=98974973-7627-1818-7b1a-cc3b5c2c5204" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-16</div><div class="title">02 数据库基础</div></div></a></div><div><a href="/posts/57353.html" title="05 数据类型"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/gDpBkQU.png?_r_=29680777-c495-35d3-81f5-65d5e081ab89" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-10-19</div><div class="title">05 数据类型</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left:4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/Profile%20picture.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"></div></div><div class="author-info__description">时间好像总会留下点什么,或许是一个人,或许是一个梦,或许……是一段有意义的经历~</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">小米里的大麦</h1><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/huangcancan-xbc" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content"><span>👋🏻 Hi，我是 <a target="_blank" href="https://huangcancan-xbc.github.io" rel="external nofollow noreferrer noopener" style="font-weight:700;font-size:1.1em;color:#5166f0">小米里的大麦</a>，欢迎来看我的博客鸭！</span><br><span>👉 建议优先查看置顶的 <a target="_blank" href="https://huangcancan-xbc.github.io/posts/17934.html" rel="external nofollow noreferrer noopener" style="font-weight:700;font-size:1.1em;color:#5166f0">网站说明</a>，如有问题欢迎评论区交流！</span><br><span>😫 页面异常？尝试<kbd>Ctrl</kbd>+<kbd>F5</kbd></span><br><span>📩 联系我：<a href="mailto:hc1960074081@qq.com" rel="external nofollow noreferrer"><b>给我发送邮件🚀</b></a></span></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A1%A8%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E4%B8%8B"><span class="toc-number">1.</span> <span class="toc-text">表的增删改查下</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-update%EF%BC%88%E4%BF%AE%E6%94%B9%EF%BC%89"><span class="toc-number">1.1.</span> <span class="toc-text">1. update（修改）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%AF%AD%E6%B3%95"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. 语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. 示例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%8C%89%E4%B8%BB%E9%94%AE%E6%9B%B4%E6%96%B0%EF%BC%88%E5%B8%B8%E7%94%A8%E3%80%81%E5%AE%89%E5%85%A8%EF%BC%89"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">1. 按主键更新（常用、安全）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%9B%B4%E6%96%B0%E5%8D%95%E4%B8%AA%E5%AD%97%E6%AE%B5"><span class="toc-number">1.1.2.2.</span> <span class="toc-text">2. 更新单个字段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%9D%A1%E4%BB%B6%E6%9B%B4%E6%96%B0%E5%A4%9A%E8%A1%8C"><span class="toc-number">1.1.2.3.</span> <span class="toc-text">3. 条件更新多行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E8%87%AA%E5%A2%9E-%E8%87%AA%E5%87%8F%E6%9B%B4%E6%96%B0%EF%BC%88%E9%AB%98%E9%A2%91%EF%BC%89"><span class="toc-number">1.1.2.4.</span> <span class="toc-text">4. 自增 &#x2F; 自减更新（高频）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-UPDATE-%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%88%E8%83%BD%E7%94%A8%E4%BD%86%E8%A6%81%E5%B0%8F%E5%BF%83%EF%BC%89"><span class="toc-number">1.1.2.5.</span> <span class="toc-text">5. UPDATE + 表达式（能用但要小心）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-UPDATE-%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%88%E5%B8%B8%E8%A7%81%EF%BC%89"><span class="toc-number">1.1.3.</span> <span class="toc-text">3. UPDATE + 子查询（常见）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%94%A8%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E6%9B%B4%E6%96%B0"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">1. 用查询结果更新</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-UPDATE-JOIN%EF%BC%88%E9%9D%9E%E5%B8%B8%E5%B8%B8%E7%94%A8%EF%BC%89"><span class="toc-number">1.1.3.2.</span> <span class="toc-text">2. UPDATE JOIN（非常常用）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Delete%EF%BC%88%E5%88%A0%E9%99%A4%EF%BC%89"><span class="toc-number">1.2.</span> <span class="toc-text">2. Delete（删除）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-DELETE-%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. DELETE 删除数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%AF%AD%E6%B3%95-1"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">1. 语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%A4%BA%E4%BE%8B-1"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">2. 示例</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%8C%89%E6%9D%A1%E4%BB%B6%E5%88%A0%E9%99%A4%EF%BC%88%E5%B8%B8%E7%94%A8%EF%BC%89"><span class="toc-number">1.2.1.2.1.</span> <span class="toc-text">1. 按条件删除（常用）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4%E5%A4%9A%E8%A1%8C"><span class="toc-number">1.2.1.2.2.</span> <span class="toc-text">2. 批量删除多行</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-DELETE-LIMIT%EF%BC%88MySQL-%E7%89%B9%E6%9C%89%EF%BC%89"><span class="toc-number">1.2.1.2.3.</span> <span class="toc-text">3. DELETE + LIMIT（MySQL 特有）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-TRUNCATE-%E6%88%AA%E6%96%AD%E8%A1%A8%EF%BC%88%E6%B8%85%E7%A9%BA%E8%A1%A8%E6%95%B0%E6%8D%AE%EF%BC%89"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. TRUNCATE 截断表（清空表数据）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%AF%AD%E6%B3%95-2"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">1. 语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%A4%BA%E4%BE%8B-2"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">2. 示例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%8F%92%E5%85%A5%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C"><span class="toc-number">1.3.</span> <span class="toc-text">3. 插入查询结果</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%AF%AD%E6%B3%95-3"><span class="toc-number">1.3.1.</span> <span class="toc-text">1. 语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%A4%BA%E4%BE%8B-3"><span class="toc-number">1.3.2.</span> <span class="toc-text">2. 示例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%8A%8A%E4%B8%80%E5%BC%A0%E8%A1%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E5%A4%8D%E5%88%B6%E5%88%B0%E5%8F%A6%E4%B8%80%E5%BC%A0%E8%A1%A8"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">1. 把一张表的数据复制到另一张表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%8C%89%E6%9D%A1%E4%BB%B6%E6%8F%92%E5%85%A5"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">2. 按条件插入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%8F%92%E5%85%A5%E2%80%9C%E8%AE%A1%E7%AE%97%E5%90%8E%E7%9A%84%E7%BB%93%E6%9E%9C%E2%80%9D"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">3. 插入“计算后的结果”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E4%BB%8E%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E6%8F%92%E5%85%A5%EF%BC%88JOIN%E3%80%81%E8%BF%9B%E9%98%B6%EF%BC%89"><span class="toc-number">1.3.2.4.</span> <span class="toc-text">4. 从多表查询结果插入（JOIN、进阶）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-INSERT-SELECT-%E5%92%8C%E6%99%AE%E9%80%9A-INSERT-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.3.3.</span> <span class="toc-text">3. INSERT SELECT 和普通 INSERT 的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%92%8C%E4%B8%BB%E9%94%AE-%E5%94%AF%E4%B8%80%E9%94%AE%E5%86%B2%E7%AA%81%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F"><span class="toc-number">1.3.4.</span> <span class="toc-text">4. 和主键 &#x2F; 唯一键冲突怎么办？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%86%B2%E7%AA%81%E5%B0%B1%E5%A4%B1%E8%B4%A5%EF%BC%88%E9%BB%98%E8%AE%A4%EF%BC%89"><span class="toc-number">1.3.4.1.</span> <span class="toc-text">1. 冲突就失败（默认）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%BF%BD%E7%95%A5%E5%86%B2%E7%AA%81%E8%A1%8C%EF%BC%88%E4%B8%8D%E6%8E%A8%E8%8D%90%E6%BB%A5%E7%94%A8%EF%BC%89"><span class="toc-number">1.3.4.2.</span> <span class="toc-text">2. 忽略冲突行（不推荐滥用）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%86%B2%E7%AA%81%E5%B0%B1%E6%9B%B4%E6%96%B0%EF%BC%88%E5%B8%B8%E7%94%A8%EF%BC%89"><span class="toc-number">1.3.4.3.</span> <span class="toc-text">3. 冲突就更新（常用）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-number">1.4.</span> <span class="toc-text">4. 聚合函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%B8%B8%E8%A7%81%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E4%B8%80%E8%A7%88"><span class="toc-number">1.4.1.</span> <span class="toc-text">1. 常见聚合函数一览</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-COUNT%EF%BC%88%E8%AE%A1%E6%95%B0%E3%80%81%E5%B8%B8%E7%94%A8%EF%BC%89"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">1. COUNT（计数、常用）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-SUM%EF%BC%88%E6%B1%82%E5%92%8C%EF%BC%89"><span class="toc-number">1.4.1.2.</span> <span class="toc-text">2. SUM（求和）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-AVG%EF%BC%88%E5%B9%B3%E5%9D%87%E5%80%BC%EF%BC%89"><span class="toc-number">1.4.1.3.</span> <span class="toc-text">3. AVG（平均值）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-MAX-MIN%EF%BC%88%E6%9C%80%E5%A4%A7%E6%9C%80%E5%B0%8F%EF%BC%89"><span class="toc-number">1.4.1.4.</span> <span class="toc-text">4. MAX &#x2F; MIN（最大最小）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.4.1.5.</span> <span class="toc-text">5. 示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%81%9A%E5%90%88-WHERE%EF%BC%88%E5%B8%B8%E8%A7%81%EF%BC%89"><span class="toc-number">1.4.2.</span> <span class="toc-text">2. 聚合 + WHERE（常见）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.5.</span> <span class="toc-text">5. 分组查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%AF%AD%E6%B3%95-4"><span class="toc-number">1.5.1.</span> <span class="toc-text">1. 语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%A4%BA%E4%BE%8B-4"><span class="toc-number">1.5.2.</span> <span class="toc-text">2. 示例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%8C%89%E6%9F%90%E4%B8%AA%E5%AD%97%E6%AE%B5%E5%88%86%E7%BB%84%E7%BB%9F%E8%AE%A1%E6%95%B0%E9%87%8F"><span class="toc-number">1.5.2.1.</span> <span class="toc-text">1. 按某个字段分组统计数量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%88%86%E7%BB%84-WHERE%EF%BC%88%E5%B8%B8%E8%A7%81%EF%BC%89"><span class="toc-number">1.5.2.2.</span> <span class="toc-text">2. 分组 + WHERE（常见）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%88%86%E7%BB%84-%E5%A4%9A%E4%B8%AA%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-number">1.5.2.3.</span> <span class="toc-text">3. 分组 + 多个聚合函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-GROUP-BY"><span class="toc-number">1.5.3.</span> <span class="toc-text">3. GROUP BY</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E9%94%99%E8%AF%AF%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.5.3.1.</span> <span class="toc-text">1. 错误示例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%AD%A3%E7%A1%AE%E4%BD%BF%E7%94%A8"><span class="toc-number">1.5.3.2.</span> <span class="toc-text">2. 正确使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-GROUP-BY-%E5%A4%9A%E5%88%97%E5%88%86%E7%BB%84%EF%BC%88%E5%AE%9E%E7%94%A8%EF%BC%89"><span class="toc-number">1.5.4.</span> <span class="toc-text">4. GROUP BY 多列分组（实用）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-HAVING-%E2%80%94%E2%80%94-%E5%88%86%E7%BB%84%E5%90%8E%E7%9A%84-WHERE"><span class="toc-number">1.5.5.</span> <span class="toc-text">5. HAVING —— 分组后的 WHERE</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81-HAVING%EF%BC%9F"><span class="toc-number">1.5.5.1.</span> <span class="toc-text">1. 为什么需要 HAVING？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-WHERE-vs-HAVING"><span class="toc-number">1.5.5.2.</span> <span class="toc-text">2. WHERE vs HAVING</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.5.5.3.</span> <span class="toc-text">3. 示例</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/22243.html" title="2025 年度总结"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/gDpBkQU.png?_r_=ebdc8f73-2df6-eb02-56e4-2e58830a0423" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="2025 年度总结"></a><div class="content"><a class="title" href="/posts/22243.html" title="2025 年度总结">2025 年度总结</a><time datetime="2025-12-31T16:00:00.000Z" title="发表于 2026-01-01 00:00:00">2026-01-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/39993.html" title="08 表的增删改查下"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/TISblXc.png?_r_=784b23fb-15a7-eb8f-33eb-0d96dfe181cb" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="08 表的增删改查下"></a><div class="content"><a class="title" href="/posts/39993.html" title="08 表的增删改查下">08 表的增删改查下</a><time datetime="2025-12-12T16:00:00.000Z" title="发表于 2025-12-13 00:00:00">2025-12-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/38170.html" title="Ubuntu 22.04 中安装 thefuck 与 tldr 工具"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/IAdmxAt.png?_r_=2efc2a28-f1f4-769a-5e7b-21833cf2c899" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Ubuntu 22.04 中安装 thefuck 与 tldr 工具"></a><div class="content"><a class="title" href="/posts/38170.html" title="Ubuntu 22.04 中安装 thefuck 与 tldr 工具">Ubuntu 22.04 中安装 thefuck 与 tldr 工具</a><time datetime="2025-11-22T04:00:00.000Z" title="发表于 2025-11-22 12:00:00">2025-11-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/31539.html" title="CodeX CLI 的使用备忘"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/gDpBkQU.png?_r_=19ad5a3e-ac75-3d2f-1d77-6c1b4b007131" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="CodeX CLI 的使用备忘"></a><div class="content"><a class="title" href="/posts/31539.html" title="CodeX CLI 的使用备忘">CodeX CLI 的使用备忘</a><time datetime="2025-11-19T04:00:00.000Z" title="发表于 2025-11-19 12:00:00">2025-11-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/41191.html" title="免费白嫖 ChatGPT Go 套餐"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image-kcm.pages.dev/v2/yPgfhRS.png?_r_=36336436-a4b8-d24d-99f7-94bfb59134b6" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="免费白嫖 ChatGPT Go 套餐"></a><div class="content"><a class="title" href="/posts/41191.html" title="免费白嫖 ChatGPT Go 套餐">免费白嫖 ChatGPT Go 套餐</a><time datetime="2025-11-04T16:00:00.000Z" title="发表于 2025-11-05 00:00:00">2025-11-05</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:hc1960074081@qq.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://weibo.com/u/7913790969" title="微博"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0,500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/Profile picture.png" size="50px"><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com/1918272544" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2025 - 2026 By <a class="footer-bar-link" href="/" title="小米里的大麦" target="_blank">小米里的大麦</a></div></div><div id="footer-type-tips"></div><div class="js-pjax"><script>function subtitleType(){fetch("https://v1.hitokoto.cn").then(t=>t.json()).then(t=>{{const e="出自 "+t.from,n=["《左传》载曰：“太上有立德，其次有立功，其次有立言，虽久不废，此之谓不朽。”","纸上得来终觉浅，绝知此事要躬行！","《答案在风中飘扬》（Blowing in The Wind）","梦想是不会发光的，发光的是追梦的你！","你太专注于未来，却没有意识到，今天正是你多年前祈求的模样，因为你眺望远方视而不见。"];n.unshift(t.hitokoto,e),window.typed=new Typed("#footer-type-tips",{strings:n,startDelay:300,typeSpeed:150,loop:!0,backSpeed:50})}})}"function"==typeof Typed?subtitleType():getScript("https://cdn.cbd.int/typed.js@2.1.0/dist/typed.umd.js").then(subtitleType)</script></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="GitHub主页">GitHub主页</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">93</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">23</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">9</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">社交</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/huangcancan-xbc" title="GitHub"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/lollipop.svg" alt="GitHub"><span class="back-menu-item-text">GitHub</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://space.bilibili.com/1918272544" title="哔哩哔哩"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/wink.svg" alt="哔哩哔哩"><span class="back-menu-item-text">哔哩哔哩</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://gitee.com/huang-cancan-xbc" title="Gitee"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/laugh.svg" alt="Gitee"><span class="back-menu-item-text">Gitee</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">博客</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.csdn.net/Huangcancan666?type=blog" title="CSDN"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/celebrate.svg" alt="CSDN"><span class="back-menu-item-text">CSDN</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://juejin.cn/user/3230789931118109" title="稀土掘金"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/kiss.svg" alt="稀土掘金"><span class="back-menu-item-text">稀土掘金</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">算法</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://leetcode.cn/u/nifty-faradayzqn" title="力扣"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/thinking-glass.svg" alt="力扣"><span class="back-menu-item-text">力扣</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/profile/517073385" title="牛客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/think.svg" alt="牛客"><span class="back-menu-item-text">牛客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.luogu.com.cn/user/1367427" title="洛谷"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/icons/funny.svg" alt="洛谷"><span class="back-menu-item-text">洛谷</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/charts/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i><span> 统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size:.9em"></i><span> 随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i><span> 外链</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size:.9em"></i><span> 留言板</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i><span> 关于本人</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AI/" style="font-size:.88rem">AI<sup>2</sup></a><a href="/tags/C/" style="font-size:.88rem">C++<sup>11</sup></a><a href="/tags/Git/" style="font-size:.88rem">Git<sup>3</sup></a><a href="/tags/IO/" style="font-size:.88rem">IO<sup>5</sup></a><a href="/tags/Linux/" style="font-size:.88rem">Linux<sup>59</sup></a><a href="/tags/MySQL/" style="font-size:.88rem">MySQL<sup>9</sup></a><a href="/tags/Redis/" style="font-size:.88rem">Redis<sup>2</sup></a><a href="/tags/STL/" style="font-size:.88rem">STL<sup>2</sup></a><a href="/tags/VS-Code/" style="font-size:.88rem">VS Code<sup>1</sup></a><a href="/tags/%E4%BF%A1%E5%8F%B7/" style="font-size:.88rem">信号<sup>3</sup></a><a href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" style="font-size:.88rem">内存管理<sup>1</sup></a><a href="/tags/%E5%8E%86%E7%A8%8B/" style="font-size:.88rem">历程<sup>2</sup></a><a href="/tags/%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4/" style="font-size:.88rem">地址空间<sup>6</sup></a><a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size:.88rem">工具<sup>4</sup></a><a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size:.88rem">数学<sup>1</sup></a><a href="/tags/%E6%A8%A1%E6%9D%BF/" style="font-size:.88rem">模板<sup>1</sup></a><a href="/tags/%E7%81%B5%E5%85%89%E8%8D%9F%E8%90%83/" style="font-size:.88rem">灵光荟萃<sup>3</sup></a><a href="/tags/%E7%AE%A1%E9%81%93/" style="font-size:.88rem">管道<sup>2</sup></a><a href="/tags/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/" style="font-size:.88rem">类与对象<sup>3</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size:.88rem">线程<sup>5</sup></a><a href="/tags/%E7%BD%91%E7%AB%99/" style="font-size:.88rem">网站<sup>3</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size:.88rem">网络<sup>11</sup></a><a href="/tags/%E8%BF%9B%E7%A8%8B/" style="font-size:.88rem">进程<sup>15</sup></a></div></div><hr></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="anzhiyu.scrollToDest(document.body.scrollHeight,500)"><i class="anzhiyufont anzhiyu-icon-arrow-down"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span> 数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size:1rem"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display:none"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@6.1.6/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@19.1.3/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>var HoldLog=console.log;console.log=function(){};let now1=new Date;queueMicrotask(()=>{const o=function(){HoldLog.apply(console,arguments)},n=new Date("01/01/2025 00:00:00");now1.setTime(now1.getTime()+250);const c=(now1-n)/1e3/60/60/24,e=["这里是 小米里的大麦","芝兰生于深谷，不以无人而不芳。","\n        \n       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗\n      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║\n      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║\n      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║\n      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝\n      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝\n        \n        ","已上线",Math.floor(c),"天","©2025 By 安知鱼 V1.7.1"],t=["NCC2-036","调用前置摄像头拍照成功，识别为【小笨蛋】.","Photo captured: ","🤪"];setTimeout(o.bind(console,`\n%c${e[0]} %c ${e[1]} %c ${e[2]} %c${e[3]}%c ${e[4]}%c ${e[5]}\n\n%c ${e[6]}\n`,"color:#425AEF","","color:#425AEF","color:#425AEF","","color:#425AEF","")),setTimeout(o.bind(console,`%c ${t[0]} %c ${t[1]} %c \n${t[2]} %c\n${t[3]}\n`,"color:white; background-color:#4fd953","","",'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%')),setTimeout(o.bind(console,"%c WELCOME %c 你好，小笨蛋.","color:white; background-color:#4f90d9","")),setTimeout(console.warn.bind(console,"%c ⚡ Powered by 安知鱼 %c 你正在访问 小米里的大麦 的博客.","color:white; background-color:#f0ad4e","")),setTimeout(o.bind(console,"%c W23-12 %c 你已打开控制台.","color:white; background-color:#4f90d9","")),setTimeout(console.warn.bind(console,"%c S013-782 %c 你现在正处于监控中.","color:white; background-color:#d9534f",""))})</script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(()=>{const t=()=>{"object"==typeof twikoo?setTimeout(o,0):getScript("https://cdn.cbd.int/twikoo@1.6.44/dist/twikoo.all.min.js").then(o)},o=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo.minbit.top/",path:window.location.pathname,region:"ap-shanghai",onCommentLoaded:()=>{anzhiyu.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null)),GLOBAL_CONFIG_SITE.isPost&&(()=>{const t=document.getElementById("twikoo-count");t&&twikoo.getCommentsCount({envId:"https://twikoo.minbit.top/",region:"ap-shanghai",urls:[window.location.pathname],includeReply:!1}).then(o=>{t.textContent=o[0].count}).catch(t=>{console.error(t)})})()};anzhiyu.loadComment(document.getElementById("twikoo-wrap"),t)})()</script><input type="hidden" name="page-type" id="page-type" value="post"><script async src="/js/anzhiyu/comment_barrage.js"></script></div><script>window.addEventListener("load",()=>{const e=e=>{let t="";if(e.length)for(let n=0;n<e.length;n++){t+="<div class='aside-list-item'>";{const a="data-lazy-src";t+=`<a href='${e[n].url}' class='thumbnail'><img ${a}='${e[n].avatar}' alt='${e[n].nick}'><div class='name'><span>${e[n].nick} </span></div></a>`}t+=`<div class='content'>\n        <a class='comment' href='${e[n].url}' title='${e[n].content}'>${e[n].content}</a>\n        <time datetime="${e[n].date}">${anzhiyu.diffDate(e[n].date,!0)}</time></div>\n        </div>`}else t+="没有评论";let n=document.querySelector("#card-newest-comments .aside-list");n&&(n.innerHTML=t),window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(n)},t=()=>{if(document.querySelector("#card-newest-comments .aside-list")){const t=saveToLocal.get("twikoo-newest-comments");t?e(JSON.parse(t)):(()=>{const t=()=>{twikoo.getRecentComments({envId:"https://twikoo.minbit.top/",region:"ap-shanghai",pageSize:6,includeReply:!0}).then((function(t){const n=t.map(e=>{return{content:(t=e.comment,""===t||(t=(t=(t=(t=t.replace(/<img.*?src="(.*?)"?[^\>]+>/gi,"[图片]")).replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,"[链接]")).replace(/<pre><code>.*?<\/pre>/gi,"[代码]")).replace(/<[^>]+>/g,"")).length>150&&(t=t.substring(0,150)+"..."),t),avatar:e.avatar,nick:e.nick,url:e.url+"#"+e.id,date:new Date(e.created).toISOString()};var t});saveToLocal.set("twikoo-newest-comments",JSON.stringify(n),10/1440),e(n)})).catch((function(e){document.querySelector("#card-newest-comments .aside-list").textContent="无法获取评论，请确认相关配置是否正确"}))};"object"==typeof twikoo?t():getScript("https://cdn.cbd.int/twikoo@1.6.44/dist/twikoo.all.min.js").then(t)})()}};t(),document.addEventListener("pjax:complete",t)})</script><script async data-pjax src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail="xiaomilidedamai@minbit.top"</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://cdn.cbd.int/qrcodejs@1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script src="https://cdn.bootcdn.net/ajax/libs/echarts/4.9.0-rc.1/echarts.min.js"></script><script src="/js/footer-animal.js" defer></script><script id="click-show-text" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="false" data-text="offer,暴富,健康,offer,喜乐,成功,offer,好运,自由,offer,坚持,上岸" data-fontsize="20px" data-random="true" async></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors=['meta[property="og:image"]','meta[property="og:title"]','meta[property="og:url"]','meta[property="og:type"]','meta[property="og:site_name"]','meta[property="og:description"]',"head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(anzhiyu.removeGlobalFnEvent("pjax"),anzhiyu.removeGlobalFnEvent("themeChange"),document.getElementById("rightside").classList.remove("rightside-show"),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()})),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script><script async data-pjax src="https://events.vercount.one/js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script><script>window.addEventListener("load",()=>{const t=()=>{if(!window.location.pathname.startsWith("/comments/"))return;const t=async()=>{const t=new EasyDanmaku({page:"/comments/",el:"#danmu-wrap",line:5,speed:20,hover:!0,loop:!1,colourful:!0,coefficient:1.38,runtime:10});try{let a=saveToLocal.get("twikoo-danmu");if(a)t.batchSend(a,!0);else{const n={method:"POST",body:JSON.stringify({event:"GET_RECENT_COMMENTS",includeReply:!1,pageSize:100}),headers:{"Content-Type":"application/json"}};a=[];const o=await fetch("https://twikoo.minbit.top/",n);if(o.ok){const{data:n}=await o.json();n.forEach(t=>{null==t.avatar&&(t.avatar="https://cravatar.cn/avatar/d615d5793929e8c7d70eab5f00f7f5f1?d=mp"),a.push({avatar:t.avatar,content:t.nick+"："+e(t.comment),url:t.url+"#"+t.id})}),t.batchSend(a,!0),saveToLocal.set("twikoo-danmu",a,.5)}function e(t){return t=(t=(t=(t=(t=t.replace(/<\/*br>|[\s\uFEFF\xA0]+/g,"")).replace(/<img.*?>/g,"[图片]")).replace(/<a.*?>.*?<\/a>/g,"[链接]")).replace(/<pre.*?>.*?<\/pre>/g,"[代码块]")).replace(/<.*?>/g,"")}}}catch(t){console.error("Error fetching data:",t)}document.getElementById("danmu-Btn")&&(document.getElementById("danmu-Btn").innerHTML="<button class=\"hide-Btn\" onclick=\"document.getElementById('danmu-wrap').classList.remove('hide-danmu')\">显示弹幕</button> <button class=\"hide-Btn\" onclick=\"document.getElementById('danmu-wrap').classList.add('hide-danmu')\">隐藏弹幕</button>")};(async()=>{if("function"==typeof EasyDanmaku)await t();else{await getScript("https://npm.onmicrosoft.cn/naokuo-blog@1.2.12/js/easy-Danmaku.js");"function"==typeof EasyDanmaku?await t():console.error("EasyDanmaku function not found even after loading the script.")}})()};t(),document.addEventListener("pjax:complete",t)})</script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>